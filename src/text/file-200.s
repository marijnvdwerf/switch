.include "macros.s"

.intel_syntax noprefix

.text


    .global _sub_46FA88
_sub_46FA88:
    mov bl, byte ptr [__50AF25]                          # 0046FA88
    mov edi, dword ptr [__E0C3E0]                        # 0046FA8E
    cmp bl, byte ptr [edi + 0xe]                         # 0046FA94
    jb .L46FB66                                          # 0046FA97
    cmp ax, 0x4000                                       # 0046FA9D
    jae .L46FB66                                         # 0046FAA1
    cmp cx, 0x4000                                       # 0046FAA7
    jae .L46FB66                                         # 0046FAAC
    push eax                                             # 0046FAB2
    push ecx                                             # 0046FAB3
    and eax, 0x3fe0                                      # 0046FAB4
    shr cx, 5                                            # 0046FAB9
    shl eax, 4                                           # 0046FABD
    msvc_or ax, cx                                       # 0046FAC0
    mov ax, word ptr [eax*2 + __1025A8C]                 # 0046FAC3
    cmp ax, -1                                           # 0046FACB
    je .L46FB64                                          # 0046FACF
.L46FAD5:
    movzx esi, ax                                        # 0046FAD5
    shl esi, 7                                           # 0046FAD8
    add_offset esi, _things                              # 0046FADB
    mov edi, dword ptr [__E0C3E0]                        # 0046FAE1
    mov dx, word ptr [edi + 6]                           # 0046FAE7
    mov cx, word ptr [edi + 4]                           # 0046FAEB
    add dx, word ptr [edi + 0xa]                         # 0046FAEF
    add cx, word ptr [edi + 8]                           # 0046FAF3
    cmp dx, word ptr [esi + 0x18]                        # 0046FAF7
    jle .L46FB56                                         # 0046FAFB
    mov dx, word ptr [esi + 0x1c]                        # 0046FAFD
    cmp dx, word ptr [edi + 6]                           # 0046FB01
    jle .L46FB56                                         # 0046FB05
    cmp cx, word ptr [esi + 0x16]                        # 0046FB07
    jle .L46FB56                                         # 0046FB0B
    mov cx, word ptr [esi + 0x1a]                        # 0046FB0D
    cmp cx, word ptr [edi + 4]                           # 0046FB11
    jle .L46FB56                                         # 0046FB15
    mov ebx, dword ptr [__E3F0B8]                        # 0046FB17
    mov dword ptr [__E3F0B4], esi                        # 0046FB1D
    movzx ebp, byte ptr [esi]                            # 0046FB23
    shl ebx, 4                                           # 0046FB26
    mov ax, word ptr [esi + 0xe]                         # 0046FB29
    add bl, byte ptr [esi + 0x1e]                        # 0046FB2D
    mov cx, word ptr [esi + 0x10]                        # 0046FB30
    and ebx, 0x3f                                        # 0046FB34
    mov word ptr [__E3F090], ax                          # 0046FB37
    mov byte ptr [__E3F0AC], 3                           # 0046FB3D
    mov word ptr [__E3F096], cx                          # 0046FB44
    mov dx, word ptr [esi + 0x12]                        # 0046FB4B
    call dword ptr [ebp*4 + __4FE058]                    # 0046FB4F
.L46FB56:
    mov ax, word ptr [esi + 2]                           # 0046FB56
    cmp ax, -1                                           # 0046FB5A
    jne .L46FAD5                                         # 0046FB5E
.L46FB64:
    pop ecx                                              # 0046FB64
    pop eax                                              # 0046FB65
.L46FB66:
    ret                                                  # 0046FB66

    .global _sub_46FB67
_sub_46FB67:
    mov bl, byte ptr [__50AF25]                          # 0046FB67
    mov edi, dword ptr [__E0C3E0]                        # 0046FB6D
    cmp bl, byte ptr [edi + 0xe]                         # 0046FB73
    jb .L46FC56                                          # 0046FB76
    cmp ax, 0x4000                                       # 0046FB7C
    jae .L46FC56                                         # 0046FB80
    cmp cx, 0x4000                                       # 0046FB86
    jae .L46FC56                                         # 0046FB8B
    push eax                                             # 0046FB91
    push ecx                                             # 0046FB92
    and eax, 0x3fe0                                      # 0046FB93
    shr cx, 5                                            # 0046FB98
    shl eax, 4                                           # 0046FB9C
    msvc_or ax, cx                                       # 0046FB9F
    mov ax, word ptr [eax*2 + __1025A8C]                 # 0046FBA2
    cmp ax, -1                                           # 0046FBAA
    je .L46FC54                                          # 0046FBAE
.L46FBB4:
    movzx esi, ax                                        # 0046FBB4
    shl esi, 7                                           # 0046FBB7
    add_offset esi, _things                              # 0046FBBA
    mov edi, dword ptr [__E0C3E0]                        # 0046FBC0
    mov dx, word ptr [edi + 6]                           # 0046FBC6
    mov cx, word ptr [edi + 4]                           # 0046FBCA
    add dx, word ptr [edi + 0xa]                         # 0046FBCE
    add cx, word ptr [edi + 8]                           # 0046FBD2
    cmp dx, word ptr [esi + 0x18]                        # 0046FBD6
    jle .L46FC46                                         # 0046FBDA
    mov dx, word ptr [esi + 0x1c]                        # 0046FBDC
    cmp dx, word ptr [edi + 6]                           # 0046FBE0
    jle .L46FC46                                         # 0046FBE4
    cmp cx, word ptr [esi + 0x16]                        # 0046FBE6
    jle .L46FC46                                         # 0046FBEA
    mov cx, word ptr [esi + 0x1a]                        # 0046FBEC
    cmp cx, word ptr [edi + 4]                           # 0046FBF0
    jle .L46FC46                                         # 0046FBF4
    cmp byte ptr [esi], 0                                # 0046FBF6
    jne .L46FC46                                         # 0046FBF9
    cmp byte ptr [esi + 0x42], 2                         # 0046FBFB
    je .L46FC07                                          # 0046FBFF
    cmp byte ptr [esi + 0x42], 3                         # 0046FC01
    jne .L46FC46                                         # 0046FC05
.L46FC07:
    mov ebx, dword ptr [__E3F0B8]                        # 0046FC07
    mov dword ptr [__E3F0B4], esi                        # 0046FC0D
    movzx ebp, byte ptr [esi]                            # 0046FC13
    shl ebx, 4                                           # 0046FC16
    mov ax, word ptr [esi + 0xe]                         # 0046FC19
    add bl, byte ptr [esi + 0x1e]                        # 0046FC1D
    mov cx, word ptr [esi + 0x10]                        # 0046FC20
    and ebx, 0x3f                                        # 0046FC24
    mov word ptr [__E3F090], ax                          # 0046FC27
    mov byte ptr [__E3F0AC], 3                           # 0046FC2D
    mov word ptr [__E3F096], cx                          # 0046FC34
    mov dx, word ptr [esi + 0x12]                        # 0046FC3B
    call dword ptr [ebp*4 + __4FE058]                    # 0046FC3F
.L46FC46:
    mov ax, word ptr [esi + 2]                           # 0046FC46
    cmp ax, -1                                           # 0046FC4A
    jne .L46FBB4                                         # 0046FC4E
.L46FC54:
    pop ecx                                              # 0046FC54
    pop eax                                              # 0046FC55
.L46FC56:
    ret                                                  # 0046FC56

    .global _sub_46FC57
_sub_46FC57:
    pushal                                               # 0046FC57
    mov_offset esi, _things                              # 0046FC58
    mov ebp, 0x4e20                                      # 0046FC5D
.L46FC62:
    cmp byte ptr [esi], 0xff                             # 0046FC62
    je .L46FC78                                          # 0046FC65
    mov ax, word ptr [esi + 0xe]                         # 0046FC67
    mov cx, word ptr [esi + 0x10]                        # 0046FC6B
    mov dx, word ptr [esi + 0x12]                        # 0046FC6F
    call _sub_46FC83                                     # 0046FC73
.L46FC78:
    add esi, 0x80                                        # 0046FC78
    dec ebp                                              # 0046FC7E
    jne .L46FC62                                         # 0046FC7F
    popal                                                # 0046FC81
    ret                                                  # 0046FC82

    .global _sub_46FC83
_sub_46FC83:
    push eax                                             # 0046FC83
    push ecx                                             # 0046FC84
    push edi                                             # 0046FC85
    cmp ax, 0x8000                                       # 0046FC86
    jne .L46FC93                                         # 0046FC8A
    mov eax, 0x40000                                     # 0046FC8C
    jmp .L46FCA2                                         # 0046FC91
.L46FC93:
    and eax, 0x3fe0                                      # 0046FC93
    shr cx, 5                                            # 0046FC98
    shl eax, 4                                           # 0046FC9C
    msvc_or ax, cx                                       # 0046FC9F
.L46FCA2:
    mov di, word ptr [esi + 0xe]                         # 0046FCA2
    cmp di, 0x8000                                       # 0046FCA6
    jne .L46FCB4                                         # 0046FCAB
    mov edi, 0x40000                                     # 0046FCAD
    jmp .L46FCC8                                         # 0046FCB2
.L46FCB4:
    mov cx, word ptr [esi + 0x10]                        # 0046FCB4
    and edi, 0x3fe0                                      # 0046FCB8
    shr cx, 5                                            # 0046FCBE
    shl edi, 4                                           # 0046FCC2
    msvc_or di, cx                                       # 0046FCC5
.L46FCC8:
    msvc_cmp eax, edi                                    # 0046FCC8
    je .L46FD2A                                          # 0046FCCA
    lea edi, [edi*2 + __1025A8C]                         # 0046FCCC
    mov dword ptr [__1025A88], 0                         # 0046FCD3
.L46FCDD:
    cmp word ptr [edi], 0x4e20                           # 0046FCDD
    jae _sub_46FDEE                                      # 0046FCE2
    movzx ecx, word ptr [edi]                            # 0046FCE8
    shl ecx, 7                                           # 0046FCEB
    add_offset ecx, _things                              # 0046FCEE
    msvc_cmp ecx, esi                                    # 0046FCF4
    je .L46FD13                                          # 0046FCF6
    inc dword ptr [__1025A88]                            # 0046FCF8
    cmp dword ptr [__1025A88], 0x4e20                    # 0046FCFE
    ja _sub_46FDEE                                       # 0046FD08
    lea edi, [ecx + 2]                                   # 0046FD0E
    jmp .L46FCDD                                         # 0046FD11
.L46FD13:
    mov cx, word ptr [esi + 2]                           # 0046FD13
    mov word ptr [edi], cx                               # 0046FD17
    mov cx, word ptr [esi + 0xa]                         # 0046FD1A
    xchg word ptr [eax*2 + __1025A8C], cx                # 0046FD1E
    mov word ptr [esi + 2], cx                           # 0046FD26
.L46FD2A:
    mov eax, dword ptr [esp + 8]                         # 0046FD2A
    mov ecx, dword ptr [esp + 4]                         # 0046FD2E
    cmp ax, 0x8000                                       # 0046FD32
    je _sub_46FDD8                                       # 0046FD36
    mov edi, dword ptr [__E3F0B8]                        # 0046FD3C
    jmp dword ptr [edi*4 + __4FE060]                     # 0046FD42

    .global _sub_46FD49
_sub_46FD49:
    msvc_mov di, ax                                      # 0046FD49
    neg ax                                               # 0046FD4C
    msvc_add ax, cx                                      # 0046FD4F
    msvc_add cx, di                                      # 0046FD52
    sar cx, 1                                            # 0046FD55
    msvc_sub cx, dx                                      # 0046FD58
    jmp _sub_46FD97                                      # 0046FD5B

    .global _sub_46FD5D
_sub_46FD5D:
    neg ax                                               # 0046FD5D
    msvc_mov di, ax                                      # 0046FD60
    msvc_sub ax, cx                                      # 0046FD63
    msvc_add cx, di                                      # 0046FD66
    sar cx, 1                                            # 0046FD69
    msvc_sub cx, dx                                      # 0046FD6C
    jmp _sub_46FD97                                      # 0046FD6F

    .global _sub_46FD71
_sub_46FD71:
    msvc_mov di, ax                                      # 0046FD71
    msvc_sub ax, cx                                      # 0046FD74
    neg cx                                               # 0046FD77
    msvc_sub cx, di                                      # 0046FD7A
    sar cx, 1                                            # 0046FD7D
    msvc_sub cx, dx                                      # 0046FD80
    jmp _sub_46FD97                                      # 0046FD83

    .global _sub_46FD85
_sub_46FD85:
    msvc_mov di, ax                                      # 0046FD85
    msvc_add ax, cx                                      # 0046FD88
    neg cx                                               # 0046FD8B
    msvc_add cx, di                                      # 0046FD8E
    sar cx, 1                                            # 0046FD91
    msvc_sub cx, dx                                      # 0046FD94

    .global _sub_46FD97
_sub_46FD97:
    movzx di, byte ptr [esi + 0x14]                      # 0046FD97
    msvc_sub ax, di                                      # 0046FD9C
    mov word ptr [esi + 0x16], ax                        # 0046FD9F
    msvc_add ax, di                                      # 0046FDA3
    msvc_add ax, di                                      # 0046FDA6
    mov word ptr [esi + 0x1a], ax                        # 0046FDA9
    movzx di, byte ptr [esi + 9]                         # 0046FDAD
    movzx ax, byte ptr [esi + 0x15]                      # 0046FDB2
    msvc_sub cx, di                                      # 0046FDB7
    mov word ptr [esi + 0x18], cx                        # 0046FDBA
    msvc_add cx, di                                      # 0046FDBE
    msvc_add cx, ax                                      # 0046FDC1
    mov word ptr [esi + 0x1c], cx                        # 0046FDC4
    pop edi                                              # 0046FDC8
    pop ecx                                              # 0046FDC9
    pop eax                                              # 0046FDCA
    mov word ptr [esi + 0xe], ax                         # 0046FDCB
    mov word ptr [esi + 0x10], cx                        # 0046FDCF
    mov word ptr [esi + 0x12], dx                        # 0046FDD3
    ret                                                  # 0046FDD7

    .global _sub_46FDD8
_sub_46FDD8:
    mov word ptr [esi + 0x16], 0x8000                    # 0046FDD8
    pop edi                                              # 0046FDDE
    pop ecx                                              # 0046FDDF
    pop eax                                              # 0046FDE0
    mov word ptr [esi + 0xe], ax                         # 0046FDE1
    mov word ptr [esi + 0x10], cx                        # 0046FDE5
    mov word ptr [esi + 0x12], dx                        # 0046FDE9
    ret                                                  # 0046FDED

    .global _sub_46FDEE
_sub_46FDEE:
    pushal                                               # 0046FDEE
    call _sub_46FF54                                     # 0046FDEF
    popal                                                # 0046FDF4
    pop edi                                              # 0046FDF5
    pop ecx                                              # 0046FDF6
    pop eax                                              # 0046FDF7
    msvc_jmp _sub_46FC83                                 # 0046FDF8

    .global _sub_46FDFD
_sub_46FDFD:
    mov_offset edi, _things                              # 0046FDFD
    mov ecx, 0x9c400                                     # 0046FE02
    msvc_xor eax, eax                                    # 0046FE07
    rep stosd dword ptr es:[edi], eax                    # 0046FE09
    msvc_xor ecx, ecx                                    # 0046FE0B
.L46FE0D:
    mov word ptr [ecx + _scenarioChunk3+38], 0xffff      # 0046FE0D
    mov word ptr [ecx + _scenarioChunk3+52], 0           # 0046FE16
    add ecx, 2                                           # 0046FE1F
    cmp ecx, 0xe                                         # 0046FE22
    jb .L46FE0D                                          # 0046FE25
    mov_offset esi, _things                              # 0046FE27
    msvc_xor cx, cx                                      # 0046FE2C
    mov edi, 0xffffffff                                  # 0046FE2F
.L46FE34:
    mov byte ptr [esi], 0xff                             # 0046FE34
    mov word ptr [esi + 0xa], cx                         # 0046FE37
    mov word ptr [esi + 4], 0xffff                       # 0046FE3B
    mov byte ptr [esi + 8], 0                            # 0046FE41
    cmp edi, -1                                          # 0046FE45
    je .L46FE58                                          # 0046FE48
    mov ax, word ptr [edi + 0xa]                         # 0046FE4A
    mov word ptr [esi + 6], ax                           # 0046FE4E
    mov word ptr [edi + 4], cx                           # 0046FE52
    jmp .L46FE65                                         # 0046FE56
.L46FE58:
    mov word ptr [esi + 6], 0xffff                       # 0046FE58
    mov word ptr [_scenarioChunk3+38], cx                # 0046FE5E
.L46FE65:
    msvc_mov edi, esi                                    # 0046FE65
    add esi, 0x80                                        # 0046FE67
    inc cx                                               # 0046FE6D
    cmp cx, 0x4d58                                       # 0046FE6F
    jb .L46FE34                                          # 0046FE74
    mov word ptr [_scenarioChunk3+52], 0x4d58            # 0046FE76
    mov edi, 0xffffffff                                  # 0046FE7F
.L46FE84:
    mov byte ptr [esi], 0xff                             # 0046FE84
    mov word ptr [esi + 0xa], cx                         # 0046FE87
    mov word ptr [esi + 4], 0xffff                       # 0046FE8B
    mov byte ptr [esi + 8], 2                            # 0046FE91
    cmp edi, -1                                          # 0046FE95
    je .L46FEA8                                          # 0046FE98
    mov ax, word ptr [edi + 0xa]                         # 0046FE9A
    mov word ptr [esi + 6], ax                           # 0046FE9E
    mov word ptr [edi + 4], cx                           # 0046FEA2
    jmp .L46FEB5                                         # 0046FEA6
.L46FEA8:
    mov word ptr [esi + 6], 0xffff                       # 0046FEA8
    mov word ptr [_scenarioChunk3+40], cx                # 0046FEAE
.L46FEB5:
    msvc_mov edi, esi                                    # 0046FEB5
    add esi, 0x80                                        # 0046FEB7
    inc cx                                               # 0046FEBD
    cmp cx, 0x4e20                                       # 0046FEBF
    jb .L46FE84                                          # 0046FEC4
    mov word ptr [_scenarioChunk3+54], 0xc8              # 0046FEC6
    call _sub_46FF54                                     # 0046FECF
    ret                                                  # 0046FED4

    .global _sub_46FED5
_sub_46FED5:
    mov si, word ptr [_scenarioChunk3+38]                # 0046FED5
.L46FEDC:
    cmp si, -1                                           # 0046FEDC
    je .L46FF14                                          # 0046FEE0
    movzx esi, si                                        # 0046FEE2
    shl esi, 7                                           # 0046FEE5
    add_offset esi, _things                              # 0046FEE8
    mov ebx, dword ptr [esi + 4]                         # 0046FEEE
    mov dx, word ptr [esi + 0xa]                         # 0046FEF1
    msvc_mov edi, esi                                    # 0046FEF5
    mov ecx, 0x20                                        # 0046FEF7
    msvc_xor eax, eax                                    # 0046FEFC
    rep stosd dword ptr es:[edi], eax                    # 0046FEFE
    mov byte ptr [esi], 0xff                             # 0046FF00
    mov dword ptr [esi + 4], ebx                         # 0046FF03
    mov byte ptr [esi + 8], 0                            # 0046FF06
    mov word ptr [esi + 0xa], dx                         # 0046FF0A
    mov si, word ptr [esi + 4]                           # 0046FF0E
    jmp .L46FEDC                                         # 0046FF12
.L46FF14:
    mov si, word ptr [_scenarioChunk3+40]                # 0046FF14
.L46FF1B:
    cmp si, -1                                           # 0046FF1B
    je .L46FF53                                          # 0046FF1F
    movzx esi, si                                        # 0046FF21
    shl esi, 7                                           # 0046FF24
    add_offset esi, _things                              # 0046FF27
    mov ebx, dword ptr [esi + 4]                         # 0046FF2D
    mov dx, word ptr [esi + 0xa]                         # 0046FF30
    msvc_mov edi, esi                                    # 0046FF34
    mov ecx, 0x20                                        # 0046FF36
    msvc_xor eax, eax                                    # 0046FF3B
    rep stosd dword ptr es:[edi], eax                    # 0046FF3D
    mov byte ptr [esi], 0xff                             # 0046FF3F
    mov dword ptr [esi + 4], ebx                         # 0046FF42
    mov byte ptr [esi + 8], 2                            # 0046FF45
    mov word ptr [esi + 0xa], dx                         # 0046FF49
    mov si, word ptr [esi + 4]                           # 0046FF4D
    jmp .L46FF1B                                         # 0046FF51
.L46FF53:
    ret                                                  # 0046FF53

    .global _sub_46FF54
_sub_46FF54:
    mov_offset edi, __1025A8C                            # 0046FF54
    mov ecx, 0x40001                                     # 0046FF59
    mov ax, 0xffff                                       # 0046FF5E
    rep stosw word ptr es:[edi], ax                      # 0046FF62
    mov_offset edi, __10A5A8E                            # 0046FF65
    mov ecx, 0x40001                                     # 0046FF6A
    mov ax, 0xffff                                       # 0046FF6F
    rep stosw word ptr es:[edi], ax                      # 0046FF73
    call _sub_46FFCA                                     # 0046FF76
    mov_offset esi, _things                              # 0046FF7B
    mov ebp, 0x4e20                                      # 0046FF80
.L46FF85:
    cmp byte ptr [esi], 0xff                             # 0046FF85
    je .L46FFC0                                          # 0046FF88
    mov di, word ptr [esi + 0xe]                         # 0046FF8A
    cmp di, 0x8000                                       # 0046FF8E
    jne .L46FF9C                                         # 0046FF93
    mov edi, 0x40000                                     # 0046FF95
    jmp .L46FFB0                                         # 0046FF9A
.L46FF9C:
    mov cx, word ptr [esi + 0x10]                        # 0046FF9C
    shr cx, 5                                            # 0046FFA0
    and edi, 0x3fe0                                      # 0046FFA4
    shl edi, 4                                           # 0046FFAA
    msvc_or di, cx                                       # 0046FFAD
.L46FFB0:
    mov ax, word ptr [esi + 0xa]                         # 0046FFB0
    xchg word ptr [edi*2 + __1025A8C], ax                # 0046FFB4
    mov word ptr [esi + 2], ax                           # 0046FFBC
.L46FFC0:
    add esi, 0x80                                        # 0046FFC0
    dec ebp                                              # 0046FFC6
    jne .L46FF85                                         # 0046FFC7
    ret                                                  # 0046FFC9

    .global _sub_46FFCA
_sub_46FFCA:
    mov dword ptr [__10A5A8E+271022], 0x2a0015           # 0046FFCA
    mov dword ptr [__10A5A8E+271026], 0x210026           # 0046FFD4
    mov dword ptr [__10A5A8E+271030], 0x5c2001f          # 0046FFDE
    mov dword ptr [__10A5A8E+271034], 0xffff0019         # 0046FFE8
    mov dword ptr [__10A5A8E+271038], 0xffffffff         # 0046FFF2
    mov dword ptr [__10A5A8E+271042], 0x1affff           # 0046FFFC
    mov dword ptr [__10A5A8E+271046], 0xffffffff         # 00470006
    mov dword ptr [__10A5A8E+271050], 0xffff001b         # 00470010
    mov dword ptr [__10A5A8E+271054], 0x64700a3          # 0047001A
    mov_dword_ptr __10A5A8E+271058, __g1Data+3137629     # 00470024
    mov_dword_ptr __10A5A8E+271062, __g1Data+3857563     # 0047002E
    ret                                                  # 00470038

    .global _sub_470039
_sub_470039:
    push ecx                                             # 00470039
    cmp word ptr [_scenarioChunk3+52], 0                 # 0047003A
    jle .L4700A1                                         # 00470042
    movzx esi, word ptr [_scenarioChunk3+38]             # 00470044
    shl esi, 7                                           # 0047004B
    add_offset esi, _things                              # 0047004E
    mov ecx, 0xc                                         # 00470054
    call _sub_47019F                                     # 00470059
    mov word ptr [esi + 0xe], 0x8000                     # 0047005E
    mov word ptr [esi + 0x10], 0x8000                    # 00470064
    mov word ptr [esi + 0x12], 0                         # 0047006A
    mov cx, word ptr [esi + 0xa]                         # 00470070
    xchg word ptr [__1025A8C+524288], cx                 # 00470074
    mov word ptr [esi + 2], cx                           # 0047007B
    mov word ptr [esi + 0x22], 1                         # 0047007F
    mov byte ptr [esi + 0x14], 0x10                      # 00470085
    mov byte ptr [esi + 9], 0x14                         # 00470089
    mov byte ptr [esi + 0x15], 8                         # 0047008D
    mov word ptr [esi + 0xc], 0                          # 00470091
    mov word ptr [esi + 0x16], 0x8000                    # 00470097
    pop ecx                                              # 0047009D
    msvc_or esi, esi                                     # 0047009E
    ret                                                  # 004700A0
.L4700A1:
    msvc_xor esi, esi                                    # 004700A1
    pop ecx                                              # 004700A3
    ret                                                  # 004700A4

    .global _sub_4700A5
_sub_4700A5:
    push ecx                                             # 004700A5
    cmp word ptr [_scenarioChunk3+60], 0xfa0             # 004700A6
    jae .L470118                                         # 004700AF
    cmp word ptr [_scenarioChunk3+52], 0                 # 004700B1
    jle .L470118                                         # 004700B9
    movzx esi, word ptr [_scenarioChunk3+38]             # 004700BB
    shl esi, 7                                           # 004700C2
    add_offset esi, _things                              # 004700C5
    mov ecx, 8                                           # 004700CB
    call _sub_47019F                                     # 004700D0
    mov word ptr [esi + 0xe], 0x8000                     # 004700D5
    mov word ptr [esi + 0x10], 0x8000                    # 004700DB
    mov word ptr [esi + 0x12], 0                         # 004700E1
    mov cx, word ptr [esi + 0xa]                         # 004700E7
    xchg word ptr [__1025A8C+524288], cx                 # 004700EB
    mov word ptr [esi + 2], cx                           # 004700F2
    mov word ptr [esi + 0x22], 1                         # 004700F6
    mov byte ptr [esi + 0x14], 0x10                      # 004700FC
    mov byte ptr [esi + 9], 0x14                         # 00470100
    mov byte ptr [esi + 0x15], 8                         # 00470104
    mov word ptr [esi + 0xc], 0                          # 00470108
    mov word ptr [esi + 0x16], 0x8000                    # 0047010E
    pop ecx                                              # 00470114
    msvc_or esi, esi                                     # 00470115
    ret                                                  # 00470117
.L470118:
    msvc_xor esi, esi                                    # 00470118
    pop ecx                                              # 0047011A
    ret                                                  # 0047011B

    .global _sub_47011C
_sub_47011C:
    push ecx                                             # 0047011C
    cmp word ptr [_scenarioChunk3+54], 0                 # 0047011D
    jle .L470184                                         # 00470125
    movzx esi, word ptr [_scenarioChunk3+40]             # 00470127
    shl esi, 7                                           # 0047012E
    add_offset esi, _things                              # 00470131
    mov ecx, 8                                           # 00470137
    call _sub_47019F                                     # 0047013C
    mov word ptr [esi + 0xe], 0x8000                     # 00470141
    mov word ptr [esi + 0x10], 0x8000                    # 00470147
    mov word ptr [esi + 0x12], 0                         # 0047014D
    mov cx, word ptr [esi + 0xa]                         # 00470153
    xchg word ptr [__1025A8C+524288], cx                 # 00470157
    mov word ptr [esi + 2], cx                           # 0047015E
    mov word ptr [esi + 0x22], 1                         # 00470162
    mov byte ptr [esi + 0x14], 0x10                      # 00470168
    mov byte ptr [esi + 9], 0x14                         # 0047016C
    mov byte ptr [esi + 0x15], 8                         # 00470170
    mov word ptr [esi + 0xc], 0                          # 00470174
    mov word ptr [esi + 0x16], 0x8000                    # 0047017A
    pop ecx                                              # 00470180
    msvc_or esi, esi                                     # 00470181
    ret                                                  # 00470183
.L470184:
    msvc_xor esi, esi                                    # 00470184
    pop ecx                                              # 00470186
    ret                                                  # 00470187

    .global _sub_470188
_sub_470188:
    cmp ax, word ptr [_scenarioChunk3+52]                # 00470188
    jg .L470194                                          # 0047018F
    msvc_and eax, eax                                    # 00470191
    ret                                                  # 00470193
.L470194:
    mov word ptr [__9C68E6], 0xab                        # 00470194
    stc                                                  # 0047019D
    ret                                                  # 0047019E

    .global _sub_47019F
_sub_47019F:
    cmp cl, byte ptr [esi + 8]                           # 0047019F
    je .L470231                                          # 004701A2
    push eax                                             # 004701A8
    push ebx                                             # 004701A9
    push edx                                             # 004701AA
    push edi                                             # 004701AB
    movzx ebx, byte ptr [esi + 8]                        # 004701AC
    mov ax, word ptr [esi + 4]                           # 004701B0
    mov dx, word ptr [esi + 6]                           # 004701B4
    cmp dx, -1                                           # 004701B8
    je .L4701D0                                          # 004701BC
    movzx edi, dx                                        # 004701BE
    shl edi, 7                                           # 004701C1
    add_offset edi, _things                              # 004701C4
    mov word ptr [edi + 4], ax                           # 004701CA
    jmp .L4701D7                                         # 004701CE
.L4701D0:
    mov word ptr [ebx + _scenarioChunk3+38], ax          # 004701D0
.L4701D7:
    cmp ax, -1                                           # 004701D7
    je .L4701ED                                          # 004701DB
    movzx edi, ax                                        # 004701DD
    shl edi, 7                                           # 004701E0
    add_offset edi, _things                              # 004701E3
    mov word ptr [edi + 6], dx                           # 004701E9
.L4701ED:
    mov word ptr [esi + 6], 0xffff                       # 004701ED
    mov byte ptr [esi + 8], cl                           # 004701F3
    mov ax, word ptr [esi + 0xa]                         # 004701F6
    xchg word ptr [ecx + _scenarioChunk3+38], ax         # 004701FA
    mov word ptr [esi + 4], ax                           # 00470201
    cmp ax, -1                                           # 00470205
    je .L47021F                                          # 00470209
    movzx edi, ax                                        # 0047020B
    shl edi, 7                                           # 0047020E
    add_offset edi, _things                              # 00470211
    mov ax, word ptr [esi + 0xa]                         # 00470217
    mov word ptr [edi + 6], ax                           # 0047021B
.L47021F:
    dec word ptr [ebx + _scenarioChunk3+52]              # 0047021F
    inc word ptr [ecx + _scenarioChunk3+52]              # 00470226
    pop edi                                              # 0047022D
    pop edx                                              # 0047022E
    pop ebx                                              # 0047022F
    pop eax                                              # 00470230
.L470231:
    ret                                                  # 00470231
.L470232:
    movzx eax, word ptr [_scenarioChunk3+52]             # 00470232
    sub ax, 0xfa0                                        # 00470239
    add ax, word ptr [_scenarioChunk3+60]                # 0047023D
    jns .L470249                                         # 00470244
    msvc_xor ax, ax                                      # 00470246
.L470249:
    ret                                                  # 00470249

    .global _sub_47024A
_sub_47024A:
    push ecx                                             # 0047024A
    mov ecx, 0                                           # 0047024B
    cmp word ptr [esi + 0xa], 0x4d58                     # 00470250
    jb .L47025D                                          # 00470256
    mov ecx, 2                                           # 00470258
.L47025D:
    call _sub_47019F                                     # 0047025D
    pop ecx                                              # 00470262
    push eax                                             # 00470263
    mov ax, word ptr [esi + 0x22]                        # 00470264
    call _sub_4965A6                                     # 00470268
    pop eax                                              # 0047026D
    mov byte ptr [esi], 0xff                             # 0047026E
    push ecx                                             # 00470271
    push edi                                             # 00470272
    mov di, word ptr [esi + 0xe]                         # 00470273
    cmp di, 0x8000                                       # 00470277
    jne .L470285                                         # 0047027C
    mov edi, 0x40000                                     # 0047027E
    jmp .L470299                                         # 00470283
.L470285:
    mov cx, word ptr [esi + 0x10]                        # 00470285
    and edi, 0x3fe0                                      # 00470289
    shr cx, 5                                            # 0047028F
    shl edi, 4                                           # 00470293
    msvc_or di, cx                                       # 00470296
.L470299:
    lea edi, [edi*2 + __1025A8C]                         # 00470299
    mov dword ptr [__1025A88], 0                         # 004702A0
.L4702AA:
    cmp word ptr [edi], 0x4e20                           # 004702AA
    jae .L4702E2                                         # 004702AF
    movzx ecx, word ptr [edi]                            # 004702B1
    shl ecx, 7                                           # 004702B4
    add_offset ecx, _things                              # 004702B7
    msvc_cmp ecx, esi                                    # 004702BD
    je .L4702D8                                          # 004702BF
    inc dword ptr [__1025A88]                            # 004702C1
    cmp dword ptr [__1025A88], 0x4e20                    # 004702C7
    ja .L4702E2                                          # 004702D1
    lea edi, [ecx + 2]                                   # 004702D3
    jmp .L4702AA                                         # 004702D6
.L4702D8:
    mov cx, word ptr [esi + 2]                           # 004702D8
    mov word ptr [edi], cx                               # 004702DC
    pop edi                                              # 004702DF
    pop ecx                                              # 004702E0
    ret                                                  # 004702E1
.L4702E2:
    pushal                                               # 004702E2
    call _sub_46FF54                                     # 004702E3
    popal                                                # 004702E8
    pop edi                                              # 004702E9
    pop ecx                                              # 004702EA
    ret                                                  # 004702EB

    .global _sub_4702EC
_sub_4702EC:
    mov dword ptr [_scenarioChunk3+416], 0               # 004702EC
    ret                                                  # 004702F6

    .global _sub_4702F7
_sub_4702F7:
    mov esi, dword ptr [_scenarioChunk3+416]             # 004702F7
    mov ecx, 0x3e800                                     # 004702FD
    msvc_sub ecx, esi                                    # 00470302
    je .L470311                                          # 00470304
.L470306:
    mov byte ptr [esi + __987C5C], 0                     # 00470306
    inc esi                                              # 0047030D
    dec ecx                                              # 0047030E
    jne .L470306                                         # 0047030F
.L470311:
    ret                                                  # 00470311

    .global _sub_470312
_sub_470312:
    mov eax, dword ptr [_scenarioChunk3+416]             # 00470312
    mov byte ptr [eax + __987C5C], 0                     # 00470317
    inc dword ptr [_scenarioChunk3+416]                  # 0047031E
    mov dword ptr [esi + 0x46], eax                      # 00470324
    mov word ptr [esi + 0x4a], 0                         # 00470327
    mov word ptr [esi + 0x4c], 1                         # 0047032D
    ret                                                  # 00470333

    .global _sub_470334
_sub_470334:
    push ebx                                             # 00470334
    push ecx                                             # 00470335
    push edi                                             # 00470336
    mov edi, dword ptr [esi + 0x46]                      # 00470337
    movzx ebx, word ptr [esi + 0x4c]                     # 0047033A
    neg ebx                                              # 0047033E
    call _sub_470795                                     # 00470340
    neg ebx                                              # 00470345
    mov ecx, dword ptr [_scenarioChunk3+416]             # 00470347
    msvc_sub ecx, edi                                    # 0047034D
    msvc_sub ecx, ebx                                    # 0047034F
    je .L470364                                          # 00470351
.L470353:
    mov al, byte ptr [ebx + edi + __987C5C]              # 00470353
    mov byte ptr [edi + __987C5C], al                    # 0047035A
    inc edi                                              # 00470360
    dec ecx                                              # 00470361
    jne .L470353                                         # 00470362
.L470364:
    sub dword ptr [_scenarioChunk3+416], ebx             # 00470364
    pop edi                                              # 0047036A
    pop ecx                                              # 0047036B
    pop ebx                                              # 0047036C
    ret                                                  # 0047036D

    .global _sub_47036E
_sub_47036E:
    mov byte ptr [__9C68EA], 4                           # 0047036E
    movzx esi, di                                        # 00470375
    shl esi, 7                                           # 00470378
    add_offset esi, _things                              # 0047037B
    mov di, word ptr [esi + 0xe]                         # 00470381
    mov word ptr [__9C68E0], di                          # 00470385
    mov di, word ptr [esi + 0x10]                        # 0047038C
    mov word ptr [__9C68E2], di                          # 00470390
    mov di, word ptr [esi + 0x12]                        # 00470397
    mov word ptr [__9C68E4], di                          # 0047039B
    push ebx                                             # 004703A2
    msvc_mov bl, al                                      # 004703A3
    and ebx, 7                                           # 004703A5
    test byte ptr [ebx + __4FE088], 8                    # 004703A8
    je .L4703D5                                          # 004703AF
    push ecx                                             # 004703B1
    msvc_mov ch, al                                      # 004703B2
    msvc_mov cl, ah                                      # 004703B4
    shr ch, 6                                            # 004703B6
    and ecx, 0x3ff                                       # 004703B9
    imul ecx, ecx, 0x3d2                                 # 004703BF
    mov cl, byte ptr [ecx + _stations+40]                # 004703C5
    cmp cl, byte ptr [esi + 0x21]                        # 004703CB
    pop ecx                                              # 004703CE
    jne .L47052B                                         # 004703CF
.L4703D5:
    cmp bl, 2                                            # 004703D5
    je .L4703E1                                          # 004703D8
    cmp bl, 3                                            # 004703DA
    jne .L4703F5                                         # 004703DD
    jmp .L4703EB                                         # 004703DF
.L4703E1:
    cmp byte ptr [esi + 0x42], 3                         # 004703E1
    je .L47053B                                          # 004703E5
.L4703EB:
    cmp byte ptr [esi + 0x42], 2                         # 004703EB
    je .L47053B                                          # 004703EF
.L4703F5:
    mov ebx, dword ptr [ebx*4 + __4FE070]                # 004703F5
    msvc_mov edi, ebx                                    # 004703FC
    add edi, dword ptr [_scenarioChunk3+416]             # 004703FE
    cmp edi, 0x3e800                                     # 00470404
    ja .L47056A                                          # 0047040A
    push ebx                                             # 00470410
    mov edi, dword ptr [esi + 0x46]                      # 00470411
    msvc_xor bp, bp                                      # 00470414
.L470417:
    mov bl, byte ptr [edi + __987C5C]                    # 00470417
    and ebx, 7                                           # 0047041D
    cmp bl, 0                                            # 00470420
    je .L470430                                          # 00470423
    add edi, dword ptr [ebx*4 + __4FE070]                # 00470425
    inc bp                                               # 0047042C
    jmp .L470417                                         # 0047042E
.L470430:
    pop ebx                                              # 00470430
    cmp bp, 0x3f                                         # 00470431
    jae .L47055A                                         # 00470435
    test byte ptr [esp], 1                               # 0047043B
    je .L470527                                          # 0047043F
    push eax                                             # 00470445
    push ebx                                             # 00470446
    mov bx, word ptr [esi + 0xa]                         # 00470447
    call _sub_4B93A5                                     # 0047044B
    pop ebx                                              # 00470450
    pop eax                                              # 00470451
    movzx edi, dx                                        # 00470452
    add edi, dword ptr [esi + 0x46]                      # 00470455
    cmp edi, dword ptr [esi + 0x46]                      # 00470458
    je .L4704AB                                          # 0047045B
    cmp byte ptr [esi + 0x42], 2                         # 0047045D
    je .L4704AB                                          # 00470461
    cmp byte ptr [esi + 0x42], 3                         # 00470463
    je .L4704AB                                          # 00470467
    push eax                                             # 00470469
    and al, 7                                            # 0047046A
    cmp al, 1                                            # 0047046C
    pop eax                                              # 0047046E
    jne .L4704AB                                         # 0047046F
    push ebx                                             # 00470471
    push edx                                             # 00470472
    mov ebp, dword ptr [esi + 0x46]                      # 00470473
.L470476:
    msvc_mov edx, ebp                                    # 00470476
    mov bl, byte ptr [ebp + __987C5C]                    # 00470478
    and ebx, 7                                           # 0047047E
    add ebp, dword ptr [ebx*4 + __4FE070]                # 00470481
    msvc_cmp ebp, edi                                    # 00470488
    jb .L470476                                          # 0047048A
    cmp ax, word ptr [edx + __987C5C]                    # 0047048C
    je .L470499                                          # 00470493
    pop edx                                              # 00470495
    pop ebx                                              # 00470496
    jmp .L4704AB                                         # 00470497
.L470499:
    and byte ptr [edx + __987C5C], 0xf8                  # 00470499
    or byte ptr [edx + __987C5C], 2                      # 004704A0
    pop edx                                              # 004704A7
    pop ebx                                              # 004704A8
    jmp .L470527                                         # 004704A9
.L4704AB:
    push eax                                             # 004704AB
    push ecx                                             # 004704AC
    movzx eax, word ptr [esi + 0x4a]                     # 004704AD
    add eax, dword ptr [esi + 0x46]                      # 004704B1
    msvc_cmp eax, edi                                    # 004704B4
    jb .L4704C3                                          # 004704B6
    cmp word ptr [esi + 0x4c], 1                         # 004704B8
    je .L4704C3                                          # 004704BD
    add word ptr [esi + 0x4a], bx                        # 004704BF
.L4704C3:
    add word ptr [esi + 0x4c], bx                        # 004704C3
    mov esi, dword ptr [_scenarioChunk3+416]             # 004704C7
    add dword ptr [_scenarioChunk3+416], ebx             # 004704CD
.L4704D3:
    dec esi                                              # 004704D3
    msvc_cmp esi, edi                                    # 004704D4
    jl .L4704E7                                          # 004704D6
    mov al, byte ptr [esi + __987C5C]                    # 004704D8
    mov byte ptr [ebx + esi + __987C5C], al              # 004704DE
    jmp .L4704D3                                         # 004704E5
.L4704E7:
    pop ecx                                              # 004704E7
    pop eax                                              # 004704E8
    push ebx                                             # 004704E9
    mov byte ptr [edi + __987C5C], al                    # 004704EA
    dec ebx                                              # 004704F0
    je .L470520                                          # 004704F1
    mov byte ptr [edi + __987C5C+1], ah                  # 004704F3
    dec ebx                                              # 004704F9
    je .L470520                                          # 004704FA
    shr eax, 0x10                                        # 004704FC
    mov byte ptr [edi + __987C5C+2], al                  # 004704FF
    dec ebx                                              # 00470505
    je .L470520                                          # 00470506
    mov byte ptr [edi + __987C5C+3], ah                  # 00470508
    dec ebx                                              # 0047050E
    je .L470520                                          # 0047050F
    mov byte ptr [edi + __987C5C+4], cl                  # 00470511
    dec ebx                                              # 00470517
    je .L470520                                          # 00470518
    mov byte ptr [edi + __987C5C+5], ch                  # 0047051A
.L470520:
    pop ebx                                              # 00470520
    inc edi                                              # 00470521
    call _sub_470795                                     # 00470522
.L470527:
    pop ebx                                              # 00470527
    msvc_xor ebx, ebx                                    # 00470528
    ret                                                  # 0047052A
.L47052B:
    pop ebx                                              # 0047052B
    mov word ptr [__9C68E6], 0x5f8                       # 0047052C
    mov ebx, 0x80000000                                  # 00470535
    ret                                                  # 0047053A
.L47053B:
    pop ebx                                              # 0047053B
    mov word ptr [__9C68E6], 0x5f6                       # 0047053C
    cmp byte ptr [esi + 0x42], 2                         # 00470545
    je .L470554                                          # 00470549
    mov word ptr [__9C68E6], 0x5f7                       # 0047054B
.L470554:
    mov ebx, 0x80000000                                  # 00470554
    ret                                                  # 00470559
.L47055A:
    pop ebx                                              # 0047055A
    mov word ptr [__9C68E6], 0x4bf                       # 0047055B
    mov ebx, 0x80000000                                  # 00470564
    ret                                                  # 00470569
.L47056A:
    mov word ptr [__9C68E6], 0x4be                       # 0047056A
    pop ebx                                              # 00470573
    mov ebx, 0x80000000                                  # 00470574
    ret                                                  # 00470579

    .global _sub_47057A
_sub_47057A:
    mov byte ptr [__9C68EA], 4                           # 0047057A
    movzx esi, di                                        # 00470581
    shl esi, 7                                           # 00470584
    add_offset esi, _things                              # 00470587
    mov di, word ptr [esi + 0xe]                         # 0047058D
    mov word ptr [__9C68E0], di                          # 00470591
    mov di, word ptr [esi + 0x10]                        # 00470598
    mov word ptr [__9C68E2], di                          # 0047059C
    mov di, word ptr [esi + 0x12]                        # 004705A3
    mov word ptr [__9C68E4], di                          # 004705A7
    test bl, 1                                           # 004705AE
    je .L470628                                          # 004705B1
    push eax                                             # 004705B3
    push ebx                                             # 004705B4
    mov bx, word ptr [esi + 0xa]                         # 004705B5
    call _sub_4B93A5                                     # 004705B9
    pop ebx                                              # 004705BE
    pop eax                                              # 004705BF
    movzx edi, dx                                        # 004705C0
    add edi, dword ptr [esi + 0x46]                      # 004705C3
    push ebx                                             # 004705C6
    push edi                                             # 004705C7
    mov bl, byte ptr [edi + __987C5C]                    # 004705C8
    and ebx, 7                                           # 004705CE
    mov ebx, dword ptr [ebx*4 + __4FE070]                # 004705D1
    sub word ptr [esi + 0x4c], bx                        # 004705D8
    sub dword ptr [_scenarioChunk3+416], ebx             # 004705DC
    movzx eax, word ptr [esi + 0x4a]                     # 004705E2
    add eax, dword ptr [esi + 0x46]                      # 004705E6
    msvc_cmp eax, edi                                    # 004705E9
    jbe .L4705F1                                         # 004705EB
    sub word ptr [esi + 0x4a], bx                        # 004705ED
.L4705F1:
    mov ax, word ptr [esi + 0x4a]                        # 004705F1
    inc ax                                               # 004705F5
    cmp ax, word ptr [esi + 0x4c]                        # 004705F7
    jb .L470603                                          # 004705FB
    mov word ptr [esi + 0x4a], 0                         # 004705FD
.L470603:
    cmp edi, dword ptr [_scenarioChunk3+416]             # 00470603
    jae .L47061B                                         # 00470609
    mov al, byte ptr [ebx + edi + __987C5C]              # 0047060B
    mov byte ptr [edi + __987C5C], al                    # 00470612
    inc edi                                              # 00470618
    jmp .L470603                                         # 00470619
.L47061B:
    mov edi, dword ptr [esp]                             # 0047061B
    inc edi                                              # 0047061E
    neg ebx                                              # 0047061F
    call _sub_470795                                     # 00470621
    pop edi                                              # 00470626
    pop ebx                                              # 00470627
.L470628:
    msvc_xor ebx, ebx                                    # 00470628
    ret                                                  # 0047062A

    .global _sub_47062B
_sub_47062B:
    push eax                                             # 0047062B
    push ebx                                             # 0047062C
    push ecx                                             # 0047062D
    push edx                                             # 0047062E
    push edi                                             # 0047062F
    push esi                                             # 00470630
    push ebp                                             # 00470631
    msvc_xor ebp, ebp                                    # 00470632
.L470634:
    cmp ebp, dword ptr [_scenarioChunk3+416]             # 00470634
    jae .L470712                                         # 0047063A
    mov bl, byte ptr [ebp + __987C5C]                    # 00470640
    and ebx, 7                                           # 00470646
    test byte ptr [ebx + __4FE088], 8                    # 00470649
    je .L470706                                          # 00470650
    mov al, byte ptr [ebp + __987C5C+1]                  # 00470656
    mov ah, byte ptr [ebp + __987C5C]                    # 0047065C
    shr ah, 6                                            # 00470662
    cmp ax, word ptr [esp + 0x14]                        # 00470665
    jne .L470706                                         # 0047066A
    mov_offset edi, _scenarioChunk3+42                   # 00470670
    mov si, word ptr [edi]                               # 00470675
.L470678:
    cmp si, -1                                           # 00470678
    je .L4706A0                                          # 0047067C
    movzx esi, si                                        # 0047067E
    shl esi, 7                                           # 00470681
    add_offset esi, _things                              # 00470684
    cmp ebp, dword ptr [esi + 0x46]                      # 0047068A
    jb .L47069A                                          # 0047068D
    movzx eax, word ptr [esi + 0x4c]                     # 0047068F
    add eax, dword ptr [esi + 0x46]                      # 00470693
    msvc_cmp ebp, eax                                    # 00470696
    jb .L4706A2                                          # 00470698
.L47069A:
    mov si, word ptr [esi + 4]                           # 0047069A
    jmp .L470678                                         # 0047069E
.L4706A0:
    jmp .L470706                                         # 004706A0
.L4706A2:
    mov ebx, dword ptr [ebx*4 + __4FE070]                # 004706A2
    sub word ptr [esi + 0x4c], bx                        # 004706A9
    sub dword ptr [_scenarioChunk3+416], ebx             # 004706AD
    movzx eax, word ptr [esi + 0x4a]                     # 004706B3
    add eax, dword ptr [esi + 0x46]                      # 004706B7
    msvc_cmp eax, ebp                                    # 004706BA
    jbe .L4706C2                                         # 004706BC
    sub word ptr [esi + 0x4a], bx                        # 004706BE
.L4706C2:
    mov ax, word ptr [esi + 0x4a]                        # 004706C2
    inc ax                                               # 004706C6
    cmp ax, word ptr [esi + 0x4c]                        # 004706C8
    jb .L4706D4                                          # 004706CC
    mov word ptr [esi + 0x4a], 0                         # 004706CE
.L4706D4:
    msvc_mov edi, ebp                                    # 004706D4
.L4706D6:
    cmp edi, dword ptr [_scenarioChunk3+416]             # 004706D6
    jae .L4706EE                                         # 004706DC
    mov al, byte ptr [ebx + edi + __987C5C]              # 004706DE
    mov byte ptr [edi + __987C5C], al                    # 004706E5
    inc edi                                              # 004706EB
    jmp .L4706D6                                         # 004706EC
.L4706EE:
    msvc_mov edi, ebp                                    # 004706EE
    inc edi                                              # 004706F0
    neg ebx                                              # 004706F1
    call _sub_470795                                     # 004706F3
    mov bx, word ptr [esi + 0xa]                         # 004706F8
    call _sub_4B93A5                                     # 004706FC
    msvc_jmp .L470634                                    # 00470701
.L470706:
    add ebp, dword ptr [ebx*4 + __4FE070]                # 00470706
    msvc_jmp .L470634                                    # 0047070D
.L470712:
    pop ebp                                              # 00470712
    pop esi                                              # 00470713
    pop edi                                              # 00470714
    pop edx                                              # 00470715
    pop ecx                                              # 00470716
    pop ebx                                              # 00470717
    pop eax                                              # 00470718
    ret                                                  # 00470719

    .global _sub_47071A
_sub_47071A:
    mov byte ptr [__9C68EA], 4                           # 0047071A
    movzx esi, di                                        # 00470721
    shl esi, 7                                           # 00470724
    add_offset esi, _things                              # 00470727
    mov di, word ptr [esi + 0xe]                         # 0047072D
    mov word ptr [__9C68E0], di                          # 00470731
    mov di, word ptr [esi + 0x10]                        # 00470738
    mov word ptr [__9C68E2], di                          # 0047073C
    mov di, word ptr [esi + 0x12]                        # 00470743
    mov word ptr [__9C68E4], di                          # 00470747
    test bl, 1                                           # 0047074E
    je .L470792                                          # 00470751
    push eax                                             # 00470753
    push ebx                                             # 00470754
    mov bx, word ptr [esi + 0xa]                         # 00470755
    call _sub_4B93A5                                     # 00470759
    pop ebx                                              # 0047075E
    pop eax                                              # 0047075F
    movzx edx, word ptr [esi + 0x4a]                     # 00470760
    mov edi, dword ptr [esi + 0x46]                      # 00470764
    mov al, byte ptr [edx + edi + __987C5C]              # 00470767
    and eax, 7                                           # 0047076E
    add edx, dword ptr [eax*4 + __4FE070]                # 00470771
    cmp al, 0                                            # 00470778
    jne .L47077E                                         # 0047077A
    msvc_xor edx, edx                                    # 0047077C
.L47077E:
    mov al, byte ptr [edx + edi + __987C5C]              # 0047077E
    and eax, 7                                           # 00470785
    cmp al, 0                                            # 00470788
    jne .L47078E                                         # 0047078A
    msvc_xor edx, edx                                    # 0047078C
.L47078E:
    mov word ptr [esi + 0x4a], dx                        # 0047078E
.L470792:
    msvc_xor ebx, ebx                                    # 00470792
    ret                                                  # 00470794

    .global _sub_470795
_sub_470795:
    push esi                                             # 00470795
    mov_offset esi, _scenarioChunk3+42                   # 00470796
    mov si, word ptr [esi]                               # 0047079B
.L47079E:
    cmp si, -1                                           # 0047079E
    je .L4707BE                                          # 004707A2
    movzx esi, si                                        # 004707A4
    shl esi, 7                                           # 004707A7
    add_offset esi, _things                              # 004707AA
    cmp edi, dword ptr [esi + 0x46]                      # 004707B0
    ja .L4707B8                                          # 004707B3
    add dword ptr [esi + 0x46], ebx                      # 004707B5
.L4707B8:
    mov si, word ptr [esi + 4]                           # 004707B8
    jmp .L47079E                                         # 004707BC
.L4707BE:
    pop esi                                              # 004707BE
    ret                                                  # 004707BF

    .global _sub_4707C0
_sub_4707C0:
    push eax                                             # 004707C0
    push ebx                                             # 004707C1
    push edi                                             # 004707C2
    push ebp                                             # 004707C3
    cmp word ptr [esi + 0x4c], 1                         # 004707C4
    je .L47081F                                          # 004707C9
    mov ebp, dword ptr [esi + 0x46]                      # 004707CB
    movzx edi, word ptr [esi + 0x4a]                     # 004707CE
    mov bl, byte ptr [edi + ebp + __987C5C]              # 004707D2
    and ebx, 7                                           # 004707D9
    test byte ptr [ebx + __4FE088], 1                    # 004707DC
    jne .L47081F                                         # 004707E3
    msvc_mov eax, edi                                    # 004707E5
.L4707E7:
    add edi, dword ptr [ebx*4 + __4FE070]                # 004707E7
    cmp bl, 0                                            # 004707EE
    jne .L4707F5                                         # 004707F1
    msvc_xor edi, edi                                    # 004707F3
.L4707F5:
    msvc_cmp edi, eax                                    # 004707F5
    je .L47081F                                          # 004707F7
    mov bl, byte ptr [edi + ebp + __987C5C]              # 004707F9
    and ebx, 7                                           # 00470800
    test byte ptr [ebx + __4FE088], 1                    # 00470803
    je .L4707E7                                          # 0047080A
    cmp di, word ptr [esi + 0x4a]                        # 0047080C
    je .L47081F                                          # 00470810
    mov word ptr [esi + 0x4a], di                        # 00470812
    mov bx, word ptr [esi + 0xa]                         # 00470816
    call _sub_4B93A5                                     # 0047081A
.L47081F:
    pop ebp                                              # 0047081F
    pop edi                                              # 00470820
    pop ebx                                              # 00470821
    pop eax                                              # 00470822
    ret                                                  # 00470823

    .global _sub_470824
_sub_470824:
    pushal                                               # 00470824
    or word ptr [__F24484], 0x10                         # 00470825
    call _sub_4CD406                                     # 0047082D
    msvc_xor edi, edi                                    # 00470832
.L470834:
    mov dword ptr [edi + __F2494A], 0xffffffff           # 00470834
    add edi, 0x26                                        # 0047083E
    cmp edi, 0x95a                                       # 00470841
    jb .L470834                                          # 00470847
    mov ebp, dword ptr [esi + 0x46]                      # 00470849
    msvc_xor edi, edi                                    # 0047084C
.L47084E:
    mov bl, byte ptr [ebp + __987C5C]                    # 0047084E
    and ebx, 7                                           # 00470854
    cmp bl, 0                                            # 00470857
    je .L47091D                                          # 0047085A
    test byte ptr [ebx + __4FE088], 2                    # 00470860
    je .L470911                                          # 00470867
    mov dword ptr [edi + __F2494A], ebp                  # 0047086D
    push ebx                                             # 00470873
    push esi                                             # 00470874
    mov esi, dword ptr [esi + 0x46]                      # 00470875
    msvc_xor dx, dx                                      # 00470878
    cmp bl, 3                                            # 0047087B
    je .L470882                                          # 0047087E
    inc dx                                               # 00470880
.L470882:
    cmp dword ptr [ebx*4 + __4FE070], 2                  # 00470882
    jne .L4708D0                                         # 0047088A
    mov ax, word ptr [ebp + __987C5C]                    # 0047088C
    and al, 0xf8                                         # 00470893
    or al, 1                                             # 00470895
.L470897:
    msvc_cmp esi, ebp                                    # 00470897
    jae .L470906                                         # 00470899
    mov bx, word ptr [esi + __987C5C]                    # 0047089B
    and bl, 7                                            # 004708A2
    cmp bl, 2                                            # 004708A5
    mov bx, word ptr [esi + __987C5C]                    # 004708A8
    jne .L4708B7                                         # 004708AF
    and bl, 0xf8                                         # 004708B1
    or bl, 1                                             # 004708B4
.L4708B7:
    msvc_cmp ax, bx                                      # 004708B7
    jne .L4708BE                                         # 004708BA
    inc dx                                               # 004708BC
.L4708BE:
    mov bl, byte ptr [esi + __987C5C]                    # 004708BE
    and ebx, 7                                           # 004708C4
    add esi, dword ptr [ebx*4 + __4FE070]                # 004708C7
    jmp .L470897                                         # 004708CE
.L4708D0:
    mov eax, dword ptr [ebp + __987C5C]                  # 004708D0
    mov cx, word ptr [ebp + __987C5C+4]                  # 004708D6
.L4708DD:
    msvc_cmp esi, ebp                                    # 004708DD
    jae .L470906                                         # 004708DF
    cmp eax, dword ptr [esi + __987C5C]                  # 004708E1
    jne .L4708F4                                         # 004708E7
    cmp cx, word ptr [esi + __987C5C+4]                  # 004708E9
    jne .L4708F4                                         # 004708F0
    inc dx                                               # 004708F2
.L4708F4:
    mov bl, byte ptr [esi + __987C5C]                    # 004708F4
    and ebx, 7                                           # 004708FA
    add esi, dword ptr [ebx*4 + __4FE070]                # 004708FD
    jmp .L4708DD                                         # 00470904
.L470906:
    pop esi                                              # 00470906
    pop ebx                                              # 00470907
    mov byte ptr [edi + __F2496E], dl                    # 00470908
    add edi, 0x26                                        # 0047090E
.L470911:
    add ebp, dword ptr [ebx*4 + __4FE070]                # 00470911
    msvc_jmp .L47084E                                    # 00470918
.L47091D:
    msvc_xor eax, eax                                    # 0047091D
    mov ecx, 1                                           # 0047091F

    .global _sub_470924
_sub_470924:
    msvc_mov esi, eax                                    # 00470924
    imul esi, esi, 0x26                                  # 00470926
    mov ebp, dword ptr [esi + __F2494A]                  # 00470929
    cmp ebp, -1                                          # 0047092F
    je _sub_470A56                                       # 00470932
    mov bl, byte ptr [ebp + __987C5C]                    # 00470938
    and ebx, 7                                           # 0047093E
    test byte ptr [ebx + __4FE088], 2                    # 00470941
    je _sub_470A56                                       # 00470948
    push eax                                             # 0047094E
    push ecx                                             # 0047094F
    push esi                                             # 00470950
    call _sub_470B76                                     # 00470951
    msvc_xor ebp, ebp                                    # 00470956

    .global _sub_470958
_sub_470958:
    push eax                                             # 00470958
    push ecx                                             # 00470959
    push edx                                             # 0047095A
    mov ebx, dword ptr [__E3F0B8]                        # 0047095B
    jmp dword ptr [ebx*4 + __4FE090]                     # 00470961

    .global _sub_470968
_sub_470968:
    msvc_mov bx, ax                                      # 00470968
    neg ax                                               # 0047096B
    msvc_add ax, cx                                      # 0047096E
    msvc_add cx, bx                                      # 00470971
    sar cx, 1                                            # 00470974
    msvc_sub cx, dx                                      # 00470977
    jmp _sub_4709B6                                      # 0047097A

    .global _sub_47097C
_sub_47097C:
    neg ax                                               # 0047097C
    msvc_mov bx, ax                                      # 0047097F
    msvc_sub ax, cx                                      # 00470982
    msvc_add cx, bx                                      # 00470985
    sar cx, 1                                            # 00470988
    msvc_sub cx, dx                                      # 0047098B
    jmp _sub_4709B6                                      # 0047098E

    .global _sub_470990
_sub_470990:
    msvc_mov bx, ax                                      # 00470990
    msvc_sub ax, cx                                      # 00470993
    neg cx                                               # 00470996
    msvc_sub cx, bx                                      # 00470999
    sar cx, 1                                            # 0047099C
    msvc_sub cx, dx                                      # 0047099F
    jmp _sub_4709B6                                      # 004709A2

    .global _sub_4709A4
_sub_4709A4:
    msvc_mov bx, ax                                      # 004709A4
    msvc_add ax, cx                                      # 004709A7
    neg cx                                               # 004709AA
    msvc_add cx, bx                                      # 004709AD
    sar cx, 1                                            # 004709B0
    msvc_sub cx, dx                                      # 004709B3

    .global _sub_4709B6
_sub_4709B6:
    push eax                                             # 004709B6
    push ecx                                             # 004709B7
    mov_offset esi, __112CC04                            # 004709B8
    mov word ptr [__112C876], 0                          # 004709BD
    call _sub_495685                                     # 004709C6
    msvc_mov dx, cx                                      # 004709CB
    add dx, 3                                            # 004709CE
    pop ecx                                              # 004709D2
    pop eax                                              # 004709D3
    mov di, 0xb                                          # 004709D4
    mov esi, dword ptr [esp + 0xc]                       # 004709D8
    push ecx                                             # 004709DC
    msvc_mov ecx, ebp                                    # 004709DD
    movzx si, byte ptr [esi + __F2496E]                  # 004709DF
    shl dx, cl                                           # 004709E7
    imul si, si, 0xa                                     # 004709EA
    shl di, cl                                           # 004709EE
    shl si, cl                                           # 004709F1
    pop ecx                                              # 004709F4
    msvc_mov bx, dx                                      # 004709F5
    shr bx, 1                                            # 004709F8
    msvc_sub ax, bx                                      # 004709FB
    msvc_mov bx, di                                      # 004709FE
    shr bx, 1                                            # 00470A01
    msvc_sub cx, bx                                      # 00470A04
    msvc_add dx, ax                                      # 00470A07
    msvc_add cx, si                                      # 00470A0A
    msvc_add di, cx                                      # 00470A0D
    mov esi, dword ptr [esp + 0xc]                       # 00470A10
    msvc_mov bx, cx                                      # 00470A14
    msvc_mov ecx, ebp                                    # 00470A17
    sar ax, cl                                           # 00470A19
    sar bx, cl                                           # 00470A1C
    sar dx, cl                                           # 00470A1F
    sar di, cl                                           # 00470A22
    mov word ptr [esi + ebp*2 + __F2494E], ax            # 00470A25
    mov word ptr [esi + ebp*2 + __F2495E], bx            # 00470A2D
    mov word ptr [esi + ebp*2 + __F24956], dx            # 00470A35
    mov word ptr [esi + ebp*2 + __F24966], di            # 00470A3D
    pop edx                                              # 00470A45
    pop ecx                                              # 00470A46
    pop eax                                              # 00470A47
    inc ebp                                              # 00470A48
    cmp ebp, 4                                           # 00470A49
    jb _sub_470958                                       # 00470A4C
    pop esi                                              # 00470A52
    pop ecx                                              # 00470A53
    pop eax                                              # 00470A54
    inc ecx                                              # 00470A55

    .global _sub_470A56
_sub_470A56:
    inc eax                                              # 00470A56
    cmp eax, 0x3f                                        # 00470A57
    jb _sub_470924                                       # 00470A5A
    popal                                                # 00470A60
    ret                                                  # 00470A61

    .global _sub_470A62
_sub_470A62:
    test word ptr [__F24484], 0x10                       # 00470A62
    je .L470B75                                          # 00470A6B
    movzx edx, word ptr [edi + 0xe]                      # 00470A71
    push word ptr [edi + 4]                              # 00470A75
    push word ptr [edi + 6]                              # 00470A79
    push word ptr [edi + 8]                              # 00470A7D
    push word ptr [edi + 0xa]                            # 00470A81
    push word ptr [edi + 0xe]                            # 00470A85
    msvc_xor cx, cx                                      # 00470A89
    xchg word ptr [edi + 0xe], cx                        # 00470A8C
    sar word ptr [edi + 4], cl                           # 00470A90
    sar word ptr [edi + 6], cl                           # 00470A94
    sar word ptr [edi + 8], cl                           # 00470A98
    sar word ptr [edi + 0xa], cl                         # 00470A9C
    msvc_mov ecx, edx                                    # 00470AA0
    msvc_xor esi, esi                                    # 00470AA2
    msvc_xor edx, edx                                    # 00470AA4
.L470AA6:
    mov ebp, dword ptr [esi + __F2494A]                  # 00470AA6
    cmp ebp, -1                                          # 00470AAC
    je .L470B52                                          # 00470AAF
    mov al, byte ptr [ebp + __987C5C]                    # 00470AB5
    and eax, 7                                           # 00470ABB
    test byte ptr [eax + __4FE088], 2                    # 00470ABE
    je .L470B52                                          # 00470AC5
    inc edx                                              # 00470ACB
    mov ax, word ptr [edi + 6]                           # 00470ACC
    cmp ax, word ptr [esi + ecx*2 + __F24966]            # 00470AD0
    jg .L470B52                                          # 00470AD8
    add ax, word ptr [edi + 0xa]                         # 00470ADA
    cmp ax, word ptr [esi + ecx*2 + __F2495E]            # 00470ADE
    jl .L470B52                                          # 00470AE6
    mov ax, word ptr [edi + 4]                           # 00470AE8
    cmp ax, word ptr [esi + ecx*2 + __F24956]            # 00470AEC
    jg .L470B52                                          # 00470AF4
    add ax, word ptr [edi + 8]                           # 00470AF6
    cmp ax, word ptr [esi + ecx*2 + __F2494E]            # 00470AFA
    jl .L470B52                                          # 00470B02
    push ecx                                             # 00470B04
    push edx                                             # 00470B05
    push edi                                             # 00470B06
    push esi                                             # 00470B07
    msvc_mov ecx, edx                                    # 00470B08
    mov bl, byte ptr [ebp + __987C5C]                    # 00470B0A
    and ebx, 7                                           # 00470B10
    call _sub_470B76                                     # 00470B13
    pop esi                                              # 00470B18
    pop edi                                              # 00470B19
    pop edx                                              # 00470B1A
    pop ecx                                              # 00470B1B
    cmp byte ptr [__112CC04], 0                          # 00470B1C
    je .L470B52                                          # 00470B23
    push ecx                                             # 00470B25
    push edx                                             # 00470B26
    push esi                                             # 00470B27
    mov dx, word ptr [esi + ecx*2 + __F2495E]            # 00470B28
    mov cx, word ptr [esi + ecx*2 + __F2494E]            # 00470B30
    mov word ptr [__112C876], 0                          # 00470B38
    inc cx                                               # 00470B41
    mov al, 0x22                                         # 00470B43
    mov_offset esi, __112CC04                            # 00470B45
    call _sub_451025                                     # 00470B4A
    pop esi                                              # 00470B4F
    pop edx                                              # 00470B50
    pop ecx                                              # 00470B51
.L470B52:
    add esi, 0x26                                        # 00470B52
    cmp esi, 0x95a                                       # 00470B55
    jb .L470AA6                                          # 00470B5B
    pop word ptr [edi + 0xe]                             # 00470B61
    pop word ptr [edi + 0xa]                             # 00470B65
    pop word ptr [edi + 8]                               # 00470B69
    pop word ptr [edi + 6]                               # 00470B6D
    pop word ptr [edi + 4]                               # 00470B71
.L470B75:
    ret                                                  # 00470B75

    .global _sub_470B76
_sub_470B76:
    jmp dword ptr [ebx*4 + __4FE0A0]                     # 00470B76

    .global _sub_470B7D
_sub_470B7D:
    add ecx, 0x20100ca6                                  # 00470B7D
    mov byte ptr [__112CC04], 0x17                       # 00470B83
    mov dword ptr [__112CC05], ecx                       # 00470B8A
    mov word ptr [__112CC09], 0x92                       # 00470B90
    movzx ebx, byte ptr [ebp + __987C5C+1]               # 00470B99
    mov bh, byte ptr [ebp + __987C5C]                    # 00470BA0
    shr bh, 6                                            # 00470BA6
    imul ebx, ebx, 0x3d2                                 # 00470BA9
    mov ax, word ptr [ebx + _stations+2]                 # 00470BAF
    mov cx, word ptr [ebx + _stations+4]                 # 00470BB6
    mov dx, word ptr [ebx + _stations+6]                 # 00470BBD
    add dx, 0x1e                                         # 00470BC4
    push eax                                             # 00470BC8
    add ebp, 2                                           # 00470BC9
    mov_offset edi, __112CC0A                            # 00470BCC
.L470BD1:
    mov bl, byte ptr [ebp + __987C5C]                    # 00470BD1
    and ebx, 7                                           # 00470BD7
    test byte ptr [ebx + __4FE088], 4                    # 00470BDA
    je .L470C23                                          # 00470BE1
    mov al, 0x2b                                         # 00470BE3
    cmp bl, 5                                            # 00470BE5
    je .L470BEC                                          # 00470BE8
    mov al, 0x2d                                         # 00470BEA
.L470BEC:
    mov byte ptr [edi], 0x20                             # 00470BEC
    mov byte ptr [edi + 1], al                           # 00470BEF
    mov byte ptr [edi + 2], 0x20                         # 00470BF2
    movzx eax, byte ptr [ebp + __987C5C]                 # 00470BF6
    shr eax, 3                                           # 00470BFD
    mov eax, dword ptr [eax*4 + _cargoObjects]           # 00470C00
    mov byte ptr [edi + 3], 0x17                         # 00470C07
    mov eax, dword ptr [eax + 0xc]                       # 00470C0B
    add eax, 0                                           # 00470C0E
    mov dword ptr [edi + 4], eax                         # 00470C11
    add edi, 8                                           # 00470C14
    mov byte ptr [edi], 0                                # 00470C17
    add ebp, dword ptr [ebx*4 + __4FE070]                # 00470C1A
    jmp .L470BD1                                         # 00470C21
.L470C23:
    pop eax                                              # 00470C23
    ret                                                  # 00470C24

    .global _sub_470C25
_sub_470C25:
    add ecx, 0x20100ca6                                  # 00470C25
    mov byte ptr [__112CC04], 0x17                       # 00470C2B
    mov dword ptr [__112CC05], ecx                       # 00470C32
    mov byte ptr [__112CC09], 0                          # 00470C38
    movzx ebx, byte ptr [ebp + __987C5C+1]               # 00470C3F
    mov bh, byte ptr [ebp + __987C5C]                    # 00470C46
    shr bh, 6                                            # 00470C4C
    imul ebx, ebx, 0x3d2                                 # 00470C4F
    mov ax, word ptr [ebx + _stations+2]                 # 00470C55
    mov cx, word ptr [ebx + _stations+4]                 # 00470C5C
    mov dx, word ptr [ebx + _stations+6]                 # 00470C63
    add dx, 0x1e                                         # 00470C6A
    ret                                                  # 00470C6E

    .global _sub_470C6F
_sub_470C6F:
    add ecx, 0x20100ca6                                  # 00470C6F
    mov byte ptr [__112CC04], 0x17                       # 00470C75
    mov dword ptr [__112CC05], ecx                       # 00470C7C
    mov byte ptr [__112CC09], 0                          # 00470C82
    mov al, byte ptr [ebp + __987C5C+1]                  # 00470C89
    mov cl, byte ptr [ebp + __987C5C+3]                  # 00470C8F
    mov dl, byte ptr [ebp + __987C5C+2]                  # 00470C95
    mov ah, byte ptr [ebp + __987C5C]                    # 00470C9B
    mov ch, byte ptr [ebp + __987C5C+2]                  # 00470CA1
    shr ah, 7                                            # 00470CA7
    shr ch, 7                                            # 00470CAA
    and dx, 0x7f                                         # 00470CAD
    shl ax, 5                                            # 00470CB1
    shl cx, 5                                            # 00470CB5
    shl dx, 3                                            # 00470CB9
    add ax, 0x10                                         # 00470CBD
    add cx, 0x10                                         # 00470CC1
    add dx, 8                                            # 00470CC5
    ret                                                  # 00470CC9

    .global _sub_470CCA
_sub_470CCA:
    mov byte ptr [__112CC04], 0                          # 00470CCA
    ret                                                  # 00470CD1

    .global _sub_470CD2
_sub_470CD2:
    mov byte ptr [__9C68EA], 4                           # 00470CD2
    movzx esi, di                                        # 00470CD9
    shl esi, 7                                           # 00470CDC
    add_offset esi, _things                              # 00470CDF
    mov di, word ptr [esi + 0xe]                         # 00470CE5
    mov word ptr [__9C68E0], di                          # 00470CE9
    mov di, word ptr [esi + 0x10]                        # 00470CF0
    mov word ptr [__9C68E2], di                          # 00470CF4
    mov di, word ptr [esi + 0x12]                        # 00470CFB
    mov word ptr [__9C68E4], di                          # 00470CFF
    test bl, 1                                           # 00470D06
    je .L470E03                                          # 00470D09
    push eax                                             # 00470D0F
    push ebx                                             # 00470D10
    mov bx, word ptr [esi + 0xa]                         # 00470D11
    call _sub_4B93A5                                     # 00470D15
    pop ebx                                              # 00470D1A
    pop eax                                              # 00470D1B
    movzx edx, dx                                        # 00470D1C
    mov edi, dword ptr [esi + 0x46]                      # 00470D1F
    push ebx                                             # 00470D22
    push edi                                             # 00470D23
    mov bl, byte ptr [edx + edi + __987C5C]              # 00470D24
    and ebx, 7                                           # 00470D2B
    cmp bl, 0                                            # 00470D2E
    je .L470E01                                          # 00470D31
    msvc_xor ebx, ebx                                    # 00470D37
    msvc_xor ecx, ecx                                    # 00470D39
.L470D3B:
    mov al, byte ptr [ebx + edi + __987C5C]              # 00470D3B
    and eax, 7                                           # 00470D42
    cmp al, 0                                            # 00470D45
    je .L470E01                                          # 00470D47
    msvc_mov ecx, ebx                                    # 00470D4D
    add ebx, dword ptr [eax*4 + __4FE070]                # 00470D4F
    msvc_cmp ebx, edx                                    # 00470D56
    jne .L470D3B                                         # 00470D58
    msvc_cmp ecx, edx                                    # 00470D5A
    je .L470E01                                          # 00470D5C
    sub esp, 0x100                                       # 00470D62
    msvc_mov ebp, esp                                    # 00470D68
    mov al, byte ptr [edx + edi + __987C5C]              # 00470D6A
    and eax, 7                                           # 00470D71
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470D74
    push edx                                             # 00470D7B
.L470D7C:
    mov al, byte ptr [edx + edi + __987C5C]              # 00470D7C
    mov byte ptr [ebp], al                               # 00470D83
    inc edx                                              # 00470D86
    inc ebp                                              # 00470D87
    dec ebx                                              # 00470D88
    jne .L470D7C                                         # 00470D89
    pop edx                                              # 00470D8B
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470D8C
    and eax, 7                                           # 00470D93
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470D96
    push ecx                                             # 00470D9D
.L470D9E:
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470D9E
    mov byte ptr [ebp], al                               # 00470DA5
    inc ecx                                              # 00470DA8
    inc ebp                                              # 00470DA9
    dec ebx                                              # 00470DAA
    jne .L470D9E                                         # 00470DAB
    pop ecx                                              # 00470DAD
    msvc_mov ebp, esp                                    # 00470DAE
    mov al, byte ptr [edx + edi + __987C5C]              # 00470DB0
    and eax, 7                                           # 00470DB7
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470DBA
    push ebx                                             # 00470DC1
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470DC2
    and eax, 7                                           # 00470DC9
    add ebx, dword ptr [eax*4 + __4FE070]                # 00470DCC
    push ecx                                             # 00470DD3
.L470DD4:
    mov al, byte ptr [ebp]                               # 00470DD4
    mov byte ptr [ecx + edi + __987C5C], al              # 00470DD7
    inc ebp                                              # 00470DDE
    inc ecx                                              # 00470DDF
    dec ebx                                              # 00470DE0
    jne .L470DD4                                         # 00470DE1
    pop ecx                                              # 00470DE3
    pop ebx                                              # 00470DE4
    add esp, 0x100                                       # 00470DE5
    cmp cx, word ptr [esi + 0x4a]                        # 00470DEB
    jne .L470DF7                                         # 00470DEF
    add word ptr [esi + 0x4a], bx                        # 00470DF1
    jmp .L470E01                                         # 00470DF5
.L470DF7:
    cmp dx, word ptr [esi + 0x4a]                        # 00470DF7
    jne .L470E01                                         # 00470DFB
    mov word ptr [esi + 0x4a], cx                        # 00470DFD
.L470E01:
    pop edi                                              # 00470E01
    pop ebx                                              # 00470E02
.L470E03:
    msvc_xor ebx, ebx                                    # 00470E03
    ret                                                  # 00470E05

    .global _sub_470E06
_sub_470E06:
    mov byte ptr [__9C68EA], 4                           # 00470E06
    movzx esi, di                                        # 00470E0D
    shl esi, 7                                           # 00470E10
    add_offset esi, _things                              # 00470E13
    mov di, word ptr [esi + 0xe]                         # 00470E19
    mov word ptr [__9C68E0], di                          # 00470E1D
    mov di, word ptr [esi + 0x10]                        # 00470E24
    mov word ptr [__9C68E2], di                          # 00470E28
    mov di, word ptr [esi + 0x12]                        # 00470E2F
    mov word ptr [__9C68E4], di                          # 00470E33
    test bl, 1                                           # 00470E3A
    je .L470F39                                          # 00470E3D
    push eax                                             # 00470E43
    push ebx                                             # 00470E44
    mov bx, word ptr [esi + 0xa]                         # 00470E45
    call _sub_4B93A5                                     # 00470E49
    pop ebx                                              # 00470E4E
    pop eax                                              # 00470E4F
    movzx edx, dx                                        # 00470E50
    mov edi, dword ptr [esi + 0x46]                      # 00470E53
    push ebx                                             # 00470E56
    push edi                                             # 00470E57
    mov bl, byte ptr [edx + edi + __987C5C]              # 00470E58
    and ebx, 7                                           # 00470E5F
    cmp bl, 0                                            # 00470E62
    je .L470F37                                          # 00470E65
    mov al, byte ptr [edx + edi + __987C5C]              # 00470E6B
    and eax, 7                                           # 00470E72
    msvc_mov ecx, edx                                    # 00470E75
    add edx, dword ptr [eax*4 + __4FE070]                # 00470E77
    mov al, byte ptr [edx + edi + __987C5C]              # 00470E7E
    and eax, 7                                           # 00470E85
    cmp al, 0                                            # 00470E88
    je .L470F37                                          # 00470E8A
    msvc_cmp ecx, edx                                    # 00470E90
    je .L470F37                                          # 00470E92
    sub esp, 0x100                                       # 00470E98
    msvc_mov ebp, esp                                    # 00470E9E
    mov al, byte ptr [edx + edi + __987C5C]              # 00470EA0
    and eax, 7                                           # 00470EA7
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470EAA
    push edx                                             # 00470EB1
.L470EB2:
    mov al, byte ptr [edx + edi + __987C5C]              # 00470EB2
    mov byte ptr [ebp], al                               # 00470EB9
    inc edx                                              # 00470EBC
    inc ebp                                              # 00470EBD
    dec ebx                                              # 00470EBE
    jne .L470EB2                                         # 00470EBF
    pop edx                                              # 00470EC1
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470EC2
    and eax, 7                                           # 00470EC9
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470ECC
    push ecx                                             # 00470ED3
.L470ED4:
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470ED4
    mov byte ptr [ebp], al                               # 00470EDB
    inc ecx                                              # 00470EDE
    inc ebp                                              # 00470EDF
    dec ebx                                              # 00470EE0
    jne .L470ED4                                         # 00470EE1
    pop ecx                                              # 00470EE3
    msvc_mov ebp, esp                                    # 00470EE4
    mov al, byte ptr [edx + edi + __987C5C]              # 00470EE6
    and eax, 7                                           # 00470EED
    mov ebx, dword ptr [eax*4 + __4FE070]                # 00470EF0
    push ebx                                             # 00470EF7
    mov al, byte ptr [ecx + edi + __987C5C]              # 00470EF8
    and eax, 7                                           # 00470EFF
    add ebx, dword ptr [eax*4 + __4FE070]                # 00470F02
    push ecx                                             # 00470F09
.L470F0A:
    mov al, byte ptr [ebp]                               # 00470F0A
    mov byte ptr [ecx + edi + __987C5C], al              # 00470F0D
    inc ebp                                              # 00470F14
    inc ecx                                              # 00470F15
    dec ebx                                              # 00470F16
    jne .L470F0A                                         # 00470F17
    pop ecx                                              # 00470F19
    pop ebx                                              # 00470F1A
    add esp, 0x100                                       # 00470F1B
    cmp cx, word ptr [esi + 0x4a]                        # 00470F21
    jne .L470F2D                                         # 00470F25
    add word ptr [esi + 0x4a], bx                        # 00470F27
    jmp .L470F37                                         # 00470F2B
.L470F2D:
    cmp dx, word ptr [esi + 0x4a]                        # 00470F2D
    jne .L470F37                                         # 00470F31
    mov word ptr [esi + 0x4a], cx                        # 00470F33
.L470F37:
    pop edi                                              # 00470F37
    pop ebx                                              # 00470F38
.L470F39:
    msvc_xor ebx, ebx                                    # 00470F39
    ret                                                  # 00470F3B

    .global _sub_470F3C
_sub_470F3C:
    mov byte ptr [__112A17E], 0                          # 00470F3C
    msvc_xor eax, eax                                    # 00470F43
    msvc_xor ebx, ebx                                    # 00470F45
    msvc_xor ecx, ecx                                    # 00470F47
    push eax                                             # 00470F49
    push ebx                                             # 00470F4A
    push ecx                                             # 00470F4B
    mov dword ptr [__113E87C], 3                         # 00470F4C
    push_dword __9DA286                                  # 00470F56
    push_dword __50B635                                  # 00470F5B
    call _sub_40830E                                     # 00470F60
    add esp, 8                                           # 00470F65
    mov dword ptr [__113E87C], 0                         # 00470F68
    cmp eax, -1                                          # 00470F72
    je .L470FEA                                          # 00470F75
    mov dword ptr [__9DA3C6], eax                        # 00470F77
.L470F7C:
    inc dword ptr [esp]                                  # 00470F7C
    mov eax, dword ptr [__9DA29A]                        # 00470F7F
    xor eax, dword ptr [__9DA29E]                        # 00470F84
    xor dword ptr [esp + 4], eax                         # 00470F8A
    ror dword ptr [esp + 4], 5                           # 00470F8E
    mov eax, dword ptr [__9DA2A6]                        # 00470F93
    add dword ptr [esp + 8], eax                         # 00470F98
    mov dword ptr [__113E87C], 3                         # 00470F9C
    push_dword __9DA286                                  # 00470FA6
    push dword ptr [__9DA3C6]                            # 00470FAB
    call _sub_40831D                                     # 00470FB1
    add esp, 8                                           # 00470FB6
    mov dword ptr [__113E87C], 0                         # 00470FB9
    cmp eax, 1                                           # 00470FC3
    je .L470F7C                                          # 00470FC6
    mov dword ptr [__113E87C], 3                         # 00470FC8
    push dword ptr [__9DA3C6]                            # 00470FD2
    call _sub_40832C                                     # 00470FD8
    add esp, 4                                           # 00470FDD
    mov dword ptr [__113E87C], 0                         # 00470FE0
.L470FEA:
    pop ecx                                              # 00470FEA
    pop ebx                                              # 00470FEB
    pop eax                                              # 00470FEC
    ror ecx, 0x18                                        # 00470FED
    mov cl, 1                                            # 00470FF0
    rol ecx, 0x18                                        # 00470FF2
    mov dword ptr [__112A138], ecx                       # 00470FF5
    mov dword ptr [__112A13C], eax                       # 00470FFB
    mov dword ptr [__112A140], ebx                       # 00471000
    mov ebx, 1                                           # 00471006
    call _sub_4416B5                                     # 0047100B
    mov dword ptr [__113E87C], 3                         # 00471010
    push ebx                                             # 0047101A
    call _sub_4082AD                                     # 0047101B
    add esp, 4                                           # 00471020
    mov dword ptr [__113E87C], 0                         # 00471023
    cmp eax, -1                                          # 0047102D
    je .L47118B                                          # 00471030
    mov dword ptr [__9D1CBC], eax                        # 00471036
    mov dword ptr [__113E87C], 3                         # 0047103B
    push 0x14                                            # 00471045
    push_dword __112A14C                                 # 00471047
    push dword ptr [__9D1CBC]                            # 0047104C
    call _sub_4081FE                                     # 00471052
    add esp, 0xc                                         # 00471057
    mov dword ptr [__113E87C], 0                         # 0047105A
    cmp eax, 0x14                                        # 00471064
    jne .L471169                                         # 00471067
    mov eax, dword ptr [__112A14C]                       # 0047106D
    cmp eax, dword ptr [__112A138]                       # 00471072
    jne .L471169                                         # 00471078
    mov eax, dword ptr [__112A150]                       # 0047107E
    cmp eax, dword ptr [__112A13C]                       # 00471083
    jne .L471169                                         # 00471089
    mov eax, dword ptr [__112A154]                       # 0047108F
    cmp eax, dword ptr [__112A140]                       # 00471094
    jne .L471169                                         # 0047109A
    mov ebx, 0xffffffff                                  # 004710A0
    xchg dword ptr [__50D13C], ebx                       # 004710A5
    cmp ebx, -1                                          # 004710AB
    je .L4710CD                                          # 004710AE
    mov dword ptr [__113E87C], 4                         # 004710B0
    push ebx                                             # 004710BA
    call _sub_406C12                                     # 004710BB
    add esp, 4                                           # 004710C0
    mov dword ptr [__113E87C], 0                         # 004710C3
.L4710CD:
    mov dword ptr [__113E87C], 4                         # 004710CD
    push dword ptr [__112A158]                           # 004710D7
    call _sub_406BF7                                     # 004710DD
    add esp, 4                                           # 004710E2
    mov dword ptr [__113E87C], 0                         # 004710E5
    cmp eax, -1                                          # 004710EF
    je .L47175E                                          # 004710F2
    mov dword ptr [__50D13C], eax                        # 004710F8
    mov dword ptr [__113E87C], 3                         # 004710FD
    push dword ptr [__112A158]                           # 00471107
    push dword ptr [__50D13C]                            # 0047110D
    push dword ptr [__9D1CBC]                            # 00471113
    call _sub_4081FE                                     # 00471119
    add esp, 0xc                                         # 0047111E
    mov dword ptr [__113E87C], 0                         # 00471121
    cmp eax, dword ptr [__112A158]                       # 0047112B
    jne .L471169                                         # 00471131
    mov eax, dword ptr [__112A15C]                       # 00471133
    mov dword ptr [__112A110], eax                       # 00471138
    mov dword ptr [__113E87C], 3                         # 0047113D
    push dword ptr [__9D1CBC]                            # 00471147
    call _sub_408297                                     # 0047114D
    add esp, 4                                           # 00471152
    mov dword ptr [__113E87C], 0                         # 00471155
    call _sub_47237D                                     # 0047115F
    msvc_jmp .L471712                                    # 00471164
.L471169:
    mov dword ptr [__113E87C], 3                         # 00471169
    push dword ptr [__9D1CBC]                            # 00471173
    call _sub_408297                                     # 00471179
    add esp, 4                                           # 0047117E
    mov dword ptr [__113E87C], 0                         # 00471181
.L47118B:
    pushal                                               # 0047118B
    mov dword ptr [__113E87C], 4                         # 0047118C
    call _sub_4072EC                                     # 00471196
    mov dword ptr [__113E87C], 0                         # 0047119B
    popal                                                # 004711A5
    mov eax, 0xaf                                        # 004711A6
    cmp byte ptr [__50AEAD], 0                           # 004711AB
    je .L4711C0                                          # 004711B2
    mov eax, 0xae                                        # 004711B4
    mov byte ptr [__50AEAD], 0                           # 004711B9
.L4711C0:
    msvc_xor edx, edx                                    # 004711C0
    call _sub_4CF5C5                                     # 004711C2
    mov dword ptr [__112A14C], 0                         # 004711C7
    mov byte ptr [__112A17C], 0                          # 004711D1
    call _sub_47237D                                     # 004711D8
    mov ebx, 0xffffffff                                  # 004711DD
    xchg dword ptr [__50D13C], ebx                       # 004711E2
    cmp ebx, -1                                          # 004711E8
    je .L47120A                                          # 004711EB
    mov dword ptr [__113E87C], 4                         # 004711ED
    push ebx                                             # 004711F7
    call _sub_406C12                                     # 004711F8
    add esp, 4                                           # 004711FD
    mov dword ptr [__113E87C], 0                         # 00471200
.L47120A:
    mov dword ptr [__112A110], 0                         # 0047120A
    mov ecx, 0x1000                                      # 00471214
    push ecx                                             # 00471219
    mov dword ptr [__113E87C], 4                         # 0047121A
    push ecx                                             # 00471224
    call _sub_406BF7                                     # 00471225
    add esp, 4                                           # 0047122A
    mov dword ptr [__113E87C], 0                         # 0047122D
    pop ecx                                              # 00471237
    cmp eax, -1                                          # 00471238
    je .L47175E                                          # 0047123B
    mov dword ptr [__50D13C], eax                        # 00471241
    msvc_xor esi, esi                                    # 00471246
    push ecx                                             # 00471248
    push esi                                             # 00471249
    mov dword ptr [__113E87C], 3                         # 0047124A
    push_dword __9DA286                                  # 00471254
    push_dword __50B635                                  # 00471259
    call _sub_40830E                                     # 0047125E
    add esp, 8                                           # 00471263
    mov dword ptr [__113E87C], 0                         # 00471266
    cmp eax, -1                                          # 00471270
    je .L471636                                          # 00471273
    mov dword ptr [__9DA3C6], eax                        # 00471279
.L47127E:
    pushal                                               # 0047127E
    mov dword ptr [__113E87C], 4                         # 0047127F
    call _sub_4072EC                                     # 00471289
    mov dword ptr [__113E87C], 0                         # 0047128E
    popal                                                # 00471298
    inc dword ptr [__112A14C]                            # 00471299
    mov eax, dword ptr [__112A14C]                       # 0047129F
    msvc_xor edx, edx                                    # 004712A4
    shl eax, 8                                           # 004712A6
    mov ecx, dword ptr [__112A138]                       # 004712A9
    and ecx, 0xffffff                                    # 004712AF
    inc ecx                                              # 004712B5
    div ecx                                              # 004712B6
    cmp al, byte ptr [__112A17C]                         # 004712B8
    je .L4712CA                                          # 004712BE
    mov byte ptr [__112A17C], al                         # 004712C0
    call _sub_4CF621                                     # 004712C5
.L4712CA:
    mov eax, dword ptr [esp + 4]                         # 004712CA
    sub eax, dword ptr [esp]                             # 004712CE
    cmp eax, 0x231e                                      # 004712D1
    jg .L471315                                          # 004712D6
    add dword ptr [esp + 4], 0x1000                      # 004712D8
    mov ecx, dword ptr [esp + 4]                         # 004712E0
    mov dword ptr [__113E87C], 3                         # 004712E4
    push ecx                                             # 004712EE
    push dword ptr [__50D13C]                            # 004712EF
    call _sub_406C02                                     # 004712F5
    add esp, 8                                           # 004712FA
    mov dword ptr [__113E87C], 0                         # 004712FD
    cmp eax, -1                                          # 00471307
    je .L47175E                                          # 0047130A
    mov dword ptr [__50D13C], eax                        # 00471310
.L471315:
    mov_offset esi, __50B635                             # 00471315
    mov_offset edi, __112CC04                            # 0047131A
.L47131F:
    mov al, byte ptr [esi]                               # 0047131F
    mov byte ptr [edi], al                               # 00471321
    inc esi                                              # 00471323
    inc edi                                              # 00471324
    cmp al, 0x2a                                         # 00471325
    jne .L47131F                                         # 00471327
    dec edi                                              # 00471329
    mov_offset esi, __9DA2B2                             # 0047132A
.L47132F:
    mov al, byte ptr [esi]                               # 0047132F
    mov byte ptr [edi], al                               # 00471331
    inc esi                                              # 00471333
    inc edi                                              # 00471334
    msvc_or al, al                                       # 00471335
    jne .L47132F                                         # 00471337
    mov dword ptr [__113E87C], 3                         # 00471339
    push_dword __112CC04                                 # 00471343
    call _sub_4082AD                                     # 00471348
    add esp, 4                                           # 0047134D
    mov dword ptr [__113E87C], 0                         # 00471350
    cmp eax, -1                                          # 0047135A
    je .L4715E4                                          # 0047135D
    mov dword ptr [__9D1CBC], eax                        # 00471363
    mov dword ptr [__113E87C], 3                         # 00471368
    push 0x10                                            # 00471372
    push_dword __112A118                                 # 00471374
    push dword ptr [__9D1CBC]                            # 00471379
    call _sub_4081FE                                     # 0047137F
    add esp, 0xc                                         # 00471384
    mov dword ptr [__113E87C], 0                         # 00471387
    push eax                                             # 00471391
    mov dword ptr [__113E87C], 3                         # 00471392
    push dword ptr [__9D1CBC]                            # 0047139C
    call _sub_408297                                     # 004713A2
    add esp, 4                                           # 004713A7
    mov dword ptr [__113E87C], 0                         # 004713AA
    pop eax                                              # 004713B4
    cmp eax, 0x10                                        # 004713B5
    jne .L4715E4                                         # 004713B8
    mov_offset esi, __112A118                            # 004713BE
    mov ebp, dword ptr [__50D13C]                        # 004713C3
    mov edi, dword ptr [esp]                             # 004713C9
    mov dword ptr [__112A164], edi                       # 004713CC
    mov ecx, 0x10                                        # 004713D2
.L4713D7:
    mov al, byte ptr [esi]                               # 004713D7
    mov byte ptr [edi + ebp], al                         # 004713D9
    inc esi                                              # 004713DC
    inc edi                                              # 004713DD
    loop .L4713D7                                        # 004713DE
    mov_offset esi, __9DA2B2                             # 004713E0
.L4713E5:
    mov al, byte ptr [esi]                               # 004713E5
    mov byte ptr [edi + ebp], al                         # 004713E7
    inc esi                                              # 004713EA
    inc edi                                              # 004713EB
    msvc_or al, al                                       # 004713EC
    jne .L4713E5                                         # 004713EE
    mov dword ptr [edi + ebp], 0xffffffff                # 004713F0
    mov byte ptr [edi + ebp + 4], 0                      # 004713F7
    mov dword ptr [edi + ebp + 5], 0                     # 004713FC
    mov word ptr [edi + ebp + 0x11], 0                   # 00471404
    inc dword ptr [__112A110]                            # 0047140B
    mov byte ptr [__50D161], 1                           # 00471411
    mov_dword_ptr __50D158, __112A17F                    # 00471418
    push ebp                                             # 00471422
    mov_offset ebp, __112A118                            # 00471423
    call _sub_47176D                                     # 00471428
    pop ebp                                              # 0047142D
    mov dword ptr [__50D158], 0xffffffff                 # 0047142E
    mov byte ptr [__50D161], 0                           # 00471438
    dec dword ptr [__112A110]                            # 0047143F
    jb .L4715E4                                          # 00471445
    inc dword ptr [__112A110]                            # 0047144B
    mov eax, dword ptr [__9D9D52]                        # 00471451
    mov dword ptr [edi + ebp], eax                       # 00471456
    add edi, 4                                           # 00471459
    mov eax, 0x2000                                      # 0047145C
    mov esi, dword ptr [eax*4 + __5183FC]                # 00471461
.L471468:
    mov al, byte ptr [esi]                               # 00471468
    mov byte ptr [edi + ebp], al                         # 0047146A
    inc esi                                              # 0047146D
    inc edi                                              # 0047146E
    msvc_or al, al                                       # 0047146F
    jne .L471468                                         # 00471471
    mov eax, dword ptr [__112A168]                       # 00471473
    mov dword ptr [edi + ebp], eax                       # 00471478
    add edi, 4                                           # 0047147B
    mov ecx, dword ptr [__112C211]                       # 0047147E
    mov dword ptr [edi + ebp], ecx                       # 00471484
    mov ecx, dword ptr [__112C215]                       # 00471487
    mov dword ptr [edi + ebp + 4], ecx                   # 0047148D
    add edi, 8                                           # 00471491
    mov_offset esi, __112A17F                            # 00471494
    mov cl, byte ptr [esi]                               # 00471499
    mov byte ptr [edi + ebp], cl                         # 0047149B
    inc esi                                              # 0047149E
    inc edi                                              # 0047149F
    msvc_or cl, cl                                       # 004714A0
    je .L4714BE                                          # 004714A2
.L4714A4:
    msvc_xor ebx, ebx                                    # 004714A4
.L4714A6:
    mov eax, dword ptr [ebx + esi]                       # 004714A6
    mov dword ptr [edi + ebp], eax                       # 004714A9
    add ebx, 4                                           # 004714AC
    add edi, 4                                           # 004714AF
    cmp ebx, 0x10                                        # 004714B2
    jb .L4714A6                                          # 004714B5
    add esi, 0x10                                        # 004714B7
    dec cl                                               # 004714BA
    jne .L4714A4                                         # 004714BC
.L4714BE:
    mov cl, byte ptr [esi]                               # 004714BE
    mov byte ptr [edi + ebp], cl                         # 004714C0
    inc esi                                              # 004714C3
    inc edi                                              # 004714C4
    msvc_or cl, cl                                       # 004714C5
    je .L4714E3                                          # 004714C7
.L4714C9:
    msvc_xor ebx, ebx                                    # 004714C9
.L4714CB:
    mov eax, dword ptr [ebx + esi]                       # 004714CB
    mov dword ptr [edi + ebp], eax                       # 004714CE
    add ebx, 4                                           # 004714D1
    add edi, 4                                           # 004714D4
    cmp ebx, 0x10                                        # 004714D7
    jb .L4714CB                                          # 004714DA
    add esi, 0x10                                        # 004714DC
    dec cl                                               # 004714DF
    jne .L4714C9                                         # 004714E1
.L4714E3:
    mov dword ptr [esp], edi                             # 004714E3
    call _sub_471B95                                     # 004714E6
    mov esi, dword ptr [__112A164]                       # 004714EB
    add esi, dword ptr [__50D13C]                        # 004714F1
    mov_offset edi, __9D1CC8                             # 004714F7
    mov ecx, 0x10                                        # 004714FC
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 00471501
.L471503:
    movsb byte ptr es:[edi], byte ptr [esi]              # 00471503
    cmp byte ptr [esi - 1], 0                            # 00471504
    jne .L471503                                         # 00471508
    movsd dword ptr es:[edi], dword ptr [esi]            # 0047150A
.L47150B:
    movsb byte ptr es:[edi], byte ptr [esi]              # 0047150B
    cmp byte ptr [esi - 1], 0                            # 0047150C
    jne .L47150B                                         # 00471510
    movsd dword ptr es:[edi], dword ptr [esi]            # 00471512
    movsd dword ptr es:[edi], dword ptr [esi]            # 00471513
    movsd dword ptr es:[edi], dword ptr [esi]            # 00471514
    movzx ecx, byte ptr [esi]                            # 00471515
    mov byte ptr [edi], cl                               # 00471518
    inc esi                                              # 0047151A
    inc edi                                              # 0047151B
    imul ecx, ecx, 0x10                                  # 0047151C
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 0047151F
    movzx ecx, byte ptr [esi]                            # 00471521
    mov byte ptr [edi], cl                               # 00471524
    inc esi                                              # 00471526
    inc edi                                              # 00471527
    imul ecx, ecx, 0x10                                  # 00471528
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 0047152B
    sub_offset edi, __9D1CC8                             # 0047152D
    sub dword ptr [esp], edi                             # 00471533
    dec dword ptr [__112A110]                            # 00471536
    mov_offset esi, __9D1CC8                             # 0047153C
    add esi, 0x10                                        # 00471541
.L471544:
    inc esi                                              # 00471544
    cmp byte ptr [esi - 1], 0                            # 00471545
    jne .L471544                                         # 00471549
    add esi, 4                                           # 0047154B
    push edi                                             # 0047154E
    push esi                                             # 0047154F
    mov esi, dword ptr [__50D13C]                        # 00471550
    msvc_xor edx, edx                                    # 00471556
.L471558:
    cmp edx, dword ptr [__112A110]                       # 00471558
    jae .L4715B0                                         # 0047155E
    msvc_mov ebp, esi                                    # 00471560
    add ebp, 0x10                                        # 00471562
.L471565:
    inc ebp                                              # 00471565
    cmp byte ptr [ebp - 1], 0                            # 00471566
    jne .L471565                                         # 0047156A
    add ebp, 4                                           # 0047156C
    mov edi, dword ptr [esp]                             # 0047156F
.L471572:
    mov al, byte ptr [edi]                               # 00471572
    cmp al, byte ptr [ebp]                               # 00471574
    jne .L47157F                                         # 00471577
    inc edi                                              # 00471579
    inc ebp                                              # 0047157A
    msvc_or al, al                                       # 0047157B
    jne .L471572                                         # 0047157D
.L47157F:
    jb .L4715B0                                          # 0047157F
    add esi, 0x10                                        # 00471581
.L471584:
    inc esi                                              # 00471584
    cmp byte ptr [esi - 1], 0                            # 00471585
    jne .L471584                                         # 00471589
    add esi, 4                                           # 0047158B
.L47158E:
    inc esi                                              # 0047158E
    cmp byte ptr [esi - 1], 0                            # 0047158F
    jne .L47158E                                         # 00471593
    add esi, 4                                           # 00471595
    add esi, 8                                           # 00471598
    movzx eax, byte ptr [esi]                            # 0047159B
    inc esi                                              # 0047159E
    imul eax, eax, 0x10                                  # 0047159F
    msvc_add esi, eax                                    # 004715A2
    movzx eax, byte ptr [esi]                            # 004715A4
    inc esi                                              # 004715A7
    imul eax, eax, 0x10                                  # 004715A8
    msvc_add esi, eax                                    # 004715AB
    inc edx                                              # 004715AD
    jmp .L471558                                         # 004715AE
.L4715B0:
    msvc_mov edx, esi                                    # 004715B0
    pop eax                                              # 004715B2
    pop ebp                                              # 004715B3
    mov edi, dword ptr [esp]                             # 004715B4
    add edi, dword ptr [__50D13C]                        # 004715B7
    msvc_mov esi, edi                                    # 004715BD
    msvc_add edi, ebp                                    # 004715BF
    msvc_mov ecx, esi                                    # 004715C1
    msvc_sub ecx, edx                                    # 004715C3
    je .L4715D0                                          # 004715C5
.L4715C7:
    dec edi                                              # 004715C7
    dec esi                                              # 004715C8
    mov al, byte ptr [esi]                               # 004715C9
    mov byte ptr [edi], al                               # 004715CB
    dec ecx                                              # 004715CD
    jne .L4715C7                                         # 004715CE
.L4715D0:
    msvc_mov edi, edx                                    # 004715D0
    mov_offset esi, __9D1CC8                             # 004715D2
    msvc_mov ecx, ebp                                    # 004715D7
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 004715D9
    add dword ptr [esp], ebp                             # 004715DB
    inc dword ptr [__112A110]                            # 004715DE
.L4715E4:
    mov dword ptr [__113E87C], 3                         # 004715E4
    push_dword __9DA286                                  # 004715EE
    push dword ptr [__9DA3C6]                            # 004715F3
    call _sub_40831D                                     # 004715F9
    add esp, 8                                           # 004715FE
    mov dword ptr [__113E87C], 0                         # 00471601
    cmp eax, 1                                           # 0047160B
    je .L47127E                                          # 0047160E
    mov dword ptr [__113E87C], 3                         # 00471614
    push dword ptr [__9DA3C6]                            # 0047161E
    call _sub_40832C                                     # 00471624
    add esp, 4                                           # 00471629
    mov dword ptr [__113E87C], 0                         # 0047162C
.L471636:
    pop esi                                              # 00471636
    pop ecx                                              # 00471637
    call _sub_47237D                                     # 00471638
    mov dword ptr [__112A144], esi                       # 0047163D
    mov ebx, 1                                           # 00471643
    call _sub_4416B5                                     # 00471648
    mov dword ptr [__113E87C], 3                         # 0047164D
    push ebx                                             # 00471657
    call _sub_4082CA                                     # 00471658
    add esp, 4                                           # 0047165D
    mov dword ptr [__113E87C], 0                         # 00471660
    cmp eax, -1                                          # 0047166A
    je .L47170D                                          # 0047166D
    mov dword ptr [__9D1CBC], eax                        # 00471673
    mov eax, dword ptr [__112A110]                       # 00471678
    mov dword ptr [__112A148], eax                       # 0047167D
    mov eax, dword ptr [__112A138]                       # 00471682
    ror eax, 0x18                                        # 00471687
    mov al, 1                                            # 0047168A
    rol eax, 0x18                                        # 0047168C
    mov dword ptr [__112A138], eax                       # 0047168F
    mov dword ptr [__113E87C], 3                         # 00471694
    push 0x14                                            # 0047169E
    push_dword __112A138                                 # 004716A0
    push dword ptr [__9D1CBC]                            # 004716A5
    call _sub_408271                                     # 004716AB
    add esp, 0xc                                         # 004716B0
    mov dword ptr [__113E87C], 0                         # 004716B3
    mov dword ptr [__113E87C], 3                         # 004716BD
    push dword ptr [__112A144]                           # 004716C7
    push dword ptr [__50D13C]                            # 004716CD
    push dword ptr [__9D1CBC]                            # 004716D3
    call _sub_408271                                     # 004716D9
    add esp, 0xc                                         # 004716DE
    mov dword ptr [__113E87C], 0                         # 004716E1
    mov dword ptr [__113E87C], 3                         # 004716EB
    push dword ptr [__9D1CBC]                            # 004716F5
    call _sub_408297                                     # 004716FB
    add esp, 4                                           # 00471700
    mov dword ptr [__113E87C], 0                         # 00471703
.L47170D:
    call _sub_4CF60B                                     # 0047170D
.L471712:
    mov esi, dword ptr [__50D13C]                        # 00471712
    mov ecx, dword ptr [__112A110]                       # 00471718
    msvc_or ecx, ecx                                     # 0047171E
    je .L47175D                                          # 00471720
.L471722:
    test byte ptr [esi], 0xc0                            # 00471722
    jne .L47172E                                         # 00471725
    or byte ptr [__112A17E], 1                           # 00471727
.L47172E:
    add esi, 0x10                                        # 0047172E
.L471731:
    inc esi                                              # 00471731
    cmp byte ptr [esi - 1], 0                            # 00471732
    jne .L471731                                         # 00471736
    add esi, 4                                           # 00471738
.L47173B:
    inc esi                                              # 0047173B
    cmp byte ptr [esi - 1], 0                            # 0047173C
    jne .L47173B                                         # 00471740
    add esi, 4                                           # 00471742
    add esi, 8                                           # 00471745
    movzx eax, byte ptr [esi]                            # 00471748
    inc esi                                              # 0047174B
    imul eax, eax, 0x10                                  # 0047174C
    msvc_add esi, eax                                    # 0047174F
    movzx eax, byte ptr [esi]                            # 00471751
    inc esi                                              # 00471754
    imul eax, eax, 0x10                                  # 00471755
    msvc_add esi, eax                                    # 00471758
    dec ecx                                              # 0047175A
    jne .L471722                                         # 0047175B
.L47175D:
    ret                                                  # 0047175D
.L47175E:
    mov eax, 0x3d                                        # 0047175E
    mov ebx, 0x37                                        # 00471763
    msvc_jmp _sub_4BE621                                 # 00471768

    .global _sub_47176D
_sub_47176D:
    pushal                                               # 0047176D
    mov esi, dword ptr [__50D13C]                        # 0047176E
    mov ecx, dword ptr [__112A110]                       # 00471774
    msvc_or ecx, ecx                                     # 0047177A
    je .L471B1F                                          # 0047177C
.L471782:
    test byte ptr [esi], 0xc0                            # 00471782
    jne .L4717B8                                         # 00471785
    mov eax, dword ptr [ebp]                             # 00471787
    cmp eax, dword ptr [esi]                             # 0047178A
    jne .L471AEC                                         # 0047178C
    mov eax, dword ptr [ebp + 4]                         # 00471792
    cmp eax, dword ptr [esi + 4]                         # 00471795
    jne .L471AEC                                         # 00471798
    mov eax, dword ptr [ebp + 8]                         # 0047179E
    cmp eax, dword ptr [esi + 8]                         # 004717A1
    jne .L471AEC                                         # 004717A4
    mov eax, dword ptr [ebp + 0xc]                       # 004717AA
    cmp eax, dword ptr [esi + 0xc]                       # 004717AD
    jne .L471AEC                                         # 004717B0
    jmp .L4717F5                                         # 004717B6
.L4717B8:
    mov al, byte ptr [esi]                               # 004717B8
    and al, 0xc0                                         # 004717BA
    cmp al, 0x40                                         # 004717BC
    je .L471AEC                                          # 004717BE
    cmp al, 0xc0                                         # 004717C4
    je .L471AEC                                          # 004717C6
    mov al, byte ptr [esi]                               # 004717CC
    mov ah, byte ptr [ebp]                               # 004717CE
    and ax, 0x3f3f                                       # 004717D1
    cmp al, ah                                           # 004717D5
    jne .L471AEC                                         # 004717D7
    mov eax, dword ptr [esi + 4]                         # 004717DD
    cmp eax, dword ptr [ebp + 4]                         # 004717E0
    jne .L471AEC                                         # 004717E3
    mov eax, dword ptr [esi + 8]                         # 004717E9
    cmp eax, dword ptr [ebp + 8]                         # 004717EC
    jne .L471AEC                                         # 004717EF
.L4717F5:
    add esi, 0x10                                        # 004717F5
    mov_offset ebx, __50B635                             # 004717F8
    mov_offset edi, __112CC04                            # 004717FD
.L471802:
    mov al, byte ptr [ebx]                               # 00471802
    mov byte ptr [edi], al                               # 00471804
    inc ebx                                              # 00471806
    inc edi                                              # 00471807
    cmp al, 0x2a                                         # 00471808
    jne .L471802                                         # 0047180A
    dec edi                                              # 0047180C
.L47180D:
    mov al, byte ptr [esi]                               # 0047180D
    mov byte ptr [edi], al                               # 0047180F
    inc esi                                              # 00471811
    inc edi                                              # 00471812
    msvc_or al, al                                       # 00471813
    jne .L47180D                                         # 00471815
    push ecx                                             # 00471817
    push ebp                                             # 00471818
    push esi                                             # 00471819
    mov dword ptr [__113E87C], 3                         # 0047181A
    push_dword __112CC04                                 # 00471824
    call _sub_4082AD                                     # 00471829
    add esp, 4                                           # 0047182E
    mov dword ptr [__113E87C], 0                         # 00471831
    pop esi                                              # 0047183B
    pop ebp                                              # 0047183C
    pop ecx                                              # 0047183D
    cmp eax, -1                                          # 0047183E
    je .L471AF6                                          # 00471841
    mov dword ptr [__9D1CBC], eax                        # 00471847
    push ecx                                             # 0047184C
    push ebp                                             # 0047184D
    push esi                                             # 0047184E
    mov dword ptr [__113E87C], 3                         # 0047184F
    push 0x10                                            # 00471859
    push_dword __112A128                                 # 0047185B
    push dword ptr [__9D1CBC]                            # 00471860
    call _sub_4081FE                                     # 00471866
    add esp, 0xc                                         # 0047186B
    mov dword ptr [__113E87C], 0                         # 0047186E
    pop esi                                              # 00471878
    pop ebp                                              # 00471879
    pop ecx                                              # 0047187A
    test byte ptr [__112A128], 0xc0                      # 0047187B
    jne .L4718C2                                         # 00471882
    mov eax, dword ptr [ebp]                             # 00471884
    cmp eax, dword ptr [__112A128]                       # 00471887
    jne .L471AC8                                         # 0047188D
    mov eax, dword ptr [ebp + 4]                         # 00471893
    cmp eax, dword ptr [__112A12C]                       # 00471896
    jne .L471AC8                                         # 0047189C
    mov eax, dword ptr [ebp + 8]                         # 004718A2
    cmp eax, dword ptr [__112A130]                       # 004718A5
    jne .L471AC8                                         # 004718AB
    mov eax, dword ptr [ebp + 0xc]                       # 004718B1
    cmp eax, dword ptr [__112A134]                       # 004718B4
    jne .L471AC8                                         # 004718BA
    jmp .L4718F2                                         # 004718C0
.L4718C2:
    mov al, byte ptr [__112A128]                         # 004718C2
    mov ah, byte ptr [ebp]                               # 004718C7
    and ax, 0x3f3f                                       # 004718CA
    cmp al, ah                                           # 004718CE
    jne .L471AC8                                         # 004718D0
    mov eax, dword ptr [__112A12C]                       # 004718D6
    cmp eax, dword ptr [ebp + 4]                         # 004718DB
    jne .L471AC8                                         # 004718DE
    mov eax, dword ptr [__112A130]                       # 004718E4
    cmp eax, dword ptr [ebp + 8]                         # 004718E9
    jne .L471AC8                                         # 004718EC
.L4718F2:
    mov ebx, dword ptr [esi]                             # 004718F2
    cmp ebx, -1                                          # 004718F4
    je .L47194C                                          # 004718F7
    mov dword ptr [__113E87C], 4                         # 004718F9
    push ebx                                             # 00471903
    call _sub_406BF7                                     # 00471904
    add esp, 4                                           # 00471909
    mov dword ptr [__113E87C], 0                         # 0047190C
    cmp eax, -1                                          # 00471916
    je .L471B29                                          # 00471919
    push eax                                             # 0047191F
    msvc_mov esi, eax                                    # 00471920
    call _sub_44313D                                     # 00471922
    mov dword ptr [__113E87C], 3                         # 00471927
    push dword ptr [__9D1CBC]                            # 00471931
    call _sub_408297                                     # 00471937
    add esp, 4                                           # 0047193C
    mov dword ptr [__113E87C], 0                         # 0047193F
    pop ebx                                              # 00471949
    jmp .L4719C6                                         # 0047194A
.L47194C:
    mov dword ptr [__113E87C], 4                         # 0047194C
    push_dword 0x400000                                  # 00471956
    call _sub_406BF7                                     # 0047195B
    add esp, 4                                           # 00471960
    mov dword ptr [__113E87C], 0                         # 00471963
    cmp eax, -1                                          # 0047196D
    je .L471B29                                          # 00471970
    push eax                                             # 00471976
    msvc_mov esi, eax                                    # 00471977
    call _sub_44313D                                     # 00471979
    mov dword ptr [__113E87C], 3                         # 0047197E
    push dword ptr [__9D1CBC]                            # 00471988
    call _sub_408297                                     # 0047198E
    add esp, 4                                           # 00471993
    mov dword ptr [__113E87C], 0                         # 00471996
    pop ecx                                              # 004719A0
    mov dword ptr [__113E87C], 3                         # 004719A1
    push dword ptr [__9D9D52]                            # 004719AB
    push ecx                                             # 004719B1
    call _sub_406C02                                     # 004719B2
    add esp, 8                                           # 004719B7
    mov dword ptr [__113E87C], 0                         # 004719BA
    msvc_mov ebx, eax                                    # 004719C4
.L4719C6:
    mov eax, 0xf369a75b                                  # 004719C6
    mov_offset esi, __112A128                            # 004719CB
    xor al, byte ptr [esi]                               # 004719D0
    rol eax, 0xb                                         # 004719D2
    xor al, byte ptr [esi + 4]                           # 004719D5
    rol eax, 0xb                                         # 004719D8
    xor al, byte ptr [esi + 5]                           # 004719DB
    rol eax, 0xb                                         # 004719DE
    xor al, byte ptr [esi + 6]                           # 004719E1
    rol eax, 0xb                                         # 004719E4
    xor al, byte ptr [esi + 7]                           # 004719E7
    rol eax, 0xb                                         # 004719EA
    xor al, byte ptr [esi + 8]                           # 004719ED
    rol eax, 0xb                                         # 004719F0
    xor al, byte ptr [esi + 9]                           # 004719F3
    rol eax, 0xb                                         # 004719F6
    xor al, byte ptr [esi + 0xa]                         # 004719F9
    rol eax, 0xb                                         # 004719FC
    xor al, byte ptr [esi + 0xb]                         # 004719FF
    rol eax, 0xb                                         # 00471A02
    msvc_mov esi, ebx                                    # 00471A05
    mov ecx, dword ptr [__9D9D52]                        # 00471A07
.L471A0D:
    xor al, byte ptr [esi]                               # 00471A0D
    rol eax, 0xb                                         # 00471A0F
    inc esi                                              # 00471A12
    dec ecx                                              # 00471A13
    jne .L471A0D                                         # 00471A14
    cmp eax, dword ptr [__112A134]                       # 00471A16
    jne .L471B6F                                         # 00471A1C
    mov cl, byte ptr [__112A128]                         # 00471A22
    and ecx, 0x3f                                        # 00471A28
    push ebx                                             # 00471A2B
    msvc_mov esi, ebx                                    # 00471A2C
    mov al, 2                                            # 00471A2E
    call dword ptr [ecx*4 + _paint_entry_table]          # 00471A30
    pop ebx                                              # 00471A37
    jb .L471B66                                          # 00471A38
    push dword ptr [__50D154]                            # 00471A3E
    mov dword ptr [__50D154], 0x101a                     # 00471A44
    msvc_xor ecx, ecx                                    # 00471A4E
    mov dword ptr [__50D15C], ebx                        # 00471A50
    mov_offset edx, __112A16C                            # 00471A56
    mov eax, dword ptr [__112A128]                       # 00471A5B
    mov dword ptr [edx], eax                             # 00471A60
    mov eax, dword ptr [__112A12C]                       # 00471A62
    mov dword ptr [edx + 4], eax                         # 00471A67
    mov eax, dword ptr [__112A130]                       # 00471A6A
    mov dword ptr [edx + 8], eax                         # 00471A6F
    mov eax, dword ptr [__112A134]                       # 00471A72
    mov dword ptr [edx + 0xc], eax                       # 00471A77
    mov bp, word ptr [__112A128]                         # 00471A7A
    and ebp, 0x3f                                        # 00471A81
    mov byte ptr [__50D160], 0xff                        # 00471A84
    mov byte ptr [__50D161], 1                           # 00471A8B
    msvc_mov esi, ebx                                    # 00471A92
    msvc_mov ebx, ecx                                    # 00471A94
    msvc_xor al, al                                      # 00471A96
    msvc_mov ecx, ebp                                    # 00471A98
    call dword ptr [ecx*4 + _paint_entry_table]          # 00471A9A
    mov byte ptr [__50D160], 0                           # 00471AA1
    mov byte ptr [__50D161], 0                           # 00471AA8
    mov eax, dword ptr [__50D154]                        # 00471AAF
    sub eax, 0x101a                                      # 00471AB4
    mov dword ptr [__112A168], eax                       # 00471AB9
    pop dword ptr [__50D154]                             # 00471ABE
    popal                                                # 00471AC4
    msvc_and eax, eax                                    # 00471AC5
    ret                                                  # 00471AC7
.L471AC8:
    mov dword ptr [__113E87C], 3                         # 00471AC8
    push dword ptr [__9D1CBC]                            # 00471AD2
    call _sub_408297                                     # 00471AD8
    add esp, 4                                           # 00471ADD
    mov dword ptr [__113E87C], 0                         # 00471AE0
    jmp .L471AF6                                         # 00471AEA
.L471AEC:
    add esi, 0x10                                        # 00471AEC
.L471AEF:
    inc esi                                              # 00471AEF
    cmp byte ptr [esi - 1], 0                            # 00471AF0
    jne .L471AEF                                         # 00471AF4
.L471AF6:
    add esi, 4                                           # 00471AF6
.L471AF9:
    inc esi                                              # 00471AF9
    cmp byte ptr [esi - 1], 0                            # 00471AFA
    jne .L471AF9                                         # 00471AFE
    add esi, 4                                           # 00471B00
    add esi, 8                                           # 00471B03
    movzx eax, byte ptr [esi]                            # 00471B06
    inc esi                                              # 00471B09
    imul eax, eax, 0x10                                  # 00471B0A
    msvc_add esi, eax                                    # 00471B0D
    movzx eax, byte ptr [esi]                            # 00471B0F
    inc esi                                              # 00471B12
    imul eax, eax, 0x10                                  # 00471B13
    msvc_add esi, eax                                    # 00471B16
    dec ecx                                              # 00471B18
    jne .L471782                                         # 00471B19
.L471B1F:
    mov byte ptr [__112A17D], 0                          # 00471B1F
.L471B26:
    popal                                                # 00471B26
    stc                                                  # 00471B27
    ret                                                  # 00471B28
.L471B29:
    mov dword ptr [__113E87C], 3                         # 00471B29
    push dword ptr [__9D1CBC]                            # 00471B33
    call _sub_408297                                     # 00471B39
    add esp, 4                                           # 00471B3E
    mov dword ptr [__113E87C], 0                         # 00471B41
    mov byte ptr [__112A17D], 1                          # 00471B4B
    jmp .L471B26                                         # 00471B52
.L471B54:
    mov byte ptr [__112A17D], 5                          # 00471B54
    jmp .L471B76                                         # 00471B5B
.L471B5D:
    mov byte ptr [__112A17D], 4                          # 00471B5D
    jmp .L471B76                                         # 00471B64
.L471B66:
    mov byte ptr [__112A17D], 3                          # 00471B66
    jmp .L471B76                                         # 00471B6D
.L471B6F:
    mov byte ptr [__112A17D], 2                          # 00471B6F
.L471B76:
    mov dword ptr [__113E87C], 4                         # 00471B76
    push ebx                                             # 00471B80
    call _sub_406C12                                     # 00471B81
    add esp, 4                                           # 00471B86
    mov dword ptr [__113E87C], 0                         # 00471B89
    jmp .L471B26                                         # 00471B93

    .global _sub_471B95
_sub_471B95:
    pushal                                               # 00471B95
    mov ecx, 0xffffffff                                  # 00471B96
    xchg dword ptr [__50D15C], ecx                       # 00471B9B
    cmp ecx, -1                                          # 00471BA1
    je .L471BC3                                          # 00471BA4
    mov dword ptr [__113E87C], 4                         # 00471BA6
    push ecx                                             # 00471BB0
    call _sub_406C12                                     # 00471BB1
    add esp, 4                                           # 00471BB6
    mov dword ptr [__113E87C], 0                         # 00471BB9
.L471BC3:
    popal                                                # 00471BC3
    ret                                                  # 00471BC4

    .global _sub_471BC5
_sub_471BC5:
    pushal                                               # 00471BC5
    mov dword ptr [__112A108], ecx                       # 00471BC6
    jmp .L471BD9                                         # 00471BCC

    .global _sub_471BCE
_sub_471BCE:
    pushal                                               # 00471BCE
    mov dword ptr [__112A108], 0xffffffff                # 00471BCF
.L471BD9:
    mov esi, dword ptr [__50D13C]                        # 00471BD9
    mov ecx, dword ptr [__112A110]                       # 00471BDF
    msvc_or ecx, ecx                                     # 00471BE5
    je .L471F82                                          # 00471BE7
.L471BED:
    test byte ptr [esi], 0xc0                            # 00471BED
    jne .L471C23                                         # 00471BF0
    mov eax, dword ptr [ebp]                             # 00471BF2
    cmp eax, dword ptr [esi]                             # 00471BF5
    jne .L471F4F                                         # 00471BF7
    mov eax, dword ptr [ebp + 4]                         # 00471BFD
    cmp eax, dword ptr [esi + 4]                         # 00471C00
    jne .L471F4F                                         # 00471C03
    mov eax, dword ptr [ebp + 8]                         # 00471C09
    cmp eax, dword ptr [esi + 8]                         # 00471C0C
    jne .L471F4F                                         # 00471C0F
    mov eax, dword ptr [ebp + 0xc]                       # 00471C15
    cmp eax, dword ptr [esi + 0xc]                       # 00471C18
    jne .L471F4F                                         # 00471C1B
    jmp .L471C4C                                         # 00471C21
.L471C23:
    mov al, byte ptr [esi]                               # 00471C23
    mov ah, byte ptr [ebp]                               # 00471C25
    and ax, 0x3f3f                                       # 00471C28
    cmp al, ah                                           # 00471C2C
    jne .L471F4F                                         # 00471C2E
    mov eax, dword ptr [esi + 4]                         # 00471C34
    cmp eax, dword ptr [ebp + 4]                         # 00471C37
    jne .L471F4F                                         # 00471C3A
    mov eax, dword ptr [esi + 8]                         # 00471C40
    cmp eax, dword ptr [ebp + 8]                         # 00471C43
    jne .L471F4F                                         # 00471C46
.L471C4C:
    add esi, 0x10                                        # 00471C4C
    mov_offset ebx, __50B635                             # 00471C4F
    mov_offset edi, __112CC04                            # 00471C54
.L471C59:
    mov al, byte ptr [ebx]                               # 00471C59
    mov byte ptr [edi], al                               # 00471C5B
    inc ebx                                              # 00471C5D
    inc edi                                              # 00471C5E
    cmp al, 0x2a                                         # 00471C5F
    jne .L471C59                                         # 00471C61
    dec edi                                              # 00471C63
.L471C64:
    mov al, byte ptr [esi]                               # 00471C64
    mov byte ptr [edi], al                               # 00471C66
    inc esi                                              # 00471C68
    inc edi                                              # 00471C69
    msvc_or al, al                                       # 00471C6A
    jne .L471C64                                         # 00471C6C
    push ecx                                             # 00471C6E
    push ebp                                             # 00471C6F
    push esi                                             # 00471C70
    mov dword ptr [__113E87C], 3                         # 00471C71
    push_dword __112CC04                                 # 00471C7B
    call _sub_4082AD                                     # 00471C80
    add esp, 4                                           # 00471C85
    mov dword ptr [__113E87C], 0                         # 00471C88
    pop esi                                              # 00471C92
    pop ebp                                              # 00471C93
    pop ecx                                              # 00471C94
    cmp eax, -1                                          # 00471C95
    je .L471F59                                          # 00471C98
    mov dword ptr [__9D1CBC], eax                        # 00471C9E
    push ecx                                             # 00471CA3
    push ebp                                             # 00471CA4
    push esi                                             # 00471CA5
    mov dword ptr [__113E87C], 3                         # 00471CA6
    push 0x10                                            # 00471CB0
    push_dword __112A128                                 # 00471CB2
    push dword ptr [__9D1CBC]                            # 00471CB7
    call _sub_4081FE                                     # 00471CBD
    add esp, 0xc                                         # 00471CC2
    mov dword ptr [__113E87C], 0                         # 00471CC5
    pop esi                                              # 00471CCF
    pop ebp                                              # 00471CD0
    pop ecx                                              # 00471CD1
    test byte ptr [__112A128], 0xc0                      # 00471CD2
    jne .L471D19                                         # 00471CD9
    mov eax, dword ptr [ebp]                             # 00471CDB
    cmp eax, dword ptr [__112A128]                       # 00471CDE
    jne .L471F2B                                         # 00471CE4
    mov eax, dword ptr [ebp + 4]                         # 00471CEA
    cmp eax, dword ptr [__112A12C]                       # 00471CED
    jne .L471F2B                                         # 00471CF3
    mov eax, dword ptr [ebp + 8]                         # 00471CF9
    cmp eax, dword ptr [__112A130]                       # 00471CFC
    jne .L471F2B                                         # 00471D02
    mov eax, dword ptr [ebp + 0xc]                       # 00471D08
    cmp eax, dword ptr [__112A134]                       # 00471D0B
    jne .L471F2B                                         # 00471D11
    jmp .L471D49                                         # 00471D17
.L471D19:
    mov al, byte ptr [__112A128]                         # 00471D19
    mov ah, byte ptr [ebp]                               # 00471D1E
    and ax, 0x3f3f                                       # 00471D21
    cmp al, ah                                           # 00471D25
    jne .L471F2B                                         # 00471D27
    mov eax, dword ptr [__112A12C]                       # 00471D2D
    cmp eax, dword ptr [ebp + 4]                         # 00471D32
    jne .L471F2B                                         # 00471D35
    mov eax, dword ptr [__112A130]                       # 00471D3B
    cmp eax, dword ptr [ebp + 8]                         # 00471D40
    jne .L471F2B                                         # 00471D43
.L471D49:
    mov ebx, dword ptr [esi]                             # 00471D49
    cmp ebx, -1                                          # 00471D4B
    je .L471DA3                                          # 00471D4E
    mov dword ptr [__113E87C], 4                         # 00471D50
    push ebx                                             # 00471D5A
    call _sub_406BF7                                     # 00471D5B
    add esp, 4                                           # 00471D60
    mov dword ptr [__113E87C], 0                         # 00471D63
    cmp eax, -1                                          # 00471D6D
    je .L471F8C                                          # 00471D70
    push eax                                             # 00471D76
    msvc_mov esi, eax                                    # 00471D77
    call _sub_44313D                                     # 00471D79
    mov dword ptr [__113E87C], 3                         # 00471D7E
    push dword ptr [__9D1CBC]                            # 00471D88
    call _sub_408297                                     # 00471D8E
    add esp, 4                                           # 00471D93
    mov dword ptr [__113E87C], 0                         # 00471D96
    pop ebx                                              # 00471DA0
    jmp .L471E1D                                         # 00471DA1
.L471DA3:
    mov dword ptr [__113E87C], 4                         # 00471DA3
    push_dword 0x400000                                  # 00471DAD
    call _sub_406BF7                                     # 00471DB2
    add esp, 4                                           # 00471DB7
    mov dword ptr [__113E87C], 0                         # 00471DBA
    cmp eax, -1                                          # 00471DC4
    je .L471F8C                                          # 00471DC7
    push eax                                             # 00471DCD
    msvc_mov esi, eax                                    # 00471DCE
    call _sub_44313D                                     # 00471DD0
    mov dword ptr [__113E87C], 3                         # 00471DD5
    push dword ptr [__9D1CBC]                            # 00471DDF
    call _sub_408297                                     # 00471DE5
    add esp, 4                                           # 00471DEA
    mov dword ptr [__113E87C], 0                         # 00471DED
    pop ecx                                              # 00471DF7
    mov dword ptr [__113E87C], 3                         # 00471DF8
    push dword ptr [__9D9D52]                            # 00471E02
    push ecx                                             # 00471E08
    call _sub_406C02                                     # 00471E09
    add esp, 8                                           # 00471E0E
    mov dword ptr [__113E87C], 0                         # 00471E11
    msvc_mov ebx, eax                                    # 00471E1B
.L471E1D:
    mov eax, 0xf369a75b                                  # 00471E1D
    mov_offset esi, __112A128                            # 00471E22
    xor al, byte ptr [esi]                               # 00471E27
    rol eax, 0xb                                         # 00471E29
    xor al, byte ptr [esi + 4]                           # 00471E2C
    rol eax, 0xb                                         # 00471E2F
    xor al, byte ptr [esi + 5]                           # 00471E32
    rol eax, 0xb                                         # 00471E35
    xor al, byte ptr [esi + 6]                           # 00471E38
    rol eax, 0xb                                         # 00471E3B
    xor al, byte ptr [esi + 7]                           # 00471E3E
    rol eax, 0xb                                         # 00471E41
    xor al, byte ptr [esi + 8]                           # 00471E44
    rol eax, 0xb                                         # 00471E47
    xor al, byte ptr [esi + 9]                           # 00471E4A
    rol eax, 0xb                                         # 00471E4D
    xor al, byte ptr [esi + 0xa]                         # 00471E50
    rol eax, 0xb                                         # 00471E53
    xor al, byte ptr [esi + 0xb]                         # 00471E56
    rol eax, 0xb                                         # 00471E59
    msvc_mov esi, ebx                                    # 00471E5C
    mov ecx, dword ptr [__9D9D52]                        # 00471E5E
.L471E64:
    xor al, byte ptr [esi]                               # 00471E64
    rol eax, 0xb                                         # 00471E66
    inc esi                                              # 00471E69
    dec ecx                                              # 00471E6A
    jne .L471E64                                         # 00471E6B
    cmp eax, dword ptr [__112A134]                       # 00471E6D
    jne .L471FD2                                         # 00471E73
    mov cl, byte ptr [__112A128]                         # 00471E79
    and ecx, 0x3f                                        # 00471E7F
    push ebx                                             # 00471E82
    msvc_mov esi, ebx                                    # 00471E83
    mov al, 2                                            # 00471E85
    call dword ptr [ecx*4 + _paint_entry_table]          # 00471E87
    pop ebx                                              # 00471E8E
    jb .L471FC9                                          # 00471E8F
    cmp dword ptr [__50D154], 0x4101a                    # 00471E95
    jae .L471FC0                                         # 00471E9F
    mov bp, word ptr [__112A128]                         # 00471EA5
    and ebp, 0x3f                                        # 00471EAC
    mov esi, dword ptr [ebp*8 + _object_repository]      # 00471EAF
    mov ecx, dword ptr [__112A108]                       # 00471EB6
    cmp ecx, -1                                          # 00471EBC
    jne .L471ED9                                         # 00471EBF
    msvc_xor ecx, ecx                                    # 00471EC1
.L471EC3:
    cmp dword ptr [esi + ecx*4], -1                      # 00471EC3
    je .L471ED9                                          # 00471EC7
    inc ecx                                              # 00471EC9
    cmp cx, word ptr [ebp*2 + _object_entry_group_counts] # 00471ECA
    jb .L471EC3                                          # 00471ED2
    msvc_jmp .L471FB7                                    # 00471ED4
.L471ED9:
    mov dword ptr [esi + ecx*4], ebx                     # 00471ED9
    msvc_mov edx, ecx                                    # 00471EDC
    imul edx, edx, 0x14                                  # 00471EDE
    add edx, dword ptr [ebp*8 + _object_repository+4]    # 00471EE1
    mov eax, dword ptr [__112A128]                       # 00471EE8
    mov dword ptr [edx], eax                             # 00471EED
    mov eax, dword ptr [__112A12C]                       # 00471EEF
    mov dword ptr [edx + 4], eax                         # 00471EF4
    mov eax, dword ptr [__112A130]                       # 00471EF7
    mov dword ptr [edx + 8], eax                         # 00471EFC
    mov eax, dword ptr [__112A134]                       # 00471EFF
    mov dword ptr [edx + 0xc], eax                       # 00471F04
    mov eax, dword ptr [__9D9D52]                        # 00471F07
    mov dword ptr [edx + 0x10], eax                      # 00471F0C
    cmp byte ptr [__50D161], 0                           # 00471F0F
    je .L471F27                                          # 00471F16
    msvc_mov esi, ebx                                    # 00471F18
    msvc_mov ebx, ecx                                    # 00471F1A
    msvc_xor al, al                                      # 00471F1C
    msvc_mov ecx, ebp                                    # 00471F1E
    call dword ptr [ecx*4 + _paint_entry_table]          # 00471F20
.L471F27:
    popal                                                # 00471F27
    msvc_and eax, eax                                    # 00471F28
    ret                                                  # 00471F2A
.L471F2B:
    mov dword ptr [__113E87C], 3                         # 00471F2B
    push dword ptr [__9D1CBC]                            # 00471F35
    call _sub_408297                                     # 00471F3B
    add esp, 4                                           # 00471F40
    mov dword ptr [__113E87C], 0                         # 00471F43
    jmp .L471F59                                         # 00471F4D
.L471F4F:
    add esi, 0x10                                        # 00471F4F
.L471F52:
    inc esi                                              # 00471F52
    cmp byte ptr [esi - 1], 0                            # 00471F53
    jne .L471F52                                         # 00471F57
.L471F59:
    add esi, 4                                           # 00471F59
.L471F5C:
    inc esi                                              # 00471F5C
    cmp byte ptr [esi - 1], 0                            # 00471F5D
    jne .L471F5C                                         # 00471F61
    add esi, 4                                           # 00471F63
    add esi, 8                                           # 00471F66
    movzx eax, byte ptr [esi]                            # 00471F69
    inc esi                                              # 00471F6C
    imul eax, eax, 0x10                                  # 00471F6D
    msvc_add esi, eax                                    # 00471F70
    movzx eax, byte ptr [esi]                            # 00471F72
    inc esi                                              # 00471F75
    imul eax, eax, 0x10                                  # 00471F76
    msvc_add esi, eax                                    # 00471F79
    dec ecx                                              # 00471F7B
    jne .L471BED                                         # 00471F7C
.L471F82:
    mov byte ptr [__112A17D], 0                          # 00471F82
.L471F89:
    popal                                                # 00471F89
    stc                                                  # 00471F8A
    ret                                                  # 00471F8B
.L471F8C:
    mov dword ptr [__113E87C], 3                         # 00471F8C
    push dword ptr [__9D1CBC]                            # 00471F96
    call _sub_408297                                     # 00471F9C
    add esp, 4                                           # 00471FA1
    mov dword ptr [__113E87C], 0                         # 00471FA4
    mov byte ptr [__112A17D], 1                          # 00471FAE
    jmp .L471F89                                         # 00471FB5
.L471FB7:
    mov byte ptr [__112A17D], 5                          # 00471FB7
    jmp .L471FD9                                         # 00471FBE
.L471FC0:
    mov byte ptr [__112A17D], 4                          # 00471FC0
    jmp .L471FD9                                         # 00471FC7
.L471FC9:
    mov byte ptr [__112A17D], 3                          # 00471FC9
    jmp .L471FD9                                         # 00471FD0
.L471FD2:
    mov byte ptr [__112A17D], 2                          # 00471FD2
.L471FD9:
    mov dword ptr [__113E87C], 4                         # 00471FD9
    push ebx                                             # 00471FE3
    call _sub_406C12                                     # 00471FE4
    add esp, 4                                           # 00471FE9
    mov dword ptr [__113E87C], 0                         # 00471FEC
    jmp .L471F89                                         # 00471FF6

    .global _sub_471FF8
_sub_471FF8:
    pushal                                               # 00471FF8
    call _sub_4720EB                                     # 00471FF9
    jb .L47202F                                          # 00471FFE
    push edi                                             # 00472000
    mov al, 1                                            # 00472001
    call dword ptr [ecx*4 + _paint_entry_table]          # 00472003
    pop edi                                              # 0047200A
    mov ecx, 0xffffffff                                  # 0047200B
    xchg dword ptr [edi], ecx                            # 00472010
    mov dword ptr [__113E87C], 4                         # 00472012
    push ecx                                             # 0047201C
    call _sub_406C12                                     # 0047201D
    add esp, 4                                           # 00472022
    mov dword ptr [__113E87C], 0                         # 00472025
.L47202F:
    popal                                                # 0047202F
    ret                                                  # 00472030

    .global _sub_472031
_sub_472031:
    pushal                                               # 00472031
    msvc_xor ecx, ecx                                    # 00472032
.L472034:
    mov edi, dword ptr [ecx*8 + _object_repository]      # 00472034
    msvc_xor ebx, ebx                                    # 0047203B
.L47203D:
    cmp dword ptr [edi + ebx*4], -1                      # 0047203D
    je .L472054                                          # 00472041
    msvc_mov ebp, ebx                                    # 00472043
    imul ebp, ebp, 0x14                                  # 00472045
    add ebp, dword ptr [ecx*8 + _object_repository+4]    # 00472048
    call _sub_471FF8                                     # 0047204F
.L472054:
    inc ebx                                              # 00472054
    cmp bx, word ptr [ecx*2 + _object_entry_group_counts] # 00472055
    jb .L47203D                                          # 0047205D
    inc ecx                                              # 0047205F
    cmp ecx, 0x22                                        # 00472060
    jb .L472034                                          # 00472063
    call _sub_47237D                                     # 00472065
    popal                                                # 0047206A
    ret                                                  # 0047206B

    .global _sub_47206C
_sub_47206C:
    call _sub_4720EB                                     # 0047206C
    jae .L4720E8                                         # 00472071
    mov bl, byte ptr [ebp]                               # 00472073
    and ebx, 0x3f                                        # 00472076
    movzx ecx, word ptr [ebx*2 + _object_entry_group_counts] # 00472079
    mov edi, dword ptr [ebx*8 + _object_repository]      # 00472081
    mov esi, dword ptr [ebx*8 + _object_repository+4]    # 00472088
.L47208F:
    cmp dword ptr [edi], -1                              # 0047208F
    je .L4720CD                                          # 00472092
    test byte ptr [esi], 0xc0                            # 00472094
    jne .L4720CD                                         # 00472097
    mov al, byte ptr [esi]                               # 00472099
    mov ah, byte ptr [ebp]                               # 0047209B
    and ax, 0x3f3f                                       # 0047209E
    cmp al, ah                                           # 004720A2
    jne .L4720CD                                         # 004720A4
    mov eax, dword ptr [esi + 4]                         # 004720A6
    cmp eax, dword ptr [ebp + 4]                         # 004720A9
    jne .L4720CD                                         # 004720AC
    mov eax, dword ptr [esi + 8]                         # 004720AE
    cmp eax, dword ptr [ebp + 8]                         # 004720B1
    jne .L4720CD                                         # 004720B4
    push edx                                             # 004720B6
    mov eax, dword ptr [esi + 1]                         # 004720B7
    mov edx, dword ptr [ebp + 1]                         # 004720BA
    and eax, 0xfffe00                                    # 004720BD
    and edx, 0xfffe00                                    # 004720C2
    msvc_cmp eax, edx                                    # 004720C8
    pop edx                                              # 004720CA
    je .L4720D8                                          # 004720CB
.L4720CD:
    add edi, 4                                           # 004720CD
    add esi, 0x14                                        # 004720D0
    dec ecx                                              # 004720D3
    jne .L47208F                                         # 004720D4
    stc                                                  # 004720D6
    ret                                                  # 004720D7
.L4720D8:
    mov esi, dword ptr [edi]                             # 004720D8
    msvc_mov ecx, ebx                                    # 004720DA
    msvc_mov ebx, edi                                    # 004720DC
    sub ebx, dword ptr [ecx*8 + _object_repository]      # 004720DE
    shr ebx, 2                                           # 004720E5
.L4720E8:
    msvc_and eax, eax                                    # 004720E8
    ret                                                  # 004720EA

    .global _sub_4720EB
_sub_4720EB:
    mov bl, byte ptr [ebp]                               # 004720EB
    cmp bl, 0xff                                         # 004720EE
    je .L47215D                                          # 004720F1
    and ebx, 0x3f                                        # 004720F3
    movzx ecx, word ptr [ebx*2 + _object_entry_group_counts] # 004720F6
    mov edi, dword ptr [ebx*8 + _object_repository]      # 004720FE
    mov esi, dword ptr [ebx*8 + _object_repository+4]    # 00472105
.L47210C:
    cmp dword ptr [edi], -1                              # 0047210C
    je .L472154                                          # 0047210F
    test byte ptr [esi], 0xc0                            # 00472111
    jne .L472137                                         # 00472114
    mov eax, dword ptr [ebp]                             # 00472116
    cmp eax, dword ptr [esi]                             # 00472119
    jne .L472154                                         # 0047211B
    mov eax, dword ptr [ebp + 4]                         # 0047211D
    cmp eax, dword ptr [esi + 4]                         # 00472120
    jne .L472154                                         # 00472123
    mov eax, dword ptr [ebp + 8]                         # 00472125
    cmp eax, dword ptr [esi + 8]                         # 00472128
    jne .L472154                                         # 0047212B
    mov eax, dword ptr [ebp + 0xc]                       # 0047212D
    cmp eax, dword ptr [esi + 0xc]                       # 00472130
    jne .L472154                                         # 00472133
    jmp .L47215F                                         # 00472135
.L472137:
    mov al, byte ptr [esi]                               # 00472137
    mov ah, byte ptr [ebp]                               # 00472139
    and ax, 0x3f3f                                       # 0047213C
    cmp al, ah                                           # 00472140
    jne .L472154                                         # 00472142
    mov eax, dword ptr [esi + 4]                         # 00472144
    cmp eax, dword ptr [ebp + 4]                         # 00472147
    jne .L472154                                         # 0047214A
    mov eax, dword ptr [esi + 8]                         # 0047214C
    cmp eax, dword ptr [ebp + 8]                         # 0047214F
    je .L47215F                                          # 00472152
.L472154:
    add edi, 4                                           # 00472154
    add esi, 0x14                                        # 00472157
    dec ecx                                              # 0047215A
    jne .L47210C                                         # 0047215B
.L47215D:
    stc                                                  # 0047215D
    ret                                                  # 0047215E
.L47215F:
    mov esi, dword ptr [edi]                             # 0047215F
    msvc_mov ecx, ebx                                    # 00472161
    msvc_mov ebx, edi                                    # 00472163
    sub ebx, dword ptr [ecx*8 + _object_repository]      # 00472165
    shr ebx, 2                                           # 0047216C
    msvc_and eax, eax                                    # 0047216F
    ret                                                  # 00472171

    .global _sub_472172
_sub_472172:
    push ebx                                             # 00472172
    push ecx                                             # 00472173
    push edx                                             # 00472174
    push edi                                             # 00472175
    msvc_xor ebx, ebx                                    # 00472176
.L472178:
    mov al, byte ptr [ebp]                               # 00472178
    inc ebp                                              # 0047217B
    cmp al, 0xff                                         # 0047217C
    je .L4721B0                                          # 0047217E
    cmp al, 1                                            # 00472180
    jne .L472189                                         # 00472182
    msvc_mov edi, ebp                                    # 00472184
    or ebx, 1                                            # 00472186
.L472189:
    cmp al, 0                                            # 00472189
    jne .L47219A                                         # 0047218B
    test ebx, 1                                          # 0047218D
    jne .L47219A                                         # 00472193
    msvc_mov edi, ebp                                    # 00472195
    or ebx, 2                                            # 00472197
.L47219A:
    test ebx, 7                                          # 0047219A
    jne .L4721A7                                         # 004721A0
    msvc_mov edi, ebp                                    # 004721A2
    or ebx, 4                                            # 004721A4
.L4721A7:
    inc ebp                                              # 004721A7
    cmp byte ptr [ebp - 1], 0                            # 004721A8
    jne .L4721A7                                         # 004721AC
    jmp .L472178                                         # 004721AE
.L4721B0:
    cmp byte ptr [__50D160], 0                           # 004721B0
    jne .L472202                                         # 004721B7
    mov eax, 0x2010                                      # 004721B9
    msvc_xor ebx, ebx                                    # 004721BE
.L4721C0:
    cmp ebx, dword ptr [esp + 8]                         # 004721C0
    je .L4721DE                                          # 004721C4
    movzx ecx, word ptr [ebx*2 + _object_entry_group_counts] # 004721C6
    movzx edx, word ptr [ebx*2 + __4FE294]               # 004721CE
    imul ecx, edx                                        # 004721D6
    msvc_add eax, ecx                                    # 004721D9
    inc ebx                                              # 004721DB
    jmp .L4721C0                                         # 004721DC
.L4721DE:
    movzx ecx, word ptr [ebx*2 + __4FE294]               # 004721DE
    imul ecx, dword ptr [esp + 0xc]                      # 004721E6
    msvc_add eax, ecx                                    # 004721EB
    mov dword ptr [__112A160], eax                       # 004721ED
    add eax, dword ptr [esp + 4]                         # 004721F2
    mov dword ptr [eax*4 + __5183FC], edi                # 004721F6
    pop edi                                              # 004721FD
    pop edx                                              # 004721FE
    pop ecx                                              # 004721FF
    pop ebx                                              # 00472200
    ret                                                  # 00472201
.L472202:
    mov eax, 0x2000                                      # 00472202
    add eax, dword ptr [esp + 4]                         # 00472207
    mov dword ptr [eax*4 + __5183FC], edi                # 0047220B
    pop edi                                              # 00472212
    pop edx                                              # 00472213
    pop ecx                                              # 00472214
    pop ebx                                              # 00472215
    ret                                                  # 00472216

    .global _sub_472217
_sub_472217:
    inc ebp                                              # 00472217
    cmp byte ptr [ebp - 1], 0xff                         # 00472218
    jne _sub_472217                                      # 0047221C
    ret                                                  # 0047221E

    .global _sub_47221F
_sub_47221F:
    push ebx                                             # 0047221F
    push ecx                                             # 00472220
    push edx                                             # 00472221
    push edi                                             # 00472222
    push esi                                             # 00472223
    mov eax, dword ptr [__50D154]                        # 00472224
    push eax                                             # 00472229
    mov ecx, dword ptr [ebp]                             # 0047222A
    msvc_mov ebx, ecx                                    # 0047222D
    msvc_add ebx, eax                                    # 0047222F
    mov dword ptr [__50D154], ebx                        # 00472231
    msvc_mov ebx, ecx                                    # 00472237
    imul ebx, ebx, 0x10                                  # 00472239
    add ebp, 8                                           # 0047223C
    msvc_add ebx, ebp                                    # 0047223F
    msvc_mov esi, eax                                    # 00472241
    imul esi, esi, 0x10                                  # 00472243
    msvc_xor edx, edx                                    # 00472246
.L472248:
    mov eax, dword ptr [edx + ebp]                       # 00472248
    mov dword ptr [esi + __g1Data], eax                  # 0047224B
    mov eax, dword ptr [edx + ebp + 4]                   # 00472251
    mov dword ptr [esi + __g1Data+4], eax                # 00472255
    mov eax, dword ptr [edx + ebp + 8]                   # 0047225B
    mov dword ptr [esi + __g1Data+8], eax                # 0047225F
    mov eax, dword ptr [edx + ebp + 0xc]                 # 00472265
    mov dword ptr [esi + __g1Data+12], eax               # 00472269
    add dword ptr [esi + __g1Data], ebx                  # 0047226F
    test word ptr [esi + __g1Data+12], 0x40              # 00472275
    je .L4722E0                                          # 0047227E
    mov eax, dword ptr [esi + __9E2414]                  # 00472280
    mov dword ptr [esi + __g1Data], eax                  # 00472286
    mov ax, word ptr [esi + __9E2418]                    # 0047228C
    mov word ptr [esi + __g1Data+4], ax                  # 00472293
    mov ax, word ptr [esi + __9E241A]                    # 0047229A
    mov word ptr [esi + __g1Data+6], ax                  # 004722A1
    mov ax, word ptr [esi + __9E2420]                    # 004722A8
    mov word ptr [esi + __g1Data+12], ax                 # 004722AF
    mov ax, word ptr [esi + __9E2422]                    # 004722B6
    mov word ptr [esi + __g1Data+14], ax                 # 004722BD
    mov ax, word ptr [esi + __9E241C]                    # 004722C4
    add word ptr [esi + __g1Data+8], ax                  # 004722CB
    mov ax, word ptr [esi + __9E241E]                    # 004722D2
    add word ptr [esi + __g1Data+10], ax                 # 004722D9
.L4722E0:
    add esi, 0x10                                        # 004722E0
    add edx, 0x10                                        # 004722E3
    dec ecx                                              # 004722E6
    jne .L472248                                         # 004722E7
    pop eax                                              # 004722ED
    mov ebx, dword ptr [ebp - 8]                         # 004722EE
    imul ebx, ebx, 0x10                                  # 004722F1
    add ebp, dword ptr [ebp - 4]                         # 004722F4
    msvc_add ebp, ebx                                    # 004722F7
    pop esi                                              # 004722F9
    pop edi                                              # 004722FA
    pop edx                                              # 004722FB
    pop ecx                                              # 004722FC
    pop ebx                                              # 004722FD
    ret                                                  # 004722FE

    .global _sub_4722FF
_sub_4722FF:
    mov dword ptr [__112A10C], ebx                       # 004722FF
    call _sub_4720EB                                     # 00472305
    jb .L47237B                                          # 0047230A
    pushal                                               # 0047230C
    mov al, 1                                            # 0047230D
    call dword ptr [ecx*4 + _paint_entry_table]          # 0047230F
    popal                                                # 00472316
    mov al, byte ptr [ecx + __4FE2D8]                    # 00472317
    mov byte ptr [__9D9D4D], al                          # 0047231D
    pushal                                               # 00472322
    mov esi, dword ptr [ecx*8 + _object_repository+4]    # 00472323
    imul ebx, ebx, 0x14                                  # 0047232A
    msvc_add esi, ebx                                    # 0047232D
    push esi                                             # 0047232F
    push 0x10                                            # 00472330
    push esi                                             # 00472332
    push dword ptr [__112A10C]                           # 00472333
    call _sub_408271                                     # 00472339
    add esp, 0xc                                         # 0047233E
    pop esi                                              # 00472341
    mov ecx, 0x10                                        # 00472342
    call _sub_442BAF                                     # 00472347
    popal                                                # 0047234C
    pushal                                               # 0047234D
    mov edi, dword ptr [ecx*8 + _object_repository+4]    # 0047234E
    imul ebx, ebx, 0x14                                  # 00472355
    mov ecx, dword ptr [ebx + edi + 0x10]                # 00472358
    push dword ptr [__9D1CBC]                            # 0047235C
    mov eax, dword ptr [__112A10C]                       # 00472362
    mov dword ptr [__9D1CBC], eax                        # 00472367
    call _sub_442BBF                                     # 0047236C
    pop dword ptr [__9D1CBC]                             # 00472371
    popal                                                # 00472377
    msvc_and eax, eax                                    # 00472378
    ret                                                  # 0047237A
.L47237B:
    stc                                                  # 0047237B
    ret                                                  # 0047237C

    .global _sub_47237D
_sub_47237D:
    pushal                                               # 0047237D
    mov dword ptr [__50D154], 0x201a                     # 0047237E
    msvc_xor ecx, ecx                                    # 00472388
.L47238A:
    mov edi, dword ptr [ecx*8 + _object_repository]      # 0047238A
    msvc_xor ebx, ebx                                    # 00472391
.L472393:
    mov esi, dword ptr [edi + ebx*4]                     # 00472393
    cmp esi, -1                                          # 00472396
    je .L4723AA                                          # 00472399
    push ebx                                             # 0047239B
    push ecx                                             # 0047239C
    push edi                                             # 0047239D
    msvc_xor al, al                                      # 0047239E
    call dword ptr [ecx*4 + _paint_entry_table]          # 004723A0
    pop edi                                              # 004723A7
    pop ecx                                              # 004723A8
    pop ebx                                              # 004723A9
.L4723AA:
    inc ebx                                              # 004723AA
    cmp bx, word ptr [ecx*2 + _object_entry_group_counts] # 004723AB
    jb .L472393                                          # 004723B3
    inc ecx                                              # 004723B5
    cmp ecx, 0x22                                        # 004723B6
    jb .L47238A                                          # 004723B9
    popal                                                # 004723BB
    ret                                                  # 004723BC

    .global _sub_4723BD
_sub_4723BD:
    push eax                                             # 004723BD
    push ecx                                             # 004723BE
    push ebx                                             # 004723BF
    msvc_xor ecx, ecx                                    # 004723C0
.L4723C2:
    cmp byte ptr [ecx + edi], 0xff                       # 004723C2
    je .L4723CB                                          # 004723C6
    inc ecx                                              # 004723C8
    jmp .L4723C2                                         # 004723C9
.L4723CB:
    cmp ecx, 1                                           # 004723CB
    jbe .L4723ED                                         # 004723CE
    mov ebx, 1                                           # 004723D0
.L4723D5:
    mov ax, word ptr [ebx + edi + -1]                    # 004723D5
    cmp al, ah                                           # 004723DA
    jbe .L4723E5                                         # 004723DC
    msvc_xchg ah, al                                     # 004723DE
    mov word ptr [ebx + edi + -1], ax                    # 004723E0
.L4723E5:
    inc ebx                                              # 004723E5
    msvc_cmp ebx, ecx                                    # 004723E6
    jb .L4723D5                                          # 004723E8
    dec ecx                                              # 004723EA
    jmp .L4723CB                                         # 004723EB
.L4723ED:
    pop ebx                                              # 004723ED
    pop ecx                                              # 004723EE
    pop eax                                              # 004723EF
    ret                                                  # 004723F0

    .global _sub_4723F1
_sub_4723F1:
    mov dword ptr [__113E87C], 4                         # 004723F1
    push_dword 0x35b0                                    # 004723FB
    call _sub_406BF7                                     # 00472400
    add esp, 4                                           # 00472405
    mov dword ptr [__113E87C], 0                         # 00472408
    cmp eax, -1                                          # 00472412
    je .L472476                                          # 00472415
    push eax                                             # 00472417
    msvc_mov edi, eax                                    # 00472418
    mov_offset esi, _interfaceSkinMeta                   # 0047241A
    msvc_xor edx, edx                                    # 0047241F
    mov eax, 0xffffffff                                  # 00472421
.L472426:
    mov ecx, 4                                           # 00472426
    cmp dword ptr [edx*4 + _interfaceSkinObjects], -1    # 0047242B
    je .L47243C                                          # 00472433
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 00472435
    add esi, 4                                           # 00472437
    jmp .L472441                                         # 0047243A
.L47243C:
    rep stosd dword ptr es:[edi], eax                    # 0047243C
    add esi, 0x14                                        # 0047243E
.L472441:
    inc edx                                              # 00472441
    cmp edx, 0x35b                                       # 00472442
    jb .L472426                                          # 00472448
    mov esi, dword ptr [esp]                             # 0047244A
    mov ecx, 0x35b0                                      # 0047244D
    call _sub_442BBF                                     # 00472452
    pop ebx                                              # 00472457
    mov dword ptr [__113E87C], 4                         # 00472458
    push ebx                                             # 00472462
    call _sub_406C12                                     # 00472463
    add esp, 4                                           # 00472468
    mov dword ptr [__113E87C], 0                         # 0047246B
    ret                                                  # 00472475
.L472476:
    mov byte ptr [__9D1CC7], 1                           # 00472476
    ret                                                  # 0047247D

    .global _sub_47247E
_sub_47247E:
    call _sub_472031                                     # 0047247E
    pushal                                               # 00472483
    mov dword ptr [__113E87C], 4                         # 00472484
    call _sub_4072EC                                     # 0047248E
    mov dword ptr [__113E87C], 0                         # 00472493
    popal                                                # 0047249D
    mov dword ptr [__113E87C], 4                         # 0047249E
    push_dword 0x35b0                                    # 004724A8
    call _sub_406BF7                                     # 004724AD
    add esp, 4                                           # 004724B2
    mov dword ptr [__113E87C], 0                         # 004724B5
    cmp eax, -1                                          # 004724BF
    je .L4725F6                                          # 004724C2
    push eax                                             # 004724C8
    msvc_mov esi, eax                                    # 004724C9
    call _sub_44313D                                     # 004724CB
    push dword ptr [__9D1CBC]                            # 004724D0
    mov ebp, dword ptr [esp + 4]                         # 004724D6
    msvc_xor edx, edx                                    # 004724DA
    msvc_xor ebx, ebx                                    # 004724DC
.L4724DE:
    mov eax, 0xffffffff                                  # 004724DE
    mov ecx, 4                                           # 004724E3
.L4724E8:
    and eax, dword ptr [ebp]                             # 004724E8
    add ebp, 4                                           # 004724EB
    dec ecx                                              # 004724EE
    jne .L4724E8                                         # 004724EF
    inc eax                                              # 004724F1
    je .L4724F5                                          # 004724F2
    inc ebx                                              # 004724F4
.L4724F5:
    inc edx                                              # 004724F5
    cmp edx, 0x35b                                       # 004724F6
    jb .L4724DE                                          # 004724FC
    push ebx                                             # 004724FE
    mov eax, 0x440                                       # 004724FF
    msvc_xor edx, edx                                    # 00472504
    call _sub_4CF5C5                                     # 00472506
    mov ebp, dword ptr [esp + 8]                         # 0047250B
    msvc_xor edx, edx                                    # 0047250F
    msvc_xor edi, edi                                    # 00472511
.L472513:
    msvc_mov esi, ebp                                    # 00472513
    mov eax, 0xffffffff                                  # 00472515
    mov ecx, 4                                           # 0047251A
.L47251F:
    and eax, dword ptr [esi]                             # 0047251F
    add esi, 4                                           # 00472521
    dec ecx                                              # 00472524
    jne .L47251F                                         # 00472525
    inc eax                                              # 00472527
    je .L47257E                                          # 00472528
    pushal                                               # 0047252A
    mov dword ptr [__113E87C], 4                         # 0047252B
    call _sub_4072EC                                     # 00472535
    mov dword ptr [__113E87C], 0                         # 0047253A
    popal                                                # 00472544
    msvc_mov ecx, edx                                    # 00472545
    msvc_xor ebx, ebx                                    # 00472547
.L472549:
    movzx eax, word ptr [ebx*2 + _object_entry_group_counts] # 00472549
    msvc_cmp ecx, eax                                    # 00472551
    jb .L47255A                                          # 00472553
    msvc_sub ecx, eax                                    # 00472555
    inc ebx                                              # 00472557
    jmp .L472549                                         # 00472558
.L47255A:
    call _sub_471BC5                                     # 0047255A
    jb .L4725B7                                          # 0047255F
    inc edi                                              # 00472561
    push edx                                             # 00472562
    push edi                                             # 00472563
    push ebp                                             # 00472564
    msvc_mov eax, edi                                    # 00472565
    mov edx, 0xff                                        # 00472567
    mul edx                                              # 0047256C
    mov ecx, dword ptr [esp + 0xc]                       # 0047256E
    jecxz .L47257B                                       # 00472572
    div ecx                                              # 00472574
    call _sub_4CF621                                     # 00472576
.L47257B:
    pop ebp                                              # 0047257B
    pop edi                                              # 0047257C
    pop edx                                              # 0047257D
.L47257E:
    add ebp, 0x10                                        # 0047257E
    inc edx                                              # 00472581
    cmp edx, 0x35b                                       # 00472582
    jb .L472513                                          # 00472588
    call _sub_4CF60B                                     # 0047258A
    pop ebx                                              # 0047258F
    pop dword ptr [__9D1CBC]                             # 00472590
    pop ebx                                              # 00472596
    mov dword ptr [__113E87C], 4                         # 00472597
    push ebx                                             # 004725A1
    call _sub_406C12                                     # 004725A2
    add esp, 4                                           # 004725A7
    mov dword ptr [__113E87C], 0                         # 004725AA
    msvc_and eax, eax                                    # 004725B4
    ret                                                  # 004725B6
.L4725B7:
    msvc_mov esi, ebp                                    # 004725B7
    mov_offset edi, __112C826                            # 004725B9
    mov ecx, 4                                           # 004725BE
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 004725C3
    call _sub_4CF60B                                     # 004725C5
    pop ebx                                              # 004725CA
    pop dword ptr [__9D1CBC]                             # 004725CB
    pop ebx                                              # 004725D1
    mov dword ptr [__113E87C], 4                         # 004725D2
    push ebx                                             # 004725DC
    call _sub_406C12                                     # 004725DD
    add esp, 4                                           # 004725E2
    mov dword ptr [__113E87C], 0                         # 004725E5
    call _sub_472031                                     # 004725EF
    stc                                                  # 004725F4
    ret                                                  # 004725F5
.L4725F6:
    mov byte ptr [__9D1CC7], 1                           # 004725F6
    ret                                                  # 004725FD

    .global _sub_4725FE
_sub_4725FE:
    push ebx                                             # 004725FE
    push esi                                             # 004725FF
    msvc_xor eax, eax                                    # 00472600
    test word ptr [__508F14], 4                          # 00472602
    jne .L472630                                         # 0047260B
    msvc_xor ebx, ebx                                    # 0047260D
    mov_offset esi, _interfaceSkinMeta                   # 0047260F
.L472614:
    cmp dword ptr [ebx*4 + _interfaceSkinObjects], -1    # 00472614
    je .L472624                                          # 0047261C
    test byte ptr [esi], 0xc0                            # 0047261E
    jne .L472624                                         # 00472621
    inc eax                                              # 00472623
.L472624:
    inc ebx                                              # 00472624
    add esi, 0x14                                        # 00472625
    cmp ebx, 0x35b                                       # 00472628
    jb .L472614                                          # 0047262E
.L472630:
    pop esi                                              # 00472630
    pop ebx                                              # 00472631
    ret                                                  # 00472632

    .global _sub_472633
_sub_472633:
    test word ptr [__508F14], 4                          # 00472633
    jne .L47267E                                         # 0047263C
    msvc_xor ebx, ebx                                    # 0047263E
    mov_offset ebp, _interfaceSkinMeta                   # 00472640
.L472645:
    cmp dword ptr [ebx*4 + _interfaceSkinObjects], -1    # 00472645
    je .L472672                                          # 0047264D
    test byte ptr [ebp], 0xc0                            # 0047264F
    jne .L472672                                         # 00472653
    push ebx                                             # 00472655
    push ebp                                             # 00472656
    push dword ptr [__9D1CBC]                            # 00472657
    mov ebx, dword ptr [__9D1CBC]                        # 0047265D
    call _sub_4722FF                                     # 00472663
    pop dword ptr [__9D1CBC]                             # 00472668
    pop ebp                                              # 0047266E
    pop ebx                                              # 0047266F
    jb .L47267F                                          # 00472670
.L472672:
    inc ebx                                              # 00472672
    add ebp, 0x14                                        # 00472673
    cmp ebx, 0x35b                                       # 00472676
    jb .L472645                                          # 0047267C
.L47267E:
    ret                                                  # 0047267E
.L47267F:
    mov byte ptr [__9D1CC7], 1                           # 0047267F
    ret                                                  # 00472686

    .global _sub_472687
_sub_472687:
    call _sub_472031                                     # 00472687
    mov dword ptr [__113E87C], 3                         # 0047268C
    push 0x10                                            # 00472696
    push_dword __112A128                                 # 00472698
    push dword ptr [__9D1CBC]                            # 0047269D
    call _sub_4081FE                                     # 004726A3
    add esp, 0xc                                         # 004726A8
    mov dword ptr [__113E87C], 0                         # 004726AB
    mov dword ptr [__113E87C], 4                         # 004726B5
    push_dword 0x400000                                  # 004726BF
    call _sub_406BF7                                     # 004726C4
    add esp, 4                                           # 004726C9
    mov dword ptr [__113E87C], 0                         # 004726CC
    cmp eax, -1                                          # 004726D6
    je .L472A1D                                          # 004726D9
    push eax                                             # 004726DF
    msvc_mov esi, eax                                    # 004726E0
    call _sub_44313D                                     # 004726E2
    pop ecx                                              # 004726E7
    mov dword ptr [__113E87C], 3                         # 004726E8
    push dword ptr [__9D9D52]                            # 004726F2
    push ecx                                             # 004726F8
    call _sub_406C02                                     # 004726F9
    add esp, 8                                           # 004726FE
    mov dword ptr [__113E87C], 0                         # 00472701
    msvc_mov ebx, eax                                    # 0047270B
    mov eax, 0xf369a75b                                  # 0047270D
    mov_offset esi, __112A128                            # 00472712
    xor al, byte ptr [esi]                               # 00472717
    rol eax, 0xb                                         # 00472719
    xor al, byte ptr [esi + 4]                           # 0047271C
    rol eax, 0xb                                         # 0047271F
    xor al, byte ptr [esi + 5]                           # 00472722
    rol eax, 0xb                                         # 00472725
    xor al, byte ptr [esi + 6]                           # 00472728
    rol eax, 0xb                                         # 0047272B
    xor al, byte ptr [esi + 7]                           # 0047272E
    rol eax, 0xb                                         # 00472731
    xor al, byte ptr [esi + 8]                           # 00472734
    rol eax, 0xb                                         # 00472737
    xor al, byte ptr [esi + 9]                           # 0047273A
    rol eax, 0xb                                         # 0047273D
    xor al, byte ptr [esi + 0xa]                         # 00472740
    rol eax, 0xb                                         # 00472743
    xor al, byte ptr [esi + 0xb]                         # 00472746
    rol eax, 0xb                                         # 00472749
    msvc_mov esi, ebx                                    # 0047274C
    mov ecx, dword ptr [__9D9D52]                        # 0047274E
.L472754:
    xor al, byte ptr [esi]                               # 00472754
    rol eax, 0xb                                         # 00472756
    inc esi                                              # 00472759
    dec ecx                                              # 0047275A
    jne .L472754                                         # 0047275B
    cmp eax, dword ptr [__112A134]                       # 0047275D
    jne .L472A1D                                         # 00472763
    mov cl, byte ptr [__112A128]                         # 00472769
    and ecx, 0x3f                                        # 0047276F
    push ebx                                             # 00472772
    msvc_mov esi, ebx                                    # 00472773
    mov al, 2                                            # 00472775
    call dword ptr [ecx*4 + _paint_entry_table]          # 00472777
    pop ebx                                              # 0047277E
    jb .L472A1D                                          # 0047277F
    cmp dword ptr [__50D154], 0x4101a                    # 00472785
    jae .L472A1D                                         # 0047278F
    mov bp, word ptr [__112A128]                         # 00472795
    and ebp, 0x3f                                        # 0047279C
    mov esi, dword ptr [ebp*8 + _object_repository]      # 0047279F
    msvc_xor ecx, ecx                                    # 004727A6
.L4727A8:
    cmp dword ptr [esi + ecx*4], -1                      # 004727A8
    je .L4727BE                                          # 004727AC
    inc ecx                                              # 004727AE
    cmp cx, word ptr [ebp*2 + _object_entry_group_counts] # 004727AF
    jb .L4727A8                                          # 004727B7
    msvc_jmp .L472A1D                                    # 004727B9
.L4727BE:
    mov dword ptr [esi + ecx*4], ebx                     # 004727BE
    msvc_mov edx, ecx                                    # 004727C1
    imul edx, edx, 0x14                                  # 004727C3
    add edx, dword ptr [ebp*8 + _object_repository+4]    # 004727C6
    mov eax, dword ptr [__112A128]                       # 004727CD
    mov dword ptr [edx], eax                             # 004727D2
    mov eax, dword ptr [__112A12C]                       # 004727D4
    mov dword ptr [edx + 4], eax                         # 004727D9
    mov eax, dword ptr [__112A130]                       # 004727DC
    mov dword ptr [edx + 8], eax                         # 004727E1
    mov eax, dword ptr [__112A134]                       # 004727E4
    mov dword ptr [edx + 0xc], eax                       # 004727E9
    mov eax, dword ptr [__9D9D52]                        # 004727EC
    mov dword ptr [edx + 0x10], eax                      # 004727F1
    mov_offset ebp, __112A128                            # 004727F4
    mov esi, dword ptr [__50D13C]                        # 004727F9
    mov ecx, dword ptr [__112A110]                       # 004727FF
    msvc_or ecx, ecx                                     # 00472805
    je .L47285C                                          # 00472807
.L472809:
    mov eax, dword ptr [ebp]                             # 00472809
    cmp eax, dword ptr [esi]                             # 0047280C
    jne .L47282D                                         # 0047280E
    mov eax, dword ptr [ebp + 4]                         # 00472810
    cmp eax, dword ptr [esi + 4]                         # 00472813
    jne .L47282D                                         # 00472816
    mov eax, dword ptr [ebp + 8]                         # 00472818
    cmp eax, dword ptr [esi + 8]                         # 0047281B
    jne .L47282D                                         # 0047281E
    mov eax, dword ptr [ebp + 0xc]                       # 00472820
    cmp eax, dword ptr [esi + 0xc]                       # 00472823
    jne .L47282D                                         # 00472826
    msvc_jmp .L472A0D                                    # 00472828
.L47282D:
    add esi, 0x10                                        # 0047282D
.L472830:
    inc esi                                              # 00472830
    cmp byte ptr [esi - 1], 0                            # 00472831
    jne .L472830                                         # 00472835
    add esi, 4                                           # 00472837
.L47283A:
    inc esi                                              # 0047283A
    cmp byte ptr [esi - 1], 0                            # 0047283B
    jne .L47283A                                         # 0047283F
    add esi, 4                                           # 00472841
    add esi, 8                                           # 00472844
    movzx eax, byte ptr [esi]                            # 00472847
    inc esi                                              # 0047284A
    imul eax, eax, 0x10                                  # 0047284B
    msvc_add esi, eax                                    # 0047284E
    movzx eax, byte ptr [esi]                            # 00472850
    inc esi                                              # 00472853
    imul eax, eax, 0x10                                  # 00472854
    msvc_add esi, eax                                    # 00472857
    dec ecx                                              # 00472859
    jne .L472809                                         # 0047285A
.L47285C:
    mov eax, 0x441                                       # 0047285C
    mov_offset edi, __112CC04                            # 00472861
    call _sub_4958C6                                     # 00472866
    mov_offset esi, __112A12C                            # 0047286B
    mov ecx, 8                                           # 00472870
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 00472875
    mov byte ptr [edi], 0                                # 00472877
    mov eax, 0xffffffff                                  # 0047287A
    msvc_xor edx, edx                                    # 0047287F
    call _sub_4CF5C5                                     # 00472881
    mov eax, 0x32                                        # 00472886
    call _sub_4CF621                                     # 0047288B
    pushal                                               # 00472890
    mov dword ptr [__113E87C], 4                         # 00472891
    call _sub_4072EC                                     # 0047289B
    mov dword ptr [__113E87C], 0                         # 004728A0
    popal                                                # 004728AA
    push dword ptr [__9D1CBC]                            # 004728AB
    mov_offset esi, __50B635                             # 004728B1
    mov_offset edi, __112CE04                            # 004728B6
.L4728BB:
    mov al, byte ptr [esi]                               # 004728BB
    mov byte ptr [edi], al                               # 004728BD
    inc esi                                              # 004728BF
    inc edi                                              # 004728C0
    cmp al, 0x2a                                         # 004728C1
    jne .L4728BB                                         # 004728C3
    dec edi                                              # 004728C5
    mov_offset esi, __112A12C                            # 004728C6
.L4728CB:
    mov al, byte ptr [esi]                               # 004728CB
    cmp al, 0x61                                         # 004728CD
    jb .L4728D7                                          # 004728CF
    cmp al, 0x7a                                         # 004728D1
    ja .L4728D7                                          # 004728D3
    add al, 0xe0                                         # 004728D5
.L4728D7:
    mov byte ptr [edi], al                               # 004728D7
    inc esi                                              # 004728D9
    inc edi                                              # 004728DA
    cmp_offset esi, __112A134                            # 004728DB
    jae .L4728E7                                         # 004728E1
    cmp al, 0x20                                         # 004728E3
    jne .L4728CB                                         # 004728E5
.L4728E7:
    cmp al, 0x20                                         # 004728E7
    jne .L4728EC                                         # 004728E9
    dec edi                                              # 004728EB
.L4728EC:
    push edi                                             # 004728EC
    mov dword ptr [edi], 0x5441442e                      # 004728ED
    mov byte ptr [edi + 4], 0                            # 004728F3
.L4728F7:
    mov dword ptr [__113E87C], 3                         # 004728F7
    push_dword __112CE04                                 # 00472901
    call _sub_4082AD                                     # 00472906
    add esp, 4                                           # 0047290B
    mov dword ptr [__113E87C], 0                         # 0047290E
    cmp eax, -1                                          # 00472918
    je .L472985                                          # 0047291B
    msvc_mov ebx, eax                                    # 0047291D
    mov dword ptr [__113E87C], 3                         # 0047291F
    push ebx                                             # 00472929
    call _sub_408297                                     # 0047292A
    add esp, 4                                           # 0047292F
    mov dword ptr [__113E87C], 0                         # 00472932
    mov edi, dword ptr [esp]                             # 0047293C
.L47293F:
    dec edi                                              # 0047293F
    mov al, byte ptr [edi]                               # 00472940
    cmp al, 0x5c                                         # 00472942
    je .L472962                                          # 00472944
    cmp al, 0x30                                         # 00472946
    jae .L47294C                                         # 00472948
    mov al, 0x2f                                         # 0047294A
.L47294C:
    cmp al, 0x39                                         # 0047294C
    jne .L472952                                         # 0047294E
    mov al, 0x40                                         # 00472950
.L472952:
    cmp al, 0x5a                                         # 00472952
    jne .L472958                                         # 00472954
    mov al, 0x2f                                         # 00472956
.L472958:
    inc al                                               # 00472958
    mov byte ptr [edi], al                               # 0047295A
    cmp al, 0x30                                         # 0047295C
    je .L47293F                                          # 0047295E
    jmp .L4728F7                                         # 00472960
.L472962:
    inc edi                                              # 00472962
    mov dword ptr [edi], 0x30303030                      # 00472963
    mov dword ptr [edi + 4], 0x30303030                  # 00472969
    add edi, 8                                           # 00472970
    mov dword ptr [esp], edi                             # 00472973
    mov dword ptr [edi], 0x5441442e                      # 00472976
    mov byte ptr [edi + 4], 0                            # 0047297C
    msvc_jmp .L4728F7                                    # 00472980
.L472985:
    mov eax, 0xb4                                        # 00472985
    call _sub_4CF621                                     # 0047298A
    pop edi                                              # 0047298F
    mov dword ptr [__113E87C], 3                         # 00472990
    push_dword __112CE04                                 # 0047299A
    call _sub_4082CA                                     # 0047299F
    add esp, 4                                           # 004729A4
    mov dword ptr [__113E87C], 0                         # 004729A7
    cmp eax, -1                                          # 004729B1
    je .L472A17                                          # 004729B4
    msvc_mov ebx, eax                                    # 004729B6
    push ebx                                             # 004729B8
    mov_offset ebp, __112A128                            # 004729B9
    call _sub_4722FF                                     # 004729BE
    mov eax, 0xf0                                        # 004729C3
    call _sub_4CF621                                     # 004729C8
    pop ebx                                              # 004729CD
    mov dword ptr [__113E87C], 3                         # 004729CE
    push ebx                                             # 004729D8
    call _sub_408297                                     # 004729D9
    add esp, 4                                           # 004729DE
    mov dword ptr [__113E87C], 0                         # 004729E1
    pop dword ptr [__9D1CBC]                             # 004729EB
    mov eax, 0xff                                        # 004729F1
    call _sub_4CF621                                     # 004729F6
    call _sub_472031                                     # 004729FB
    call _sub_4CF60B                                     # 00472A00
    mov eax, 1                                           # 00472A05
    msvc_and eax, eax                                    # 00472A0A
    ret                                                  # 00472A0C
.L472A0D:
    call _sub_472031                                     # 00472A0D
    msvc_xor eax, eax                                    # 00472A12
    msvc_and eax, eax                                    # 00472A14
    ret                                                  # 00472A16
.L472A17:
    pop dword ptr [__9D1CBC]                             # 00472A17
.L472A1D:
    stc                                                  # 00472A1D
    ret                                                  # 00472A1E

    .global _sub_472A1F
_sub_472A1F:
    ret                                                  # 00472A1F

    .global _sub_472A20
_sub_472A20:
    mov cl, 0x1f                                         # 00472A20
    msvc_xor dx, dx                                      # 00472A22
    call _sub_4CD3A9                                     # 00472A25
    jne .L472AFD                                         # 00472A2A
    msvc_xor eax, eax                                    # 00472A30
    call _sub_473A95                                     # 00472A32
    call _sub_472C84                                     # 00472A37
    mov ax, word ptr [__50B896]                          # 00472A3C
    shr ax, 1                                            # 00472A42
    sub ax, 0xc7                                         # 00472A45
    cmp ax, 0x1c                                         # 00472A49
    jge .L472A53                                         # 00472A4D
    mov ax, 0x1c                                         # 00472A4F
.L472A53:
    shl eax, 0x10                                        # 00472A53
    mov ax, word ptr [__50B894]                          # 00472A56
    shr ax, 1                                            # 00472A5C
    sub ax, 0x12c                                        # 00472A5F
    mov ebx, 0x18e0258                                   # 00472A63
    mov ecx, 0x1f                                        # 00472A68
    mov_offset edx, _ui__object_selection___events       # 00472A6D
    call _sub_4C9F5D                                     # 00472A72
    mov_dword_ptr_reg esi, 0x2c, _ui_object_selection    # 00472A77
    or dword ptr [esi + 0xc], 4                          # 00472A7E
    or dword ptr [esi + 0xc], 0x10                       # 00472A82
    or dword ptr [esi + 0xc], 0x20                       # 00472A86
    call _sub_4CA17F                                     # 00472A8A
    mov word ptr [esi + 0x872], 0                        # 00472A8F
    mov word ptr [esi + 0x840], 0xffff                   # 00472A98
    mov word ptr [esi + 0x856], 0                        # 00472AA1
    mov dword ptr [esi + 0x85a], 0xffffffff              # 00472AAA
    call _sub_473154                                     # 00472AB4
    mov eax, 0x1f                                        # 00472AB9
    call _sub_4731EE                                     # 00472ABE
    call _sub_471B95                                     # 00472AC3
    call _sub_472BBC                                     # 00472AC8
    cmp bx, -1                                           # 00472ACD
    je .L472AE5                                          # 00472AD1
    mov word ptr [esi + 0x840], bx                       # 00472AD3
    mov dword ptr [esi + 0x85a], ebp                     # 00472ADA
    call _sub_47176D                                     # 00472AE0
.L472AE5:
    mov ebp, dword ptr [_interfaceSkinObjects]           # 00472AE5
    mov al, byte ptr [ebp + 0xb]                         # 00472AEB
    mov byte ptr [esi + 0x886], al                       # 00472AEE
    mov al, byte ptr [ebp + 0xc]                         # 00472AF4
    mov byte ptr [esi + 0x887], al                       # 00472AF7
.L472AFD:
    ret                                                  # 00472AFD

    .global _sub_472AFE
_sub_472AFE:
    mov ebp, dword ptr [__50D13C]                        # 00472AFE
    mov ecx, dword ptr [__112A110]                       # 00472B04
    msvc_or ecx, ecx                                     # 00472B0A
    je .L472B4E                                          # 00472B0C
.L472B0E:
    mov al, byte ptr [ebp]                               # 00472B0E
    and al, 0x3f                                         # 00472B11
    cmp al, dl                                           # 00472B13
    jne .L472B1C                                         # 00472B15
    test byte ptr [edi], 1                               # 00472B17
    jne .L472B53                                         # 00472B1A
.L472B1C:
    add ebp, 0x10                                        # 00472B1C
.L472B1F:
    inc ebp                                              # 00472B1F
    cmp byte ptr [ebp - 1], 0                            # 00472B20
    jne .L472B1F                                         # 00472B24
    add ebp, 4                                           # 00472B26
.L472B29:
    inc ebp                                              # 00472B29
    cmp byte ptr [ebp - 1], 0                            # 00472B2A
    jne .L472B29                                         # 00472B2E
    add ebp, 4                                           # 00472B30
    add ebp, 8                                           # 00472B33
    movzx eax, byte ptr [ebp]                            # 00472B36
    inc ebp                                              # 00472B3A
    imul eax, eax, 0x10                                  # 00472B3B
    msvc_add ebp, eax                                    # 00472B3E
    movzx eax, byte ptr [ebp]                            # 00472B40
    inc ebp                                              # 00472B44
    imul eax, eax, 0x10                                  # 00472B45
    msvc_add ebp, eax                                    # 00472B48
    inc edi                                              # 00472B4A
    dec ecx                                              # 00472B4B
    jne .L472B0E                                         # 00472B4C
.L472B4E:
    mov ebp, 0xffffffff                                  # 00472B4E
.L472B53:
    ret                                                  # 00472B53

    .global _sub_472B54
_sub_472B54:
    msvc_xor ebx, ebx                                    # 00472B54
    mov edi, dword ptr [__50D144]                        # 00472B56
    mov ebp, dword ptr [__50D13C]                        # 00472B5C
    mov ecx, dword ptr [__112A110]                       # 00472B62
    msvc_or ecx, ecx                                     # 00472B68
    je _sub_473B5A                                       # 00472B6A
.L472B70:
    mov al, byte ptr [ebp]                               # 00472B70
    and al, 0x3f                                         # 00472B73
    cmp al, byte ptr [esi + 0x870]                       # 00472B75
    jne .L472B84                                         # 00472B7B
    sub dx, 0xc                                          # 00472B7D
    js .L472BBB                                          # 00472B81
    inc ebx                                              # 00472B83
.L472B84:
    add ebp, 0x10                                        # 00472B84
.L472B87:
    inc ebp                                              # 00472B87
    cmp byte ptr [ebp - 1], 0                            # 00472B88
    jne .L472B87                                         # 00472B8C
    add ebp, 4                                           # 00472B8E
.L472B91:
    inc ebp                                              # 00472B91
    cmp byte ptr [ebp - 1], 0                            # 00472B92
    jne .L472B91                                         # 00472B96
    add ebp, 4                                           # 00472B98
    add ebp, 8                                           # 00472B9B
    movzx eax, byte ptr [ebp]                            # 00472B9E
    inc ebp                                              # 00472BA2
    imul eax, eax, 0x10                                  # 00472BA3
    msvc_add ebp, eax                                    # 00472BA6
    movzx eax, byte ptr [ebp]                            # 00472BA8
    inc ebp                                              # 00472BAC
    imul eax, eax, 0x10                                  # 00472BAD
    msvc_add ebp, eax                                    # 00472BB0
    inc edi                                              # 00472BB2
    dec ecx                                              # 00472BB3
    jne .L472B70                                         # 00472BB4
    mov ebx, 0xffffffff                                  # 00472BB6
.L472BBB:
    ret                                                  # 00472BBB

    .global _sub_472BBC
_sub_472BBC:
    msvc_xor ebx, ebx                                    # 00472BBC
    mov edi, dword ptr [__50D144]                        # 00472BBE
    mov ebp, dword ptr [__50D13C]                        # 00472BC4
    mov ecx, dword ptr [__112A110]                       # 00472BCA
    msvc_or ecx, ecx                                     # 00472BD0
    je _sub_473B5A                                       # 00472BD2
.L472BD8:
    mov al, byte ptr [ebp]                               # 00472BD8
    and al, 0x3f                                         # 00472BDB
    cmp al, byte ptr [esi + 0x870]                       # 00472BDD
    jne .L472BEB                                         # 00472BE3
    test byte ptr [edi], 1                               # 00472BE5
    jne .L472C1F                                         # 00472BE8
    inc ebx                                              # 00472BEA
.L472BEB:
    add ebp, 0x10                                        # 00472BEB
.L472BEE:
    inc ebp                                              # 00472BEE
    cmp byte ptr [ebp - 1], 0                            # 00472BEF
    jne .L472BEE                                         # 00472BF3
    add ebp, 4                                           # 00472BF5
.L472BF8:
    inc ebp                                              # 00472BF8
    cmp byte ptr [ebp - 1], 0                            # 00472BF9
    jne .L472BF8                                         # 00472BFD
    add ebp, 4                                           # 00472BFF
    add ebp, 8                                           # 00472C02
    movzx eax, byte ptr [ebp]                            # 00472C05
    inc ebp                                              # 00472C09
    imul eax, eax, 0x10                                  # 00472C0A
    msvc_add ebp, eax                                    # 00472C0D
    movzx eax, byte ptr [ebp]                            # 00472C0F
    inc ebp                                              # 00472C13
    imul eax, eax, 0x10                                  # 00472C14
    msvc_add ebp, eax                                    # 00472C17
    inc edi                                              # 00472C19
    dec ecx                                              # 00472C1A
    jne .L472BD8                                         # 00472C1B
    jmp .L472C20                                         # 00472C1D
.L472C1F:
    ret                                                  # 00472C1F
.L472C20:
    msvc_xor ebx, ebx                                    # 00472C20
    mov edi, dword ptr [__50D144]                        # 00472C22
    mov ebp, dword ptr [__50D13C]                        # 00472C28
    mov ecx, dword ptr [__112A110]                       # 00472C2E
    msvc_or ecx, ecx                                     # 00472C34
    je _sub_473B5A                                       # 00472C36
.L472C3C:
    mov al, byte ptr [ebp]                               # 00472C3C
    and al, 0x3f                                         # 00472C3F
    cmp al, byte ptr [esi + 0x870]                       # 00472C41
    jne .L472C4C                                         # 00472C47
    jmp .L472C83                                         # 00472C49
.L472C4B:
    inc ebx                                              # 00472C4B
.L472C4C:
    add ebp, 0x10                                        # 00472C4C
.L472C4F:
    inc ebp                                              # 00472C4F
    cmp byte ptr [ebp - 1], 0                            # 00472C50
    jne .L472C4F                                         # 00472C54
    add ebp, 4                                           # 00472C56
.L472C59:
    inc ebp                                              # 00472C59
    cmp byte ptr [ebp - 1], 0                            # 00472C5A
    jne .L472C59                                         # 00472C5E
    add ebp, 4                                           # 00472C60
    add ebp, 8                                           # 00472C63
    movzx eax, byte ptr [ebp]                            # 00472C66
    inc ebp                                              # 00472C6A
    imul eax, eax, 0x10                                  # 00472C6B
    msvc_add ebp, eax                                    # 00472C6E
    movzx eax, byte ptr [ebp]                            # 00472C70
    inc ebp                                              # 00472C74
    imul eax, eax, 0x10                                  # 00472C75
    msvc_add ebp, eax                                    # 00472C78
    inc edi                                              # 00472C7A
    dec ecx                                              # 00472C7B
    jne .L472C3C                                         # 00472C7C
    mov ebx, 0xffffffff                                  # 00472C7E
.L472C83:
    ret                                                  # 00472C83

    .global _sub_472C84
_sub_472C84:
    msvc_xor edi, edi                                    # 00472C84
.L472C86:
    mov word ptr [edi*2 + __112C1C5], 0                  # 00472C86
    inc edi                                              # 00472C90
    cmp edi, 0x22                                        # 00472C91
    jb .L472C86                                          # 00472C94
    mov ebx, dword ptr [__50D144]                        # 00472C96
    mov ebp, dword ptr [__50D13C]                        # 00472C9C
    mov ecx, dword ptr [__112A110]                       # 00472CA2
    msvc_xor edx, edx                                    # 00472CA8
    msvc_or ecx, ecx                                     # 00472CAA
    je .L472CF6                                          # 00472CAC
.L472CAE:
    mov al, byte ptr [ebp]                               # 00472CAE
    and eax, 0x3f                                        # 00472CB1
    add ebp, 0x10                                        # 00472CB4
.L472CB7:
    inc ebp                                              # 00472CB7
    cmp byte ptr [ebp - 1], 0                            # 00472CB8
    jne .L472CB7                                         # 00472CBC
    add ebp, 4                                           # 00472CBE
.L472CC1:
    inc ebp                                              # 00472CC1
    cmp byte ptr [ebp - 1], 0                            # 00472CC2
    jne .L472CC1                                         # 00472CC6
    test byte ptr [ebx], 1                               # 00472CC8
    je .L472CD8                                          # 00472CCB
    inc word ptr [eax*2 + __112C1C5]                     # 00472CCD
    add edx, dword ptr [ebp]                             # 00472CD5
.L472CD8:
    add ebp, 4                                           # 00472CD8
    add ebp, 8                                           # 00472CDB
    movzx eax, byte ptr [ebp]                            # 00472CDE
    inc ebp                                              # 00472CE2
    imul eax, eax, 0x10                                  # 00472CE3
    msvc_add ebp, eax                                    # 00472CE6
    movzx eax, byte ptr [ebp]                            # 00472CE8
    inc ebp                                              # 00472CEC
    imul eax, eax, 0x10                                  # 00472CED
    msvc_add ebp, eax                                    # 00472CF0
    inc ebx                                              # 00472CF2
    dec ecx                                              # 00472CF3
    jne .L472CAE                                         # 00472CF4
.L472CF6:
    mov dword ptr [__112C209], edx                       # 00472CF6
    ret                                                  # 00472CFC

    .global _sub_472CFD
_sub_472CFD:
    mov_offset ebp, __4FE3B6                             # 00472CFD
.L472D02:
    cmp byte ptr [ebp], 0xff                             # 00472D02
    je .L472D18                                          # 00472D06
    push ebp                                             # 00472D08
    mov bx, 0xf                                          # 00472D09
    call _sub_473D1D                                     # 00472D0D
    pop ebp                                              # 00472D12
    add ebp, 0x10                                        # 00472D13
    jmp .L472D02                                         # 00472D16
.L472D18:
    ret                                                  # 00472D18

    .global _sub_472D19
_sub_472D19:
    cmp word ptr [__112C1F3], 0                          # 00472D19
    jne .L472D3E                                         # 00472D21
    mov_offset ebp, __4FE3B7                             # 00472D23
.L472D28:
    cmp byte ptr [ebp], 0xff                             # 00472D28
    je .L472D3E                                          # 00472D2C
    push ebp                                             # 00472D2E
    mov bx, 7                                            # 00472D2F
    call _sub_473D1D                                     # 00472D33
    pop ebp                                              # 00472D38
    add ebp, 0x10                                        # 00472D39
    jmp .L472D28                                         # 00472D3C
.L472D3E:
    ret                                                  # 00472D3E

    .global _sub_472D3F
_sub_472D3F:
    msvc_xor ebx, ebx                                    # 00472D3F
.L472D41:
    mov esi, dword ptr [ebx*4 + __4FE2FC]                # 00472D41
    mov cx, word ptr [ebx*2 + _object_entry_group_counts] # 00472D48
.L472D50:
    mov byte ptr [esi], 0                                # 00472D50
    inc esi                                              # 00472D53
    dec cx                                               # 00472D54
    jne .L472D50                                         # 00472D56
    inc ebx                                              # 00472D58
    cmp ebx, 0x22                                        # 00472D59
    jb .L472D41                                          # 00472D5C
    msvc_xor edx, edx                                    # 00472D5E
    msvc_xor ecx, ecx                                    # 00472D60
.L472D62:
    add cx, word ptr [edx*2 + _object_entry_group_counts] # 00472D62
    inc edx                                              # 00472D6A
    cmp edx, 0x22                                        # 00472D6B
    jb .L472D62                                          # 00472D6E
    mov_offset ebp, _interfaceSkinUnk1                   # 00472D70
    mov_offset esi, _interfaceSkinObjects                # 00472D75
.L472D7A:
    cmp dword ptr [esi], -1                              # 00472D7A
    je .L472D83                                          # 00472D7D
    or byte ptr [ebp], 2                                 # 00472D7F
.L472D83:
    inc ebp                                              # 00472D83
    add esi, 4                                           # 00472D84
    dec ecx                                              # 00472D87
    jne .L472D7A                                         # 00472D88
    test dword ptr [_scenarioChunk3+16], 1               # 00472D8A
    je .L473050                                          # 00472D94
    or byte ptr [_regionUnk1], 1                         # 00472D9A
    msvc_xor bx, bx                                      # 00472DA1
.L472DA4:
    msvc_xor bp, bp                                      # 00472DA4
.L472DA7:
    msvc_mov ax, bp                                      # 00472DA7
    movzx esi, ax                                        # 00472DAA
    shl esi, 9                                           # 00472DAD
    msvc_or si, bx                                       # 00472DB0
    shr esi, 3                                           # 00472DB3
    mov esi, dword ptr [esi + __E40134]                  # 00472DB6
.L472DBC:
    mov dh, byte ptr [esi]                               # 00472DBC
    and dh, 0x3c                                         # 00472DBE
    je .L472E0C                                          # 00472DC1
    cmp dh, 4                                            # 00472DC3
    je .L472E2C                                          # 00472DC6
    cmp dh, 8                                            # 00472DC8
    je .L472F78                                          # 00472DCB
    cmp dh, 0xc                                          # 00472DD1
    je .L472FE2                                          # 00472DD4
    cmp dh, 0x14                                         # 00472DDA
    je .L472FF2                                          # 00472DDD
    cmp dh, 0x1c                                         # 00472DE3
    je .L472ECF                                          # 00472DE6
    cmp dh, 0x10                                         # 00472DEC
    je .L47300C                                          # 00472DEF
    cmp dh, 0x20                                         # 00472DF5
    je .L473017                                          # 00472DF8
    cmp dh, 0x18                                         # 00472DFE
    je .L472FFF                                          # 00472E01
    msvc_jmp .L473025                                    # 00472E07
.L472E0C:
    movzx edi, byte ptr [esi + 6]                        # 00472E0C
    and edi, 0x1f                                        # 00472E10
    or byte ptr [edi + _landUnk1], 1                     # 00472E13
    test byte ptr [esi + 4], 0xe0                        # 00472E1A
    je .L472E27                                          # 00472E1E
    or byte ptr [_snowUnk1], 1                           # 00472E20
.L472E27:
    msvc_jmp .L473025                                    # 00472E27
.L472E2C:
    movzx edi, byte ptr [esi + 5]                        # 00472E2C
    shr edi, 4                                           # 00472E30
    or byte ptr [edi + _trackUnk1], 1                    # 00472E33
    test byte ptr [esi + 4], 0x80                        # 00472E3A
    je .L472E4E                                          # 00472E3E
    movzx edi, byte ptr [esi + 6]                        # 00472E40
    shr edi, 5                                           # 00472E44
    or byte ptr [edi + _bridgeUnk1], 1                   # 00472E47
.L472E4E:
    test byte ptr [esi + 7], 0x10                        # 00472E4E
    je .L472E6D                                          # 00472E52
    movzx edi, byte ptr [esi + 5]                        # 00472E54
    shr edi, 4                                           # 00472E58
    mov edi, dword ptr [edi*4 + _trackObjects]           # 00472E5B
    movzx edi, byte ptr [edi + 0xa]                      # 00472E62
    or byte ptr [edi + _trackExtraUnk1], 1               # 00472E66
.L472E6D:
    test byte ptr [esi + 7], 0x20                        # 00472E6D
    je .L472E8C                                          # 00472E71
    movzx edi, byte ptr [esi + 5]                        # 00472E73
    shr edi, 4                                           # 00472E77
    mov edi, dword ptr [edi*4 + _trackObjects]           # 00472E7A
    movzx edi, byte ptr [edi + 0xb]                      # 00472E81
    or byte ptr [edi + _trackExtraUnk1], 1               # 00472E85
.L472E8C:
    test byte ptr [esi + 7], 0x40                        # 00472E8C
    je .L472EAB                                          # 00472E90
    movzx edi, byte ptr [esi + 5]                        # 00472E92
    shr edi, 4                                           # 00472E96
    mov edi, dword ptr [edi*4 + _trackObjects]           # 00472E99
    movzx edi, byte ptr [edi + 0xc]                      # 00472EA0
    or byte ptr [edi + _trackExtraUnk1], 1               # 00472EA4
.L472EAB:
    test byte ptr [esi + 7], 0x80                        # 00472EAB
    je .L472ECA                                          # 00472EAF
    movzx edi, byte ptr [esi + 5]                        # 00472EB1
    shr edi, 4                                           # 00472EB5
    mov edi, dword ptr [edi*4 + _trackObjects]           # 00472EB8
    movzx edi, byte ptr [edi + 0xd]                      # 00472EBF
    or byte ptr [edi + _trackExtraUnk1], 1               # 00472EC3
.L472ECA:
    msvc_jmp .L473025                                    # 00472ECA
.L472ECF:
    movzx edi, byte ptr [esi + 5]                        # 00472ECF
    shr edi, 4                                           # 00472ED3
    or byte ptr [edi + _roadUnk1], 1                     # 00472ED6
    test byte ptr [esi + 4], 0x80                        # 00472EDD
    je .L472EF1                                          # 00472EE1
    movzx edi, byte ptr [esi + 6]                        # 00472EE3
    shr edi, 5                                           # 00472EE7
    or byte ptr [edi + _bridgeUnk1], 1                   # 00472EEA
.L472EF1:
    test byte ptr [esi + 7], 0x20                        # 00472EF1
    je .L472F08                                          # 00472EF5
    movzx edi, byte ptr [esi + 5]                        # 00472EF7
    shr edi, 2                                           # 00472EFB
    and edi, 3                                           # 00472EFE
    or byte ptr [edi + _levelCrossingUnk1], 1            # 00472F01
.L472F08:
    test byte ptr [esi + 7], 0x20                        # 00472F08
    jne .L472F1B                                         # 00472F0C
    test byte ptr [esi + 5], 0xc                         # 00472F0E
    je .L472F1B                                          # 00472F12
    or byte ptr [_streetLightUnk1], 1                    # 00472F14
.L472F1B:
    movzx edi, byte ptr [esi + 5]                        # 00472F1B
    shr edi, 4                                           # 00472F1F
    mov edi, dword ptr [edi*4 + _roadObjects]            # 00472F22
    test word ptr [edi + 0x12], 8                        # 00472F29
    jne .L473025                                         # 00472F2F
    test byte ptr [esi + 7], 0x40                        # 00472F35
    je .L472F54                                          # 00472F39
    movzx edi, byte ptr [esi + 5]                        # 00472F3B
    shr edi, 4                                           # 00472F3F
    mov edi, dword ptr [edi*4 + _roadObjects]            # 00472F42
    movzx edi, byte ptr [edi + 0x26]                     # 00472F49
    or byte ptr [edi + _roadExtraUnk1], 1                # 00472F4D
.L472F54:
    test byte ptr [esi + 7], 0x80                        # 00472F54
    je .L472F73                                          # 00472F58
    movzx edi, byte ptr [esi + 5]                        # 00472F5A
    shr edi, 4                                           # 00472F5E
    mov edi, dword ptr [edi*4 + _roadObjects]            # 00472F61
    movzx edi, byte ptr [edi + 0x27]                     # 00472F68
    or byte ptr [edi + _roadExtraUnk1], 1                # 00472F6C
.L472F73:
    msvc_jmp .L473025                                    # 00472F73
.L472F78:
    movzx di, byte ptr [esi + 5]                         # 00472F78
    shr di, 5                                            # 00472F7D
    and di, 7                                            # 00472F81
    cmp di, 0                                            # 00472F85
    je .L472FA2                                          # 00472F89
    cmp di, 1                                            # 00472F8B
    je .L472FB2                                          # 00472F8F
    cmp di, 2                                            # 00472F91
    je .L472FC2                                          # 00472F95
    cmp di, 3                                            # 00472F97
    je .L472FD2                                          # 00472F9B
    msvc_jmp .L473025                                    # 00472F9D
.L472FA2:
    movzx edi, byte ptr [esi + 5]                        # 00472FA2
    and edi, 0x1f                                        # 00472FA6
    or byte ptr [edi + _trackStationUnk1], 1             # 00472FA9
    jmp .L473025                                         # 00472FB0
.L472FB2:
    movzx edi, byte ptr [esi + 5]                        # 00472FB2
    and edi, 0x1f                                        # 00472FB6
    or byte ptr [edi + _roadStationUnk1], 1              # 00472FB9
    jmp .L473025                                         # 00472FC0
.L472FC2:
    movzx edi, byte ptr [esi + 5]                        # 00472FC2
    and edi, 0x1f                                        # 00472FC6
    or byte ptr [edi + _airportUnk1], 1                  # 00472FC9
    jmp .L473025                                         # 00472FD0
.L472FD2:
    movzx edi, byte ptr [esi + 5]                        # 00472FD2
    and edi, 0x1f                                        # 00472FD6
    or byte ptr [edi + _dockUnk1], 1                     # 00472FD9
    jmp .L473025                                         # 00472FE0
.L472FE2:
    movzx edi, byte ptr [esi + 4]                        # 00472FE2
    and edi, 0xf                                         # 00472FE6
    or byte ptr [edi + _trackSignalUnk1], 1              # 00472FE9
    jmp .L473025                                         # 00472FF0
.L472FF2:
    movzx edi, byte ptr [esi + 4]                        # 00472FF2
    or byte ptr [edi + _treeUnk1], 1                     # 00472FF6
    jmp .L473025                                         # 00472FFD
.L472FFF:
    movzx edi, byte ptr [esi + 4]                        # 00472FFF
    or byte ptr [edi + _wallUnk1], 1                     # 00473003
    jmp .L473025                                         # 0047300A
.L47300C:
    movzx edi, byte ptr [esi + 4]                        # 0047300C
    or byte ptr [edi + _buildingUnk1], 1                 # 00473010
.L473017:
    test byte ptr [esi], 0x80                            # 00473017
    jne .L473023                                         # 0047301A
    or byte ptr [_scaffoldingUnk1], 1                    # 0047301C
.L473023:
    jmp .L473025                                         # 00473023
.L473025:
    add esi, 8                                           # 00473025
    test byte ptr [esi - 7], 0x80                        # 00473028
    je .L472DBC                                          # 0047302C
    add bp, 0x20                                         # 00473032
    cmp bp, 0x3000                                       # 00473036
    jb .L472DA7                                          # 0047303B
    add bx, 0x20                                         # 00473041
    cmp bx, 0x3000                                       # 00473045
    jb .L472DA4                                          # 0047304A
.L473050:
    mov si, word ptr [_scenarioChunk3+42]                # 00473050
.L473057:
    cmp si, -1                                           # 00473057
    je .L473098                                          # 0047305B
    movzx esi, si                                        # 0047305D
    shl esi, 7                                           # 00473060
    add_offset esi, _things                              # 00473063
    push dword ptr [esi + 4]                             # 00473069
.L47306C:
    cmp byte ptr [esi + 1], 4                            # 0047306C
    jne .L47307D                                         # 00473070
    movzx edi, word ptr [esi + 0x40]                     # 00473072
    or byte ptr [edi + _vehicleUnk1], 1                  # 00473076
.L47307D:
    mov si, word ptr [esi + 0x3a]                        # 0047307D
    cmp si, -1                                           # 00473081
    je .L473095                                          # 00473085
    movzx esi, si                                        # 00473087
    shl esi, 7                                           # 0047308A
    add_offset esi, _things                              # 0047308D
    jmp .L47306C                                         # 00473093
.L473095:
    pop esi                                              # 00473095
    jmp .L473057                                         # 00473096
.L473098:
    mov_offset esi, _industries                          # 00473098
.L47309D:
    cmp word ptr [esi], -1                               # 0047309D
    je .L4730AE                                          # 004730A1
    movzx edi, byte ptr [esi + 0x10]                     # 004730A3
    or byte ptr [edi + _industryUnk1], 1                 # 004730A7
.L4730AE:
    add esi, 0x453                                       # 004730AE
    cmp_offset esi, _stations                            # 004730B4
    jb .L47309D                                          # 004730BA
    mov_offset esi, _companies                           # 004730BC
.L4730C1:
    cmp word ptr [esi], 0                                # 004730C1
    je .L4730D2                                          # 004730C5
    movzx edi, byte ptr [esi + 0x18]                     # 004730C7
    or byte ptr [edi + _competitorUnk1], 1               # 004730CB
.L4730D2:
    add esi, 0x8fa8                                      # 004730D2
    cmp_offset esi, _towns                               # 004730D8
    jb .L4730C1                                          # 004730DE
    mov ebx, dword ptr [__50D144]                        # 004730E0
    mov ebp, dword ptr [__50D13C]                        # 004730E6
    mov ecx, dword ptr [__112A110]                       # 004730EC
    msvc_or ecx, ecx                                     # 004730F2
    je .L473153                                          # 004730F4
.L4730F6:
    and byte ptr [ebx], 0xfb                             # 004730F6
    push ebx                                             # 004730F9
    push ecx                                             # 004730FA
    call _sub_4720EB                                     # 004730FB
    jb .L47311F                                          # 00473100
    mov ecx, dword ptr [ecx*4 + __4FE2FC]                # 00473102
    mov esi, dword ptr [esp + 4]                         # 00473109
    test byte ptr [ebx + ecx], 1                         # 0047310D
    je .L473116                                          # 00473111
    or byte ptr [esi], 5                                 # 00473113
.L473116:
    test byte ptr [ebx + ecx], 2                         # 00473116
    je .L47311F                                          # 0047311A
    or byte ptr [esi], 1                                 # 0047311C
.L47311F:
    pop ecx                                              # 0047311F
    pop ebx                                              # 00473120
    inc ebx                                              # 00473121
    add ebp, 0x10                                        # 00473122
.L473125:
    inc ebp                                              # 00473125
    cmp byte ptr [ebp - 1], 0                            # 00473126
    jne .L473125                                         # 0047312A
    add ebp, 4                                           # 0047312C
.L47312F:
    inc ebp                                              # 0047312F
    cmp byte ptr [ebp - 1], 0                            # 00473130
    jne .L47312F                                         # 00473134
    add ebp, 4                                           # 00473136
    add ebp, 8                                           # 00473139
    movzx eax, byte ptr [ebp]                            # 0047313C
    inc ebp                                              # 00473140
    imul eax, eax, 0x10                                  # 00473141
    msvc_add ebp, eax                                    # 00473144
    movzx eax, byte ptr [ebp]                            # 00473146
    inc ebp                                              # 0047314A
    imul eax, eax, 0x10                                  # 0047314B
    msvc_add ebp, eax                                    # 0047314E
    dec ecx                                              # 00473150
    jne .L4730F6                                         # 00473151
.L473153:
    ret                                                  # 00473153

    .global _sub_473154
_sub_473154:
    push eax                                             # 00473154
    push ebx                                             # 00473155
    push ecx                                             # 00473156
    push edx                                             # 00473157
    push edi                                             # 00473158
    mov ebx, 0x21                                        # 00473159
    msvc_xor eax, eax                                    # 0047315E
    msvc_xor ecx, ecx                                    # 00473160
    mov edx, 0x13                                        # 00473162
    mov_offset edi, __112C21C                            # 00473167
.L47316C:
    test byte ptr [ebx + __4FE384], 1                    # 0047316C
    jne .L4731D6                                         # 00473173
    cmp word ptr [ebx*2 + __112C181], 0                  # 00473175
    je .L4731D6                                          # 0047317E
    test byte ptr [ebx + __4FE384], 0x10                 # 00473180
    jne .L473194                                         # 00473187
    cmp word ptr [ebx*2 + __112C181], 1                  # 00473189
    je .L4731D6                                          # 00473192
.L473194:
    test word ptr [esi + 0x856], 1                       # 00473194
    jne .L4731A8                                         # 0047319D
    test byte ptr [ebx + __4FE384], 2                    # 0047319F
    jne .L4731D6                                         # 004731A6
.L4731A8:
    test word ptr [__508F14], 2                          # 004731A8
    je .L4731BC                                          # 004731B1
    test byte ptr [ebx + __4FE384], 8                    # 004731B3
    jne .L4731D6                                         # 004731BA
.L4731BC:
    test byte ptr [ebx + __4FE384], 4                    # 004731BC
    jne .L4731D6                                         # 004731C3
    mov byte ptr [edi], bl                               # 004731C5
    mov byte ptr [edi + 1], al                           # 004731C7
    add edi, 2                                           # 004731CA
    inc ecx                                              # 004731CD
    msvc_cmp ecx, edx                                    # 004731CE
    jb .L4731D6                                          # 004731D0
    msvc_xor ecx, ecx                                    # 004731D2
    dec edx                                              # 004731D4
    inc eax                                              # 004731D5
.L4731D6:
    dec ebx                                              # 004731D6
    jns .L47316C                                         # 004731D7
    mov byte ptr [edi], 0xff                             # 004731D9
    movzx eax, byte ptr [__112C21C]                      # 004731DC
    call _sub_4731EE                                     # 004731E3
    pop edi                                              # 004731E8
    pop edx                                              # 004731E9
    pop ecx                                              # 004731EA
    pop ebx                                              # 004731EB
    pop eax                                              # 004731EC
    ret                                                  # 004731ED

    .global _sub_4731EE
_sub_4731EE:
    push eax                                             # 004731EE
    push ebx                                             # 004731EF
    push ecx                                             # 004731F0
    push edx                                             # 004731F1
    push edi                                             # 004731F2
    push ebp                                             # 004731F3
.L4731F4:
    mov word ptr [esi + 0x870], ax                       # 004731F4
    mov_offset edi, __112C21C                            # 004731FB
.L473200:
    cmp byte ptr [edi], 0xff                             # 00473200
    je .L47320E                                          # 00473203
    cmp al, byte ptr [edi]                               # 00473205
    je .L473224                                          # 00473207
    add edi, 2                                           # 00473209
    jmp .L473200                                         # 0047320C
.L47320E:
    or word ptr [esi + 0x856], 1                         # 0047320E
    movzx eax, word ptr [esi + 0x870]                    # 00473216
    call _sub_473154                                     # 0047321D
    jmp .L4731F4                                         # 00473222
.L473224:
    cmp byte ptr [edi + 1], 0                            # 00473224
    je .L473286                                          # 00473228
    mov_offset ebx, __112CC04                            # 0047322A
    msvc_mov edx, edi                                    # 0047322F
.L473231:
    mov al, byte ptr [edi]                               # 00473231
    mov byte ptr [ebx], al                               # 00473233
    add edi, 2                                           # 00473235
    inc ebx                                              # 00473238
    cmp byte ptr [edi], 0xff                             # 00473239
    jne .L473231                                         # 0047323C
    mov_offset edi, __112C21C                            # 0047323E
.L473243:
    msvc_cmp edi, edx                                    # 00473243
    je .L473251                                          # 00473245
    mov al, byte ptr [edi]                               # 00473247
    mov byte ptr [ebx], al                               # 00473249
    add edi, 2                                           # 0047324B
    inc ebx                                              # 0047324E
    jmp .L473243                                         # 0047324F
.L473251:
    mov byte ptr [ebx], 0xff                             # 00473251
    mov_offset ebp, __112CC04                            # 00473254
    msvc_xor eax, eax                                    # 00473259
    msvc_xor ecx, ecx                                    # 0047325B
    mov edx, 0x13                                        # 0047325D
    mov_offset edi, __112C21C                            # 00473262
.L473267:
    mov bl, byte ptr [ebp]                               # 00473267
    cmp bl, 0xff                                         # 0047326A
    je .L473283                                          # 0047326D
    inc ebp                                              # 0047326F
    mov byte ptr [edi], bl                               # 00473270
    mov byte ptr [edi + 1], al                           # 00473272
    add edi, 2                                           # 00473275
    inc ecx                                              # 00473278
    msvc_cmp ecx, edx                                    # 00473279
    jb .L473267                                          # 0047327B
    msvc_xor ecx, ecx                                    # 0047327D
    dec edx                                              # 0047327F
    inc eax                                              # 00473280
    jmp .L473267                                         # 00473281
.L473283:
    mov byte ptr [edi], 0xff                             # 00473283
.L473286:
    pop ebp                                              # 00473286
    pop edi                                              # 00473287
    pop edx                                              # 00473288
    pop ecx                                              # 00473289
    pop ebx                                              # 0047328A
    pop eax                                              # 0047328B
    ret                                                  # 0047328C

    .global _sub_47328D
_sub_47328D:
    mov dx, word ptr [_ui_object_selection+54]           # 0047328D
    mov cx, word ptr [esi + 0x30]                        # 00473294
    add dx, word ptr [esi + 0x32]                        # 00473298
    add cx, 3                                            # 0047329C
    sub dx, 0x1a                                         # 004732A0
    mov bx, 1                                            # 004732A4
.L4732A8:
    push ecx                                             # 004732A8
    push edx                                             # 004732A9
    msvc_mov ax, bx                                      # 004732AA
    imul ax, ax, 0x18                                    # 004732AD
    msvc_sub dx, ax                                      # 004732B1
    msvc_mov ax, bx                                      # 004732B4
    imul ax, ax, 0xa                                     # 004732B7
    msvc_add cx, ax                                      # 004732BB
    mov_offset ebp, __112C21C                            # 004732BE
.L4732C3:
    cmp byte ptr [ebp], 0xff                             # 004732C3
    je .L4733A1                                          # 004732C7
    cmp bl, byte ptr [ebp + 1]                           # 004732CD
    jne .L473399                                         # 004732D0
    push ebx                                             # 004732D6
    push ecx                                             # 004732D7
    push edx                                             # 004732D8
    push esi                                             # 004732D9
    push ebp                                             # 004732DA
    movzx ebx, byte ptr [esi + 0x887]                    # 004732DB
    shl ebx, 0x13                                        # 004732E2
    add ebx, 0x20000953                                  # 004732E5
    mov al, byte ptr [ebp]                               # 004732EB
    cmp al, byte ptr [esi + 0x870]                       # 004732EE
    je .L47336B                                          # 004732F4
    call _sub_448C79                                     # 004732F6
    pop ebp                                              # 004732FB
    pop esi                                              # 004732FC
    pop edx                                              # 004732FD
    pop ecx                                              # 004732FE
    pop ebx                                              # 004732FF
    push ebx                                             # 00473300
    push ecx                                             # 00473301
    push edx                                             # 00473302
    push esi                                             # 00473303
    push ebp                                             # 00473304
    inc dx                                               # 00473305
    movzx ebx, byte ptr [ebp]                            # 00473307
    add ebx, 0xdb1                                       # 0047330B
    add ebx, 0x20580000                                  # 00473311
    call _sub_448C79                                     # 00473317
    pop ebp                                              # 0047331C
    pop esi                                              # 0047331D
    pop edx                                              # 0047331E
    pop ecx                                              # 0047331F
    pop ebx                                              # 00473320
    push ebx                                             # 00473321
    push ecx                                             # 00473322
    push edx                                             # 00473323
    push esi                                             # 00473324
    push ebp                                             # 00473325
    mov ebx, 0x41980953                                  # 00473326
    call _sub_448C79                                     # 0047332B
    pop ebp                                              # 00473330
    pop esi                                              # 00473331
    pop edx                                              # 00473332
    pop ecx                                              # 00473333
    pop ebx                                              # 00473334
    msvc_or bx, bx                                       # 00473335
    jne .L473395                                         # 00473338
    push ebx                                             # 0047333A
    push ecx                                             # 0047333B
    push edx                                             # 0047333C
    push esi                                             # 0047333D
    push ebp                                             # 0047333E
    movzx ebx, byte ptr [esi + 0x887]                    # 0047333F
    movzx ebp, byte ptr [ebx*8 + __1136BA7]              # 00473346
    add dx, 0x1a                                         # 0047334E
    msvc_mov ax, cx                                      # 00473352
    msvc_mov bx, cx                                      # 00473355
    add bx, 0x1e                                         # 00473358
    msvc_mov cx, dx                                      # 0047335C
    call _sub_4474BA                                     # 0047335F
    pop ebp                                              # 00473364
    pop esi                                              # 00473365
    pop edx                                              # 00473366
    pop ecx                                              # 00473367
    pop ebx                                              # 00473368
    jmp .L473395                                         # 00473369
.L47336B:
    inc ebx                                              # 0047336B
    call _sub_448C79                                     # 0047336C
    pop ebp                                              # 00473371
    pop esi                                              # 00473372
    pop edx                                              # 00473373
    pop ecx                                              # 00473374
    pop ebx                                              # 00473375
    push ebx                                             # 00473376
    push ecx                                             # 00473377
    push edx                                             # 00473378
    push esi                                             # 00473379
    push ebp                                             # 0047337A
    movzx ebx, byte ptr [ebp]                            # 0047337B
    add ebx, 0xdb1                                       # 0047337F
    add ebx, 0x20580000                                  # 00473385
    call _sub_448C79                                     # 0047338B
    pop ebp                                              # 00473390
    pop esi                                              # 00473391
    pop edx                                              # 00473392
    pop ecx                                              # 00473393
    pop ebx                                              # 00473394
.L473395:
    add cx, 0x1f                                         # 00473395
.L473399:
    add ebp, 2                                           # 00473399
    msvc_jmp .L4732C3                                    # 0047339C
.L4733A1:
    pop edx                                              # 004733A1
    pop ecx                                              # 004733A2
    dec bx                                               # 004733A3
    jns .L4732A8                                         # 004733A5
    ret                                                  # 004733AB

    .global _sub_4733AC
_sub_4733AC:
    bts dword ptr [esi + 0x1c], 7                        # 004733AC
    mov byte ptr [_ui_object_selection+32], 9            # 004733B1
    test word ptr [__508F14], 2                          # 004733B8
    je .L4733CA                                          # 004733C1
    mov byte ptr [_ui_object_selection+32], 0            # 004733C3
.L4733CA:
    mov ecx, dword ptr [esi + 0x1c]                      # 004733CA
    btr ecx, 5                                           # 004733CD
    test word ptr [esi + 0x856], 1                       # 004733D1
    je .L4733E0                                          # 004733DA
    bts ecx, 5                                           # 004733DC
.L4733E0:
    mov dword ptr [esi + 0x1c], ecx                      # 004733E0
    mov ax, word ptr [esi + 0x870]                       # 004733E3
    add ax, 0x805                                        # 004733EA
    mov word ptr [__112C826], ax                         # 004733EE
    ret                                                  # 004733F4

    .global _sub_4733F5
_sub_4733F5:
    push esi                                             # 004733F5
    mov ax, word ptr [esi + 0x30]                        # 004733F6
    mov bx, word ptr [esi + 0x34]                        # 004733FA
    mov cx, word ptr [esi + 0x32]                        # 004733FE
    add cx, 0x14                                         # 00473402
    msvc_mov dx, cx                                      # 00473406
    add dx, 0x3c                                         # 00473409
    msvc_add bx, ax                                      # 0047340D
    dec bx                                               # 00473410
    movzx ebp, byte ptr [esi + 0x886]                    # 00473412
    msvc_xor si, si                                      # 00473419
    call _sub_4C58C7                                     # 0047341C
    pop esi                                              # 00473421
    call _sub_4CA4DF                                     # 00473422
    call _sub_47328D                                     # 00473427
    mov ebx, dword ptr [esi + 0x85a]                     # 0047342C
    cmp ebx, -1                                          # 00473432
    je .L473491                                          # 00473435
    mov bl, byte ptr [ebx]                               # 00473437
    and ebx, 0x3f                                        # 00473439
    cmp bl, 0x1a                                         # 0047343C
    je .L473491                                          # 0047343F
    cmp bl, 7                                            # 00473441
    je .L473491                                          # 00473444
    push esi                                             # 00473446
    movzx ebp, byte ptr [esi + 0x887]                    # 00473447
    movzx ebp, byte ptr [ebp*8 + __1136BA0]              # 0047344E
    mov ax, word ptr [_ui_object_selection+114]          # 00473456
    mov cx, word ptr [_ui_object_selection+118]          # 0047345C
    mov bx, word ptr [_ui_object_selection+116]          # 00473463
    mov dx, word ptr [_ui_object_selection+120]          # 0047346A
    inc ax                                               # 00473471
    inc cx                                               # 00473473
    dec bx                                               # 00473475
    dec dx                                               # 00473477
    add ax, word ptr [esi + 0x30]                        # 00473479
    add cx, word ptr [esi + 0x32]                        # 0047347D
    add bx, word ptr [esi + 0x30]                        # 00473481
    add dx, word ptr [esi + 0x32]                        # 00473485
    call _sub_4474BA                                     # 00473489
    pop esi                                              # 0047348E
    jmp .L4734D2                                         # 0047348F
.L473491:
    push esi                                             # 00473491
    movzx ebp, byte ptr [esi + 0x887]                    # 00473492
    movzx ebp, byte ptr [ebp*8 + __1136BA5]              # 00473499
    mov ax, word ptr [_ui_object_selection+114]          # 004734A1
    mov cx, word ptr [_ui_object_selection+118]          # 004734A7
    mov bx, word ptr [_ui_object_selection+116]          # 004734AE
    mov dx, word ptr [_ui_object_selection+120]          # 004734B5
    add ax, word ptr [esi + 0x30]                        # 004734BC
    add cx, word ptr [esi + 0x32]                        # 004734C0
    add bx, word ptr [esi + 0x30]                        # 004734C4
    add dx, word ptr [esi + 0x32]                        # 004734C8
    call _sub_4474BA                                     # 004734CC
    pop esi                                              # 004734D1
.L4734D2:
    push esi                                             # 004734D2
    mov cx, word ptr [esi + 0x30]                        # 004734D3
    mov dx, word ptr [esi + 0x32]                        # 004734D7
    add cx, 3                                            # 004734DB
    add dx, word ptr [esi + 0x36]                        # 004734DF
    sub dx, 0xc                                          # 004734E3
    movzx ebx, word ptr [esi + 0x870]                    # 004734E7
    mov ax, word ptr [ebx*2 + __112C1C5]                 # 004734EE
    mov word ptr [__112C826], ax                         # 004734F6
    mov ax, word ptr [ebx*2 + _object_entry_group_counts] # 004734FC
    mov word ptr [__112C828], ax                         # 00473504
    mov bx, 0x7f6                                        # 0047350A
    mov_offset esi, __112C826                            # 0047350E
    msvc_xor al, al                                      # 00473513
    call _sub_494B3F                                     # 00473515
    pop esi                                              # 0047351A
    cmp word ptr [esi + 0x840], -1                       # 0047351B
    je _sub_473A12                                       # 00473523
    cmp dword ptr [__50D15C], -1                         # 00473529
    je _sub_473A12                                       # 00473530
    mov ebp, dword ptr [__50D15C]                        # 00473536
    mov cx, word ptr [_ui_object_selection+114]          # 0047353C
    mov dx, word ptr [_ui_object_selection+118]          # 00473543
    add cx, word ptr [_ui_object_selection+116]          # 0047354A
    add dx, word ptr [_ui_object_selection+120]          # 00473551
    shr cx, 1                                            # 00473558
    shr dx, 1                                            # 0047355B
    inc cx                                               # 0047355E
    inc dx                                               # 00473560
    add cx, word ptr [esi + 0x30]                        # 00473562
    add dx, word ptr [esi + 0x32]                        # 00473566
    mov ax, 3                                            # 0047356A
    mov ebx, dword ptr [esi + 0x85a]                     # 0047356E
    mov bl, byte ptr [ebx]                               # 00473574
    and ebx, 0x3f                                        # 00473576
    call dword ptr [ebx*4 + _paint_entry_table]          # 00473579
    push esi                                             # 00473580
    mov cx, word ptr [_ui_object_selection+114]          # 00473581
    mov dx, word ptr [_ui_object_selection+120]          # 00473588
    add cx, word ptr [_ui_object_selection+116]          # 0047358F
    shr cx, 1                                            # 00473596
    add dx, 3                                            # 00473599
    add cx, word ptr [esi + 0x30]                        # 0047359D
    add dx, word ptr [esi + 0x32]                        # 004735A1
    mov bp, word ptr [esi + 0x34]                        # 004735A5
    sub bp, word ptr [_ui_object_selection+100]          # 004735A9
    sub bp, 6                                            # 004735B0
    mov ebx, dword ptr [esi + 0x85a]                     # 004735B4
    add ebx, 0x10                                        # 004735BA
.L4735BD:
    inc ebx                                              # 004735BD
    cmp byte ptr [ebx - 1], 0                            # 004735BE
    jne .L4735BD                                         # 004735C2
    add ebx, 4                                           # 004735C4
    mov byte ptr [_str_2039], 0xe                        # 004735C7
    mov_offset esi, __5177FB                             # 004735CE
.L4735D3:
    mov al, byte ptr [ebx]                               # 004735D3
    mov byte ptr [esi], al                               # 004735D5
    inc ebx                                              # 004735D7
    inc esi                                              # 004735D8
    msvc_or al, al                                       # 004735D9
    jne .L4735D3                                         # 004735DB
    mov bx, 0x7f7                                        # 004735DD
    msvc_xor al, al                                      # 004735E1
    push ecx                                             # 004735E3
    push edx                                             # 004735E4
    call _sub_494C36                                     # 004735E5
    pop edx                                              # 004735EA
    pop ecx                                              # 004735EB
    pop esi                                              # 004735EC
    add dx, 0xa                                          # 004735ED
    mov cx, word ptr [_ui_object_selection+100]          # 004735F1
    add cx, word ptr [esi + 0x30]                        # 004735F8
    add cx, 4                                            # 004735FC
    mov ebp, dword ptr [__50D15C]                        # 00473600
    mov ax, 0x103                                        # 00473606
    mov ebx, dword ptr [esi + 0x85a]                     # 0047360A
    mov bl, byte ptr [ebx]                               # 00473610
    and ebx, 0x3f                                        # 00473612
    call dword ptr [ebx*4 + _paint_entry_table]          # 00473615
    ret                                                  # 0047361C

    .global _sub_47361D
_sub_47361D:
    push esi                                             # 0047361D
    movzx ebp, byte ptr [esi + 0x887]                    # 0047361E
    movzx ebp, byte ptr [ebp*8 + __1136BA4]              # 00473625
    msvc_mov eax, ebp                                    # 0047362D
    shl eax, 8                                           # 0047362F
    msvc_or ebp, eax                                     # 00473632
    shl eax, 8                                           # 00473634
    msvc_or ebp, eax                                     # 00473637
    shl eax, 8                                           # 00473639
    msvc_or ebp, eax                                     # 0047363C
    call _sub_447485                                     # 0047363E
    mov esi, dword ptr [__50D144]                        # 00473643
    mov ebp, dword ptr [__50D13C]                        # 00473649
    mov ecx, dword ptr [__112A110]                       # 0047364F
    msvc_xor dx, dx                                      # 00473655
    msvc_or ecx, ecx                                     # 00473658
    je .L4737B8                                          # 0047365A
.L473660:
    mov bl, byte ptr [ebp]                               # 00473660
    and bl, 0x3f                                         # 00473663
    mov eax, dword ptr [esp]                             # 00473666
    cmp bl, byte ptr [eax + 0x870]                       # 00473669
    jne .L473782                                         # 0047366F
    msvc_mov ax, dx                                      # 00473675
    add ax, 0xc                                          # 00473678
    cmp ax, word ptr [edi + 6]                           # 0047367C
    jl .L47377E                                          # 00473680
    mov ax, word ptr [edi + 6]                           # 00473686
    add ax, word ptr [edi + 0xa]                         # 0047368A
    msvc_cmp ax, dx                                      # 0047368E
    jl .L47377E                                          # 00473691
    push eax                                             # 00473697
    push ecx                                             # 00473698
    push edx                                             # 00473699
    push ebp                                             # 0047369A
    push esi                                             # 0047369B
    mov ax, 2                                            # 0047369C
    mov bx, 0xb                                          # 004736A0
    msvc_mov cx, dx                                      # 004736A4
    add dx, 0xa                                          # 004736A7
    mov esi, dword ptr [esp + 0x14]                      # 004736AB
    movzx ebp, byte ptr [esi + 0x887]                    # 004736AF
    mov si, 0xe0                                         # 004736B6
    call _sub_4C58C7                                     # 004736BA
    pop esi                                              # 004736BF
    pop ebp                                              # 004736C0
    pop edx                                              # 004736C1
    pop ecx                                              # 004736C2
    pop eax                                              # 004736C3
    mov al, 0x90                                         # 004736C4
    mov ebx, dword ptr [esp]                             # 004736C6
    cmp ebp, dword ptr [ebx + 0x85a]                     # 004736C9
    jne .L4736F3                                         # 004736CF
    push ecx                                             # 004736D1
    push edx                                             # 004736D2
    push ebp                                             # 004736D3
    push esi                                             # 004736D4
    msvc_mov cx, dx                                      # 004736D5
    add dx, 0xb                                          # 004736D8
    msvc_xor ax, ax                                      # 004736DC
    mov bx, word ptr [ebx + 0x34]                        # 004736DF
    mov ebp, 0x2000030                                   # 004736E3
    call _sub_4474BA                                     # 004736E8
    pop esi                                              # 004736ED
    pop ebp                                              # 004736EE
    pop edx                                              # 004736EF
    pop ecx                                              # 004736F0
    mov al, 0xe                                          # 004736F1
.L4736F3:
    test byte ptr [esi], 1                               # 004736F3
    je .L473739                                          # 004736F6
    push eax                                             # 004736F8
    push ecx                                             # 004736F9
    push edx                                             # 004736FA
    push ebp                                             # 004736FB
    push esi                                             # 004736FC
    mov cx, 2                                            # 004736FD
    mov word ptr [__112C876], 0xfffe                     # 00473701
    cmp al, 0xe                                          # 0047370A
    je .L473717                                          # 0047370C
    mov word ptr [__112C876], 0xffff                     # 0047370E
.L473717:
    mov ebx, dword ptr [esp + 0x14]                      # 00473717
    mov al, byte ptr [ebx + 0x887]                       # 0047371B
    and al, 0x7f                                         # 00473721
    test byte ptr [esi], 0x1c                            # 00473723
    je .L47372A                                          # 00473726
    or al, 0x40                                          # 00473728
.L47372A:
    mov_offset esi, __5045F8                             # 0047372A
    call _sub_451025                                     # 0047372F
    pop esi                                              # 00473734
    pop ebp                                              # 00473735
    pop edx                                              # 00473736
    pop ecx                                              # 00473737
    pop eax                                              # 00473738
.L473739:
    push eax                                             # 00473739
    push ecx                                             # 0047373A
    push edx                                             # 0047373B
    push ebp                                             # 0047373C
    push esi                                             # 0047373D
    add ebp, 0x10                                        # 0047373E
.L473741:
    inc ebp                                              # 00473741
    cmp byte ptr [ebp - 1], 0                            # 00473742
    jne .L473741                                         # 00473746
    add ebp, 4                                           # 00473748
    mov byte ptr [__112CC04], al                         # 0047374B
    mov_offset ecx, __112CC05                            # 00473750
.L473755:
    mov al, byte ptr [ebp]                               # 00473755
    mov byte ptr [ecx], al                               # 00473758
    inc ebp                                              # 0047375A
    inc ecx                                              # 0047375B
    msvc_or al, al                                       # 0047375C
    jne .L473755                                         # 0047375E
    msvc_xor al, al                                      # 00473760
    mov cx, 0xf                                          # 00473762
    mov_offset esi, __112CC04                            # 00473766
    mov word ptr [__112C876], 0xe0                       # 0047376B
    call _sub_451025                                     # 00473774
    pop esi                                              # 00473779
    pop ebp                                              # 0047377A
    pop edx                                              # 0047377B
    pop ecx                                              # 0047377C
    pop eax                                              # 0047377D
.L47377E:
    add dx, 0xc                                          # 0047377E
.L473782:
    inc esi                                              # 00473782
    add ebp, 0x10                                        # 00473783
.L473786:
    inc ebp                                              # 00473786
    cmp byte ptr [ebp - 1], 0                            # 00473787
    jne .L473786                                         # 0047378B
    add ebp, 4                                           # 0047378D
.L473790:
    inc ebp                                              # 00473790
    cmp byte ptr [ebp - 1], 0                            # 00473791
    jne .L473790                                         # 00473795
    add ebp, 4                                           # 00473797
    add ebp, 8                                           # 0047379A
    movzx eax, byte ptr [ebp]                            # 0047379D
    inc ebp                                              # 004737A1
    imul eax, eax, 0x10                                  # 004737A2
    msvc_add ebp, eax                                    # 004737A5
    movzx eax, byte ptr [ebp]                            # 004737A7
    inc ebp                                              # 004737AB
    imul eax, eax, 0x10                                  # 004737AC
    msvc_add ebp, eax                                    # 004737AF
    dec ecx                                              # 004737B1
    jne .L473660                                         # 004737B2
.L4737B8:
    pop esi                                              # 004737B8
    ret                                                  # 004737B9

    .global _sub_4737BA
_sub_4737BA:
    cmp dx, 2                                            # 004737BA
    je .L4737CD                                          # 004737BE
    cmp dx, 4                                            # 004737C0
    je .L47380C                                          # 004737C4
    cmp dx, 5                                            # 004737C6
    je .L4737D3                                          # 004737CA
    ret                                                  # 004737CC
.L4737CD:
    call _sub_473A13                                     # 004737CD
    ret                                                  # 004737D2
.L4737D3:
    xor word ptr [esi + 0x856], 1                        # 004737D3
    movzx eax, word ptr [esi + 0x870]                    # 004737DB
    call _sub_473154                                     # 004737E2
    test word ptr [esi + 0x856], 1                       # 004737E7
    jne .L473802                                         # 004737F0
    test byte ptr [eax + __4FE384], 2                    # 004737F2
    je .L473802                                          # 004737F9
    movzx eax, byte ptr [__112C21C]                      # 004737FB
.L473802:
    call _sub_4731EE                                     # 00473802
    msvc_jmp _sub_4CA4BD                                 # 00473807
.L47380C:
    mov dx, word ptr [_ui_object_selection+54]           # 0047380C
    mov cx, word ptr [esi + 0x30]                        # 00473813
    add dx, word ptr [esi + 0x32]                        # 00473817
    add cx, 3                                            # 0047381B
    sub dx, 0x1a                                         # 0047381F
    msvc_xor bx, bx                                      # 00473823
.L473826:
    push ecx                                             # 00473826
    push edx                                             # 00473827
    msvc_mov ax, bx                                      # 00473828
    imul ax, ax, 0x18                                    # 0047382B
    msvc_sub dx, ax                                      # 0047382F
    msvc_mov ax, bx                                      # 00473832
    imul ax, ax, 0xa                                     # 00473835
    msvc_add cx, ax                                      # 00473839
    mov_offset ebp, __112C21C                            # 0047383C
.L473841:
    cmp byte ptr [ebp], 0xff                             # 00473841
    je .L473887                                          # 00473845
    cmp bl, byte ptr [ebp + 1]                           # 00473847
    jne .L473882                                         # 0047384A
    cmp cx, word ptr [__52334A]                          # 0047384C
    jg .L47387E                                          # 00473853
    cmp dx, word ptr [__52334C]                          # 00473855
    jg .L47387E                                          # 0047385C
    msvc_mov ax, cx                                      # 0047385E
    add ax, 0x1f                                         # 00473861
    cmp ax, word ptr [__52334A]                          # 00473865
    jle .L47387E                                         # 0047386C
    msvc_mov ax, dx                                      # 0047386E
    add ax, 0x1b                                         # 00473871
    cmp ax, word ptr [__52334C]                          # 00473875
    jg .L473892                                          # 0047387C
.L47387E:
    add cx, 0x1f                                         # 0047387E
.L473882:
    add ebp, 2                                           # 00473882
    jmp .L473841                                         # 00473885
.L473887:
    pop edx                                              # 00473887
    pop ecx                                              # 00473888
    inc bx                                               # 00473889
    cmp bx, 2                                            # 0047388B
    jb .L473826                                          # 0047388F
    ret                                                  # 00473891
.L473892:
    pop edx                                              # 00473892
    pop ecx                                              # 00473893
    movzx edx, byte ptr [ebp]                            # 00473894
    cmp dx, word ptr [esi + 0x870]                       # 00473898
    je _sub_473A12                                       # 0047389F
    movzx eax, dx                                        # 004738A5
    call _sub_4731EE                                     # 004738A8
    mov word ptr [esi + 0x840], 0xffff                   # 004738AD
    mov dword ptr [esi + 0x85a], 0xffffffff              # 004738B6
    mov word ptr [esi + 0x50], 0                         # 004738C0
    call _sub_471B95                                     # 004738C6
    call _sub_472BBC                                     # 004738CB
    cmp bx, -1                                           # 004738D0
    je .L4738E8                                          # 004738D4
    mov word ptr [esi + 0x840], bx                       # 004738D6
    mov dword ptr [esi + 0x85a], ebp                     # 004738DD
    call _sub_47176D                                     # 004738E3
.L4738E8:
    msvc_jmp _sub_4CA4BD                                 # 004738E8

    .global _sub_4738ED
_sub_4738ED:
    movzx edx, word ptr [esi + 0x870]                    # 004738ED
    movzx edx, word ptr [edx*2 + __112C181]              # 004738F4
    imul edx, edx, 0xc                                   # 004738FC
    ret                                                  # 004738FF

    .global _sub_473900
_sub_473900:
    mov word ptr [__112C826], 0x827                      # 00473900
    ret                                                  # 00473909

    .global _sub_47390A
_sub_47390A:
    call _sub_472B54                                     # 0047390A
    cmp bx, word ptr [esi + 0x840]                       # 0047390F
    je _sub_473A12                                       # 00473916
    cmp bx, -1                                           # 0047391C
    je _sub_473A12                                       # 00473920
    mov word ptr [esi + 0x840], bx                       # 00473926
    mov dword ptr [esi + 0x85a], ebp                     # 0047392D
    call _sub_471B95                                     # 00473933
    cmp bx, -1                                           # 00473938
    je .L473943                                          # 0047393C
    call _sub_47176D                                     # 0047393E
.L473943:
    msvc_jmp _sub_4CA4BD                                 # 00473943

    .global _sub_473948
_sub_473948:
    call _sub_472B54                                     # 00473948
    cmp ebx, -1                                          # 0047394D
    je _sub_473A12                                       # 00473950
    call _sub_4CA4BD                                     # 00473956
    push ebp                                             # 0047395B
    mov ebp, dword ptr [__113E72C]                       # 0047395C
    push eax                                             # 00473962
    push ebx                                             # 00473963
    msvc_mov ebx, ebp                                    # 00473964
    mov eax, 0                                           # 00473966
    call _sub_489CB5                                     # 0047396B
    pop ebx                                              # 00473970
    pop eax                                              # 00473971
    pop ebp                                              # 00473972
    mov cl, byte ptr [ebp]                               # 00473973
    and ecx, 0x3f                                        # 00473976
    cmp word ptr [ecx*2 + _object_entry_group_counts], 1 # 00473979
    jne .L4739AA                                         # 00473982
    test byte ptr [edi], 1                               # 00473984
    jne .L4739AA                                         # 00473987
    push edi                                             # 00473989
    push ebp                                             # 0047398A
    msvc_mov dl, cl                                      # 0047398B
    mov edi, dword ptr [__50D144]                        # 0047398D
    call _sub_472AFE                                     # 00473993
    cmp ebp, -1                                          # 00473998
    je .L4739A8                                          # 0047399B
    mov bx, 6                                            # 0047399D
    push esi                                             # 004739A1
    call _sub_473D1D                                     # 004739A2
    pop esi                                              # 004739A7
.L4739A8:
    pop ebp                                              # 004739A8
    pop edi                                              # 004739A9
.L4739AA:
    msvc_xor bx, bx                                      # 004739AA
    test byte ptr [edi], 1                               # 004739AD
    jne .L4739B5                                         # 004739B0
    or bl, 1                                             # 004739B2
.L4739B5:
    or bl, 6                                             # 004739B5
    push esi                                             # 004739B8
    call _sub_473D1D                                     # 004739B9
    pop esi                                              # 004739BE
    jae _sub_473A12                                      # 004739BF
    push esi                                             # 004739C1
    test bl, 1                                           # 004739C2
    mov bx, 0x801                                        # 004739C5
    jne .L4739CF                                         # 004739C9
    mov bx, 0x802                                        # 004739CB
.L4739CF:
    mov dx, word ptr [__9C68E6]                          # 004739CF
    call _sub_431A8A                                     # 004739D6
    pop esi                                              # 004739DB
    ret                                                  # 004739DC

    .global _sub_4739DD
_sub_4739DD:
    test word ptr [__508F14], 2                          # 004739DD
    je _sub_473A12                                       # 004739E6
    push esi                                             # 004739E8
    call _sub_474821                                     # 004739E9
    call _sub_474874                                     # 004739EE
    call _sub_47237D                                     # 004739F3
    call _sub_471B95                                     # 004739F8
    call _sub_473B91                                     # 004739FD
    pop esi                                              # 00473A02
    ret                                                  # 00473A03

    .global _sub_473A04
_sub_473A04:
    mov ax, 0x79f                                        # 00473A04
    mov bx, word ptr [esi + 0x40]                        # 00473A08
    call _sub_4CB966                                     # 00473A0C
    ret                                                  # 00473A11

    .global _sub_473A12
_sub_473A12:
    ret                                                  # 00473A12

    .global _sub_473A13
_sub_473A13:
    call _sub_474167                                     # 00473A13
    jb .L473A2E                                          # 00473A18
    mov cl, 0x1f                                         # 00473A1A
    msvc_xor dx, dx                                      # 00473A1C
    call _sub_4C9B56                                     # 00473A1F
    je .L473A2B                                          # 00473A24
    call _sub_4CC6EA                                     # 00473A26
.L473A2B:
    msvc_and eax, eax                                    # 00473A2B
    ret                                                  # 00473A2D
.L473A2E:
    push edx                                             # 00473A2E
    mov bx, 0x803                                        # 00473A2F
    mov dx, word ptr [__9C68E6]                          # 00473A33
    call _sub_431A8A                                     # 00473A3A
    mov cl, 0x1f                                         # 00473A3F
    msvc_xor dx, dx                                      # 00473A41
    call _sub_4C9B56                                     # 00473A44
    pop edx                                              # 00473A49
    je .L473A93                                          # 00473A4A
    msvc_mov eax, edx                                    # 00473A4C
    call _sub_4731EE                                     # 00473A4E
    mov word ptr [esi + 0x840], 0xffff                   # 00473A53
    mov dword ptr [esi + 0x85a], 0xffffffff              # 00473A5C
    mov word ptr [esi + 0x50], 0                         # 00473A66
    call _sub_471B95                                     # 00473A6C
    call _sub_4CA4BD                                     # 00473A71
    call _sub_472BBC                                     # 00473A76
    cmp bx, -1                                           # 00473A7B
    je .L473A93                                          # 00473A7F
    mov word ptr [esi + 0x840], bx                       # 00473A81
    mov dword ptr [esi + 0x85a], ebp                     # 00473A88
    call _sub_47176D                                     # 00473A8E
.L473A93:
    stc                                                  # 00473A93
    ret                                                  # 00473A94

    .global _sub_473A95
_sub_473A95:
    push eax                                             # 00473A95
    inc dword ptr [__50D148]                             # 00473A96
    cmp dword ptr [__50D148], 1                          # 00473A9C
    jne _sub_473B81                                      # 00473AA3
    mov ecx, dword ptr [__112A110]                       # 00473AA9
    mov dword ptr [__113E87C], 4                         # 00473AAF
    push ecx                                             # 00473AB9
    call _sub_406BF7                                     # 00473ABA
    add esp, 4                                           # 00473ABF
    mov dword ptr [__113E87C], 0                         # 00473AC2
    cmp eax, -1                                          # 00473ACC
    je _sub_473B83                                       # 00473ACF
    mov dword ptr [__50D144], eax                        # 00473AD5
    mov edi, dword ptr [__50D144]                        # 00473ADA
    mov ecx, dword ptr [__112A110]                       # 00473AE0
    msvc_xor al, al                                      # 00473AE6
    rep stosb byte ptr es:[edi], al                      # 00473AE8
    msvc_xor edi, edi                                    # 00473AEA
.L473AEC:
    mov word ptr [edi*2 + __112C1C5], 0                  # 00473AEC
    inc edi                                              # 00473AF6
    cmp edi, 0x22                                        # 00473AF7
    jb .L473AEC                                          # 00473AFA
    msvc_xor ecx, ecx                                    # 00473AFC
.L473AFE:
    mov word ptr [ecx*2 + __112C181], 0                  # 00473AFE
    inc ecx                                              # 00473B08
    cmp ecx, 0x22                                        # 00473B09
    jb .L473AFE                                          # 00473B0C
    mov esi, dword ptr [__50D13C]                        # 00473B0E
    mov ecx, dword ptr [__112A110]                       # 00473B14
    msvc_or ecx, ecx                                     # 00473B1A
    je _sub_473B5A                                       # 00473B1C
.L473B1E:
    mov bl, byte ptr [esi]                               # 00473B1E
    and ebx, 0x3f                                        # 00473B20
    inc word ptr [ebx*2 + __112C181]                     # 00473B23
    add esi, 0x10                                        # 00473B2B
.L473B2E:
    inc esi                                              # 00473B2E
    cmp byte ptr [esi - 1], 0                            # 00473B2F
    jne .L473B2E                                         # 00473B33
    add esi, 4                                           # 00473B35
.L473B38:
    inc esi                                              # 00473B38
    cmp byte ptr [esi - 1], 0                            # 00473B39
    jne .L473B38                                         # 00473B3D
    add esi, 4                                           # 00473B3F
    add esi, 8                                           # 00473B42
    movzx eax, byte ptr [esi]                            # 00473B45
    inc esi                                              # 00473B48
    imul eax, eax, 0x10                                  # 00473B49
    msvc_add esi, eax                                    # 00473B4C
    movzx eax, byte ptr [esi]                            # 00473B4E
    inc esi                                              # 00473B51
    imul eax, eax, 0x10                                  # 00473B52
    msvc_add esi, eax                                    # 00473B55
    dec ecx                                              # 00473B57
    jne .L473B1E                                         # 00473B58

    .global _sub_473B5A
_sub_473B5A:
    test dword ptr [esp], 1                              # 00473B5A
    jne .L473B68                                         # 00473B61
    call _sub_472D3F                                     # 00473B63
.L473B68:
    call _sub_472C84                                     # 00473B68
    call _sub_472CFD                                     # 00473B6D
    call _sub_472D19                                     # 00473B72
    call _sub_4740CF                                     # 00473B77
    call _sub_472C84                                     # 00473B7C

    .global _sub_473B81
_sub_473B81:
    pop eax                                              # 00473B81
    ret                                                  # 00473B82

    .global _sub_473B83
_sub_473B83:
    mov eax, 0xff000002                                  # 00473B83
    mov bx, 0xffff                                       # 00473B88
    msvc_jmp _sub_4BE5EB                                 # 00473B8C

    .global _sub_473B91
_sub_473B91:
    dec dword ptr [__50D148]                             # 00473B91
    jne .L473BC6                                         # 00473B97
    mov ecx, 0xffffffff                                  # 00473B99
    xchg dword ptr [__50D144], ecx                       # 00473B9E
    cmp ecx, -1                                          # 00473BA4
    je .L473BC6                                          # 00473BA7
    mov dword ptr [__113E87C], 4                         # 00473BA9
    push ecx                                             # 00473BB3
    call _sub_406C12                                     # 00473BB4
    add esp, 4                                           # 00473BB9
    mov dword ptr [__113E87C], 0                         # 00473BBC
.L473BC6:
    ret                                                  # 00473BC6

    .global _sub_473BC7
_sub_473BC7:
    push eax                                             # 00473BC7
    push ebp                                             # 00473BC8
    mov al, byte ptr [ebp + 4]                           # 00473BC9
    cmp al, 0x20                                         # 00473BCC
    je .L473BD3                                          # 00473BCE
    mov byte ptr [edi], al                               # 00473BD0
    inc edi                                              # 00473BD2
.L473BD3:
    mov al, byte ptr [ebp + 5]                           # 00473BD3
    cmp al, 0x20                                         # 00473BD6
    je .L473BDD                                          # 00473BD8
    mov byte ptr [edi], al                               # 00473BDA
    inc edi                                              # 00473BDC
.L473BDD:
    mov al, byte ptr [ebp + 6]                           # 00473BDD
    cmp al, 0x20                                         # 00473BE0
    je .L473BE7                                          # 00473BE2
    mov byte ptr [edi], al                               # 00473BE4
    inc edi                                              # 00473BE6
.L473BE7:
    mov al, byte ptr [ebp + 7]                           # 00473BE7
    cmp al, 0x20                                         # 00473BEA
    je .L473BF1                                          # 00473BEC
    mov byte ptr [edi], al                               # 00473BEE
    inc edi                                              # 00473BF0
.L473BF1:
    mov al, byte ptr [ebp + 8]                           # 00473BF1
    cmp al, 0x20                                         # 00473BF4
    je .L473BFB                                          # 00473BF6
    mov byte ptr [edi], al                               # 00473BF8
    inc edi                                              # 00473BFA
.L473BFB:
    mov al, byte ptr [ebp + 9]                           # 00473BFB
    cmp al, 0x20                                         # 00473BFE
    je .L473C05                                          # 00473C00
    mov byte ptr [edi], al                               # 00473C02
    inc edi                                              # 00473C04
.L473C05:
    mov al, byte ptr [ebp + 0xa]                         # 00473C05
    cmp al, 0x20                                         # 00473C08
    je .L473C0F                                          # 00473C0A
    mov byte ptr [edi], al                               # 00473C0C
    inc edi                                              # 00473C0E
.L473C0F:
    mov al, byte ptr [ebp + 0xb]                         # 00473C0F
    cmp al, 0x20                                         # 00473C12
    je .L473C19                                          # 00473C14
    mov byte ptr [edi], al                               # 00473C16
    inc edi                                              # 00473C18
.L473C19:
    mov byte ptr [edi], 0x2f                             # 00473C19
    movzx eax, byte ptr [ebp]                            # 00473C1C
    shr eax, 4                                           # 00473C20
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C23
    mov byte ptr [edi + 1], al                           # 00473C29
    mov al, byte ptr [ebp]                               # 00473C2C
    and eax, 0xf                                         # 00473C2F
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C32
    mov byte ptr [edi + 2], al                           # 00473C38
    movzx eax, byte ptr [ebp + 1]                        # 00473C3B
    shr eax, 4                                           # 00473C3F
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C42
    mov byte ptr [edi + 3], al                           # 00473C48
    mov al, byte ptr [ebp + 1]                           # 00473C4B
    and eax, 0xf                                         # 00473C4E
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C51
    mov byte ptr [edi + 4], al                           # 00473C57
    movzx eax, byte ptr [ebp + 2]                        # 00473C5A
    shr eax, 4                                           # 00473C5E
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C61
    mov byte ptr [edi + 5], al                           # 00473C67
    mov al, byte ptr [ebp + 2]                           # 00473C6A
    and eax, 0xf                                         # 00473C6D
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C70
    mov byte ptr [edi + 6], al                           # 00473C76
    movzx eax, byte ptr [ebp + 3]                        # 00473C79
    shr eax, 4                                           # 00473C7D
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C80
    mov byte ptr [edi + 7], al                           # 00473C86
    mov al, byte ptr [ebp + 3]                           # 00473C89
    and eax, 0xf                                         # 00473C8C
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C8F
    mov byte ptr [edi + 8], al                           # 00473C95
    movzx eax, byte ptr [ebp + 0xc]                      # 00473C98
    shr eax, 4                                           # 00473C9C
    mov al, byte ptr [eax + __4FE3A6]                    # 00473C9F
    mov byte ptr [edi + 9], al                           # 00473CA5
    mov al, byte ptr [ebp + 0xc]                         # 00473CA8
    and eax, 0xf                                         # 00473CAB
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CAE
    mov byte ptr [edi + 0xa], al                         # 00473CB4
    movzx eax, byte ptr [ebp + 0xd]                      # 00473CB7
    shr eax, 4                                           # 00473CBB
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CBE
    mov byte ptr [edi + 0xb], al                         # 00473CC4
    mov al, byte ptr [ebp + 0xd]                         # 00473CC7
    and eax, 0xf                                         # 00473CCA
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CCD
    mov byte ptr [edi + 0xc], al                         # 00473CD3
    movzx eax, byte ptr [ebp + 0xe]                      # 00473CD6
    shr eax, 4                                           # 00473CDA
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CDD
    mov byte ptr [edi + 0xd], al                         # 00473CE3
    mov al, byte ptr [ebp + 0xe]                         # 00473CE6
    and eax, 0xf                                         # 00473CE9
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CEC
    mov byte ptr [edi + 0xe], al                         # 00473CF2
    movzx eax, byte ptr [ebp + 0xf]                      # 00473CF5
    shr eax, 4                                           # 00473CF9
    mov al, byte ptr [eax + __4FE3A6]                    # 00473CFC
    mov byte ptr [edi + 0xf], al                         # 00473D02
    mov al, byte ptr [ebp + 0xf]                         # 00473D05
    and eax, 0xf                                         # 00473D08
    mov al, byte ptr [eax + __4FE3A6]                    # 00473D0B
    mov byte ptr [edi + 0x10], al                        # 00473D11
    add edi, 0x11                                        # 00473D14
    mov byte ptr [edi], 0                                # 00473D17
    pop ebp                                              # 00473D1A
    pop eax                                              # 00473D1B
    ret                                                  # 00473D1C

    .global _sub_473D1D
_sub_473D1D:
    msvc_or bh, bh                                       # 00473D1D
    jne .L473D47                                         # 00473D1F
    msvc_xor edx, edx                                    # 00473D21
    msvc_xor ecx, ecx                                    # 00473D23
.L473D25:
    add cx, word ptr [edx*2 + __112C181]                 # 00473D25
    inc edx                                              # 00473D2D
    cmp edx, 0x22                                        # 00473D2E
    jb .L473D25                                          # 00473D31
    mov esi, dword ptr [__50D144]                        # 00473D33
.L473D39:
    mov al, byte ptr [esi]                               # 00473D39
    and al, 0xfd                                         # 00473D3B
    test al, 1                                           # 00473D3D
    je .L473D43                                          # 00473D3F
    or al, 2                                             # 00473D41
.L473D43:
    inc esi                                              # 00473D43
    dec ecx                                              # 00473D44
    jne .L473D39                                         # 00473D45
.L473D47:
    mov esi, dword ptr [__50D13C]                        # 00473D47
    mov edi, dword ptr [__50D144]                        # 00473D4D
    mov ecx, dword ptr [__112A110]                       # 00473D53
    msvc_or ecx, ecx                                     # 00473D59
    je .L473DD2                                          # 00473D5B
.L473D5D:
    test byte ptr [esi], 0xc0                            # 00473D5D
    jne .L473D83                                         # 00473D60
    mov eax, dword ptr [ebp]                             # 00473D62
    cmp eax, dword ptr [esi]                             # 00473D65
    jne .L473DA2                                         # 00473D67
    mov eax, dword ptr [ebp + 4]                         # 00473D69
    cmp eax, dword ptr [esi + 4]                         # 00473D6C
    jne .L473DA2                                         # 00473D6F
    mov eax, dword ptr [ebp + 8]                         # 00473D71
    cmp eax, dword ptr [esi + 8]                         # 00473D74
    jne .L473DA2                                         # 00473D77
    mov eax, dword ptr [ebp + 0xc]                       # 00473D79
    cmp eax, dword ptr [esi + 0xc]                       # 00473D7C
    jne .L473DA2                                         # 00473D7F
    jmp .L473DEA                                         # 00473D81
.L473D83:
    mov al, byte ptr [esi]                               # 00473D83
    mov ah, byte ptr [ebp]                               # 00473D85
    and ax, 0x3f3f                                       # 00473D88
    cmp al, ah                                           # 00473D8C
    jne .L473DA2                                         # 00473D8E
    mov eax, dword ptr [esi + 4]                         # 00473D90
    cmp eax, dword ptr [ebp + 4]                         # 00473D93
    jne .L473DA2                                         # 00473D96
    mov eax, dword ptr [esi + 8]                         # 00473D98
    cmp eax, dword ptr [ebp + 8]                         # 00473D9B
    jne .L473DA2                                         # 00473D9E
    jmp .L473DEA                                         # 00473DA0
.L473DA2:
    add esi, 0x10                                        # 00473DA2
.L473DA5:
    inc esi                                              # 00473DA5
    cmp byte ptr [esi - 1], 0                            # 00473DA6
    jne .L473DA5                                         # 00473DAA
    add esi, 4                                           # 00473DAC
.L473DAF:
    inc esi                                              # 00473DAF
    cmp byte ptr [esi - 1], 0                            # 00473DB0
    jne .L473DAF                                         # 00473DB4
    add esi, 4                                           # 00473DB6
    add esi, 8                                           # 00473DB9
    movzx eax, byte ptr [esi]                            # 00473DBC
    inc esi                                              # 00473DBF
    imul eax, eax, 0x10                                  # 00473DC0
    msvc_add esi, eax                                    # 00473DC3
    movzx eax, byte ptr [esi]                            # 00473DC5
    inc esi                                              # 00473DC8
    imul eax, eax, 0x10                                  # 00473DC9
    msvc_add esi, eax                                    # 00473DCC
    inc edi                                              # 00473DCE
    dec ecx                                              # 00473DCF
    jne .L473D5D                                         # 00473DD0
.L473DD2:
    mov_offset edi, _str_2042+41                         # 00473DD2
    call _sub_473BC7                                     # 00473DD7
    mov word ptr [__9C68E6], 0x7fa                       # 00473DDC
    msvc_jmp .L473FD9                                    # 00473DE5
.L473DEA:
    test bl, 1                                           # 00473DEA
    jne .L473E93                                         # 00473DED
    test byte ptr [edi], 1                               # 00473DF3
    je .L473F7B                                          # 00473DF6
    test byte ptr [edi], 4                               # 00473DFC
    jne .L473F9F                                         # 00473DFF
    test byte ptr [edi], 8                               # 00473E05
    jne .L473F94                                         # 00473E08
    test byte ptr [edi], 0x10                            # 00473E0E
    jne .L473F89                                         # 00473E11
    push edi                                             # 00473E17
    push esi                                             # 00473E18
    add esi, 0x10                                        # 00473E19
.L473E1C:
    inc esi                                              # 00473E1C
    cmp byte ptr [esi - 1], 0                            # 00473E1D
    jne .L473E1C                                         # 00473E21
    add esi, 4                                           # 00473E23
.L473E26:
    inc esi                                              # 00473E26
    cmp byte ptr [esi - 1], 0                            # 00473E27
    jne .L473E26                                         # 00473E2B
    add esi, 4                                           # 00473E2D
    add esi, 8                                           # 00473E30
    movzx ecx, byte ptr [esi]                            # 00473E33
    imul ecx, ecx, 0x10                                  # 00473E36
    inc esi                                              # 00473E39
    msvc_add esi, ecx                                    # 00473E3A
    movzx ecx, byte ptr [esi]                            # 00473E3C
    inc esi                                              # 00473E3F
    msvc_or ecx, ecx                                     # 00473E40
    je .L473E5E                                          # 00473E42
.L473E44:
    test bl, 4                                           # 00473E44
    je .L473E58                                          # 00473E47
    msvc_mov ebp, esi                                    # 00473E49
    push ebx                                             # 00473E4B
    push ecx                                             # 00473E4C
    push esi                                             # 00473E4D
    inc bh                                               # 00473E4E
    call _sub_473D1D                                     # 00473E50
    pop esi                                              # 00473E55
    pop ecx                                              # 00473E56
    pop ebx                                              # 00473E57
.L473E58:
    add esi, 0x10                                        # 00473E58
    dec ecx                                              # 00473E5B
    jne .L473E44                                         # 00473E5C
.L473E5E:
    pop esi                                              # 00473E5E
    pop edi                                              # 00473E5F
    push esi                                             # 00473E60
    add esi, 0x10                                        # 00473E61
.L473E64:
    inc esi                                              # 00473E64
    cmp byte ptr [esi - 1], 0                            # 00473E65
    jne .L473E64                                         # 00473E69
    add esi, 4                                           # 00473E6B
.L473E6E:
    inc esi                                              # 00473E6E
    cmp byte ptr [esi - 1], 0                            # 00473E6F
    jne .L473E6E                                         # 00473E73
    mov eax, dword ptr [esi]                             # 00473E75
    pop esi                                              # 00473E77
    sub dword ptr [__112C209], eax                       # 00473E78
    mov cl, byte ptr [esi]                               # 00473E7E
    and ecx, 0x3f                                        # 00473E80
    dec word ptr [ecx*2 + __112C1C5]                     # 00473E83
    and byte ptr [edi], 0xfe                             # 00473E8B
    msvc_jmp .L473F7B                                    # 00473E8E
.L473E93:
    msvc_or bh, bh                                       # 00473E93
    jne .L473E9F                                         # 00473E95
    test bl, 8                                           # 00473E97
    je .L473E9F                                          # 00473E9A
    or byte ptr [edi], 0x10                              # 00473E9C
.L473E9F:
    test byte ptr [edi], 1                               # 00473E9F
    jne .L473F7B                                         # 00473EA2
    mov cl, byte ptr [esi]                               # 00473EA8
    and ecx, 0x3f                                        # 00473EAA
    mov dx, word ptr [ecx*2 + _object_entry_group_counts] # 00473EAD
    cmp dx, word ptr [ecx*2 + __112C1C5]                 # 00473EB5
    jbe .L473FC1                                         # 00473EBD
    push edi                                             # 00473EC3
    push esi                                             # 00473EC4
    add esi, 0x10                                        # 00473EC5
.L473EC8:
    inc esi                                              # 00473EC8
    cmp byte ptr [esi - 1], 0                            # 00473EC9
    jne .L473EC8                                         # 00473ECD
    add esi, 4                                           # 00473ECF
.L473ED2:
    inc esi                                              # 00473ED2
    cmp byte ptr [esi - 1], 0                            # 00473ED3
    jne .L473ED2                                         # 00473ED7
    add esi, 4                                           # 00473ED9
    add esi, 8                                           # 00473EDC
    movzx ecx, byte ptr [esi]                            # 00473EDF
    inc esi                                              # 00473EE2
    msvc_or ecx, ecx                                     # 00473EE3
    je .L473F02                                          # 00473EE5
.L473EE7:
    msvc_mov ebp, esi                                    # 00473EE7
    push ebx                                             # 00473EE9
    push ecx                                             # 00473EEA
    push esi                                             # 00473EEB
    inc bh                                               # 00473EEC
    call _sub_473D1D                                     # 00473EEE
    pop esi                                              # 00473EF3
    pop ecx                                              # 00473EF4
    pop ebx                                              # 00473EF5
    jb .L473FD7                                          # 00473EF6
    add esi, 0x10                                        # 00473EFC
    dec ecx                                              # 00473EFF
    jne .L473EE7                                         # 00473F00
.L473F02:
    movzx ecx, byte ptr [esi]                            # 00473F02
    inc esi                                              # 00473F05
    msvc_or ecx, ecx                                     # 00473F06
    je .L473F24                                          # 00473F08
.L473F0A:
    test bl, 4                                           # 00473F0A
    je .L473F1E                                          # 00473F0D
    msvc_mov ebp, esi                                    # 00473F0F
    push ebx                                             # 00473F11
    push ecx                                             # 00473F12
    push esi                                             # 00473F13
    inc bh                                               # 00473F14
    call _sub_473D1D                                     # 00473F16
    pop esi                                              # 00473F1B
    pop ecx                                              # 00473F1C
    pop ebx                                              # 00473F1D
.L473F1E:
    add esi, 0x10                                        # 00473F1E
    dec ecx                                              # 00473F21
    jne .L473F0A                                         # 00473F22
.L473F24:
    pop esi                                              # 00473F24
    pop edi                                              # 00473F25
    msvc_or bh, bh                                       # 00473F26
    je .L473F2F                                          # 00473F28
    test bl, 2                                           # 00473F2A
    je .L473FAA                                          # 00473F2D
.L473F2F:
    push esi                                             # 00473F2F
    add esi, 0x10                                        # 00473F30
.L473F33:
    inc esi                                              # 00473F33
    cmp byte ptr [esi - 1], 0                            # 00473F34
    jne .L473F33                                         # 00473F38
    add esi, 4                                           # 00473F3A
.L473F3D:
    inc esi                                              # 00473F3D
    cmp byte ptr [esi - 1], 0                            # 00473F3E
    jne .L473F3D                                         # 00473F42
    mov eax, dword ptr [esi]                             # 00473F44
    pop esi                                              # 00473F46
    add eax, dword ptr [__112C209]                       # 00473F47
    cmp eax, 0x40000                                     # 00473F4D
    ja .L473FCC                                          # 00473F52
    mov cl, byte ptr [esi]                               # 00473F54
    and ecx, 0x3f                                        # 00473F56
    mov dx, word ptr [ecx*2 + _object_entry_group_counts] # 00473F59
    cmp dx, word ptr [ecx*2 + __112C1C5]                 # 00473F61
    jbe .L473FC1                                         # 00473F69
    mov dword ptr [__112C209], eax                       # 00473F6B
    inc word ptr [ecx*2 + __112C1C5]                     # 00473F70
    or byte ptr [edi], 1                                 # 00473F78
.L473F7B:
    msvc_or bh, bh                                       # 00473F7B
    jne .L473F86                                         # 00473F7D
    push ebx                                             # 00473F7F
    call _sub_4740CF                                     # 00473F80
    pop ebx                                              # 00473F85
.L473F86:
    msvc_and eax, eax                                    # 00473F86
    ret                                                  # 00473F88
.L473F89:
    mov word ptr [__9C68E6], 0x800                       # 00473F89
    jmp .L473FD9                                         # 00473F92
.L473F94:
    mov word ptr [__9C68E6], 0x7ff                       # 00473F94
    jmp .L473FD9                                         # 00473F9D
.L473F9F:
    mov word ptr [__9C68E6], 0x7fe                       # 00473F9F
    jmp .L473FD9                                         # 00473FA8
.L473FAA:
    mov_offset edi, _str_2045+45                         # 00473FAA
    msvc_mov ebp, esi                                    # 00473FAF
    call _sub_473BC7                                     # 00473FB1
    mov word ptr [__9C68E6], 0x7fd                       # 00473FB6
    jmp .L473FD9                                         # 00473FBF
.L473FC1:
    mov word ptr [__9C68E6], 0x7fc                       # 00473FC1
    jmp .L473FD9                                         # 00473FCA
.L473FCC:
    mov word ptr [__9C68E6], 0x7fb                       # 00473FCC
    jmp .L473FD9                                         # 00473FD5
.L473FD7:
    pop esi                                              # 00473FD7
    pop edi                                              # 00473FD8
.L473FD9:
    msvc_or bh, bh                                       # 00473FD9
    je .L47400A                                          # 00473FDB
    msvc_xor edx, edx                                    # 00473FDD
    msvc_xor ecx, ecx                                    # 00473FDF
.L473FE1:
    add cx, word ptr [edx*2 + __112C181]                 # 00473FE1
    inc edx                                              # 00473FE9
    cmp edx, 0x22                                        # 00473FEA
    jb .L473FE1                                          # 00473FED
    mov esi, dword ptr [__50D144]                        # 00473FEF
.L473FF5:
    mov al, byte ptr [esi]                               # 00473FF5
    and al, 0xfe                                         # 00473FF7
    test al, 2                                           # 00473FF9
    je .L473FFF                                          # 00473FFB
    or al, 1                                             # 00473FFD
.L473FFF:
    inc esi                                              # 00473FFF
    dec ecx                                              # 00474000
    jne .L473FF5                                         # 00474001
    push ebx                                             # 00474003
    call _sub_472C84                                     # 00474004
    pop ebx                                              # 00474009
.L47400A:
    stc                                                  # 0047400A
    ret                                                  # 0047400B

    .global _sub_47400C
_sub_47400C:
    mov edi, dword ptr [__50D144]                        # 0047400C
    mov esi, dword ptr [__50D13C]                        # 00474012
    mov ecx, dword ptr [__112A110]                       # 00474018
    msvc_or ecx, ecx                                     # 0047401E
    je .L474097                                          # 00474020
.L474022:
    test byte ptr [esi], 0xc0                            # 00474022
    jne .L474048                                         # 00474025
    mov eax, dword ptr [ebp]                             # 00474027
    cmp eax, dword ptr [esi]                             # 0047402A
    jne .L474067                                         # 0047402C
    mov eax, dword ptr [ebp + 4]                         # 0047402E
    cmp eax, dword ptr [esi + 4]                         # 00474031
    jne .L474067                                         # 00474034
    mov eax, dword ptr [ebp + 8]                         # 00474036
    cmp eax, dword ptr [esi + 8]                         # 00474039
    jne .L474067                                         # 0047403C
    mov eax, dword ptr [ebp + 0xc]                       # 0047403E
    cmp eax, dword ptr [esi + 0xc]                       # 00474041
    jne .L474067                                         # 00474044
    jmp .L474098                                         # 00474046
.L474048:
    mov al, byte ptr [esi]                               # 00474048
    mov ah, byte ptr [ebp]                               # 0047404A
    and ax, 0x3f3f                                       # 0047404D
    cmp al, ah                                           # 00474051
    jne .L474067                                         # 00474053
    mov eax, dword ptr [esi + 4]                         # 00474055
    cmp eax, dword ptr [ebp + 4]                         # 00474058
    jne .L474067                                         # 0047405B
    mov eax, dword ptr [esi + 8]                         # 0047405D
    cmp eax, dword ptr [ebp + 8]                         # 00474060
    jne .L474067                                         # 00474063
    jmp .L474098                                         # 00474065
.L474067:
    add esi, 0x10                                        # 00474067
.L47406A:
    inc esi                                              # 0047406A
    cmp byte ptr [esi - 1], 0                            # 0047406B
    jne .L47406A                                         # 0047406F
    add esi, 4                                           # 00474071
.L474074:
    inc esi                                              # 00474074
    cmp byte ptr [esi - 1], 0                            # 00474075
    jne .L474074                                         # 00474079
    add esi, 4                                           # 0047407B
    add esi, 8                                           # 0047407E
    movzx eax, byte ptr [esi]                            # 00474081
    inc esi                                              # 00474084
    imul eax, eax, 0x10                                  # 00474085
    msvc_add esi, eax                                    # 00474088
    movzx eax, byte ptr [esi]                            # 0047408A
    inc esi                                              # 0047408D
    imul eax, eax, 0x10                                  # 0047408E
    msvc_add esi, eax                                    # 00474091
    inc edi                                              # 00474093
    dec ecx                                              # 00474094
    jne .L474022                                         # 00474095
.L474097:
    ret                                                  # 00474097
.L474098:
    or byte ptr [edi], 8                                 # 00474098
    add esi, 0x10                                        # 0047409B
.L47409E:
    inc esi                                              # 0047409E
    cmp byte ptr [esi - 1], 0                            # 0047409F
    jne .L47409E                                         # 004740A3
    add esi, 4                                           # 004740A5
.L4740A8:
    inc esi                                              # 004740A8
    cmp byte ptr [esi - 1], 0                            # 004740A9
    jne .L4740A8                                         # 004740AD
    add esi, 4                                           # 004740AF
    add esi, 8                                           # 004740B2
    movzx edx, byte ptr [esi]                            # 004740B5
    inc esi                                              # 004740B8
    msvc_or edx, edx                                     # 004740B9
    je .L4740CE                                          # 004740BB
.L4740BD:
    push edx                                             # 004740BD
    push esi                                             # 004740BE
    msvc_mov ebp, esi                                    # 004740BF
    call _sub_47400C                                     # 004740C1
    pop esi                                              # 004740C6
    pop edx                                              # 004740C7
    add esi, 0x10                                        # 004740C8
    dec edx                                              # 004740CB
    jne .L4740BD                                         # 004740CC
.L4740CE:
    ret                                                  # 004740CE

    .global _sub_4740CF
_sub_4740CF:
    mov edi, dword ptr [__50D144]                        # 004740CF
    mov ecx, dword ptr [__112A110]                       # 004740D5
.L4740DB:
    and byte ptr [edi], 0xf7                             # 004740DB
    inc edi                                              # 004740DE
    dec ecx                                              # 004740DF
    jne .L4740DB                                         # 004740E0
    mov edi, dword ptr [__50D144]                        # 004740E2
    mov esi, dword ptr [__50D13C]                        # 004740E8
    mov ecx, dword ptr [__112A110]                       # 004740EE
    msvc_or ecx, ecx                                     # 004740F4
    je .L474166                                          # 004740F6
.L4740F8:
    test byte ptr [edi], 1                               # 004740F8
    je .L474136                                          # 004740FB
    push ecx                                             # 004740FD
    push edi                                             # 004740FE
    push esi                                             # 004740FF
    add esi, 0x10                                        # 00474100
.L474103:
    inc esi                                              # 00474103
    cmp byte ptr [esi - 1], 0                            # 00474104
    jne .L474103                                         # 00474108
    add esi, 4                                           # 0047410A
.L47410D:
    inc esi                                              # 0047410D
    cmp byte ptr [esi - 1], 0                            # 0047410E
    jne .L47410D                                         # 00474112
    add esi, 4                                           # 00474114
    add esi, 8                                           # 00474117
    movzx edx, byte ptr [esi]                            # 0047411A
    inc esi                                              # 0047411D
    msvc_or edx, edx                                     # 0047411E
    je .L474133                                          # 00474120
.L474122:
    push edx                                             # 00474122
    push esi                                             # 00474123
    msvc_mov ebp, esi                                    # 00474124
    call _sub_47400C                                     # 00474126
    pop esi                                              # 0047412B
    pop edx                                              # 0047412C
    add esi, 0x10                                        # 0047412D
    dec edx                                              # 00474130
    jne .L474122                                         # 00474131
.L474133:
    pop esi                                              # 00474133
    pop edi                                              # 00474134
    pop ecx                                              # 00474135
.L474136:
    add esi, 0x10                                        # 00474136
.L474139:
    inc esi                                              # 00474139
    cmp byte ptr [esi - 1], 0                            # 0047413A
    jne .L474139                                         # 0047413E
    add esi, 4                                           # 00474140
.L474143:
    inc esi                                              # 00474143
    cmp byte ptr [esi - 1], 0                            # 00474144
    jne .L474143                                         # 00474148
    add esi, 4                                           # 0047414A
    add esi, 8                                           # 0047414D
    movzx eax, byte ptr [esi]                            # 00474150
    inc esi                                              # 00474153
    imul eax, eax, 0x10                                  # 00474154
    msvc_add esi, eax                                    # 00474157
    movzx eax, byte ptr [esi]                            # 00474159
    inc esi                                              # 0047415C
    imul eax, eax, 0x10                                  # 0047415D
    msvc_add esi, eax                                    # 00474160
    inc edi                                              # 00474162
    dec ecx                                              # 00474163
    jne .L4740F8                                         # 00474164
.L474166:
    ret                                                  # 00474166

    .global _sub_474167
_sub_474167:
    mov edi, dword ptr [__50D144]                        # 00474167
    mov esi, dword ptr [__50D13C]                        # 0047416D
    mov ecx, dword ptr [__112A110]                       # 00474173
    msvc_or ecx, ecx                                     # 00474179
    je .L4741BC                                          # 0047417B
.L47417D:
    mov bl, byte ptr [esi]                               # 0047417D
    and bl, 0x3f                                         # 0047417F
    cmp bl, 0x1f                                         # 00474182
    jne .L47418C                                         # 00474185
    test byte ptr [edi], 1                               # 00474187
    jne .L4741CB                                         # 0047418A
.L47418C:
    add esi, 0x10                                        # 0047418C
.L47418F:
    inc esi                                              # 0047418F
    cmp byte ptr [esi - 1], 0                            # 00474190
    jne .L47418F                                         # 00474194
    add esi, 4                                           # 00474196
.L474199:
    inc esi                                              # 00474199
    cmp byte ptr [esi - 1], 0                            # 0047419A
    jne .L474199                                         # 0047419E
    add esi, 4                                           # 004741A0
    add esi, 8                                           # 004741A3
    movzx eax, byte ptr [esi]                            # 004741A6
    inc esi                                              # 004741A9
    imul eax, eax, 0x10                                  # 004741AA
    msvc_add esi, eax                                    # 004741AD
    movzx eax, byte ptr [esi]                            # 004741AF
    inc esi                                              # 004741B2
    imul eax, eax, 0x10                                  # 004741B3
    msvc_add esi, eax                                    # 004741B6
    inc edi                                              # 004741B8
    dec ecx                                              # 004741B9
    jne .L47417D                                         # 004741BA
.L4741BC:
    mov dx, 0x1f                                         # 004741BC
    mov word ptr [__9C68E6], 0x840                       # 004741C0
    stc                                                  # 004741C9
    ret                                                  # 004741CA
.L4741CB:
    mov edi, dword ptr [__50D144]                        # 004741CB
    mov esi, dword ptr [__50D13C]                        # 004741D1
    mov ecx, dword ptr [__112A110]                       # 004741D7
    msvc_or ecx, ecx                                     # 004741DD
    je .L47424A                                          # 004741DF
.L4741E1:
    mov bl, byte ptr [esi]                               # 004741E1
    and bl, 0x3f                                         # 004741E3
    cmp bl, 0x14                                         # 004741E6
    jne .L47421A                                         # 004741E9
    test byte ptr [edi], 1                               # 004741EB
    je .L47421A                                          # 004741EE
    push ecx                                             # 004741F0
    push edi                                             # 004741F1
    push esi                                             # 004741F2
    msvc_mov ebp, esi                                    # 004741F3
    call _sub_47176D                                     # 004741F5
    pop esi                                              # 004741FA
    pop edi                                              # 004741FB
    pop ecx                                              # 004741FC
    jb .L47421A                                          # 004741FD
    mov ebx, dword ptr [__50D15C]                        # 004741FF
    mov ax, word ptr [ebx + 0x12]                        # 00474205
    call _sub_471B95                                     # 00474209
    test ax, 8                                           # 0047420E
    je .L47421A                                          # 00474212
    test ax, 1                                           # 00474214
    je .L474259                                          # 00474218
.L47421A:
    add esi, 0x10                                        # 0047421A
.L47421D:
    inc esi                                              # 0047421D
    cmp byte ptr [esi - 1], 0                            # 0047421E
    jne .L47421D                                         # 00474222
    add esi, 4                                           # 00474224
.L474227:
    inc esi                                              # 00474227
    cmp byte ptr [esi - 1], 0                            # 00474228
    jne .L474227                                         # 0047422C
    add esi, 4                                           # 0047422E
    add esi, 8                                           # 00474231
    movzx eax, byte ptr [esi]                            # 00474234
    inc esi                                              # 00474237
    imul eax, eax, 0x10                                  # 00474238
    msvc_add esi, eax                                    # 0047423B
    movzx eax, byte ptr [esi]                            # 0047423D
    inc esi                                              # 00474240
    imul eax, eax, 0x10                                  # 00474241
    msvc_add esi, eax                                    # 00474244
    inc edi                                              # 00474246
    dec ecx                                              # 00474247
    jne .L4741E1                                         # 00474248
.L47424A:
    mov dx, 0x14                                         # 0047424A
    mov word ptr [__9C68E6], 0x82b                       # 0047424E
    stc                                                  # 00474257
    ret                                                  # 00474258
.L474259:
    mov edi, dword ptr [__50D144]                        # 00474259
    mov esi, dword ptr [__50D13C]                        # 0047425F
    mov ecx, dword ptr [__112A110]                       # 00474265
    msvc_or ecx, ecx                                     # 0047426B
    je .L4742AE                                          # 0047426D
.L47426F:
    mov bl, byte ptr [esi]                               # 0047426F
    and bl, 0x3f                                         # 00474271
    cmp bl, 0x1d                                         # 00474274
    jne .L47427E                                         # 00474277
    test byte ptr [edi], 1                               # 00474279
    jne .L4742BD                                         # 0047427C
.L47427E:
    add esi, 0x10                                        # 0047427E
.L474281:
    inc esi                                              # 00474281
    cmp byte ptr [esi - 1], 0                            # 00474282
    jne .L474281                                         # 00474286
    add esi, 4                                           # 00474288
.L47428B:
    inc esi                                              # 0047428B
    cmp byte ptr [esi - 1], 0                            # 0047428C
    jne .L47428B                                         # 00474290
    add esi, 4                                           # 00474292
    add esi, 8                                           # 00474295
    movzx eax, byte ptr [esi]                            # 00474298
    inc esi                                              # 0047429B
    imul eax, eax, 0x10                                  # 0047429C
    msvc_add esi, eax                                    # 0047429F
    movzx eax, byte ptr [esi]                            # 004742A1
    inc esi                                              # 004742A4
    imul eax, eax, 0x10                                  # 004742A5
    msvc_add esi, eax                                    # 004742A8
    inc edi                                              # 004742AA
    dec ecx                                              # 004742AB
    jne .L47426F                                         # 004742AC
.L4742AE:
    mov dx, 0x1d                                         # 004742AE
    mov word ptr [__9C68E6], 0x82c                       # 004742B2
    stc                                                  # 004742BB
    ret                                                  # 004742BC
.L4742BD:
    mov edi, dword ptr [__50D144]                        # 004742BD
    mov esi, dword ptr [__50D13C]                        # 004742C3
    mov ecx, dword ptr [__112A110]                       # 004742C9
    msvc_or ecx, ecx                                     # 004742CF
    je .L474312                                          # 004742D1
.L4742D3:
    mov bl, byte ptr [esi]                               # 004742D3
    and bl, 0x3f                                         # 004742D5
    cmp bl, 0x1e                                         # 004742D8
    jne .L4742E2                                         # 004742DB
    test byte ptr [edi], 1                               # 004742DD
    jne .L474321                                         # 004742E0
.L4742E2:
    add esi, 0x10                                        # 004742E2
.L4742E5:
    inc esi                                              # 004742E5
    cmp byte ptr [esi - 1], 0                            # 004742E6
    jne .L4742E5                                         # 004742EA
    add esi, 4                                           # 004742EC
.L4742EF:
    inc esi                                              # 004742EF
    cmp byte ptr [esi - 1], 0                            # 004742F0
    jne .L4742EF                                         # 004742F4
    add esi, 4                                           # 004742F6
    add esi, 8                                           # 004742F9
    movzx eax, byte ptr [esi]                            # 004742FC
    inc esi                                              # 004742FF
    imul eax, eax, 0x10                                  # 00474300
    msvc_add esi, eax                                    # 00474303
    movzx eax, byte ptr [esi]                            # 00474305
    inc esi                                              # 00474308
    imul eax, eax, 0x10                                  # 00474309
    msvc_add esi, eax                                    # 0047430C
    inc edi                                              # 0047430E
    dec ecx                                              # 0047430F
    jne .L4742D3                                         # 00474310
.L474312:
    mov dx, 0x1e                                         # 00474312
    mov word ptr [__9C68E6], 0x831                       # 00474316
    stc                                                  # 0047431F
    ret                                                  # 00474320
.L474321:
    mov edi, dword ptr [__50D144]                        # 00474321
    mov esi, dword ptr [__50D13C]                        # 00474327
    mov ecx, dword ptr [__112A110]                       # 0047432D
    msvc_or ecx, ecx                                     # 00474333
    je .L474376                                          # 00474335
.L474337:
    mov bl, byte ptr [esi]                               # 00474337
    and bl, 0x3f                                         # 00474339
    cmp bl, 0x1c                                         # 0047433C
    jne .L474346                                         # 0047433F
    test byte ptr [edi], 1                               # 00474341
    jne .L474385                                         # 00474344
.L474346:
    add esi, 0x10                                        # 00474346
.L474349:
    inc esi                                              # 00474349
    cmp byte ptr [esi - 1], 0                            # 0047434A
    jne .L474349                                         # 0047434E
    add esi, 4                                           # 00474350
.L474353:
    inc esi                                              # 00474353
    cmp byte ptr [esi - 1], 0                            # 00474354
    jne .L474353                                         # 00474358
    add esi, 4                                           # 0047435A
    add esi, 8                                           # 0047435D
    movzx eax, byte ptr [esi]                            # 00474360
    inc esi                                              # 00474363
    imul eax, eax, 0x10                                  # 00474364
    msvc_add esi, eax                                    # 00474367
    movzx eax, byte ptr [esi]                            # 00474369
    inc esi                                              # 0047436C
    imul eax, eax, 0x10                                  # 0047436D
    msvc_add esi, eax                                    # 00474370
    inc edi                                              # 00474372
    dec ecx                                              # 00474373
    jne .L474337                                         # 00474374
.L474376:
    mov dx, 0x1c                                         # 00474376
    mov word ptr [__9C68E6], 0x832                       # 0047437A
    stc                                                  # 00474383
    ret                                                  # 00474384
.L474385:
    mov edi, dword ptr [__50D144]                        # 00474385
    mov esi, dword ptr [__50D13C]                        # 0047438B
    mov ecx, dword ptr [__112A110]                       # 00474391
    msvc_or ecx, ecx                                     # 00474397
    je .L4743DA                                          # 00474399
.L47439B:
    mov bl, byte ptr [esi]                               # 0047439B
    and bl, 0x3f                                         # 0047439D
    cmp bl, 0                                            # 004743A0
    jne .L4743AA                                         # 004743A3
    test byte ptr [edi], 1                               # 004743A5
    jne .L4743E9                                         # 004743A8
.L4743AA:
    add esi, 0x10                                        # 004743AA
.L4743AD:
    inc esi                                              # 004743AD
    cmp byte ptr [esi - 1], 0                            # 004743AE
    jne .L4743AD                                         # 004743B2
    add esi, 4                                           # 004743B4
.L4743B7:
    inc esi                                              # 004743B7
    cmp byte ptr [esi - 1], 0                            # 004743B8
    jne .L4743B7                                         # 004743BC
    add esi, 4                                           # 004743BE
    add esi, 8                                           # 004743C1
    movzx eax, byte ptr [esi]                            # 004743C4
    inc esi                                              # 004743C7
    imul eax, eax, 0x10                                  # 004743C8
    msvc_add esi, eax                                    # 004743CB
    movzx eax, byte ptr [esi]                            # 004743CD
    inc esi                                              # 004743D0
    imul eax, eax, 0x10                                  # 004743D1
    msvc_add esi, eax                                    # 004743D4
    inc edi                                              # 004743D6
    dec ecx                                              # 004743D7
    jne .L47439B                                         # 004743D8
.L4743DA:
    mov dx, 0                                            # 004743DA
    mov word ptr [__9C68E6], 0x835                       # 004743DE
    stc                                                  # 004743E7
    ret                                                  # 004743E8
.L4743E9:
    mov edi, dword ptr [__50D144]                        # 004743E9
    mov esi, dword ptr [__50D13C]                        # 004743EF
    mov ecx, dword ptr [__112A110]                       # 004743F5
    msvc_or ecx, ecx                                     # 004743FB
    je .L47443E                                          # 004743FD
.L4743FF:
    mov bl, byte ptr [esi]                               # 004743FF
    and bl, 0x3f                                         # 00474401
    cmp bl, 0x17                                         # 00474404
    jne .L47440E                                         # 00474407
    test byte ptr [edi], 1                               # 00474409
    jne .L47444D                                         # 0047440C
.L47440E:
    add esi, 0x10                                        # 0047440E
.L474411:
    inc esi                                              # 00474411
    cmp byte ptr [esi - 1], 0                            # 00474412
    jne .L474411                                         # 00474416
    add esi, 4                                           # 00474418
.L47441B:
    inc esi                                              # 0047441B
    cmp byte ptr [esi - 1], 0                            # 0047441C
    jne .L47441B                                         # 00474420
    add esi, 4                                           # 00474422
    add esi, 8                                           # 00474425
    movzx eax, byte ptr [esi]                            # 00474428
    inc esi                                              # 0047442B
    imul eax, eax, 0x10                                  # 0047442C
    msvc_add esi, eax                                    # 0047442F
    movzx eax, byte ptr [esi]                            # 00474431
    inc esi                                              # 00474434
    imul eax, eax, 0x10                                  # 00474435
    msvc_add esi, eax                                    # 00474438
    inc edi                                              # 0047443A
    dec ecx                                              # 0047443B
    jne .L4743FF                                         # 0047443C
.L47443E:
    mov dx, 0x17                                         # 0047443E
    mov word ptr [__9C68E6], 0x836                       # 00474442
    stc                                                  # 0047444B
    ret                                                  # 0047444C
.L47444D:
    mov edi, dword ptr [__50D144]                        # 0047444D
    mov esi, dword ptr [__50D13C]                        # 00474453
    mov ecx, dword ptr [__112A110]                       # 00474459
    msvc_or ecx, ecx                                     # 0047445F
    je .L4744A2                                          # 00474461
.L474463:
    mov bl, byte ptr [esi]                               # 00474463
    and bl, 0x3f                                         # 00474465
    cmp bl, 6                                            # 00474468
    jne .L474472                                         # 0047446B
    test byte ptr [edi], 1                               # 0047446D
    jne .L4744B1                                         # 00474470
.L474472:
    add esi, 0x10                                        # 00474472
.L474475:
    inc esi                                              # 00474475
    cmp byte ptr [esi - 1], 0                            # 00474476
    jne .L474475                                         # 0047447A
    add esi, 4                                           # 0047447C
.L47447F:
    inc esi                                              # 0047447F
    cmp byte ptr [esi - 1], 0                            # 00474480
    jne .L47447F                                         # 00474484
    add esi, 4                                           # 00474486
    add esi, 8                                           # 00474489
    movzx eax, byte ptr [esi]                            # 0047448C
    inc esi                                              # 0047448F
    imul eax, eax, 0x10                                  # 00474490
    msvc_add esi, eax                                    # 00474493
    movzx eax, byte ptr [esi]                            # 00474495
    inc esi                                              # 00474498
    imul eax, eax, 0x10                                  # 00474499
    msvc_add esi, eax                                    # 0047449C
    inc edi                                              # 0047449E
    dec ecx                                              # 0047449F
    jne .L474463                                         # 004744A0
.L4744A2:
    mov dx, 6                                            # 004744A2
    mov word ptr [__9C68E6], 0x837                       # 004744A6
    stc                                                  # 004744AF
    ret                                                  # 004744B0
.L4744B1:
    mov edi, dword ptr [__50D144]                        # 004744B1
    mov esi, dword ptr [__50D13C]                        # 004744B7
    mov ecx, dword ptr [__112A110]                       # 004744BD
    msvc_or ecx, ecx                                     # 004744C3
    je .L474506                                          # 004744C5
.L4744C7:
    mov bl, byte ptr [esi]                               # 004744C7
    and bl, 0x3f                                         # 004744C9
    cmp bl, 2                                            # 004744CC
    jne .L4744D6                                         # 004744CF
    test byte ptr [edi], 1                               # 004744D1
    jne .L474515                                         # 004744D4
.L4744D6:
    add esi, 0x10                                        # 004744D6
.L4744D9:
    inc esi                                              # 004744D9
    cmp byte ptr [esi - 1], 0                            # 004744DA
    jne .L4744D9                                         # 004744DE
    add esi, 4                                           # 004744E0
.L4744E3:
    inc esi                                              # 004744E3
    cmp byte ptr [esi - 1], 0                            # 004744E4
    jne .L4744E3                                         # 004744E8
    add esi, 4                                           # 004744EA
    add esi, 8                                           # 004744ED
    movzx eax, byte ptr [esi]                            # 004744F0
    inc esi                                              # 004744F3
    imul eax, eax, 0x10                                  # 004744F4
    msvc_add esi, eax                                    # 004744F7
    movzx eax, byte ptr [esi]                            # 004744F9
    inc esi                                              # 004744FC
    imul eax, eax, 0x10                                  # 004744FD
    msvc_add esi, eax                                    # 00474500
    inc edi                                              # 00474502
    dec ecx                                              # 00474503
    jne .L4744C7                                         # 00474504
.L474506:
    mov dx, 2                                            # 00474506
    mov word ptr [__9C68E6], 0x838                       # 0047450A
    stc                                                  # 00474513
    ret                                                  # 00474514
.L474515:
    mov edi, dword ptr [__50D144]                        # 00474515
    mov esi, dword ptr [__50D13C]                        # 0047451B
    mov ecx, dword ptr [__112A110]                       # 00474521
    msvc_or ecx, ecx                                     # 00474527
    je .L47456A                                          # 00474529
.L47452B:
    mov bl, byte ptr [esi]                               # 0047452B
    and bl, 0x3f                                         # 0047452D
    cmp bl, 5                                            # 00474530
    jne .L47453A                                         # 00474533
    test byte ptr [edi], 1                               # 00474535
    jne .L474579                                         # 00474538
.L47453A:
    add esi, 0x10                                        # 0047453A
.L47453D:
    inc esi                                              # 0047453D
    cmp byte ptr [esi - 1], 0                            # 0047453E
    jne .L47453D                                         # 00474542
    add esi, 4                                           # 00474544
.L474547:
    inc esi                                              # 00474547
    cmp byte ptr [esi - 1], 0                            # 00474548
    jne .L474547                                         # 0047454C
    add esi, 4                                           # 0047454E
    add esi, 8                                           # 00474551
    movzx eax, byte ptr [esi]                            # 00474554
    inc esi                                              # 00474557
    imul eax, eax, 0x10                                  # 00474558
    msvc_add esi, eax                                    # 0047455B
    movzx eax, byte ptr [esi]                            # 0047455D
    inc esi                                              # 00474560
    imul eax, eax, 0x10                                  # 00474561
    msvc_add esi, eax                                    # 00474564
    inc edi                                              # 00474566
    dec ecx                                              # 00474567
    jne .L47452B                                         # 00474568
.L47456A:
    mov dx, 5                                            # 0047456A
    mov word ptr [__9C68E6], 0x839                       # 0047456E
    stc                                                  # 00474577
    ret                                                  # 00474578
.L474579:
    mov edi, dword ptr [__50D144]                        # 00474579
    mov esi, dword ptr [__50D13C]                        # 0047457F
    mov ecx, dword ptr [__112A110]                       # 00474585
    msvc_or ecx, ecx                                     # 0047458B
    je .L4745CE                                          # 0047458D
.L47458F:
    mov bl, byte ptr [esi]                               # 0047458F
    and bl, 0x3f                                         # 00474591
    cmp bl, 7                                            # 00474594
    jne .L47459E                                         # 00474597
    test byte ptr [edi], 1                               # 00474599
    jne .L4745DD                                         # 0047459C
.L47459E:
    add esi, 0x10                                        # 0047459E
.L4745A1:
    inc esi                                              # 004745A1
    cmp byte ptr [esi - 1], 0                            # 004745A2
    jne .L4745A1                                         # 004745A6
    add esi, 4                                           # 004745A8
.L4745AB:
    inc esi                                              # 004745AB
    cmp byte ptr [esi - 1], 0                            # 004745AC
    jne .L4745AB                                         # 004745B0
    add esi, 4                                           # 004745B2
    add esi, 8                                           # 004745B5
    movzx eax, byte ptr [esi]                            # 004745B8
    inc esi                                              # 004745BB
    imul eax, eax, 0x10                                  # 004745BC
    msvc_add esi, eax                                    # 004745BF
    movzx eax, byte ptr [esi]                            # 004745C1
    inc esi                                              # 004745C4
    imul eax, eax, 0x10                                  # 004745C5
    msvc_add esi, eax                                    # 004745C8
    inc edi                                              # 004745CA
    dec ecx                                              # 004745CB
    jne .L47458F                                         # 004745CC
.L4745CE:
    mov dx, 7                                            # 004745CE
    mov word ptr [__9C68E6], 0x83a                       # 004745D2
    stc                                                  # 004745DB
    ret                                                  # 004745DC
.L4745DD:
    mov edi, dword ptr [__50D144]                        # 004745DD
    mov esi, dword ptr [__50D13C]                        # 004745E3
    mov ecx, dword ptr [__112A110]                       # 004745E9
    msvc_or ecx, ecx                                     # 004745EF
    je .L474632                                          # 004745F1
.L4745F3:
    mov bl, byte ptr [esi]                               # 004745F3
    and bl, 0x3f                                         # 004745F5
    cmp bl, 0xb                                          # 004745F8
    jne .L474602                                         # 004745FB
    test byte ptr [edi], 1                               # 004745FD
    jne .L474641                                         # 00474600
.L474602:
    add esi, 0x10                                        # 00474602
.L474605:
    inc esi                                              # 00474605
    cmp byte ptr [esi - 1], 0                            # 00474606
    jne .L474605                                         # 0047460A
    add esi, 4                                           # 0047460C
.L47460F:
    inc esi                                              # 0047460F
    cmp byte ptr [esi - 1], 0                            # 00474610
    jne .L47460F                                         # 00474614
    add esi, 4                                           # 00474616
    add esi, 8                                           # 00474619
    movzx eax, byte ptr [esi]                            # 0047461C
    inc esi                                              # 0047461F
    imul eax, eax, 0x10                                  # 00474620
    msvc_add esi, eax                                    # 00474623
    movzx eax, byte ptr [esi]                            # 00474625
    inc esi                                              # 00474628
    imul eax, eax, 0x10                                  # 00474629
    msvc_add esi, eax                                    # 0047462C
    inc edi                                              # 0047462E
    dec ecx                                              # 0047462F
    jne .L4745F3                                         # 00474630
.L474632:
    mov dx, 0xb                                          # 00474632
    mov word ptr [__9C68E6], 0x83b                       # 00474636
    stc                                                  # 0047463F
    ret                                                  # 00474640
.L474641:
    mov edi, dword ptr [__50D144]                        # 00474641
    mov esi, dword ptr [__50D13C]                        # 00474647
    mov ecx, dword ptr [__112A110]                       # 0047464D
    msvc_or ecx, ecx                                     # 00474653
    je .L474696                                          # 00474655
.L474657:
    mov bl, byte ptr [esi]                               # 00474657
    and bl, 0x3f                                         # 00474659
    cmp bl, 0xc                                          # 0047465C
    jne .L474666                                         # 0047465F
    test byte ptr [edi], 1                               # 00474661
    jne .L4746A5                                         # 00474664
.L474666:
    add esi, 0x10                                        # 00474666
.L474669:
    inc esi                                              # 00474669
    cmp byte ptr [esi - 1], 0                            # 0047466A
    jne .L474669                                         # 0047466E
    add esi, 4                                           # 00474670
.L474673:
    inc esi                                              # 00474673
    cmp byte ptr [esi - 1], 0                            # 00474674
    jne .L474673                                         # 00474678
    add esi, 4                                           # 0047467A
    add esi, 8                                           # 0047467D
    movzx eax, byte ptr [esi]                            # 00474680
    inc esi                                              # 00474683
    imul eax, eax, 0x10                                  # 00474684
    msvc_add esi, eax                                    # 00474687
    movzx eax, byte ptr [esi]                            # 00474689
    inc esi                                              # 0047468C
    imul eax, eax, 0x10                                  # 0047468D
    msvc_add esi, eax                                    # 00474690
    inc edi                                              # 00474692
    dec ecx                                              # 00474693
    jne .L474657                                         # 00474694
.L474696:
    mov dx, 0xc                                          # 00474696
    mov word ptr [__9C68E6], 0x83c                       # 0047469A
    stc                                                  # 004746A3
    ret                                                  # 004746A4
.L4746A5:
    mov edi, dword ptr [__50D144]                        # 004746A5
    mov esi, dword ptr [__50D13C]                        # 004746AB
    mov ecx, dword ptr [__112A110]                       # 004746B1
    msvc_or ecx, ecx                                     # 004746B7
    je .L4746FA                                          # 004746B9
.L4746BB:
    mov bl, byte ptr [esi]                               # 004746BB
    and bl, 0x3f                                         # 004746BD
    cmp bl, 0x19                                         # 004746C0
    jne .L4746CA                                         # 004746C3
    test byte ptr [edi], 1                               # 004746C5
    jne .L474709                                         # 004746C8
.L4746CA:
    add esi, 0x10                                        # 004746CA
.L4746CD:
    inc esi                                              # 004746CD
    cmp byte ptr [esi - 1], 0                            # 004746CE
    jne .L4746CD                                         # 004746D2
    add esi, 4                                           # 004746D4
.L4746D7:
    inc esi                                              # 004746D7
    cmp byte ptr [esi - 1], 0                            # 004746D8
    jne .L4746D7                                         # 004746DC
    add esi, 4                                           # 004746DE
    add esi, 8                                           # 004746E1
    movzx eax, byte ptr [esi]                            # 004746E4
    inc esi                                              # 004746E7
    imul eax, eax, 0x10                                  # 004746E8
    msvc_add esi, eax                                    # 004746EB
    movzx eax, byte ptr [esi]                            # 004746ED
    inc esi                                              # 004746F0
    imul eax, eax, 0x10                                  # 004746F1
    msvc_add esi, eax                                    # 004746F4
    inc edi                                              # 004746F6
    dec ecx                                              # 004746F7
    jne .L4746BB                                         # 004746F8
.L4746FA:
    mov dx, 0x19                                         # 004746FA
    mov word ptr [__9C68E6], 0x83d                       # 004746FE
    stc                                                  # 00474707
    ret                                                  # 00474708
.L474709:
    mov edi, dword ptr [__50D144]                        # 00474709
    mov esi, dword ptr [__50D13C]                        # 0047470F
    mov ecx, dword ptr [__112A110]                       # 00474715
    msvc_or ecx, ecx                                     # 0047471B
    je .L47475E                                          # 0047471D
.L47471F:
    mov bl, byte ptr [esi]                               # 0047471F
    and bl, 0x3f                                         # 00474721
    cmp bl, 0x1a                                         # 00474724
    jne .L47472E                                         # 00474727
    test byte ptr [edi], 1                               # 00474729
    jne .L47476D                                         # 0047472C
.L47472E:
    add esi, 0x10                                        # 0047472E
.L474731:
    inc esi                                              # 00474731
    cmp byte ptr [esi - 1], 0                            # 00474732
    jne .L474731                                         # 00474736
    add esi, 4                                           # 00474738
.L47473B:
    inc esi                                              # 0047473B
    cmp byte ptr [esi - 1], 0                            # 0047473C
    jne .L47473B                                         # 00474740
    add esi, 4                                           # 00474742
    add esi, 8                                           # 00474745
    movzx eax, byte ptr [esi]                            # 00474748
    inc esi                                              # 0047474B
    imul eax, eax, 0x10                                  # 0047474C
    msvc_add esi, eax                                    # 0047474F
    movzx eax, byte ptr [esi]                            # 00474751
    inc esi                                              # 00474754
    imul eax, eax, 0x10                                  # 00474755
    msvc_add esi, eax                                    # 00474758
    inc edi                                              # 0047475A
    dec ecx                                              # 0047475B
    jne .L47471F                                         # 0047475C
.L47475E:
    mov dx, 0x1a                                         # 0047475E
    mov word ptr [__9C68E6], 0x83e                       # 00474762
    stc                                                  # 0047476B
    ret                                                  # 0047476C
.L47476D:
    mov edi, dword ptr [__50D144]                        # 0047476D
    mov esi, dword ptr [__50D13C]                        # 00474773
    mov ecx, dword ptr [__112A110]                       # 00474779
    msvc_or ecx, ecx                                     # 0047477F
    je .L4747C2                                          # 00474781
.L474783:
    mov bl, byte ptr [esi]                               # 00474783
    and bl, 0x3f                                         # 00474785
    cmp bl, 0x1b                                         # 00474788
    jne .L474792                                         # 0047478B
    test byte ptr [edi], 1                               # 0047478D
    jne .L4747D1                                         # 00474790
.L474792:
    add esi, 0x10                                        # 00474792
.L474795:
    inc esi                                              # 00474795
    cmp byte ptr [esi - 1], 0                            # 00474796
    jne .L474795                                         # 0047479A
    add esi, 4                                           # 0047479C
.L47479F:
    inc esi                                              # 0047479F
    cmp byte ptr [esi - 1], 0                            # 004747A0
    jne .L47479F                                         # 004747A4
    add esi, 4                                           # 004747A6
    add esi, 8                                           # 004747A9
    movzx eax, byte ptr [esi]                            # 004747AC
    inc esi                                              # 004747AF
    imul eax, eax, 0x10                                  # 004747B0
    msvc_add esi, eax                                    # 004747B3
    movzx eax, byte ptr [esi]                            # 004747B5
    inc esi                                              # 004747B8
    imul eax, eax, 0x10                                  # 004747B9
    msvc_add esi, eax                                    # 004747BC
    inc edi                                              # 004747BE
    dec ecx                                              # 004747BF
    jne .L474783                                         # 004747C0
.L4747C2:
    mov dx, 0x1b                                         # 004747C2
    mov word ptr [__9C68E6], 0x83f                       # 004747C6
    stc                                                  # 004747CF
    ret                                                  # 004747D0
.L4747D1:
    msvc_and eax, eax                                    # 004747D1
    ret                                                  # 004747D3

    .global _sub_4747D4
_sub_4747D4:
    msvc_xor ebx, ebx                                    # 004747D4
    msvc_xor edx, edx                                    # 004747D6
.L4747D8:
    mov esi, dword ptr [ebx*4 + _buildingObjects]        # 004747D8
    cmp esi, -1                                          # 004747DF
    je .L4747EE                                          # 004747E2
    test byte ptr [esi + 0x98], 8                        # 004747E4
    je .L4747EE                                          # 004747EB
    inc edx                                              # 004747ED
.L4747EE:
    inc ebx                                              # 004747EE
    cmp ebx, 0x80                                        # 004747EF
    jb .L4747D8                                          # 004747F5
    msvc_or edx, edx                                     # 004747F7
    jne .L47480A                                         # 004747F9
    mov dx, 0x1c                                         # 004747FB
    mov word ptr [__9C68E6], 0x833                       # 004747FF
    stc                                                  # 00474808
    ret                                                  # 00474809
.L47480A:
    cmp edx, 1                                           # 0047480A
    jbe .L47481E                                         # 0047480D
    mov dx, 0x1c                                         # 0047480F
    mov word ptr [__9C68E6], 0x834                       # 00474813
    stc                                                  # 0047481C
    ret                                                  # 0047481D
.L47481E:
    msvc_and eax, eax                                    # 0047481E
    ret                                                  # 00474820

    .global _sub_474821
_sub_474821:
    mov edi, dword ptr [__50D144]                        # 00474821
    mov esi, dword ptr [__50D13C]                        # 00474827
    mov ecx, dword ptr [__112A110]                       # 0047482D
    msvc_or ecx, ecx                                     # 00474833
    je .L474873                                          # 00474835
.L474837:
    test byte ptr [edi], 1                               # 00474837
    jne .L474843                                         # 0047483A
    msvc_mov ebp, esi                                    # 0047483C
    call _sub_471FF8                                     # 0047483E
.L474843:
    add esi, 0x10                                        # 00474843
.L474846:
    inc esi                                              # 00474846
    cmp byte ptr [esi - 1], 0                            # 00474847
    jne .L474846                                         # 0047484B
    add esi, 4                                           # 0047484D
.L474850:
    inc esi                                              # 00474850
    cmp byte ptr [esi - 1], 0                            # 00474851
    jne .L474850                                         # 00474855
    add esi, 4                                           # 00474857
    add esi, 8                                           # 0047485A
    movzx eax, byte ptr [esi]                            # 0047485D
    inc esi                                              # 00474860
    imul eax, eax, 0x10                                  # 00474861
    msvc_add esi, eax                                    # 00474864
    movzx eax, byte ptr [esi]                            # 00474866
    inc esi                                              # 00474869
    imul eax, eax, 0x10                                  # 0047486A
    msvc_add esi, eax                                    # 0047486D
    inc edi                                              # 0047486F
    dec ecx                                              # 00474870
    jne .L474837                                         # 00474871
.L474873:
    ret                                                  # 00474873

    .global _sub_474874
_sub_474874:
    mov edi, dword ptr [__50D144]                        # 00474874
    mov esi, dword ptr [__50D13C]                        # 0047487A
    mov ecx, dword ptr [__112A110]                       # 00474880
    msvc_or ecx, ecx                                     # 00474886
    je .L4748D3                                          # 00474888
.L47488A:
    test byte ptr [edi], 1                               # 0047488A
    je .L4748A3                                          # 0047488D
    msvc_mov ebp, esi                                    # 0047488F
    push ecx                                             # 00474891
    push edi                                             # 00474892
    push esi                                             # 00474893
    call _sub_4720EB                                     # 00474894
    pop esi                                              # 00474899
    pop edi                                              # 0047489A
    pop ecx                                              # 0047489B
    jae .L4748A3                                         # 0047489C
    call _sub_471BCE                                     # 0047489E
.L4748A3:
    add esi, 0x10                                        # 004748A3
.L4748A6:
    inc esi                                              # 004748A6
    cmp byte ptr [esi - 1], 0                            # 004748A7
    jne .L4748A6                                         # 004748AB
    add esi, 4                                           # 004748AD
.L4748B0:
    inc esi                                              # 004748B0
    cmp byte ptr [esi - 1], 0                            # 004748B1
    jne .L4748B0                                         # 004748B5
    add esi, 4                                           # 004748B7
    add esi, 8                                           # 004748BA
    movzx eax, byte ptr [esi]                            # 004748BD
    inc esi                                              # 004748C0
    imul eax, eax, 0x10                                  # 004748C1
    msvc_add esi, eax                                    # 004748C4
    movzx eax, byte ptr [esi]                            # 004748C6
    inc esi                                              # 004748C9
    imul eax, eax, 0x10                                  # 004748CA
    msvc_add esi, eax                                    # 004748CD
    inc edi                                              # 004748CF
    dec ecx                                              # 004748D0
    jne .L47488A                                         # 004748D1
.L4748D3:
    ret                                                  # 004748D3

    .global _sub_4748D4
_sub_4748D4:
    pushal                                               # 004748D4
    call _sub_47966E                                     # 004748D5
    call _sub_4796A9                                     # 004748DA
    call _sub_47AC05                                     # 004748DF
    call _sub_4A6DA9                                     # 004748E4
    call _sub_4CD406                                     # 004748E9
    call _sub_4748FA                                     # 004748EE
    call _sub_46E07B                                     # 004748F3
    popal                                                # 004748F8
    ret                                                  # 004748F9

    .global _sub_4748FA
_sub_4748FA:
    pushal                                               # 004748FA
    call _sub_4697A1                                     # 004748FB
    call _sub_47D9F2                                     # 00474900
    call _sub_4C57A6                                     # 00474905
    call _sub_469F90                                     # 0047490A
    popal                                                # 0047490F
    ret                                                  # 00474910

    .global _sub_474911
_sub_474911:
    push eax                                             # 00474911
    push ecx                                             # 00474912
    push edi                                             # 00474913
    push esi                                             # 00474914
    mov esi, dword ptr [__50D13C]                        # 00474915
    mov ecx, dword ptr [__112A110]                       # 0047491B
    msvc_or ecx, ecx                                     # 00474921
    je .L4749B0                                          # 00474923
.L474929:
    test byte ptr [esi], 0xc0                            # 00474929
    jne .L47494F                                         # 0047492C
    mov eax, dword ptr [ebp]                             # 0047492E
    cmp eax, dword ptr [esi]                             # 00474931
    jne .L47497D                                         # 00474933
    mov eax, dword ptr [ebp + 4]                         # 00474935
    cmp eax, dword ptr [esi + 4]                         # 00474938
    jne .L47497D                                         # 0047493B
    mov eax, dword ptr [ebp + 8]                         # 0047493D
    cmp eax, dword ptr [esi + 8]                         # 00474940
    jne .L47497D                                         # 00474943
    mov eax, dword ptr [ebp + 0xc]                       # 00474945
    cmp eax, dword ptr [esi + 0xc]                       # 00474948
    jne .L47497D                                         # 0047494B
    jmp .L4749B5                                         # 0047494D
.L47494F:
    mov al, byte ptr [esi]                               # 0047494F
    mov ah, byte ptr [ebp]                               # 00474951
    and ax, 0x3f3f                                       # 00474954
    cmp al, ah                                           # 00474958
    jne .L47497D                                         # 0047495A
    mov eax, dword ptr [esi + 4]                         # 0047495C
    cmp eax, dword ptr [ebp + 4]                         # 0047495F
    jne .L47497D                                         # 00474962
    mov eax, dword ptr [esi + 8]                         # 00474964
    cmp eax, dword ptr [ebp + 8]                         # 00474967
    jne .L47497D                                         # 0047496A
    add esi, 0x10                                        # 0047496C
.L47496F:
    inc esi                                              # 0047496F
    cmp byte ptr [esi - 1], 0                            # 00474970
    jne .L47496F                                         # 00474974
    add esi, 4                                           # 00474976
    msvc_mov ebp, esi                                    # 00474979
    jmp .L4749B5                                         # 0047497B
.L47497D:
    add esi, 0x10                                        # 0047497D
.L474980:
    inc esi                                              # 00474980
    cmp byte ptr [esi - 1], 0                            # 00474981
    jne .L474980                                         # 00474985
    add esi, 4                                           # 00474987
.L47498A:
    inc esi                                              # 0047498A
    cmp byte ptr [esi - 1], 0                            # 0047498B
    jne .L47498A                                         # 0047498F
    add esi, 4                                           # 00474991
    add esi, 8                                           # 00474994
    movzx eax, byte ptr [esi]                            # 00474997
    inc esi                                              # 0047499A
    imul eax, eax, 0x10                                  # 0047499B
    msvc_add esi, eax                                    # 0047499E
    movzx eax, byte ptr [esi]                            # 004749A0
    inc esi                                              # 004749A3
    imul eax, eax, 0x10                                  # 004749A4
    msvc_add esi, eax                                    # 004749A7
    dec ecx                                              # 004749A9
    jne .L474929                                         # 004749AA
.L4749B0:
    mov ebp, 0xffffffff                                  # 004749B0
.L4749B5:
    pop esi                                              # 004749B5
    pop edi                                              # 004749B6
    pop ecx                                              # 004749B7
    pop eax                                              # 004749B8
    ret                                                  # 004749B9

    .global _sub_4749BA
_sub_4749BA:
    mov ebx, 2                                           # 004749BA
    call _sub_4416B5                                     # 004749BF
    mov dword ptr [__113E87C], 3                         # 004749C4
    push ebx                                             # 004749CE
    call _sub_4082AD                                     # 004749CF
    add esp, 4                                           # 004749D4
    mov dword ptr [__113E87C], 0                         # 004749D7
    cmp eax, -1                                          # 004749E1
    je .L474AE2                                          # 004749E4
    mov dword ptr [__9D1CBC], eax                        # 004749EA
    mov dword ptr [__113E87C], 3                         # 004749EF
    push 0x14                                            # 004749F9
    push_dword __112A14C                                 # 004749FB
    push dword ptr [__9D1CBC]                            # 00474A00
    call _sub_4081FE                                     # 00474A06
    add esp, 0xc                                         # 00474A0B
    mov dword ptr [__113E87C], 0                         # 00474A0E
    cmp eax, 0x14                                        # 00474A18
    jne .L474AE2                                         # 00474A1B
    mov ebx, 0xffffffff                                  # 00474A21
    xchg dword ptr [__50D13C], ebx                       # 00474A26
    cmp ebx, -1                                          # 00474A2C
    je .L474A4E                                          # 00474A2F
    mov dword ptr [__113E87C], 4                         # 00474A31
    push ebx                                             # 00474A3B
    call _sub_406C12                                     # 00474A3C
    add esp, 4                                           # 00474A41
    mov dword ptr [__113E87C], 0                         # 00474A44
.L474A4E:
    mov dword ptr [__113E87C], 4                         # 00474A4E
    push dword ptr [__112A158]                           # 00474A58
    call _sub_406BF7                                     # 00474A5E
    add esp, 4                                           # 00474A63
    mov dword ptr [__113E87C], 0                         # 00474A66
    cmp eax, -1                                          # 00474A70
    je .L474AE2                                          # 00474A73
    mov dword ptr [__50D13C], eax                        # 00474A75
    mov dword ptr [__113E87C], 3                         # 00474A7A
    push dword ptr [__112A158]                           # 00474A84
    push dword ptr [__50D13C]                            # 00474A8A
    push dword ptr [__9D1CBC]                            # 00474A90
    call _sub_4081FE                                     # 00474A96
    add esp, 0xc                                         # 00474A9B
    mov dword ptr [__113E87C], 0                         # 00474A9E
    cmp eax, dword ptr [__112A158]                       # 00474AA8
    jne .L474AE2                                         # 00474AAE
    mov eax, dword ptr [__112A15C]                       # 00474AB0
    mov dword ptr [__112A110], eax                       # 00474AB5
    mov dword ptr [__113E87C], 3                         # 00474ABA
    push dword ptr [__9D1CBC]                            # 00474AC4
    call _sub_408297                                     # 00474ACA
    add esp, 4                                           # 00474ACF
    mov dword ptr [__113E87C], 0                         # 00474AD2
    call _sub_47237D                                     # 00474ADC
    ret                                                  # 00474AE1
.L474AE2:
    mov eax, 0x3d                                        # 00474AE2
    mov ebx, 0x37                                        # 00474AE7
    msvc_jmp _sub_4BE621                                 # 00474AEC

    .global _sub_474AF1
_sub_474AF1:
    mov eax, 0x6c1                                       # 00474AF1
    msvc_xor edx, edx                                    # 00474AF6
    call _sub_4CF5C5                                     # 00474AF8
    call _sub_474C42                                     # 00474AFD
    jb .L474B6E                                          # 00474B02
    mov eax, 0x7c                                        # 00474B04
    call _sub_4CF621                                     # 00474B09
    call _sub_474D97                                     # 00474B0E
    jb .L474B6E                                          # 00474B13
    call _sub_4CF60B                                     # 00474B15
    call _sub_47541A                                     # 00474B1A
    call _sub_47559C                                     # 00474B1F
    call _sub_474E2B                                     # 00474B24
    call _sub_470F3C                                     # 00474B29
    mov eax, 0x6c1                                       # 00474B2E
    msvc_xor edx, edx                                    # 00474B33
    call _sub_4CF5C5                                     # 00474B35
    call _sub_474C42                                     # 00474B3A
    jb .L474B6E                                          # 00474B3F
    mov eax, 0x7c                                        # 00474B41
    call _sub_4CF621                                     # 00474B46
    call _sub_474D97                                     # 00474B4B
    jb .L474B6E                                          # 00474B50
    mov eax, 0xf8                                        # 00474B52
    call _sub_4CF621                                     # 00474B57
    call _sub_474E4E                                     # 00474B5C
    call _sub_474E2B                                     # 00474B61
    call _sub_4CF60B                                     # 00474B66
    msvc_and eax, eax                                    # 00474B6B
    ret                                                  # 00474B6D
.L474B6E:
    mov dword ptr [__113E87C], 4                         # 00474B6E
    push dword ptr [__50D140]                            # 00474B78
    call _sub_406C12                                     # 00474B7E
    add esp, 4                                           # 00474B83
    mov dword ptr [__113E87C], 0                         # 00474B86
    call _sub_4CF60B                                     # 00474B90
    stc                                                  # 00474B95
    ret                                                  # 00474B96

    .global _sub_474B97
_sub_474B97:
    mov eax, 0x6c1                                       # 00474B97
    msvc_xor edx, edx                                    # 00474B9C
    call _sub_4CF5C5                                     # 00474B9E
    call _sub_474D97                                     # 00474BA3
    jb .L474C19                                          # 00474BA8
    mov eax, 0x7c                                        # 00474BAA
    call _sub_4CF621                                     # 00474BAF
    call _sub_474C42                                     # 00474BB4
    jb .L474C14                                          # 00474BB9
    call _sub_4CF60B                                     # 00474BBB
    call _sub_47559C                                     # 00474BC0
    call _sub_47541A                                     # 00474BC5
    call _sub_474E2B                                     # 00474BCA
    call _sub_470F3C                                     # 00474BCF
    mov eax, 0x6c1                                       # 00474BD4
    msvc_xor edx, edx                                    # 00474BD9
    call _sub_4CF5C5                                     # 00474BDB
    call _sub_474D97                                     # 00474BE0
    jb .L474C19                                          # 00474BE5
    mov eax, 0x7c                                        # 00474BE7
    call _sub_4CF621                                     # 00474BEC
    call _sub_474C42                                     # 00474BF1
    jb .L474C14                                          # 00474BF6
    mov eax, 0xf8                                        # 00474BF8
    call _sub_4CF621                                     # 00474BFD
    call _sub_475133                                     # 00474C02
    call _sub_474E2B                                     # 00474C07
    call _sub_4CF60B                                     # 00474C0C
    msvc_and eax, eax                                    # 00474C11
    ret                                                  # 00474C13
.L474C14:
    call _sub_474E2B                                     # 00474C14
.L474C19:
    mov dword ptr [__113E87C], 4                         # 00474C19
    push dword ptr [__50D140]                            # 00474C23
    call _sub_406C12                                     # 00474C29
    add esp, 4                                           # 00474C2E
    mov dword ptr [__113E87C], 0                         # 00474C31
    call _sub_4CF60B                                     # 00474C3B
    stc                                                  # 00474C40
    ret                                                  # 00474C41

    .global _sub_474C42
_sub_474C42:
    mov ecx, 0x1000                                      # 00474C42
    push ecx                                             # 00474C47
    mov dword ptr [__113E87C], 4                         # 00474C48
    push ecx                                             # 00474C52
    call _sub_406BF7                                     # 00474C53
    add esp, 4                                           # 00474C58
    mov dword ptr [__113E87C], 0                         # 00474C5B
    pop ecx                                              # 00474C65
    cmp eax, -1                                          # 00474C66
    je .L474D88                                          # 00474C69
    mov dword ptr [__50D14C], eax                        # 00474C6F
    msvc_xor edi, edi                                    # 00474C74
    mov esi, dword ptr [__50D13C]                        # 00474C76
    msvc_xor edx, edx                                    # 00474C7C
.L474C7E:
    cmp edx, dword ptr [__112A110]                       # 00474C7E
    jae .L474D1F                                         # 00474C84
    msvc_mov eax, ecx                                    # 00474C8A
    msvc_sub eax, edi                                    # 00474C8C
    cmp eax, 0x20                                        # 00474C8E
    jg .L474CD2                                          # 00474C91
    add ecx, 0x1000                                      # 00474C93
    push ecx                                             # 00474C99
    push edx                                             # 00474C9A
    push edi                                             # 00474C9B
    push esi                                             # 00474C9C
    mov dword ptr [__113E87C], 3                         # 00474C9D
    push ecx                                             # 00474CA7
    push dword ptr [__50D14C]                            # 00474CA8
    call _sub_406C02                                     # 00474CAE
    add esp, 8                                           # 00474CB3
    mov dword ptr [__113E87C], 0                         # 00474CB6
    cmp eax, -1                                          # 00474CC0
    je .L474D88                                          # 00474CC3
    mov dword ptr [__50D14C], eax                        # 00474CC9
    pop esi                                              # 00474CCE
    pop edi                                              # 00474CCF
    pop edx                                              # 00474CD0
    pop ecx                                              # 00474CD1
.L474CD2:
    push ecx                                             # 00474CD2
    push edx                                             # 00474CD3
    push esi                                             # 00474CD4
    mov ebp, dword ptr [__50D14C]                        # 00474CD5
    mov ecx, 0x10                                        # 00474CDB
.L474CE0:
    mov al, byte ptr [esi]                               # 00474CE0
    mov byte ptr [edi + ebp], al                         # 00474CE2
    inc esi                                              # 00474CE5
    inc edi                                              # 00474CE6
    dec ecx                                              # 00474CE7
    jne .L474CE0                                         # 00474CE8
    pop esi                                              # 00474CEA
    pop edx                                              # 00474CEB
    pop ecx                                              # 00474CEC
    add esi, 0x10                                        # 00474CED
.L474CF0:
    inc esi                                              # 00474CF0
    cmp byte ptr [esi - 1], 0                            # 00474CF1
    jne .L474CF0                                         # 00474CF5
    add esi, 4                                           # 00474CF7
.L474CFA:
    inc esi                                              # 00474CFA
    cmp byte ptr [esi - 1], 0                            # 00474CFB
    jne .L474CFA                                         # 00474CFF
    add esi, 4                                           # 00474D01
    add esi, 8                                           # 00474D04
    movzx eax, byte ptr [esi]                            # 00474D07
    inc esi                                              # 00474D0A
    imul eax, eax, 0x10                                  # 00474D0B
    msvc_add esi, eax                                    # 00474D0E
    movzx eax, byte ptr [esi]                            # 00474D10
    inc esi                                              # 00474D13
    imul eax, eax, 0x10                                  # 00474D14
    msvc_add esi, eax                                    # 00474D17
    inc edx                                              # 00474D19
    msvc_jmp .L474C7E                                    # 00474D1A
.L474D1F:
    mov ebp, dword ptr [__50D14C]                        # 00474D1F
    mov byte ptr [edi + ebp], 0xff                       # 00474D25
    inc edi                                              # 00474D29
    mov dword ptr [__112CC04], edi                       # 00474D2A
    mov_offset esi, __112CC04                            # 00474D30
    mov al, 0x80                                         # 00474D35
    mov ecx, 4                                           # 00474D37
    call _sub_46F530                                     # 00474D3C
    mov esi, dword ptr [__50D14C]                        # 00474D41
.L474D47:
    msvc_or edi, edi                                     # 00474D47
    je .L474D63                                          # 00474D49
    mov ecx, 0xffc                                       # 00474D4B
    msvc_cmp ecx, edi                                    # 00474D50
    jbe .L474D56                                         # 00474D52
    msvc_mov ecx, edi                                    # 00474D54
.L474D56:
    mov al, 0x81                                         # 00474D56
    call _sub_46F530                                     # 00474D58
    msvc_add esi, ecx                                    # 00474D5D
    msvc_sub edi, ecx                                    # 00474D5F
    jmp .L474D47                                         # 00474D61
.L474D63:
    mov dword ptr [__113E87C], 4                         # 00474D63
    push dword ptr [__50D14C]                            # 00474D6D
    call _sub_406C12                                     # 00474D73
    add esp, 4                                           # 00474D78
    mov dword ptr [__113E87C], 0                         # 00474D7B
    msvc_and eax, eax                                    # 00474D85
    ret                                                  # 00474D87
.L474D88:
    mov eax, 0x3d                                        # 00474D88
    mov ebx, 0x37                                        # 00474D8D
    msvc_jmp _sub_4BE621                                 # 00474D92

    .global _sub_474D97
_sub_474D97:
    mov al, 1                                            # 00474D97
    call _sub_46F67E                                     # 00474D99
    jb .L474E1A                                          # 00474D9E
    cmp al, 0x80                                         # 00474DA0
    jne .L474E1A                                         # 00474DA2
    mov ecx, dword ptr [esi]                             # 00474DA4
    push ecx                                             # 00474DA6
    mov dword ptr [__113E87C], 4                         # 00474DA7
    push ecx                                             # 00474DB1
    call _sub_406BF7                                     # 00474DB2
    add esp, 4                                           # 00474DB7
    mov dword ptr [__113E87C], 0                         # 00474DBA
    pop ecx                                              # 00474DC4
    cmp eax, -1                                          # 00474DC5
    je .L474E1C                                          # 00474DC8
    mov dword ptr [__50D150], eax                        # 00474DCA
    msvc_mov edx, ecx                                    # 00474DCF
    mov edi, dword ptr [__50D150]                        # 00474DD1
.L474DD7:
    push edi                                             # 00474DD7
    mov al, 1                                            # 00474DD8
    call _sub_46F67E                                     # 00474DDA
    pop edi                                              # 00474DDF
    jb .L474DF8                                          # 00474DE0
    cmp al, 0x81                                         # 00474DE2
    jne .L474DF8                                         # 00474DE4
    msvc_sub edx, ecx                                    # 00474DE6
.L474DE8:
    mov al, byte ptr [esi]                               # 00474DE8
    mov byte ptr [edi], al                               # 00474DEA
    inc esi                                              # 00474DEC
    inc edi                                              # 00474DED
    dec ecx                                              # 00474DEE
    jne .L474DE8                                         # 00474DEF
    msvc_or edx, edx                                     # 00474DF1
    jne .L474DD7                                         # 00474DF3
    msvc_and eax, eax                                    # 00474DF5
    ret                                                  # 00474DF7
.L474DF8:
    mov dword ptr [__113E87C], 4                         # 00474DF8
    push dword ptr [__50D150]                            # 00474E02
    call _sub_406C12                                     # 00474E08
    add esp, 4                                           # 00474E0D
    mov dword ptr [__113E87C], 0                         # 00474E10
.L474E1A:
    stc                                                  # 00474E1A
    ret                                                  # 00474E1B
.L474E1C:
    mov eax, 0x3d                                        # 00474E1C
    mov ebx, 0x37                                        # 00474E21
    msvc_jmp _sub_4BE621                                 # 00474E26

    .global _sub_474E2B
_sub_474E2B:
    mov dword ptr [__113E87C], 4                         # 00474E2B
    push dword ptr [__50D150]                            # 00474E35
    call _sub_406C12                                     # 00474E3B
    add esp, 4                                           # 00474E40
    mov dword ptr [__113E87C], 0                         # 00474E43
    ret                                                  # 00474E4D

    .global _sub_474E4E
_sub_474E4E:
    mov dword ptr [__112A114], 0                         # 00474E4E
    mov ecx, 0x1000                                      # 00474E58
    push ecx                                             # 00474E5D
    mov dword ptr [__113E87C], 4                         # 00474E5E
    push ecx                                             # 00474E68
    call _sub_406BF7                                     # 00474E69
    add esp, 4                                           # 00474E6E
    mov dword ptr [__113E87C], 0                         # 00474E71
    pop ecx                                              # 00474E7B
    cmp eax, -1                                          # 00474E7C
    je .L475124                                          # 00474E7F
    mov dword ptr [__50D140], eax                        # 00474E85
    msvc_xor edi, edi                                    # 00474E8A
    mov esi, dword ptr [__50D150]                        # 00474E8C
.L474E92:
    cmp byte ptr [esi], 0xff                             # 00474E92
    je .L474FFA                                          # 00474E95
    mov ebp, dword ptr [__50D13C]                        # 00474E9B
    msvc_xor edx, edx                                    # 00474EA1
.L474EA3:
    cmp edx, dword ptr [__112A110]                       # 00474EA3
    jae .L474FF2                                         # 00474EA9
    test byte ptr [esi], 0xc0                            # 00474EAF
    jne .L474ED5                                         # 00474EB2
    mov eax, dword ptr [ebp]                             # 00474EB4
    cmp eax, dword ptr [esi]                             # 00474EB7
    jne .L474EF2                                         # 00474EB9
    mov eax, dword ptr [ebp + 4]                         # 00474EBB
    cmp eax, dword ptr [esi + 4]                         # 00474EBE
    jne .L474EF2                                         # 00474EC1
    mov eax, dword ptr [ebp + 8]                         # 00474EC3
    cmp eax, dword ptr [esi + 8]                         # 00474EC6
    jne .L474EF2                                         # 00474EC9
    mov eax, dword ptr [ebp + 0xc]                       # 00474ECB
    cmp eax, dword ptr [esi + 0xc]                       # 00474ECE
    jne .L474EF2                                         # 00474ED1
    jmp .L474F23                                         # 00474ED3
.L474ED5:
    mov al, byte ptr [esi]                               # 00474ED5
    mov ah, byte ptr [ebp]                               # 00474ED7
    and ax, 0x3f3f                                       # 00474EDA
    cmp al, ah                                           # 00474EDE
    jne .L474EF2                                         # 00474EE0
    mov eax, dword ptr [esi + 4]                         # 00474EE2
    cmp eax, dword ptr [ebp + 4]                         # 00474EE5
    jne .L474EF2                                         # 00474EE8
    mov eax, dword ptr [esi + 8]                         # 00474EEA
    cmp eax, dword ptr [ebp + 8]                         # 00474EED
    je .L474F23                                          # 00474EF0
.L474EF2:
    add ebp, 0x10                                        # 00474EF2
.L474EF5:
    inc ebp                                              # 00474EF5
    cmp byte ptr [ebp - 1], 0                            # 00474EF6
    jne .L474EF5                                         # 00474EFA
    add ebp, 4                                           # 00474EFC
.L474EFF:
    inc ebp                                              # 00474EFF
    cmp byte ptr [ebp - 1], 0                            # 00474F00
    jne .L474EFF                                         # 00474F04
    add ebp, 4                                           # 00474F06
    add ebp, 8                                           # 00474F09
    movzx eax, byte ptr [ebp]                            # 00474F0C
    inc ebp                                              # 00474F10
    imul eax, eax, 0x10                                  # 00474F11
    msvc_add ebp, eax                                    # 00474F14
    movzx eax, byte ptr [ebp]                            # 00474F16
    inc ebp                                              # 00474F1A
    imul eax, eax, 0x10                                  # 00474F1B
    msvc_add ebp, eax                                    # 00474F1E
    inc edx                                              # 00474F20
    jmp .L474EA3                                         # 00474F21
.L474F23:
    push esi                                             # 00474F23
    msvc_mov esi, ebp                                    # 00474F24
    msvc_mov eax, ecx                                    # 00474F26
    msvc_sub eax, edi                                    # 00474F28
    cmp eax, 0x231e                                      # 00474F2A
    jg .L474F70                                          # 00474F2F
    add ecx, 0x1000                                      # 00474F31
    push ecx                                             # 00474F37
    push edx                                             # 00474F38
    push edi                                             # 00474F39
    push esi                                             # 00474F3A
    mov dword ptr [__113E87C], 3                         # 00474F3B
    push ecx                                             # 00474F45
    push dword ptr [__50D140]                            # 00474F46
    call _sub_406C02                                     # 00474F4C
    add esp, 8                                           # 00474F51
    mov dword ptr [__113E87C], 0                         # 00474F54
    cmp eax, -1                                          # 00474F5E
    je .L475124                                          # 00474F61
    mov dword ptr [__50D140], eax                        # 00474F67
    pop esi                                              # 00474F6C
    pop edi                                              # 00474F6D
    pop edx                                              # 00474F6E
    pop ecx                                              # 00474F6F
.L474F70:
    push ecx                                             # 00474F70
    push edx                                             # 00474F71
    push esi                                             # 00474F72
    mov ebp, dword ptr [__50D140]                        # 00474F73
    mov ecx, 0x10                                        # 00474F79
.L474F7E:
    mov al, byte ptr [esi]                               # 00474F7E
    mov byte ptr [edi + ebp], al                         # 00474F80
    inc esi                                              # 00474F83
    inc edi                                              # 00474F84
    dec ecx                                              # 00474F85
    jne .L474F7E                                         # 00474F86
.L474F88:
    mov al, byte ptr [esi]                               # 00474F88
    mov byte ptr [edi + ebp], al                         # 00474F8A
    inc esi                                              # 00474F8D
    inc edi                                              # 00474F8E
    msvc_or al, al                                       # 00474F8F
    jne .L474F88                                         # 00474F91
    mov eax, dword ptr [esi]                             # 00474F93
    mov dword ptr [edi + ebp], eax                       # 00474F95
    add esi, 4                                           # 00474F98
    add edi, 4                                           # 00474F9B
.L474F9E:
    mov al, byte ptr [esi]                               # 00474F9E
    mov byte ptr [edi + ebp], al                         # 00474FA0
    inc esi                                              # 00474FA3
    inc edi                                              # 00474FA4
    msvc_or al, al                                       # 00474FA5
    jne .L474F9E                                         # 00474FA7
    mov eax, dword ptr [esi]                             # 00474FA9
    mov dword ptr [edi + ebp], eax                       # 00474FAB
    add esi, 4                                           # 00474FAE
    add edi, 4                                           # 00474FB1
    mov eax, dword ptr [esi]                             # 00474FB4
    mov dword ptr [edi + ebp], eax                       # 00474FB6
    mov eax, dword ptr [esi + 4]                         # 00474FB9
    mov dword ptr [edi + ebp + 4], eax                   # 00474FBC
    add esi, 8                                           # 00474FC0
    add edi, 8                                           # 00474FC3
    movzx ecx, byte ptr [esi]                            # 00474FC6
    imul ecx, ecx, 0x10                                  # 00474FC9
    inc ecx                                              # 00474FCC
.L474FCD:
    mov al, byte ptr [esi]                               # 00474FCD
    mov byte ptr [edi + ebp], al                         # 00474FCF
    inc esi                                              # 00474FD2
    inc edi                                              # 00474FD3
    dec ecx                                              # 00474FD4
    jne .L474FCD                                         # 00474FD5
    movzx ecx, byte ptr [esi]                            # 00474FD7
    imul ecx, ecx, 0x10                                  # 00474FDA
    inc ecx                                              # 00474FDD
.L474FDE:
    mov al, byte ptr [esi]                               # 00474FDE
    mov byte ptr [edi + ebp], al                         # 00474FE0
    inc esi                                              # 00474FE3
    inc edi                                              # 00474FE4
    dec ecx                                              # 00474FE5
    jne .L474FDE                                         # 00474FE6
    pop esi                                              # 00474FE8
    pop edx                                              # 00474FE9
    pop ecx                                              # 00474FEA
    inc dword ptr [__112A114]                            # 00474FEB
    pop esi                                              # 00474FF1
.L474FF2:
    add esi, 0x10                                        # 00474FF2
    msvc_jmp .L474E92                                    # 00474FF5
.L474FFA:
    mov dword ptr [__112A144], edi                       # 00474FFA
    mov ebx, 2                                           # 00475000
    call _sub_4416B5                                     # 00475005
    mov dword ptr [__113E87C], 3                         # 0047500A
    push ebx                                             # 00475014
    call _sub_4082CA                                     # 00475015
    add esp, 4                                           # 0047501A
    mov dword ptr [__113E87C], 0                         # 0047501D
    cmp eax, -1                                          # 00475027
    je .L475124                                          # 0047502A
    mov dword ptr [__9D1CBC], eax                        # 00475030
    mov eax, dword ptr [__112A114]                       # 00475035
    mov dword ptr [__112A148], eax                       # 0047503A
    mov dword ptr [__112A138], 0                         # 0047503F
    mov dword ptr [__112A13C], 0                         # 00475049
    mov dword ptr [__112A140], 0                         # 00475053
    mov dword ptr [__113E87C], 3                         # 0047505D
    push 0x14                                            # 00475067
    push_dword __112A138                                 # 00475069
    push dword ptr [__9D1CBC]                            # 0047506E
    call _sub_408271                                     # 00475074
    add esp, 0xc                                         # 00475079
    mov dword ptr [__113E87C], 0                         # 0047507C
    mov dword ptr [__113E87C], 3                         # 00475086
    push dword ptr [__112A144]                           # 00475090
    push dword ptr [__50D140]                            # 00475096
    push dword ptr [__9D1CBC]                            # 0047509C
    call _sub_408271                                     # 004750A2
    add esp, 0xc                                         # 004750A7
    mov dword ptr [__113E87C], 0                         # 004750AA
    mov dword ptr [__113E87C], 3                         # 004750B4
    push dword ptr [__9D1CBC]                            # 004750BE
    call _sub_408297                                     # 004750C4
    add esp, 4                                           # 004750C9
    mov dword ptr [__113E87C], 0                         # 004750CC
    mov dword ptr [__113E87C], 4                         # 004750D6
    push dword ptr [__50D140]                            # 004750E0
    call _sub_406C12                                     # 004750E6
    add esp, 4                                           # 004750EB
    mov dword ptr [__113E87C], 0                         # 004750EE
    msvc_and eax, eax                                    # 004750F8
    ret                                                  # 004750FA
.L4750FB:
    mov dword ptr [__113E87C], 4                         # 004750FB
    push dword ptr [__50D140]                            # 00475105
    call _sub_406C12                                     # 0047510B
    add esp, 4                                           # 00475110
    mov dword ptr [__113E87C], 0                         # 00475113
    call _sub_4CF60B                                     # 0047511D
    stc                                                  # 00475122
    ret                                                  # 00475123
.L475124:
    mov eax, 0x3d                                        # 00475124
    mov ebx, 0x37                                        # 00475129
    msvc_jmp _sub_4BE621                                 # 0047512E

    .global _sub_475133
_sub_475133:
    mov dword ptr [__112A114], 0                         # 00475133
    mov ecx, 0x1000                                      # 0047513D
    push ecx                                             # 00475142
    mov dword ptr [__113E87C], 4                         # 00475143
    push ecx                                             # 0047514D
    call _sub_406BF7                                     # 0047514E
    add esp, 4                                           # 00475153
    mov dword ptr [__113E87C], 0                         # 00475156
    pop ecx                                              # 00475160
    cmp eax, -1                                          # 00475161
    je .L47540B                                          # 00475164
    mov dword ptr [__50D140], eax                        # 0047516A
    msvc_xor edi, edi                                    # 0047516F
    mov ebp, dword ptr [__50D13C]                        # 00475171
    msvc_xor edx, edx                                    # 00475177
.L475179:
    cmp edx, dword ptr [__112A110]                       # 00475179
    jae .L4752E1                                         # 0047517F
    mov esi, dword ptr [__50D150]                        # 00475185
.L47518B:
    cmp byte ptr [esi], 0xff                             # 0047518B
    je .L4752AD                                          # 0047518E
    test byte ptr [esi], 0xc0                            # 00475194
    jne .L4751BA                                         # 00475197
    mov eax, dword ptr [ebp]                             # 00475199
    cmp eax, dword ptr [esi]                             # 0047519C
    jne .L4751D7                                         # 0047519E
    mov eax, dword ptr [ebp + 4]                         # 004751A0
    cmp eax, dword ptr [esi + 4]                         # 004751A3
    jne .L4751D7                                         # 004751A6
    mov eax, dword ptr [ebp + 8]                         # 004751A8
    cmp eax, dword ptr [esi + 8]                         # 004751AB
    jne .L4751D7                                         # 004751AE
    mov eax, dword ptr [ebp + 0xc]                       # 004751B0
    cmp eax, dword ptr [esi + 0xc]                       # 004751B3
    jne .L4751D7                                         # 004751B6
    jmp .L4751DC                                         # 004751B8
.L4751BA:
    mov al, byte ptr [esi]                               # 004751BA
    mov ah, byte ptr [ebp]                               # 004751BC
    and ax, 0x3f3f                                       # 004751BF
    cmp al, ah                                           # 004751C3
    jne .L4751D7                                         # 004751C5
    mov eax, dword ptr [esi + 4]                         # 004751C7
    cmp eax, dword ptr [ebp + 4]                         # 004751CA
    jne .L4751D7                                         # 004751CD
    mov eax, dword ptr [esi + 8]                         # 004751CF
    cmp eax, dword ptr [ebp + 8]                         # 004751D2
    je .L4751DC                                          # 004751D5
.L4751D7:
    add esi, 0x10                                        # 004751D7
    jmp .L47518B                                         # 004751DA
.L4751DC:
    push edx                                             # 004751DC
    push ebp                                             # 004751DD
    msvc_mov esi, ebp                                    # 004751DE
    msvc_mov eax, ecx                                    # 004751E0
    msvc_sub eax, edi                                    # 004751E2
    cmp eax, 0x231e                                      # 004751E4
    jg .L47522A                                          # 004751E9
    add ecx, 0x1000                                      # 004751EB
    push ecx                                             # 004751F1
    push edx                                             # 004751F2
    push edi                                             # 004751F3
    push esi                                             # 004751F4
    mov dword ptr [__113E87C], 3                         # 004751F5
    push ecx                                             # 004751FF
    push dword ptr [__50D140]                            # 00475200
    call _sub_406C02                                     # 00475206
    add esp, 8                                           # 0047520B
    mov dword ptr [__113E87C], 0                         # 0047520E
    cmp eax, -1                                          # 00475218
    je .L47540B                                          # 0047521B
    mov dword ptr [__50D140], eax                        # 00475221
    pop esi                                              # 00475226
    pop edi                                              # 00475227
    pop edx                                              # 00475228
    pop ecx                                              # 00475229
.L47522A:
    push ecx                                             # 0047522A
    push edx                                             # 0047522B
    push esi                                             # 0047522C
    mov ebp, dword ptr [__50D140]                        # 0047522D
    mov ecx, 0x10                                        # 00475233
.L475238:
    mov al, byte ptr [esi]                               # 00475238
    mov byte ptr [edi + ebp], al                         # 0047523A
    inc esi                                              # 0047523D
    inc edi                                              # 0047523E
    dec ecx                                              # 0047523F
    jne .L475238                                         # 00475240
.L475242:
    mov al, byte ptr [esi]                               # 00475242
    mov byte ptr [edi + ebp], al                         # 00475244
    inc esi                                              # 00475247
    inc edi                                              # 00475248
    msvc_or al, al                                       # 00475249
    jne .L475242                                         # 0047524B
    mov eax, dword ptr [esi]                             # 0047524D
    mov dword ptr [edi + ebp], eax                       # 0047524F
    add esi, 4                                           # 00475252
    add edi, 4                                           # 00475255
.L475258:
    mov al, byte ptr [esi]                               # 00475258
    mov byte ptr [edi + ebp], al                         # 0047525A
    inc esi                                              # 0047525D
    inc edi                                              # 0047525E
    msvc_or al, al                                       # 0047525F
    jne .L475258                                         # 00475261
    mov eax, dword ptr [esi]                             # 00475263
    mov dword ptr [edi + ebp], eax                       # 00475265
    add esi, 4                                           # 00475268
    add edi, 4                                           # 0047526B
    mov eax, dword ptr [esi]                             # 0047526E
    mov dword ptr [edi + ebp], eax                       # 00475270
    mov eax, dword ptr [esi + 4]                         # 00475273
    mov dword ptr [edi + ebp + 4], eax                   # 00475276
    add esi, 8                                           # 0047527A
    add edi, 8                                           # 0047527D
    movzx ecx, byte ptr [esi]                            # 00475280
    imul ecx, ecx, 0x10                                  # 00475283
    inc ecx                                              # 00475286
.L475287:
    mov al, byte ptr [esi]                               # 00475287
    mov byte ptr [edi + ebp], al                         # 00475289
    inc esi                                              # 0047528C
    inc edi                                              # 0047528D
    dec ecx                                              # 0047528E
    jne .L475287                                         # 0047528F
    movzx ecx, byte ptr [esi]                            # 00475291
    imul ecx, ecx, 0x10                                  # 00475294
    inc ecx                                              # 00475297
.L475298:
    mov al, byte ptr [esi]                               # 00475298
    mov byte ptr [edi + ebp], al                         # 0047529A
    inc esi                                              # 0047529D
    inc edi                                              # 0047529E
    dec ecx                                              # 0047529F
    jne .L475298                                         # 004752A0
    pop esi                                              # 004752A2
    pop edx                                              # 004752A3
    pop ecx                                              # 004752A4
    inc dword ptr [__112A114]                            # 004752A5
    pop ebp                                              # 004752AB
    pop edx                                              # 004752AC
.L4752AD:
    add ebp, 0x10                                        # 004752AD
.L4752B0:
    inc ebp                                              # 004752B0
    cmp byte ptr [ebp - 1], 0                            # 004752B1
    jne .L4752B0                                         # 004752B5
    add ebp, 4                                           # 004752B7
.L4752BA:
    inc ebp                                              # 004752BA
    cmp byte ptr [ebp - 1], 0                            # 004752BB
    jne .L4752BA                                         # 004752BF
    add ebp, 4                                           # 004752C1
    add ebp, 8                                           # 004752C4
    movzx eax, byte ptr [ebp]                            # 004752C7
    inc ebp                                              # 004752CB
    imul eax, eax, 0x10                                  # 004752CC
    msvc_add ebp, eax                                    # 004752CF
    movzx eax, byte ptr [ebp]                            # 004752D1
    inc ebp                                              # 004752D5
    imul eax, eax, 0x10                                  # 004752D6
    msvc_add ebp, eax                                    # 004752D9
    inc edx                                              # 004752DB
    msvc_jmp .L475179                                    # 004752DC
.L4752E1:
    mov dword ptr [__112A144], edi                       # 004752E1
    mov ebx, 2                                           # 004752E7
    call _sub_4416B5                                     # 004752EC
    mov dword ptr [__113E87C], 3                         # 004752F1
    push ebx                                             # 004752FB
    call _sub_4082CA                                     # 004752FC
    add esp, 4                                           # 00475301
    mov dword ptr [__113E87C], 0                         # 00475304
    cmp eax, -1                                          # 0047530E
    je .L47540B                                          # 00475311
    mov dword ptr [__9D1CBC], eax                        # 00475317
    mov eax, dword ptr [__112A114]                       # 0047531C
    mov dword ptr [__112A148], eax                       # 00475321
    mov dword ptr [__112A138], 0                         # 00475326
    mov dword ptr [__112A13C], 0                         # 00475330
    mov dword ptr [__112A140], 0                         # 0047533A
    mov dword ptr [__113E87C], 3                         # 00475344
    push 0x14                                            # 0047534E
    push_dword __112A138                                 # 00475350
    push dword ptr [__9D1CBC]                            # 00475355
    call _sub_408271                                     # 0047535B
    add esp, 0xc                                         # 00475360
    mov dword ptr [__113E87C], 0                         # 00475363
    mov dword ptr [__113E87C], 3                         # 0047536D
    push dword ptr [__112A144]                           # 00475377
    push dword ptr [__50D140]                            # 0047537D
    push dword ptr [__9D1CBC]                            # 00475383
    call _sub_408271                                     # 00475389
    add esp, 0xc                                         # 0047538E
    mov dword ptr [__113E87C], 0                         # 00475391
    mov dword ptr [__113E87C], 3                         # 0047539B
    push dword ptr [__9D1CBC]                            # 004753A5
    call _sub_408297                                     # 004753AB
    add esp, 4                                           # 004753B0
    mov dword ptr [__113E87C], 0                         # 004753B3
    mov dword ptr [__113E87C], 4                         # 004753BD
    push dword ptr [__50D140]                            # 004753C7
    call _sub_406C12                                     # 004753CD
    add esp, 4                                           # 004753D2
    mov dword ptr [__113E87C], 0                         # 004753D5
    msvc_and eax, eax                                    # 004753DF
    ret                                                  # 004753E1
.L4753E2:
    mov dword ptr [__113E87C], 4                         # 004753E2
    push dword ptr [__50D140]                            # 004753EC
    call _sub_406C12                                     # 004753F2
    add esp, 4                                           # 004753F7
    mov dword ptr [__113E87C], 0                         # 004753FA
    call _sub_4CF60B                                     # 00475404
    stc                                                  # 00475409
    ret                                                  # 0047540A
.L47540B:
    mov eax, 0x3d                                        # 0047540B
    mov ebx, 0x37                                        # 00475410
    msvc_jmp _sub_4BE621                                 # 00475415

    .global _sub_47541A
_sub_47541A:
    test dword ptr [__50AEB4], 0x100                     # 0047541A
    je .L475590                                          # 00475424
    mov esi, dword ptr [__50D150]                        # 0047542A
.L475430:
    cmp byte ptr [esi], 0xff                             # 00475430
    je .L475590                                          # 00475433
    mov ebp, dword ptr [__50D13C]                        # 00475439
    msvc_xor edx, edx                                    # 0047543F
.L475441:
    cmp edx, dword ptr [__112A110]                       # 00475441
    jae .L4754C7                                         # 00475447
    test byte ptr [esi], 0xc0                            # 00475449
    jne .L475472                                         # 0047544C
    mov eax, dword ptr [ebp]                             # 0047544E
    cmp eax, dword ptr [esi]                             # 00475451
    jne .L475493                                         # 00475453
    mov eax, dword ptr [ebp + 4]                         # 00475455
    cmp eax, dword ptr [esi + 4]                         # 00475458
    jne .L475493                                         # 0047545B
    mov eax, dword ptr [ebp + 8]                         # 0047545D
    cmp eax, dword ptr [esi + 8]                         # 00475460
    jne .L475493                                         # 00475463
    mov eax, dword ptr [ebp + 0xc]                       # 00475465
    cmp eax, dword ptr [esi + 0xc]                       # 00475468
    jne .L475493                                         # 0047546B
    msvc_jmp .L475588                                    # 0047546D
.L475472:
    mov al, byte ptr [esi]                               # 00475472
    mov ah, byte ptr [ebp]                               # 00475474
    and ax, 0x3f3f                                       # 00475477
    cmp al, ah                                           # 0047547B
    jne .L475493                                         # 0047547D
    mov eax, dword ptr [esi + 4]                         # 0047547F
    cmp eax, dword ptr [ebp + 4]                         # 00475482
    jne .L475493                                         # 00475485
    mov eax, dword ptr [esi + 8]                         # 00475487
    cmp eax, dword ptr [ebp + 8]                         # 0047548A
    je .L475588                                          # 0047548D
.L475493:
    add ebp, 0x10                                        # 00475493
.L475496:
    inc ebp                                              # 00475496
    cmp byte ptr [ebp - 1], 0                            # 00475497
    jne .L475496                                         # 0047549B
    add ebp, 4                                           # 0047549D
.L4754A0:
    inc ebp                                              # 004754A0
    cmp byte ptr [ebp - 1], 0                            # 004754A1
    jne .L4754A0                                         # 004754A5
    add ebp, 4                                           # 004754A7
    add ebp, 8                                           # 004754AA
    movzx eax, byte ptr [ebp]                            # 004754AD
    inc ebp                                              # 004754B1
    imul eax, eax, 0x10                                  # 004754B2
    msvc_add ebp, eax                                    # 004754B5
    movzx eax, byte ptr [ebp]                            # 004754B7
    inc ebp                                              # 004754BB
    imul eax, eax, 0x10                                  # 004754BC
    msvc_add ebp, eax                                    # 004754BF
    inc edx                                              # 004754C1
    msvc_jmp .L475441                                    # 004754C2
.L4754C7:
    mov al, byte ptr [esi]                               # 004754C7
    test al, 0xc0                                        # 004754C9
    jne .L475588                                         # 004754CB
    and al, 0x3f                                         # 004754D1
    cmp al, 0x20                                         # 004754D3
    jne .L475588                                         # 004754D5
    mov al, 0x83                                         # 004754DB
    mov ecx, 0x10                                        # 004754DD
    call _sub_46F530                                     # 004754E2
    push esi                                             # 004754E7
    mov_offset esi, __50B635                             # 004754E8
    mov_offset edi, __9D0F74                             # 004754ED
.L4754F2:
    mov al, byte ptr [esi]                               # 004754F2
    mov byte ptr [edi], al                               # 004754F4
    inc esi                                              # 004754F6
    inc edi                                              # 004754F7
    cmp al, 0x2a                                         # 004754F8
    jne .L4754F2                                         # 004754FA
    dec edi                                              # 004754FC
    mov dword ptr [edi], 0x30303030                      # 004754FD
    mov dword ptr [edi + 4], 0x30303030                  # 00475503
    add edi, 8                                           # 0047550A
    push edi                                             # 0047550D
    mov dword ptr [edi], 0x5441442e                      # 0047550E
    mov byte ptr [edi + 4], 0                            # 00475514
.L475518:
    mov dword ptr [__113E87C], 3                         # 00475518
    push_dword __9D0F74                                  # 00475522
    call _sub_4082AD                                     # 00475527
    add esp, 4                                           # 0047552C
    mov dword ptr [__113E87C], 0                         # 0047552F
    cmp eax, -1                                          # 00475539
    je .L475581                                          # 0047553C
    msvc_mov ebx, eax                                    # 0047553E
    mov dword ptr [__113E87C], 3                         # 00475540
    push ebx                                             # 0047554A
    call _sub_408297                                     # 0047554B
    add esp, 4                                           # 00475550
    mov dword ptr [__113E87C], 0                         # 00475553
    mov edi, dword ptr [esp]                             # 0047555D
.L475560:
    dec edi                                              # 00475560
    mov al, byte ptr [edi]                               # 00475561
    cmp al, 0x5c                                         # 00475563
    cmp al, 0x30                                         # 00475565
    jae .L47556B                                         # 00475567
    mov al, 0x2f                                         # 00475569
.L47556B:
    cmp al, 0x39                                         # 0047556B
    jne .L475571                                         # 0047556D
    mov al, 0x40                                         # 0047556F
.L475571:
    cmp al, 0x5a                                         # 00475571
    jne .L475577                                         # 00475573
    mov al, 0x2f                                         # 00475575
.L475577:
    inc al                                               # 00475577
    mov byte ptr [edi], al                               # 00475579
    cmp al, 0x30                                         # 0047557B
    je .L475560                                          # 0047557D
    jmp .L475518                                         # 0047557F
.L475581:
    pop edi                                              # 00475581
    call _sub_475868                                     # 00475582
    pop esi                                              # 00475587
.L475588:
    add esi, 0x10                                        # 00475588
    msvc_jmp .L475430                                    # 0047558B
.L475590:
    mov al, 0x84                                         # 00475590
    msvc_xor ecx, ecx                                    # 00475592
    call _sub_46F530                                     # 00475594
    msvc_and eax, eax                                    # 00475599
    ret                                                  # 0047559B

    .global _sub_47559C
_sub_47559C:
    mov al, 1                                            # 0047559C
    call _sub_46F67E                                     # 0047559E
    cmp al, 0x84                                         # 004755A3
    je .L475665                                          # 004755A5
    mov ebp, dword ptr [__50D13C]                        # 004755AB
    msvc_xor edx, edx                                    # 004755B1
.L4755B3:
    cmp edx, dword ptr [__112A110]                       # 004755B3
    jae .L475665                                         # 004755B9
    test byte ptr [esi], 0xc0                            # 004755BF
    jne .L4755E5                                         # 004755C2
    mov eax, dword ptr [ebp]                             # 004755C4
    cmp eax, dword ptr [esi]                             # 004755C7
    jne .L475602                                         # 004755C9
    mov eax, dword ptr [ebp + 4]                         # 004755CB
    cmp eax, dword ptr [esi + 4]                         # 004755CE
    jne .L475602                                         # 004755D1
    mov eax, dword ptr [ebp + 8]                         # 004755D3
    cmp eax, dword ptr [esi + 8]                         # 004755D6
    jne .L475602                                         # 004755D9
    mov eax, dword ptr [ebp + 0xc]                       # 004755DB
    cmp eax, dword ptr [esi + 0xc]                       # 004755DE
    jne .L475602                                         # 004755E1
    jmp .L475633                                         # 004755E3
.L4755E5:
    mov al, byte ptr [esi]                               # 004755E5
    mov ah, byte ptr [ebp]                               # 004755E7
    and ax, 0x3f3f                                       # 004755EA
    cmp al, ah                                           # 004755EE
    jne .L475602                                         # 004755F0
    mov eax, dword ptr [esi + 4]                         # 004755F2
    cmp eax, dword ptr [ebp + 4]                         # 004755F5
    jne .L475602                                         # 004755F8
    mov eax, dword ptr [esi + 8]                         # 004755FA
    cmp eax, dword ptr [ebp + 8]                         # 004755FD
    je .L475633                                          # 00475600
.L475602:
    add ebp, 0x10                                        # 00475602
.L475605:
    inc ebp                                              # 00475605
    cmp byte ptr [ebp - 1], 0                            # 00475606
    jne .L475605                                         # 0047560A
    add ebp, 4                                           # 0047560C
.L47560F:
    inc ebp                                              # 0047560F
    cmp byte ptr [ebp - 1], 0                            # 00475610
    jne .L47560F                                         # 00475614
    add ebp, 4                                           # 00475616
    add ebp, 8                                           # 00475619
    movzx eax, byte ptr [ebp]                            # 0047561C
    inc ebp                                              # 00475620
    imul eax, eax, 0x10                                  # 00475621
    msvc_add ebp, eax                                    # 00475624
    movzx eax, byte ptr [ebp]                            # 00475626
    inc ebp                                              # 0047562A
    imul eax, eax, 0x10                                  # 0047562B
    msvc_add ebp, eax                                    # 0047562E
    inc edx                                              # 00475630
    jmp .L4755B3                                         # 00475631
.L475633:
    add ebp, 0x10                                        # 00475633
    mov_offset ebx, __50B635                             # 00475636
    mov_offset edi, __9D0F74                             # 0047563B
.L475640:
    mov al, byte ptr [ebx]                               # 00475640
    mov byte ptr [edi], al                               # 00475642
    inc ebx                                              # 00475644
    inc edi                                              # 00475645
    cmp al, 0x2a                                         # 00475646
    jne .L475640                                         # 00475648
    dec edi                                              # 0047564A
.L47564B:
    mov al, byte ptr [ebp]                               # 0047564B
    mov byte ptr [edi], al                               # 0047564E
    inc ebp                                              # 00475650
    inc edi                                              # 00475651
    msvc_or al, al                                       # 00475652
    jne .L47564B                                         # 00475654
    mov_offset esi, __9D0F74                             # 00475656
    call _sub_475666                                     # 0047565B
    msvc_jmp _sub_47559C                                 # 00475660
.L475665:
    ret                                                  # 00475665

    .global _sub_475666
_sub_475666:
    push esi                                             # 00475666
    mov eax, 0x6b0                                       # 00475667
    msvc_xor edx, edx                                    # 0047566C
    call _sub_4CF5C5                                     # 0047566E
    pop esi                                              # 00475673
    push esi                                             # 00475674
    mov dword ptr [__113E87C], 4                         # 00475675
    push_dword 0xff8                                     # 0047567F
    call _sub_406BF7                                     # 00475684
    add esp, 4                                           # 00475689
    mov dword ptr [__113E87C], 0                         # 0047568C
    pop esi                                              # 00475696
    cmp eax, -1                                          # 00475697
    je .L475846                                          # 0047569A
    mov dword ptr [__9D9D5E], eax                        # 004756A0
    msvc_mov ebx, esi                                    # 004756A5
    mov dword ptr [__113E87C], 3                         # 004756A7
    push ebx                                             # 004756B1
    call _sub_4082AD                                     # 004756B2
    add esp, 4                                           # 004756B7
    mov dword ptr [__113E87C], 0                         # 004756BA
    cmp eax, -1                                          # 004756C4
    je .L475824                                          # 004756C7
    mov dword ptr [__9D9D56], eax                        # 004756CD
    mov dword ptr [__113E87C], 3                         # 004756D2
    push 0                                               # 004756DC
    push dword ptr [__9D9D56]                            # 004756DE
    call _sub_4081EB                                     # 004756E4
    add esp, 8                                           # 004756E9
    mov dword ptr [__113E87C], 0                         # 004756EC
    msvc_mov ecx, eax                                    # 004756F6
    push ecx                                             # 004756F8
    mov dword ptr [__113E87C], 3                         # 004756F9
    push 0                                               # 00475703
    push dword ptr [__9D9D56]                            # 00475705
    call _sub_4081C5                                     # 0047570B
    add esp, 8                                           # 00475710
    mov dword ptr [__113E87C], 0                         # 00475713
    pop ecx                                              # 0047571D
    push ecx                                             # 0047571E
    mov al, 3                                            # 0047571F
    mov dword ptr [__F2534C], ecx                        # 00475721
    mov_offset esi, __F2534C                             # 00475727
    mov ecx, 4                                           # 0047572C
    call _sub_46F530                                     # 00475731
    pop ecx                                              # 00475736
    msvc_xor ebx, ebx                                    # 00475737
.L475739:
    push ebx                                             # 00475739
    push ecx                                             # 0047573A
    push edx                                             # 0047573B
    mov eax, 0xff                                        # 0047573C
    mul ebx                                              # 00475741
    div ecx                                              # 00475743
    push eax                                             # 00475745
    call _sub_4072EC                                     # 00475746
    pop eax                                              # 0047574B
    call _sub_4CF621                                     # 0047574C
    pop edx                                              # 00475751
    pop ecx                                              # 00475752
    pop ebx                                              # 00475753
    msvc_mov edx, ecx                                    # 00475754
    msvc_sub edx, ebx                                    # 00475756
    cmp edx, 0xff8                                       # 00475758
    jbe .L475765                                         # 0047575E
    mov edx, 0xff8                                       # 00475760
.L475765:
    push ebx                                             # 00475765
    push ecx                                             # 00475766
    push edx                                             # 00475767
    mov dword ptr [__113E87C], 3                         # 00475768
    push edx                                             # 00475772
    push dword ptr [__9D9D5E]                            # 00475773
    push dword ptr [__9D9D56]                            # 00475779
    call _sub_4081FE                                     # 0047577F
    add esp, 0xc                                         # 00475784
    mov dword ptr [__113E87C], 0                         # 00475787
    pop edx                                              # 00475791
    pop ecx                                              # 00475792
    pop ebx                                              # 00475793
    push ebx                                             # 00475794
    push ecx                                             # 00475795
    push edx                                             # 00475796
    mov al, 3                                            # 00475797
    msvc_mov ecx, edx                                    # 00475799
    mov esi, dword ptr [__9D9D5E]                        # 0047579B
    call _sub_46F530                                     # 004757A1
    msvc_xor al, al                                      # 004757A6
    call _sub_46F67E                                     # 004757A8
    pop edx                                              # 004757AD
    pop ecx                                              # 004757AE
    pop ebx                                              # 004757AF
    msvc_add ebx, edx                                    # 004757B0
    msvc_cmp ebx, ecx                                    # 004757B2
    jne .L475739                                         # 004757B4
    mov dword ptr [__113E87C], 3                         # 004757B6
    push dword ptr [__9D9D56]                            # 004757C0
    call _sub_408297                                     # 004757C6
    add esp, 4                                           # 004757CB
    mov dword ptr [__113E87C], 0                         # 004757CE
    mov dword ptr [__113E87C], 4                         # 004757D8
    push dword ptr [__9D9D5E]                            # 004757E2
    call _sub_406C12                                     # 004757E8
    add esp, 4                                           # 004757ED
    mov dword ptr [__113E87C], 0                         # 004757F0
    call _sub_4CF60B                                     # 004757FA
    msvc_and eax, eax                                    # 004757FF
    ret                                                  # 00475801
.L475802:
    mov dword ptr [__113E87C], 3                         # 00475802
    push dword ptr [__9D9D56]                            # 0047580C
    call _sub_408297                                     # 00475812
    add esp, 4                                           # 00475817
    mov dword ptr [__113E87C], 0                         # 0047581A
.L475824:
    mov dword ptr [__113E87C], 4                         # 00475824
    push dword ptr [__9D9D5E]                            # 0047582E
    call _sub_406C12                                     # 00475834
    add esp, 4                                           # 00475839
    mov dword ptr [__113E87C], 0                         # 0047583C
.L475846:
    mov al, 3                                            # 00475846
    mov dword ptr [__F2534C], 0                          # 00475848
    mov_offset esi, __F2534C                             # 00475852
    mov ecx, 4                                           # 00475857
    call _sub_46F530                                     # 0047585C
    call _sub_4CF60B                                     # 00475861
    stc                                                  # 00475866
    ret                                                  # 00475867

    .global _sub_475868
_sub_475868:
    mov eax, 0x6b1                                       # 00475868
    msvc_xor edx, edx                                    # 0047586D
    call _sub_4CF5C5                                     # 0047586F
.L475874:
    msvc_xor al, al                                      # 00475874
    call _sub_46F67E                                     # 00475876
    jb .L475981                                          # 0047587B
    cmp al, 3                                            # 00475881
    jne .L475874                                         # 00475883
    mov ecx, dword ptr [esi]                             # 00475885
    msvc_or ecx, ecx                                     # 00475887
    je .L475981                                          # 00475889
    push ecx                                             # 0047588F
    mov dword ptr [__113E87C], 3                         # 00475890
    push_dword __9D0F74                                  # 0047589A
    call _sub_4082CA                                     # 0047589F
    add esp, 4                                           # 004758A4
    mov dword ptr [__113E87C], 0                         # 004758A7
    pop ecx                                              # 004758B1
    cmp eax, -1                                          # 004758B2
    je .L475981                                          # 004758B5
    mov dword ptr [__9D9D56], eax                        # 004758BB
    msvc_xor ebx, ebx                                    # 004758C0
.L4758C2:
    push ebx                                             # 004758C2
    push ecx                                             # 004758C3
    mov eax, 0xff                                        # 004758C4
    mul ebx                                              # 004758C9
    div ecx                                              # 004758CB
    push eax                                             # 004758CD
    call _sub_4072EC                                     # 004758CE
    pop eax                                              # 004758D3
    call _sub_4CF621                                     # 004758D4
    pop ecx                                              # 004758D9
    pop ebx                                              # 004758DA
    push ebx                                             # 004758DB
    push ecx                                             # 004758DC
    msvc_xor al, al                                      # 004758DD
    call _sub_46F67E                                     # 004758DF
    msvc_mov edx, ecx                                    # 004758E4
    pop ecx                                              # 004758E6
    pop ebx                                              # 004758E7
    jb .L47595F                                          # 004758E8
    push ebx                                             # 004758EA
    push ecx                                             # 004758EB
    push edx                                             # 004758EC
    push esi                                             # 004758ED
    mov al, 3                                            # 004758EE
    mov ecx, 1                                           # 004758F0
    mov_offset esi, __F2534C                             # 004758F5
    call _sub_46F530                                     # 004758FA
    pop esi                                              # 004758FF
    pop edx                                              # 00475900
    pop ecx                                              # 00475901
    pop ebx                                              # 00475902
    push ebx                                             # 00475903
    push ecx                                             # 00475904
    push edx                                             # 00475905
    msvc_mov ebx, esi                                    # 00475906
    mov dword ptr [__113E87C], 3                         # 00475908
    push edx                                             # 00475912
    push ebx                                             # 00475913
    push dword ptr [__9D9D56]                            # 00475914
    call _sub_408271                                     # 0047591A
    add esp, 0xc                                         # 0047591F
    mov dword ptr [__113E87C], 0                         # 00475922
    pop edx                                              # 0047592C
    pop ecx                                              # 0047592D
    pop ebx                                              # 0047592E
    msvc_add ebx, edx                                    # 0047592F
    msvc_cmp ebx, ecx                                    # 00475931
    jb .L4758C2                                          # 00475933
    mov dword ptr [__113E87C], 3                         # 00475935
    push dword ptr [__9D9D56]                            # 0047593F
    call _sub_408297                                     # 00475945
    add esp, 4                                           # 0047594A
    mov dword ptr [__113E87C], 0                         # 0047594D
    call _sub_4CF60B                                     # 00475957
    msvc_and eax, eax                                    # 0047595C
    ret                                                  # 0047595E
.L47595F:
    mov dword ptr [__113E87C], 3                         # 0047595F
    push dword ptr [__9D9D56]                            # 00475969
    call _sub_408297                                     # 0047596F
    add esp, 4                                           # 00475974
    mov dword ptr [__113E87C], 0                         # 00475977
.L475981:
    call _sub_4CF60B                                     # 00475981
    stc                                                  # 00475986
    ret                                                  # 00475987

    .global _sub_475988
_sub_475988:
    msvc_xor edi, edi                                    # 00475988
.L47598A:
    mov byte ptr [edi + _scenarioChunk3+378], 0xff       # 0047598A
    mov byte ptr [edi + _scenarioChunk3+386], 0xff       # 00475991
    mov byte ptr [edi + _scenarioChunk3+394], 0xff       # 00475998
    inc edi                                              # 0047599F
    cmp edi, 8                                           # 004759A0
    jb .L47598A                                          # 004759A3
    ret                                                  # 004759A5

    .global _sub_4759A6
_sub_4759A6:
    test byte ptr [esi + 1], 0x20                        # 004759A6
    jne _sub_475DDE                                      # 004759AA
    test byte ptr [esi + 1], 0x10                        # 004759B0
    je .L4759D0                                          # 004759B4
    cmp byte ptr [_scenarioChunk3+37], 0xff              # 004759B6
    je .L4759D0                                          # 004759BD
    mov al, byte ptr [esi + 7]                           # 004759BF
    and al, 0xf                                          # 004759C2
    cmp al, byte ptr [_scenarioChunk3+37]                # 004759C4
    je _sub_475DDE                                       # 004759CA
.L4759D0:
    test word ptr [__E3F0BC], 8                          # 004759D0
    je .L475A78                                          # 004759D9
    mov edi, dword ptr [__E0C3E0]                        # 004759DF
    cmp word ptr [edi + 0xe], 0                          # 004759E5
    jne .L475A78                                         # 004759EA
    push ecx                                             # 004759F0
    push edx                                             # 004759F1
    push esi                                             # 004759F2
    mov byte ptr [__E3F0AC], 0                           # 004759F3
    mov di, word ptr [esi + 4]                           # 004759FA
    mov bl, byte ptr [esi + 5]                           # 004759FE
    and edi, 0xf                                         # 00475A01
    msvc_xor ebp, ebp                                    # 00475A04
    and ebx, 3                                           # 00475A06
    je .L475A12                                          # 00475A09
    test byte ptr [esi + 1], 0x40                        # 00475A0B
    je .L475A75                                          # 00475A0F
    inc ebp                                              # 00475A11
.L475A12:
    movsx ax, byte ptr [ebp + edi*2 + __4F720C]          # 00475A12
    msvc_add dx, ax                                      # 00475A1B
    movzx ebx, dx                                        # 00475A1E
    add ebx, 8                                           # 00475A21
    shr ebx, 4                                           # 00475A24
    add ebx, 0x20380a26                                  # 00475A27
    add bx, word ptr [__50AF28]                          # 00475A2D
    sub bx, word ptr [_scenarioChunk3+410]               # 00475A34
    add dx, 8                                            # 00475A3B
    mov al, 0x10                                         # 00475A3F
    mov cl, 0x10                                         # 00475A41
    mov di, 1                                            # 00475A43
    mov si, 1                                            # 00475A47
    mov ah, 0                                            # 00475A4B
    mov word ptr [__E3F0A0], 0x3e8                       # 00475A4D
    mov word ptr [__E3F0A2], 0x3e8                       # 00475A56
    mov word ptr [__E3F0A4], 0x43f                       # 00475A5F
    mov ebp, dword ptr [__E3F0B8]                        # 00475A68
    call dword ptr [ebp*4 + __4FD140]                    # 00475A6E
.L475A75:
    pop esi                                              # 00475A75
    pop edx                                              # 00475A76
    pop ecx                                              # 00475A77
.L475A78:
    test word ptr [__E3F0BC], 0x10                       # 00475A78
    je .L475B3C                                          # 00475A81
    mov edi, dword ptr [__E0C3E0]                        # 00475A87
    cmp word ptr [edi + 0xe], 0                          # 00475A8D
    jne .L475B3C                                         # 00475A92
    test byte ptr [esi + 1], 0x10                        # 00475A98
    jne .L475B3C                                         # 00475A9C
    push ecx                                             # 00475AA2
    push edx                                             # 00475AA3
    push esi                                             # 00475AA4
    movzx edi, byte ptr [esi + 5]                        # 00475AA5
    shr edi, 4                                           # 00475AA9
    mov edi, dword ptr [edi*4 + _roadObjects]            # 00475AAC
    test word ptr [edi + 0x12], 1                        # 00475AB3
    je .L475B39                                          # 00475AB9
    mov byte ptr [__E3F0AC], 0                           # 00475ABB
    mov di, word ptr [esi + 4]                           # 00475AC2
    mov bl, byte ptr [esi + 5]                           # 00475AC6
    and edi, 0xf                                         # 00475AC9
    msvc_xor ebp, ebp                                    # 00475ACC
    and ebx, 3                                           # 00475ACE
    je .L475ADA                                          # 00475AD1
    test byte ptr [esi + 1], 0x40                        # 00475AD3
    je .L475B39                                          # 00475AD7
    inc ebp                                              # 00475AD9
.L475ADA:
    movsx ax, byte ptr [ebp + edi*2 + __4F720C]          # 00475ADA
    msvc_add dx, ax                                      # 00475AE3
    add dx, 2                                            # 00475AE6
    shl ebp, 2                                           # 00475AEA
    msvc_add ebp, ecx                                    # 00475AED
    movzx ebx, byte ptr [ebp + edi*8 + __4F7220]         # 00475AEF
    add ebx, 0x20700da4                                  # 00475AF7
    msvc_xor al, al                                      # 00475AFD
    msvc_xor cl, cl                                      # 00475AFF
    mov di, 1                                            # 00475B01
    mov si, 1                                            # 00475B05
    mov ah, 0                                            # 00475B09
    mov word ptr [__E3F0A0], 0xf                         # 00475B0B
    mov word ptr [__E3F0A2], 0xf                         # 00475B14
    mov word ptr [__E3F0A4], dx                          # 00475B1D
    add word ptr [__E3F0A4], 0x10                        # 00475B24
    mov ebp, dword ptr [__E3F0B8]                        # 00475B2C
    call dword ptr [ebp*4 + __4FD140]                    # 00475B32
.L475B39:
    pop esi                                              # 00475B39
    pop edx                                              # 00475B3A
    pop ecx                                              # 00475B3B
.L475B3C:
    movzx ebx, byte ptr [esi + 5]                        # 00475B3C
    mov byte ptr [__E3F0AC], 0x10                        # 00475B40
    shr ebx, 4                                           # 00475B47
    mov ebx, dword ptr [ebx*4 + _roadObjects]            # 00475B4A
    mov eax, dword ptr [ebx + 0xe]                       # 00475B51
    mov dword ptr [__112C27C], ebx                       # 00475B54
    mov dword ptr [__112C280], eax                       # 00475B5A
    mov al, byte ptr [ebx + 0xb]                         # 00475B5F
    mov byte ptr [__113605E], al                         # 00475B62
    mov dword ptr [__112C284], ecx                       # 00475B67
    mov al, byte ptr [esi + 7]                           # 00475B6D
    and eax, 0xf                                         # 00475B70
    mov al, byte ptr [eax + __9C645C]                    # 00475B73
    shl eax, 0x13                                        # 00475B79
    or eax, 0x20000000                                   # 00475B7C
    mov dword ptr [__1135F32], eax                       # 00475B81
    mov dword ptr [__1135F36], eax                       # 00475B86
    test byte ptr [esi + 1], 0x10                        # 00475B8B
    je .L475BB0                                          # 00475B8F
    mov byte ptr [__E3F0AC], 0                           # 00475B91
    movzx eax, byte ptr [__50AED8]                       # 00475B98
    mov eax, dword ptr [eax*4 + __4FFAE8]                # 00475B9F
    mov dword ptr [__1135F32], eax                       # 00475BA6
    mov dword ptr [__1135F36], eax                       # 00475BAB
.L475BB0:
    or dword ptr [__112C280], eax                        # 00475BB0
    test byte ptr [__522095], 1                          # 00475BB6
    jne _sub_475BE1                                      # 00475BBD
    movzx eax, byte ptr [ebx + 0x24]                     # 00475BBF
    mov ebx, dword ptr [eax*4 + __4FE43C]                # 00475BC3
    mov al, byte ptr [esi + 4]                           # 00475BCA
    and eax, 0xf                                         # 00475BCD
    mov ebx, dword ptr [ebx + eax*4]                     # 00475BD0
    mov al, byte ptr [esi + 5]                           # 00475BD3
    msvc_mov bp, ax                                      # 00475BD6
    push esi                                             # 00475BD9
    and ebp, 3                                           # 00475BDA
    jmp dword ptr [ebx + ecx*4]                          # 00475BDD

    .global _sub_475BE0
_sub_475BE0:
    pop esi                                              # 00475BE0

    .global _sub_475BE1
_sub_475BE1:
    mov edi, dword ptr [__E0C3E0]                        # 00475BE1
    cmp word ptr [edi + 0xe], 1                          # 00475BE7
    ja .L475BF9                                          # 00475BEC
    test byte ptr [esi + 7], 0x20                        # 00475BEE
    je .L475BF9                                          # 00475BF2
    call _sub_475DDF                                     # 00475BF4
.L475BF9:
    mov edi, dword ptr [__E0C3E0]                        # 00475BF9
    mov ebx, dword ptr [__112C27C]                       # 00475BFF
    cmp word ptr [edi + 0xe], 0                          # 00475C05
    jne _sub_475DDE                                      # 00475C0A
    test word ptr [ebx + 0x12], 8                        # 00475C10
    jne _sub_475DDE                                      # 00475C16
    test byte ptr [esi + 7], 0xc0                        # 00475C1C
    je .L475CEA                                          # 00475C20
    mov bl, 0x11                                         # 00475C26
    xchg byte ptr [__E3F0AC], bl                         # 00475C28
    push ebx                                             # 00475C2E
    test byte ptr [esi + 7], 0x40                        # 00475C2F
    je .L475C89                                          # 00475C33
    mov ebx, dword ptr [__112C27C]                       # 00475C35
    push esi                                             # 00475C3B
    movzx ebx, byte ptr [ebx + 0x26]                     # 00475C3C
    mov byte ptr [__E3F0AD], 0                           # 00475C40
    mov ebx, dword ptr [ebx*4 + _roadExtraObjects]       # 00475C47
    mov dword ptr [__112C288], ebx                       # 00475C4E
    mov eax, dword ptr [ebx + 0xa]                       # 00475C54
    add eax, dword ptr [__1135F32]                       # 00475C57
    mov dword ptr [__112C28C], eax                       # 00475C5D
    movzx eax, byte ptr [ebx + 4]                        # 00475C62
    mov ebx, dword ptr [eax*4 + __4FE448]                # 00475C66
    mov al, byte ptr [esi + 4]                           # 00475C6D
    and eax, 0xf                                         # 00475C70
    mov ebx, dword ptr [ebx + eax*4]                     # 00475C73
    mov al, byte ptr [esi + 5]                           # 00475C76
    msvc_mov bp, ax                                      # 00475C79
    mov ecx, dword ptr [__112C284]                       # 00475C7C
    and ebp, 3                                           # 00475C82
    call dword ptr [ebx + ecx*4]                         # 00475C85
    pop esi                                              # 00475C88
.L475C89:
    test byte ptr [esi + 7], 0x80                        # 00475C89
    je .L475CE3                                          # 00475C8D
    mov ebx, dword ptr [__112C27C]                       # 00475C8F
    push esi                                             # 00475C95
    movzx ebx, byte ptr [ebx + 0x27]                     # 00475C96
    mov byte ptr [__E3F0AD], 1                           # 00475C9A
    mov ebx, dword ptr [ebx*4 + _roadExtraObjects]       # 00475CA1
    mov dword ptr [__112C288], ebx                       # 00475CA8
    mov eax, dword ptr [ebx + 0xa]                       # 00475CAE
    add eax, dword ptr [__1135F32]                       # 00475CB1
    mov dword ptr [__112C28C], eax                       # 00475CB7
    movzx eax, byte ptr [ebx + 4]                        # 00475CBC
    mov ebx, dword ptr [eax*4 + __4FE448]                # 00475CC0
    mov al, byte ptr [esi + 4]                           # 00475CC7
    and eax, 0xf                                         # 00475CCA
    mov ebx, dword ptr [ebx + eax*4]                     # 00475CCD
    mov al, byte ptr [esi + 5]                           # 00475CD0
    msvc_mov bp, ax                                      # 00475CD3
    mov ecx, dword ptr [__112C284]                       # 00475CD6
    and ebp, 3                                           # 00475CDC
    call dword ptr [ebx + ecx*4]                         # 00475CDF
    pop esi                                              # 00475CE2
.L475CE3:
    pop ebx                                              # 00475CE3
    mov byte ptr [__E3F0AC], bl                          # 00475CE4
.L475CEA:
    test byte ptr [esi + 4], 0x40                        # 00475CEA
    je _sub_475DDE                                       # 00475CEE
    mov bl, 0x11                                         # 00475CF4
    xchg byte ptr [__E3F0AC], bl                         # 00475CF6
    push ebx                                             # 00475CFC
    test word ptr [__1135FE4], 1                         # 00475CFD
    je .L475D6A                                          # 00475D06
    test byte ptr [esi + 7], 0x40                        # 00475D08
    jne .L475D6A                                         # 00475D0C
    mov ebx, dword ptr [__112C27C]                       # 00475D0E
    push esi                                             # 00475D14
    movzx ebx, byte ptr [ebx + 0x26]                     # 00475D15
    mov byte ptr [__E3F0AD], 0                           # 00475D19
    mov ebx, dword ptr [ebx*4 + _roadExtraObjects]       # 00475D20
    mov dword ptr [__112C288], ebx                       # 00475D27
    movzx eax, byte ptr [__50AED8]                       # 00475D2D
    mov eax, dword ptr [eax*4 + __4FFAE8]                # 00475D34
    add eax, dword ptr [ebx + 0xa]                       # 00475D3B
    mov dword ptr [__112C28C], eax                       # 00475D3E
    movzx eax, byte ptr [ebx + 4]                        # 00475D43
    mov ebx, dword ptr [eax*4 + __4FE448]                # 00475D47
    mov al, byte ptr [esi + 4]                           # 00475D4E
    and eax, 0xf                                         # 00475D51
    mov ebx, dword ptr [ebx + eax*4]                     # 00475D54
    mov al, byte ptr [esi + 5]                           # 00475D57
    msvc_mov bp, ax                                      # 00475D5A
    mov ecx, dword ptr [__112C284]                       # 00475D5D
    and ebp, 3                                           # 00475D63
    call dword ptr [ebx + ecx*4]                         # 00475D66
    pop esi                                              # 00475D69
.L475D6A:
    test word ptr [__1135FE4], 2                         # 00475D6A
    je .L475DD7                                          # 00475D73
    test byte ptr [esi + 7], 0x80                        # 00475D75
    jne .L475DD7                                         # 00475D79
    mov ebx, dword ptr [__112C27C]                       # 00475D7B
    push esi                                             # 00475D81
    movzx ebx, byte ptr [ebx + 0x27]                     # 00475D82
    mov byte ptr [__E3F0AD], 1                           # 00475D86
    mov ebx, dword ptr [ebx*4 + _roadExtraObjects]       # 00475D8D
    mov dword ptr [__112C288], ebx                       # 00475D94
    movzx eax, byte ptr [__50AED8]                       # 00475D9A
    mov eax, dword ptr [eax*4 + __4FFAE8]                # 00475DA1
    add eax, dword ptr [ebx + 0xa]                       # 00475DA8
    mov dword ptr [__112C28C], eax                       # 00475DAB
    movzx eax, byte ptr [ebx + 4]                        # 00475DB0
    mov ebx, dword ptr [eax*4 + __4FE448]                # 00475DB4
    mov al, byte ptr [esi + 4]                           # 00475DBB
    and eax, 0xf                                         # 00475DBE
    mov ebx, dword ptr [ebx + eax*4]                     # 00475DC1
    mov al, byte ptr [esi + 5]                           # 00475DC4
    msvc_mov bp, ax                                      # 00475DC7
    mov ecx, dword ptr [__112C284]                       # 00475DCA
    and ebp, 3                                           # 00475DD0
    call dword ptr [ebx + ecx*4]                         # 00475DD3
    pop esi                                              # 00475DD6
.L475DD7:
    pop ebx                                              # 00475DD7
    mov byte ptr [__E3F0AC], bl                          # 00475DD8

    .global _sub_475DDE
_sub_475DDE:
    ret                                                  # 00475DDE

    .global _sub_475DDF
_sub_475DDF:
    mov bl, byte ptr [esi + 5]                           # 00475DDF
    and ebx, 0xc                                         # 00475DE2
    mov ebp, dword ptr [ebx + _levelCrossingObjects]     # 00475DE5
    msvc_xor ebx, ebx                                    # 00475DEB
    mov cl, byte ptr [esi + 6]                           # 00475DED
    and ecx, 0xf                                         # 00475DF0
    je .L475E1D                                          # 00475DF3
    cmp cl, 0xf                                          # 00475DF5
    je .L475E01                                          # 00475DF8
    msvc_mov ebx, ecx                                    # 00475DFA
    shl ebx, 3                                           # 00475DFC
    jmp .L475E1D                                         # 00475DFF
.L475E01:
    mov ebx, dword ptr [_scenarioChunk3+326]             # 00475E01
    mov cl, byte ptr [ebp + 7]                           # 00475E07
    shr ebx, cl                                          # 00475E0A
    movzx eax, byte ptr [ebp + 8]                        # 00475E0C
    dec eax                                              # 00475E10
    msvc_and ebx, eax                                    # 00475E11
    movzx eax, byte ptr [ebp + 9]                        # 00475E13
    msvc_add ebx, eax                                    # 00475E17
    inc ebx                                              # 00475E19
    shl ebx, 3                                           # 00475E1A
.L475E1D:
    mov ecx, dword ptr [__112C284]                       # 00475E1D
    and ecx, 1                                           # 00475E23
    shl ecx, 2                                           # 00475E26
    msvc_add ebx, ecx                                    # 00475E29
    add ebx, dword ptr [ebp + 0xe]                       # 00475E2B
    or ebx, dword ptr [__1135F32]                        # 00475E2E
    push esi                                             # 00475E34
    push ebx                                             # 00475E35
    push edx                                             # 00475E36
    mov word ptr [__E3F0A0], 2                           # 00475E37
    mov word ptr [__E3F0A2], 2                           # 00475E40
    mov di, 1                                            # 00475E49
    mov si, 1                                            # 00475E4D
    mov ah, 8                                            # 00475E51
    add dx, 1                                            # 00475E53
    mov word ptr [__E3F0A4], dx                          # 00475E57
    sub dx, 1                                            # 00475E5E
    mov ebp, dword ptr [__E3F0B8]                        # 00475E62
    call dword ptr [ebp*4 + __4FD150]                    # 00475E68
    pop edx                                              # 00475E6F
    pop ebx                                              # 00475E70
    inc ebx                                              # 00475E71
    push ebx                                             # 00475E72
    push edx                                             # 00475E73
    mov word ptr [__E3F0A0], 2                           # 00475E74
    mov word ptr [__E3F0A2], 0x1e                        # 00475E7D
    mov di, 1                                            # 00475E86
    mov si, 1                                            # 00475E8A
    mov ah, 8                                            # 00475E8E
    add dx, 1                                            # 00475E90
    mov word ptr [__E3F0A4], dx                          # 00475E94
    sub dx, 1                                            # 00475E9B
    mov ebp, dword ptr [__E3F0B8]                        # 00475E9F
    call dword ptr [ebp*4 + __4FD150]                    # 00475EA5
    pop edx                                              # 00475EAC
    pop ebx                                              # 00475EAD
    inc ebx                                              # 00475EAE
    push ebx                                             # 00475EAF
    push edx                                             # 00475EB0
    mov word ptr [__E3F0A0], 0x1e                        # 00475EB1
    mov word ptr [__E3F0A2], 2                           # 00475EBA
    mov di, 1                                            # 00475EC3
    mov si, 1                                            # 00475EC7
    mov ah, 8                                            # 00475ECB
    add dx, 1                                            # 00475ECD
    mov word ptr [__E3F0A4], dx                          # 00475ED1
    sub dx, 1                                            # 00475ED8
    mov ebp, dword ptr [__E3F0B8]                        # 00475EDC
    call dword ptr [ebp*4 + __4FD150]                    # 00475EE2
    pop edx                                              # 00475EE9
    pop ebx                                              # 00475EEA
    inc ebx                                              # 00475EEB
    mov esi, dword ptr [esp]                             # 00475EEC
    mov al, byte ptr [esi + 6]                           # 00475EEF
    and al, 0xf                                          # 00475EF2
    cmp al, 0xf                                          # 00475EF4
    jne .L475F80                                         # 00475EF6
    test dword ptr [__112C284], 1                        # 00475EFC
    jne .L475F44                                         # 00475F06
    push edx                                             # 00475F08
    mov word ptr [__E3F0A0], 0x1e                        # 00475F09
    mov word ptr [__E3F0A2], 0x11                        # 00475F12
    mov di, 1                                            # 00475F1B
    mov si, 0xe                                          # 00475F1F
    mov ah, 8                                            # 00475F23
    add dx, 1                                            # 00475F25
    mov word ptr [__E3F0A4], dx                          # 00475F29
    sub dx, 1                                            # 00475F30
    mov ebp, dword ptr [__E3F0B8]                        # 00475F34
    call dword ptr [ebp*4 + __4FD150]                    # 00475F3A
    pop edx                                              # 00475F41
    jmp .L475FBA                                         # 00475F42
.L475F44:
    push edx                                             # 00475F44
    mov word ptr [__E3F0A0], 0x11                        # 00475F45
    mov word ptr [__E3F0A2], 0x1e                        # 00475F4E
    mov di, 0xe                                          # 00475F57
    mov si, 1                                            # 00475F5B
    mov ah, 8                                            # 00475F5F
    add dx, 1                                            # 00475F61
    mov word ptr [__E3F0A4], dx                          # 00475F65
    sub dx, 1                                            # 00475F6C
    mov ebp, dword ptr [__E3F0B8]                        # 00475F70
    call dword ptr [ebp*4 + __4FD150]                    # 00475F76
    pop edx                                              # 00475F7D
    jmp .L475FBA                                         # 00475F7E
.L475F80:
    push edx                                             # 00475F80
    mov word ptr [__E3F0A0], 0x1e                        # 00475F81
    mov word ptr [__E3F0A2], 0x1e                        # 00475F8A
    mov di, 1                                            # 00475F93
    mov si, 1                                            # 00475F97
    mov ah, 8                                            # 00475F9B
    add dx, 1                                            # 00475F9D
    mov word ptr [__E3F0A4], dx                          # 00475FA1
    sub dx, 1                                            # 00475FA8
    mov ebp, dword ptr [__E3F0B8]                        # 00475FAC
    call dword ptr [ebp*4 + __4FD150]                    # 00475FB2
    pop edx                                              # 00475FB9
.L475FBA:
    pop esi                                              # 00475FBA
    ret                                                  # 00475FBB

    .global _sub_475FBC
_sub_475FBC:
    mov byte ptr [__9C68EA], 0x30                        # 00475FBC
    mov word ptr [__9C68E0], ax                          # 00475FC3
    mov word ptr [__9C68E2], cx                          # 00475FC9
    add word ptr [__9C68E0], 0x10                        # 00475FD0
    add word ptr [__9C68E2], 0x10                        # 00475FD8
    mov word ptr [__9C68E4], di                          # 00475FE0
    and bh, 3                                            # 00475FE7
    mov byte ptr [__1136072], 0                          # 00475FEA
    mov byte ptr [__1136073], 0                          # 00475FF1
    mov byte ptr [__1136075], 0xff                       # 00475FF8
    mov byte ptr [__112C2E9], 0xff                       # 00475FFF
    mov byte ptr [__1136074], 0                          # 00476006
    ror edi, 0x10                                        # 0047600D
    mov word ptr [__1135F84], di                         # 00476010
    ror edi, 0x10                                        # 00476017
    mov dword ptr [__1135C68], edx                       # 0047601A
    push eax                                             # 00476020
    mov al, byte ptr [__9C68EB]                          # 00476021
    test word ptr [__508F14], 2                          # 00476026
    je .L476033                                          # 0047602F
    mov al, 0xf                                          # 00476031
.L476033:
    mov byte ptr [__112C2F6], al                         # 00476033
    pop eax                                              # 00476038
    test bl, 1                                           # 00476039
    je .L476070                                          # 0047603C
    test bl, 0x10                                        # 0047603E
    jne .L476070                                         # 00476041
    cmp byte ptr [__112C2F6], 0xf                        # 00476043
    je .L476070                                          # 0047604A
    pushal                                               # 0047604C
    movzx dx, dl                                         # 0047604D
    or dx, 0x80                                          # 00476051
    mov di, 0xffff                                       # 00476056
    add ax, 0x10                                         # 0047605A
    add cx, 0x10                                         # 0047605E
    mov bh, byte ptr [__9C68EB]                          # 00476062
    mov bl, 1                                            # 00476068
    call _sub_438167                                     # 0047606A
    popal                                                # 0047606F
.L476070:
    push eax                                             # 00476070
    push ebx                                             # 00476071
    push ecx                                             # 00476072
    push edx                                             # 00476073
    push edi                                             # 00476074
    push esi                                             # 00476075
    push 0                                               # 00476076
    call _sub_461393                                     # 00476078
    jb _sub_476D33                                       # 0047607D
    movzx ebp, byte ptr [esp + 0xc]                      # 00476083
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 00476088
    msvc_xor esi, esi                                    # 0047608F
.L476091:
    bt word ptr [__1135F84], si                          # 00476091
    jae .L4760CE                                         # 00476099
    push eax                                             # 0047609B
    push edx                                             # 0047609C
    push ebp                                             # 0047609D
    movzx ebp, byte ptr [esi + ebp + 0x26]               # 0047609E
    mov ebp, dword ptr [ebp*4 + _roadExtraObjects]       # 004760A3
    movzx edx, dh                                        # 004760AA
    mov ax, word ptr [edx*2 + __4F72E8]                  # 004760AD
    and ax, word ptr [ebp + 2]                           # 004760B5
    cmp ax, word ptr [edx*2 + __4F72E8]                  # 004760B9
    je .L4760CB                                          # 004760C1
    btr word ptr [__1135F84], si                         # 004760C3
.L4760CB:
    pop ebp                                              # 004760CB
    pop edx                                              # 004760CC
    pop eax                                              # 004760CD
.L4760CE:
    inc esi                                              # 004760CE
    cmp esi, 2                                           # 004760CF
    jb .L476091                                          # 004760D2
    movzx ebp, dh                                        # 004760D4
    test di, 0xf                                         # 004760D7
    jne _sub_476D33                                      # 004760DC
    movzx edi, byte ptr [esp + 0xc]                      # 004760E2
    mov edi, dword ptr [edi*4 + _roadObjects]            # 004760E7
    movzx ecx, byte ptr [edi + 0xa]                      # 004760EE
    movsx eax, word ptr [edi + 4]                        # 004760F2
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 004760F6
    sar eax, 0xa                                         # 004760FE
    movzx ecx, byte ptr [esp + 0xd]                      # 00476101
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00476106
    imul eax, ecx                                        # 0047610E
    sar eax, 8                                           # 00476111
    add dword ptr [esp], eax                             # 00476114
    test word ptr [__1135F84], 1                         # 00476117
    je .L476156                                          # 00476120
    movzx ecx, byte ptr [edi + 0x26]                     # 00476122
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 00476126
    movsx eax, word ptr [ecx + 6]                        # 0047612D
    movzx ecx, byte ptr [ecx + 5]                        # 00476131
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00476135
    sar eax, 0xa                                         # 0047613D
    movzx ecx, byte ptr [esp + 0xd]                      # 00476140
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00476145
    imul eax, ecx                                        # 0047614D
    sar eax, 8                                           # 00476150
    add dword ptr [esp], eax                             # 00476153
.L476156:
    test word ptr [__1135F84], 2                         # 00476156
    je .L476195                                          # 0047615F
    movzx ecx, byte ptr [edi + 0x27]                     # 00476161
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 00476165
    movsx eax, word ptr [ecx + 6]                        # 0047616C
    movzx ecx, byte ptr [ecx + 5]                        # 00476170
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00476174
    sar eax, 0xa                                         # 0047617C
    movzx ecx, byte ptr [esp + 0xd]                      # 0047617F
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00476184
    imul eax, ecx                                        # 0047618C
    sar eax, 8                                           # 0047618F
    add dword ptr [esp], eax                             # 00476192
.L476195:
    mov word ptr [__1135C7C], 0xffff                     # 00476195
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047619E

    .global _sub_4761A5
_sub_4761A5:
    cmp byte ptr [ebp], 0xff                             # 004761A5
    je _sub_47656B                                       # 004761A9
    mov ax, word ptr [ebp + 1]                           # 004761AF
    mov cx, word ptr [ebp + 3]                           # 004761B3
    mov bl, byte ptr [ebp + 8]                           # 004761B7
    mov dl, byte ptr [ebp + 9]                           # 004761BA
    movzx edi, byte ptr [esp + 0x15]                     # 004761BD
    and dl, 0xf                                          # 004761C2
    jmp dword ptr [edi*4 + __4FE4F0]                     # 004761C5

    .global _sub_4761CC
_sub_4761CC:
    xchg ax, cx                                          # 004761CC
    neg cx                                               # 004761CE
    rol bl, 1                                            # 004761D1
    rol dl, 1                                            # 004761D3
    msvc_mov bh, bl                                      # 004761D5
    msvc_mov dh, dl                                      # 004761D7
    ror bh, 4                                            # 004761D9
    ror dh, 4                                            # 004761DC
    and bx, 0x11ee                                       # 004761DF
    and dx, 0x10e                                        # 004761E4
    msvc_or bl, bh                                       # 004761E9
    msvc_or dl, dh                                       # 004761EB
    jmp _sub_476238                                      # 004761ED

    .global _sub_4761EF
_sub_4761EF:
    neg ax                                               # 004761EF
    neg cx                                               # 004761F2
    rol bl, 2                                            # 004761F5
    rol dl, 2                                            # 004761F8
    msvc_mov bh, bl                                      # 004761FB
    msvc_mov dh, dl                                      # 004761FD
    ror bh, 4                                            # 004761FF
    ror dh, 4                                            # 00476202
    and bx, 0x33cc                                       # 00476205
    and dx, 0x30c                                        # 0047620A
    msvc_or bl, bh                                       # 0047620F
    msvc_or dl, dh                                       # 00476211
    jmp _sub_476238                                      # 00476213

    .global _sub_476215
_sub_476215:
    xchg ax, cx                                          # 00476215
    neg ax                                               # 00476217
    rol bl, 3                                            # 0047621A
    rol dl, 3                                            # 0047621D
    msvc_mov bh, bl                                      # 00476220
    msvc_mov dh, dl                                      # 00476222
    ror bh, 4                                            # 00476224
    ror dh, 4                                            # 00476227
    and bx, 0x7788                                       # 0047622A
    and dx, 0x708                                        # 0047622F
    msvc_or bl, bh                                       # 00476234
    msvc_or dl, dh                                       # 00476236

    .global _sub_476238
_sub_476238:
    add ax, word ptr [esp + 0x18]                        # 00476238
    add cx, word ptr [esp + 0x10]                        # 0047623D
    msvc_mov bh, dl                                      # 00476242
    mov dx, word ptr [ebp + 5]                           # 00476244
    add dx, word ptr [esp + 8]                           # 00476248
    cmp dx, 0x10                                         # 0047624D
    jl _sub_476CF3                                       # 00476251
    shr dx, 2                                            # 00476257
    mov dh, byte ptr [ebp + 7]                           # 0047625B
    shr dh, 2                                            # 0047625E
    msvc_add dh, dl                                      # 00476261
    add dh, 8                                            # 00476263
    and byte ptr [__1136073], 0xfd                       # 00476266
    cmp ax, 0x3000                                       # 0047626D
    jae .L47632B                                         # 00476271
    cmp cx, 0x3000                                       # 00476277
    jae .L47632B                                         # 0047627C
    msvc_mov si, cx                                      # 00476282
    movzx esi, si                                        # 00476285
    shl esi, 9                                           # 00476288
    msvc_or si, ax                                       # 0047628B
    shr esi, 3                                           # 0047628E
    mov esi, dword ptr [esi + __E40134]                  # 00476291
    test byte ptr [esi], 0x3c                            # 00476297
    je .L4762A4                                          # 0047629A
.L47629C:
    add esi, 8                                           # 0047629C
    test byte ptr [esi], 0x3c                            # 0047629F
    jne .L47629C                                         # 004762A2
.L4762A4:
    test byte ptr [esi + 5], 0x1f                        # 004762A4
    je .L4762B1                                          # 004762A8
    or byte ptr [__1136073], 0x80                        # 004762AA
.L4762B1:
    cmp dl, byte ptr [esi + 2]                           # 004762B1
    jb .L47632B                                          # 004762B4
    ja .L4762CD                                          # 004762B6
    test byte ptr [ebp + 9], 0x10                        # 004762B8
    jne .L4762CD                                         # 004762BC
    msvc_or bh, bh                                       # 004762BE
    je .L47632B                                          # 004762C0
    push eax                                             # 004762C2
    mov al, byte ptr [esi + 4]                           # 004762C3
    and al, 0xf                                          # 004762C6
    cmp al, bh                                           # 004762C8
    pop eax                                              # 004762CA
    je .L47632B                                          # 004762CB
.L4762CD:
    or byte ptr [__1136073], 3                           # 004762CD
    push edx                                             # 004762D4
    sub dl, byte ptr [esi + 2]                           # 004762D5
    shr dl, 2                                            # 004762D8
    movsx edi, byte ptr [esp + 0x13]                     # 004762DB
    cmp edi, -1                                          # 004762E0
    je _sub_476CC4                                       # 004762E3
    mov edi, dword ptr [edi*4 + _bridgeObjects]          # 004762E9
    cmp dl, byte ptr [edi + 0xc]                         # 004762F0
    ja _sub_476CDC                                       # 004762F3
    cmp dl, byte ptr [__1136074]                         # 004762F9
    jb .L476307                                          # 004762FF
    mov byte ptr [__1136074], dl                         # 00476301
.L476307:
    movzx edx, byte ptr [esp + 0x11]                     # 00476307
    mov dx, word ptr [edx*2 + __4F7284]                  # 0047630C
    test word ptr [edi + 0x14], dx                       # 00476314
    jne _sub_476CD0                                      # 00476318
    pop edx                                              # 0047631E
    push eax                                             # 0047631F
    mov ax, word ptr [edi + 4]                           # 00476320
    shr ax, 2                                            # 00476324
    msvc_add dh, al                                      # 00476328
    pop eax                                              # 0047632A
.L47632B:
    cmp dh, 0xec                                         # 0047632B
    ja _sub_476CFE                                       # 0047632E
    mov byte ptr [__112C2CC], dl                         # 00476334
    mov word ptr [__112C2A8], ax                         # 0047633A
    mov word ptr [__112C2AA], cx                         # 00476340
    mov dword ptr [__112C290], esp                       # 00476347
    mov dword ptr [__112C294], ebp                       # 0047634D
    push ebp                                             # 00476353
    msvc_xor ebp, ebp                                    # 00476354
.L476356:
    mov byte ptr [ebp + __112C2D1], 0                    # 00476356
    inc ebp                                              # 0047635D
    cmp ebp, 0x10                                        # 0047635E
    jb .L476356                                          # 00476361
    mov byte ptr [__112C2E2], 0                          # 00476363
    mov byte ptr [__112C2E3], 0xff                       # 0047636A
    mov byte ptr [__112C2EC], 0                          # 00476371
    movzx ebp, byte ptr [esp + 0x11]                     # 00476378
    movzx edi, byte ptr [esp + 0x19]                     # 0047637D
    bts word ptr [ebp + __112C2D1], di                   # 00476382
    mov_offset ebp, _sub_476D40                          # 0047638A
    call _sub_462917                                     # 0047638F
    pop ebp                                              # 00476394
    jb _sub_476D33                                       # 00476395
    cmp byte ptr [__112C2E3], 0xff                       # 0047639B
    jne .L4763B0                                         # 004763A2
    mov bh, byte ptr [_scenarioChunk3+428]               # 004763A4
    mov byte ptr [__112C2E3], bh                         # 004763AA
.L4763B0:
    test byte ptr [__112C2E2], 1                         # 004763B0
    je .L4763E2                                          # 004763B7
    push eax                                             # 004763B9
    push ecx                                             # 004763BA
    movzx edi, byte ptr [__112C2E3]                      # 004763BB
    mov edi, dword ptr [edi*4 + _levelCrossingObjects]   # 004763C2
    movsx eax, word ptr [edi + 2]                        # 004763C9
    movzx ecx, byte ptr [edi + 6]                        # 004763CD
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 004763D1
    sar eax, 0xa                                         # 004763D9
    add dword ptr [esp + 8], eax                         # 004763DC
    pop ecx                                              # 004763E0
    pop eax                                              # 004763E1
.L4763E2:
    push edx                                             # 004763E2
    msvc_xor dh, dh                                      # 004763E3
    shl dx, 2                                            # 004763E5
    test byte ptr [esp + 0x18], 1                        # 004763E9
    je .L4763FC                                          # 004763EE
    test byte ptr [esp + 0x18], 0x50                     # 004763F0
    jne .L4763FC                                         # 004763F5
    call _sub_4C4979                                     # 004763F7
.L4763FC:
    call _sub_431E98                                     # 004763FC
    pop edx                                              # 00476401
    jb _sub_476D33                                       # 00476402
    mov bh, byte ptr [__F00166]                          # 00476408
    and bh, 3                                            # 0047640E
    cmp byte ptr [__1136072], 0                          # 00476411
    je .L476426                                          # 00476418
    test byte ptr [__1136072], bh                        # 0047641A
    je _sub_476D2A                                       # 00476420
.L476426:
    mov byte ptr [__1136072], bh                         # 00476426
    test byte ptr [__F00166], 4                          # 0047642C
    jne _sub_476D14                                      # 00476433
    test byte ptr [__F00166], 8                          # 00476439
    jne _sub_476D1F                                      # 00476440
    test byte ptr [esp + 0x14], 1                        # 00476446
    je .L476563                                          # 0047644B
    mov bh, byte ptr [__112C2F6]                         # 00476451
    cmp bh, byte ptr [_scenarioChunk3+36]                # 00476457
    je .L476467                                          # 0047645D
    cmp bh, byte ptr [_scenarioChunk3+37]                # 0047645F
    jne .L476476                                         # 00476465
.L476467:
    push eax                                             # 00476467
    mov al, 3                                            # 00476468
    mov ah, byte ptr [__9C68EB]                          # 0047646A
    call _sub_437F29                                     # 00476470
    pop eax                                              # 00476475
.L476476:
    test byte ptr [esp + 0x14], 0x50                     # 00476476
    jne .L476491                                         # 0047647B
    push edx                                             # 0047647D
    movzx dx, dl                                         # 0047647E
    shl dx, 2                                            # 00476482
    call _sub_46908D                                     # 00476486
    call _sub_469174                                     # 0047648B
    pop edx                                              # 00476490
.L476491:
    msvc_mov bh, bl                                      # 00476491
    and bh, 0xf                                          # 00476493
    msvc_mov bl, dl                                      # 00476496
    push edx                                             # 00476498
    call _sub_46166C                                     # 00476499
    pop edx                                              # 0047649E
    mov byte ptr [esi + 3], dh                           # 0047649F
    mov bl, byte ptr [esp + 0x15]                        # 004764A2
    or bl, 0x1c                                          # 004764A6
    mov byte ptr [esi], bl                               # 004764A9
    mov bl, byte ptr [ebp]                               # 004764AB
    mov byte ptr [esi + 5], bl                           # 004764AE
    mov bl, byte ptr [esp + 0xc]                         # 004764B1
    shl bl, 4                                            # 004764B5
    or byte ptr [esi + 5], bl                            # 004764B8
    mov bl, byte ptr [esp + 0xd]                         # 004764BB
    mov byte ptr [esi + 4], bl                           # 004764BF
    mov bl, byte ptr [__112C2F6]                         # 004764C2
    mov byte ptr [esi + 7], bl                           # 004764C8
    mov bl, byte ptr [__1135F84]                         # 004764CB
    shl bl, 6                                            # 004764D1
    or byte ptr [esi + 7], bl                            # 004764D4
    movzx ebx, byte ptr [esp + 0xc]                      # 004764D7
    bt dword ptr [_scenarioChunk3+420], ebx              # 004764DC
    jae .L4764F2                                         # 004764E3
    cmp byte ptr [__112C2F6], 0xf                        # 004764E5
    je .L4764F2                                          # 004764EC
    or byte ptr [esi + 7], 0x40                          # 004764EE
.L4764F2:
    mov bl, byte ptr [esp + 0xf]                         # 004764F2
    shl bl, 5                                            # 004764F6
    mov byte ptr [esi + 6], bl                           # 004764F9
    test byte ptr [__1136073], 2                         # 004764FC
    je .L476509                                          # 00476503
    or byte ptr [esi + 4], 0x80                          # 00476505
.L476509:
    test byte ptr [__112C2E2], 1                         # 00476509
    je .L476529                                          # 00476510
    test byte ptr [esp + 0x14], 0x10                     # 00476512
    jne .L476529                                         # 00476517
    or byte ptr [esi + 7], 0x20                          # 00476519
    mov bl, byte ptr [__112C2E3]                         # 0047651D
    shl bl, 2                                            # 00476523
    or byte ptr [esi + 5], bl                            # 00476526
.L476529:
    test byte ptr [__112C2EC], 1                         # 00476529
    je .L476535                                          # 00476530
    or byte ptr [esi], 0x80                              # 00476532
.L476535:
    cmp byte ptr [ebp + 0xa], 0xff                       # 00476535
    jne .L47653F                                         # 00476539
    or byte ptr [esi + 1], 0x40                          # 0047653B
.L47653F:
    mov byte ptr [_scenarioChunk1+8], 1                  # 0047653F
    test byte ptr [esp + 0x14], 0x40                     # 00476546
    je .L476551                                          # 0047654B
    or byte ptr [esi + 1], 0x10                          # 0047654D
.L476551:
    test byte ptr [esp + 0x14], 0x10                     # 00476551
    je .L47655E                                          # 00476556
    or byte ptr [esi + 1], 0x20                          # 00476558
    jmp .L476563                                         # 0047655C
.L47655E:
    call _sub_4CBE5F                                     # 0047655E
.L476563:
    add ebp, 0xa                                         # 00476563
    msvc_jmp _sub_4761A5                                 # 00476566

    .global _sub_47656B
_sub_47656B:
    test byte ptr [esp + 0x14], 1                        # 0047656B
    je .L476B95                                          # 00476570
    test byte ptr [esp + 0x14], 0x50                     # 00476576
    jne .L476B95                                         # 0047657B
    bt word ptr [__112C2D1], 7                           # 00476581
    jae .L476B95                                         # 0047658A
    movzx ebp, byte ptr [esp + 0xc]                      # 00476590
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 00476595
    test word ptr [ebp + 0x12], 4                        # 0047659C
    je .L476B95                                          # 004765A2
    msvc_xor ebp, ebp                                    # 004765A8
.L4765AA:
    bt word ptr [__112C2D1], bp                          # 004765AA
    jae .L4765FE                                         # 004765B2
    lea ebx, [ebp + 3]                                   # 004765B4
    and ebx, 3                                           # 004765B7
    bt word ptr [__112C2D1], bx                          # 004765BA
    jb .L4766CC                                          # 004765C2
    lea ebx, [ebp + 1]                                   # 004765C8
    and ebx, 3                                           # 004765CB
    bt word ptr [__112C2D1], bx                          # 004765CE
    jb .L4766CC                                          # 004765D6
    bt word ptr [__112C2D2], bx                          # 004765DC
    jb .L4766CC                                          # 004765E4
    lea ebx, [ebp + 2]                                   # 004765EA
    and ebx, 3                                           # 004765ED
    bt word ptr [__112C2D3], bx                          # 004765F0
    jb .L4766CC                                          # 004765F8
.L4765FE:
    lea ebx, [ebp + 2]                                   # 004765FE
    and ebx, 3                                           # 00476601
    bt word ptr [__112C2D1], bx                          # 00476604
    jae .L476622                                         # 0047660C
    lea ebx, [ebp + 3]                                   # 0047660E
    and ebx, 3                                           # 00476611
    bt word ptr [__112C2D1], bx                          # 00476614
    jb .L4766CC                                          # 0047661C
.L476622:
    lea ebx, [ebp + 3]                                   # 00476622
    and ebx, 3                                           # 00476625
    bt word ptr [__112C2D1], bx                          # 00476628
    jae .L476650                                         # 00476630
    bt word ptr [__112C2D3], bp                          # 00476632
    jb .L4766CC                                          # 0047663A
    lea ebx, [ebp + 3]                                   # 00476640
    and ebx, 3                                           # 00476643
    bt word ptr [__112C2D2], bx                          # 00476646
    jb .L4766CC                                          # 0047664E
.L476650:
    bt word ptr [__112C2D3], bp                          # 00476650
    jae .L47667A                                         # 00476658
    lea ebx, [ebp + 1]                                   # 0047665A
    and ebx, 3                                           # 0047665D
    bt word ptr [__112C2D2], bx                          # 00476660
    jb .L4766CC                                          # 00476668
    lea ebx, [ebp + 2]                                   # 0047666A
    and ebx, 3                                           # 0047666D
    bt word ptr [__112C2D3], bx                          # 00476670
    jb .L4766CC                                          # 00476678
.L47667A:
    lea ebx, [ebp + 3]                                   # 0047667A
    and ebx, 3                                           # 0047667D
    bt word ptr [__112C2D2], bx                          # 00476680
    jae .L4766AA                                         # 00476688
    lea ebx, [ebp + 1]                                   # 0047668A
    and ebx, 3                                           # 0047668D
    bt word ptr [__112C2D2], bx                          # 00476690
    jb .L4766CC                                          # 00476698
    lea ebx, [ebp + 2]                                   # 0047669A
    and ebx, 3                                           # 0047669D
    bt word ptr [__112C2D3], bx                          # 004766A0
    jb .L4766CC                                          # 004766A8
.L4766AA:
    lea ebx, [ebp + 1]                                   # 004766AA
    and ebx, 3                                           # 004766AD
    bt word ptr [__112C2D1], bx                          # 004766B0
    jae .L47677A                                         # 004766B8
    bt word ptr [__112C2D3], bp                          # 004766BE
    jae .L47677A                                         # 004766C6
.L4766CC:
    lea ebx, [ebp + 1]                                   # 004766CC
    and ebx, 3                                           # 004766CF
    bt word ptr [__112C2D3], bx                          # 004766D2
    jb .L47677A                                          # 004766DA
    bts word ptr [__112C2D2], bp                         # 004766E0
    jb .L47677A                                          # 004766E8
    mov ax, word ptr [esp + 0x18]                        # 004766EE
    mov cx, word ptr [esp + 0x10]                        # 004766F3
    push edx                                             # 004766F8
    mov dx, word ptr [esp + 0xc]                         # 004766F9
    call _sub_46908D                                     # 004766FE
    call _sub_469174                                     # 00476703
    pop edx                                              # 00476708
    mov bx, word ptr [esp + 8]                           # 00476709
    shr bx, 2                                            # 0047670E
    mov bh, 0xf                                          # 00476712
    call _sub_4616D6                                     # 00476714
    add bl, 8                                            # 00476719
    mov byte ptr [esi + 3], bl                           # 0047671C
    msvc_mov ebx, ebp                                    # 0047671F
    or bl, 0x1c                                          # 00476721
    mov byte ptr [esi], bl                               # 00476724
    mov bl, byte ptr [esp + 0xc]                         # 00476726
    shl bl, 4                                            # 0047672A
    or byte ptr [esi + 5], bl                            # 0047672D
    mov byte ptr [esi + 4], 1                            # 00476730
    mov bl, byte ptr [__112C2F6]                         # 00476734
    mov byte ptr [esi + 7], bl                           # 0047673A
    mov bl, byte ptr [__1135F84]                         # 0047673D
    shl bl, 6                                            # 00476743
    or byte ptr [esi + 7], bl                            # 00476746
    mov bl, byte ptr [esp + 0xf]                         # 00476749
    shl bl, 5                                            # 0047674D
    mov byte ptr [esi + 6], bl                           # 00476750
    test byte ptr [__1136073], 2                         # 00476753
    je .L476760                                          # 0047675A
    or byte ptr [esi + 4], 0x80                          # 0047675C
.L476760:
    test byte ptr [esp + 0x14], 0x40                     # 00476760
    je .L47676B                                          # 00476765
    or byte ptr [esi + 1], 0x10                          # 00476767
.L47676B:
    test byte ptr [esp + 0x14], 0x10                     # 0047676B
    je .L476776                                          # 00476770
    or byte ptr [esi + 1], 0x20                          # 00476772
.L476776:
    or byte ptr [esi + 1], 0x40                          # 00476776
.L47677A:
    lea ebx, [ebp + 2]                                   # 0047677A
    and ebx, 3                                           # 0047677D
    bt word ptr [__112C2D1], bx                          # 00476780
    jae .L4767AC                                         # 00476788
    bt word ptr [__112C2D3], bx                          # 0047678A
    jb .L47683E                                          # 00476792
    lea ebx, [ebp + 1]                                   # 00476798
    and ebx, 3                                           # 0047679B
    bt word ptr [__112C2D2], bx                          # 0047679E
    jb .L47683E                                          # 004767A6
.L4767AC:
    bt word ptr [__112C2D2], bp                          # 004767AC
    jae .L4767D6                                         # 004767B4
    lea ebx, [ebp + 2]                                   # 004767B6
    and ebx, 3                                           # 004767B9
    bt word ptr [__112C2D2], bx                          # 004767BC
    jb .L47683E                                          # 004767C4
    lea ebx, [ebp + 3]                                   # 004767C6
    and ebx, 3                                           # 004767C9
    bt word ptr [__112C2D3], bx                          # 004767CC
    jb .L47683E                                          # 004767D4
.L4767D6:
    lea ebx, [ebp + 1]                                   # 004767D6
    and ebx, 3                                           # 004767D9
    bt word ptr [__112C2D3], bx                          # 004767DC
    jae .L476806                                         # 004767E4
    lea ebx, [ebp + 2]                                   # 004767E6
    and ebx, 3                                           # 004767E9
    bt word ptr [__112C2D2], bx                          # 004767EC
    jb .L47683E                                          # 004767F4
    lea ebx, [ebp + 3]                                   # 004767F6
    and ebx, 3                                           # 004767F9
    bt word ptr [__112C2D3], bx                          # 004767FC
    jb .L47683E                                          # 00476804
.L476806:
    lea ebx, [ebp + 1]                                   # 00476806
    and ebx, 3                                           # 00476809
    bt word ptr [__112C2D1], bx                          # 0047680C
    jae .L4768F0                                         # 00476814
    lea ebx, [ebp + 2]                                   # 0047681A
    and ebx, 3                                           # 0047681D
    bt word ptr [__112C2D1], bx                          # 00476820
    jb .L47683E                                          # 00476828
    lea ebx, [ebp + 3]                                   # 0047682A
    and ebx, 3                                           # 0047682D
    bt word ptr [__112C2D2], bx                          # 00476830
    jae .L4768F0                                         # 00476838
.L47683E:
    bt word ptr [__112C2D2], bp                          # 0047683E
    jb .L4768F0                                          # 00476846
    lea ebx, [ebp + 1]                                   # 0047684C
    and ebx, 3                                           # 0047684F
    bts word ptr [__112C2D3], bx                         # 00476852
    jb .L4768F0                                          # 0047685A
    mov ax, word ptr [esp + 0x18]                        # 00476860
    mov cx, word ptr [esp + 0x10]                        # 00476865
    push edx                                             # 0047686A
    mov dx, word ptr [esp + 0xc]                         # 0047686B
    call _sub_46908D                                     # 00476870
    call _sub_469174                                     # 00476875
    pop edx                                              # 0047687A
    mov bx, word ptr [esp + 8]                           # 0047687B
    shr bx, 2                                            # 00476880
    mov bh, 0xf                                          # 00476884
    call _sub_4616D6                                     # 00476886
    add bl, 8                                            # 0047688B
    mov byte ptr [esi + 3], bl                           # 0047688E
    lea ebx, [ebp + 1]                                   # 00476891
    and ebx, 3                                           # 00476894
    or bl, 0x1c                                          # 00476897
    mov byte ptr [esi], bl                               # 0047689A
    mov bl, byte ptr [esp + 0xc]                         # 0047689C
    shl bl, 4                                            # 004768A0
    or byte ptr [esi + 5], bl                            # 004768A3
    mov byte ptr [esi + 4], 2                            # 004768A6
    mov bl, byte ptr [__112C2F6]                         # 004768AA
    mov byte ptr [esi + 7], bl                           # 004768B0
    mov bl, byte ptr [__1135F84]                         # 004768B3
    shl bl, 6                                            # 004768B9
    or byte ptr [esi + 7], bl                            # 004768BC
    mov bl, byte ptr [esp + 0xf]                         # 004768BF
    shl bl, 5                                            # 004768C3
    mov byte ptr [esi + 6], bl                           # 004768C6
    test byte ptr [__1136073], 2                         # 004768C9
    je .L4768D6                                          # 004768D0
    or byte ptr [esi + 4], 0x80                          # 004768D2
.L4768D6:
    test byte ptr [esp + 0x14], 0x40                     # 004768D6
    je .L4768E1                                          # 004768DB
    or byte ptr [esi + 1], 0x10                          # 004768DD
.L4768E1:
    test byte ptr [esp + 0x14], 0x10                     # 004768E1
    je .L4768EC                                          # 004768E6
    or byte ptr [esi + 1], 0x20                          # 004768E8
.L4768EC:
    or byte ptr [esi + 1], 0x40                          # 004768EC
.L4768F0:
    bt word ptr [__112C2D2], bp                          # 004768F0
    jae .L476922                                         # 004768F8
    lea ebx, [ebp + 1]                                   # 004768FA
    and ebx, 3                                           # 004768FD
    bt word ptr [__112C2D2], bx                          # 00476900
    jb .L476A04                                          # 00476908
    lea ebx, [ebp + 2]                                   # 0047690E
    and ebx, 3                                           # 00476911
    bt word ptr [__112C2D3], bx                          # 00476914
    jb .L476A04                                          # 0047691C
.L476922:
    bt word ptr [__112C2D3], bp                          # 00476922
    jae .L476954                                         # 0047692A
    lea ebx, [ebp + 1]                                   # 0047692C
    and ebx, 3                                           # 0047692F
    bt word ptr [__112C2D2], bx                          # 00476932
    jb .L476A04                                          # 0047693A
    lea ebx, [ebp + 2]                                   # 00476940
    and ebx, 3                                           # 00476943
    bt word ptr [__112C2D3], bx                          # 00476946
    jb .L476A04                                          # 0047694E
.L476954:
    lea ebx, [ebp + 3]                                   # 00476954
    and ebx, 3                                           # 00476957
    bt word ptr [__112C2D2], bx                          # 0047695A
    jae .L476988                                         # 00476962
    lea ebx, [ebp + 1]                                   # 00476964
    and ebx, 3                                           # 00476967
    bt word ptr [__112C2D2], bx                          # 0047696A
    jb .L476A04                                          # 00476972
    lea ebx, [ebp + 2]                                   # 00476978
    and ebx, 3                                           # 0047697B
    bt word ptr [__112C2D3], bx                          # 0047697E
    jb .L476A04                                          # 00476986
.L476988:
    bt word ptr [__112C2D2], bp                          # 00476988
    jae .L4769B2                                         # 00476990
    lea ebx, [ebp + 2]                                   # 00476992
    and ebx, 3                                           # 00476995
    bt word ptr [__112C2D2], bx                          # 00476998
    jb .L476A04                                          # 004769A0
    lea ebx, [ebp + 3]                                   # 004769A2
    and ebx, 3                                           # 004769A5
    bt word ptr [__112C2D3], bx                          # 004769A8
    jb .L476A04                                          # 004769B0
.L4769B2:
    lea ebx, [ebp + 1]                                   # 004769B2
    and ebx, 3                                           # 004769B5
    bt word ptr [__112C2D3], bx                          # 004769B8
    jae .L4769E2                                         # 004769C0
    lea ebx, [ebp + 2]                                   # 004769C2
    and ebx, 3                                           # 004769C5
    bt word ptr [__112C2D2], bx                          # 004769C8
    jb .L476A04                                          # 004769D0
    lea ebx, [ebp + 3]                                   # 004769D2
    and ebx, 3                                           # 004769D5
    bt word ptr [__112C2D3], bx                          # 004769D8
    jb .L476A04                                          # 004769E0
.L4769E2:
    lea ebx, [ebp + 1]                                   # 004769E2
    and ebx, 3                                           # 004769E5
    bt word ptr [__112C2D3], bx                          # 004769E8
    jae .L476AB2                                         # 004769F0
    bt word ptr [__112C2D2], bx                          # 004769F6
    jae .L476AB2                                         # 004769FE
.L476A04:
    lea ebx, [ebp + 2]                                   # 00476A04
    and ebx, 3                                           # 00476A07
    bt word ptr [__112C2D1], bx                          # 00476A0A
    jb .L476AB2                                          # 00476A12
    bts word ptr [__112C2D1], bp                         # 00476A18
    jb .L476AB2                                          # 00476A20
    mov ax, word ptr [esp + 0x18]                        # 00476A26
    mov cx, word ptr [esp + 0x10]                        # 00476A2B
    push edx                                             # 00476A30
    mov dx, word ptr [esp + 0xc]                         # 00476A31
    call _sub_46908D                                     # 00476A36
    call _sub_469174                                     # 00476A3B
    pop edx                                              # 00476A40
    mov bx, word ptr [esp + 8]                           # 00476A41
    shr bx, 2                                            # 00476A46
    mov bh, 0xf                                          # 00476A4A
    call _sub_4616D6                                     # 00476A4C
    add bl, 8                                            # 00476A51
    mov byte ptr [esi + 3], bl                           # 00476A54
    msvc_mov ebx, ebp                                    # 00476A57
    or bl, 0x1c                                          # 00476A59
    mov byte ptr [esi], bl                               # 00476A5C
    mov bl, byte ptr [esp + 0xc]                         # 00476A5E
    shl bl, 4                                            # 00476A62
    or byte ptr [esi + 5], bl                            # 00476A65
    mov byte ptr [esi + 4], 0                            # 00476A68
    mov bl, byte ptr [__112C2F6]                         # 00476A6C
    mov byte ptr [esi + 7], bl                           # 00476A72
    mov bl, byte ptr [__1135F84]                         # 00476A75
    shl bl, 6                                            # 00476A7B
    or byte ptr [esi + 7], bl                            # 00476A7E
    mov bl, byte ptr [esp + 0xf]                         # 00476A81
    shl bl, 5                                            # 00476A85
    mov byte ptr [esi + 6], bl                           # 00476A88
    test byte ptr [__1136073], 2                         # 00476A8B
    je .L476A98                                          # 00476A92
    or byte ptr [esi + 4], 0x80                          # 00476A94
.L476A98:
    test byte ptr [esp + 0x14], 0x40                     # 00476A98
    je .L476AA3                                          # 00476A9D
    or byte ptr [esi + 1], 0x10                          # 00476A9F
.L476AA3:
    test byte ptr [esp + 0x14], 0x10                     # 00476AA3
    je .L476AAE                                          # 00476AA8
    or byte ptr [esi + 1], 0x20                          # 00476AAA
.L476AAE:
    or byte ptr [esi + 1], 0x40                          # 00476AAE
.L476AB2:
    lea ebx, [ebp + 1]                                   # 00476AB2
    and ebx, 3                                           # 00476AB5
    bt word ptr [__112C2D3], bx                          # 00476AB8
    jae .L476B8B                                         # 00476AC0
    lea ebx, [ebp + 2]                                   # 00476AC6
    and ebx, 3                                           # 00476AC9
    bt word ptr [__112C2D3], bx                          # 00476ACC
    jae .L476B8B                                         # 00476AD4
    lea ebx, [ebp + 2]                                   # 00476ADA
    and ebx, 3                                           # 00476ADD
    bt word ptr [__112C2D1], bx                          # 00476AE0
    jb .L476B8B                                          # 00476AE8
    bts word ptr [__112C2D1], bp                         # 00476AEE
    jb .L476B8B                                          # 00476AF6
    mov ax, word ptr [esp + 0x18]                        # 00476AFC
    mov cx, word ptr [esp + 0x10]                        # 00476B01
    push edx                                             # 00476B06
    mov dx, word ptr [esp + 0xc]                         # 00476B07
    call _sub_46908D                                     # 00476B0C
    call _sub_469174                                     # 00476B11
    pop edx                                              # 00476B16
    mov bx, word ptr [esp + 8]                           # 00476B17
    shr bx, 2                                            # 00476B1C
    mov bh, 0xf                                          # 00476B20
    call _sub_4616D6                                     # 00476B22
    add bl, 8                                            # 00476B27
    mov byte ptr [esi + 3], bl                           # 00476B2A
    msvc_mov ebx, ebp                                    # 00476B2D
    xor ebx, 2                                           # 00476B2F
    or bl, 0x1c                                          # 00476B32
    mov byte ptr [esi], bl                               # 00476B35
    mov bl, byte ptr [esp + 0xc]                         # 00476B37
    shl bl, 4                                            # 00476B3B
    or byte ptr [esi + 5], bl                            # 00476B3E
    mov byte ptr [esi + 4], 0                            # 00476B41
    mov bl, byte ptr [__112C2F6]                         # 00476B45
    mov byte ptr [esi + 7], bl                           # 00476B4B
    mov bl, byte ptr [__1135F84]                         # 00476B4E
    shl bl, 6                                            # 00476B54
    or byte ptr [esi + 7], bl                            # 00476B57
    mov bl, byte ptr [esp + 0xf]                         # 00476B5A
    shl bl, 5                                            # 00476B5E
    mov byte ptr [esi + 6], bl                           # 00476B61
    test byte ptr [__1136073], 2                         # 00476B64
    je .L476B71                                          # 00476B6B
    or byte ptr [esi + 4], 0x80                          # 00476B6D
.L476B71:
    test byte ptr [esp + 0x14], 0x40                     # 00476B71
    je .L476B7C                                          # 00476B76
    or byte ptr [esi + 1], 0x10                          # 00476B78
.L476B7C:
    test byte ptr [esp + 0x14], 0x10                     # 00476B7C
    je .L476B87                                          # 00476B81
    or byte ptr [esi + 1], 0x20                          # 00476B83
.L476B87:
    or byte ptr [esi + 1], 0x40                          # 00476B87
.L476B8B:
    inc ebp                                              # 00476B8B
    cmp ebp, 4                                           # 00476B8C
    jb .L4765AA                                          # 00476B8F
.L476B95:
    pop ebx                                              # 00476B95
    test byte ptr [__1136073], 1                         # 00476B96
    je .L476BF7                                          # 00476B9D
    test byte ptr [__1136073], 0x40                      # 00476B9F
    jne .L476BF7                                         # 00476BA6
    movzx edi, byte ptr [esp + 0xb]                      # 00476BA8
    mov edi, dword ptr [edi*4 + _bridgeObjects]          # 00476BAD
    movzx ecx, byte ptr [__1136074]                      # 00476BB4
    movsx eax, word ptr [edi + 0x10]                     # 00476BBB
    imul ecx, eax                                        # 00476BBF
    movsx eax, word ptr [edi + 0xe]                      # 00476BC2
    msvc_add eax, ecx                                    # 00476BC6
    movzx ecx, byte ptr [edi + 0xd]                      # 00476BC8
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00476BCC
    sar eax, 0xa                                         # 00476BD4
    movzx ecx, byte ptr [esp + 9]                        # 00476BD7
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00476BDC
    imul eax, ecx                                        # 00476BE4
    sar eax, 8                                           # 00476BE7
    test byte ptr [__1136073], 0x80                      # 00476BEA
    je .L476BF5                                          # 00476BF1
    shl eax, 1                                           # 00476BF3
.L476BF5:
    msvc_add ebx, eax                                    # 00476BF5
.L476BF7:
    test byte ptr [__1136072], 2                         # 00476BF7
    je .L476C38                                          # 00476BFE
    test byte ptr [__1136073], 0x40                      # 00476C00
    jne .L476C38                                         # 00476C07
    movzx edi, byte ptr [esp + 8]                        # 00476C09
    mov edi, dword ptr [edi*4 + _roadObjects]            # 00476C0E
    movsx eax, word ptr [edi + 8]                        # 00476C15
    imul eax, dword ptr [_scenarioChunk3+78]             # 00476C19
    sar eax, 8                                           # 00476C20
    movzx ecx, byte ptr [esp + 9]                        # 00476C23
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00476C28
    imul eax, ecx                                        # 00476C30
    sar eax, 8                                           # 00476C33
    msvc_add ebx, eax                                    # 00476C36
.L476C38:
    test byte ptr [__112C2EC], 1                         # 00476C38
    je .L476C86                                          # 00476C3F
    test byte ptr [esp + 0x10], 1                        # 00476C41
    je .L476C86                                          # 00476C46
    push ebx                                             # 00476C48
    movzx ebx, word ptr [__112C2EA]                      # 00476C49
    msvc_mov esi, ebx                                    # 00476C50
    imul esi, esi, 0x3d2                                 # 00476C52
    add_offset esi, _stations                            # 00476C58
    call _sub_4CBA2D                                     # 00476C5E
    call _sub_48F529                                     # 00476C63
    call _sub_48F716                                     # 00476C68
    msvc_mov esi, ebx                                    # 00476C6D
    imul esi, esi, 0x3d2                                 # 00476C6F
    add_offset esi, _stations                            # 00476C75
    call _sub_48DCA5                                     # 00476C7B
    call _sub_4CBA2D                                     # 00476C80
    pop ebx                                              # 00476C85
.L476C86:
    test byte ptr [esp + 0x10], 1                        # 00476C86
    je .L476CBD                                          # 00476C8B
    test byte ptr [esp + 0x10], 0x50                     # 00476C8D
    jne .L476CBD                                         # 00476C92
    cmp byte ptr [__9C68EB], 0xf                         # 00476C94
    je .L476CBD                                          # 00476C9B
    msvc_or ebx, ebx                                     # 00476C9D
    je .L476CBD                                          # 00476C9F
    pushal                                               # 00476CA1
    mov cx, word ptr [__9C68E0]                          # 00476CA2
    mov dx, word ptr [__9C68E2]                          # 00476CA9
    mov bp, word ptr [__9C68E4]                          # 00476CB0
    call _sub_48B013                                     # 00476CB7
    popal                                                # 00476CBC
.L476CBD:
    pop esi                                              # 00476CBD
    pop edi                                              # 00476CBE
    pop edx                                              # 00476CBF
    pop ecx                                              # 00476CC0
    pop eax                                              # 00476CC1
    pop eax                                              # 00476CC2
    ret                                                  # 00476CC3

    .global _sub_476CC4
_sub_476CC4:
    pop edx                                              # 00476CC4
    mov word ptr [__9C68E6], 0x17a                       # 00476CC5
    jmp _sub_476D33                                      # 00476CCE

    .global _sub_476CD0
_sub_476CD0:
    pop edx                                              # 00476CD0
    mov word ptr [__9C68E6], 0x17e                       # 00476CD1
    jmp _sub_476D33                                      # 00476CDA

    .global _sub_476CDC
_sub_476CDC:
    pop edx                                              # 00476CDC
    mov word ptr [__9C68E6], 0x17b                       # 00476CDD
    jmp _sub_476D33                                      # 00476CE6
.L476CE8:
    mov word ptr [__9C68E6], 0x164                       # 00476CE8
    jmp _sub_476D33                                      # 00476CF1

    .global _sub_476CF3
_sub_476CF3:
    mov word ptr [__9C68E6], 0x62                        # 00476CF3
    jmp _sub_476D33                                      # 00476CFC

    .global _sub_476CFE
_sub_476CFE:
    mov word ptr [__9C68E6], 0x63                        # 00476CFE
    jmp _sub_476D33                                      # 00476D07
.L476D09:
    mov word ptr [__9C68E6], 0x168                       # 00476D09
    jmp _sub_476D33                                      # 00476D12

    .global _sub_476D14
_sub_476D14:
    mov word ptr [__9C68E6], 0x167                       # 00476D14
    jmp _sub_476D33                                      # 00476D1D

    .global _sub_476D1F
_sub_476D1F:
    mov word ptr [__9C68E6], 0x166                       # 00476D1F
    jmp _sub_476D33                                      # 00476D28

    .global _sub_476D2A
_sub_476D2A:
    mov word ptr [__9C68E6], 0x70                        # 00476D2A

    .global _sub_476D33
_sub_476D33:
    pop ebx                                              # 00476D33
    pop esi                                              # 00476D34
    pop edi                                              # 00476D35
    pop edx                                              # 00476D36
    pop ecx                                              # 00476D37
    pop ebx                                              # 00476D38
    pop eax                                              # 00476D39
    mov ebx, 0x80000000                                  # 00476D3A
    ret                                                  # 00476D3F

    .global _sub_476D40
_sub_476D40:
    pushal                                               # 00476D40
    mov al, byte ptr [esi]                               # 00476D41
    and al, 0x3c                                         # 00476D43
    cmp al, 0x1c                                         # 00476D45
    je .L476FAB                                          # 00476D47
    cmp al, 4                                            # 00476D4D
    je .L476EC4                                          # 00476D4F
    cmp al, 8                                            # 00476D55
    jne .L476D68                                         # 00476D57
    mov ah, byte ptr [esi + 5]                           # 00476D59
    shr ah, 5                                            # 00476D5C
    cmp ah, 1                                            # 00476D5F
    je .L477491                                          # 00476D62
.L476D68:
    cmp al, 0x14                                         # 00476D68
    je .L476E5F                                          # 00476D6A
    cmp al, 0x10                                         # 00476D70
    je .L476D77                                          # 00476D72
.L476D74:
    popal                                                # 00476D74
    stc                                                  # 00476D75
    ret                                                  # 00476D76
.L476D77:
    or byte ptr [__1136073], 0x10                        # 00476D77
    movzx ebx, byte ptr [esi + 4]                        # 00476D7E
    mov ebx, dword ptr [ebx*4 + _buildingObjects]        # 00476D82
    test byte ptr [ebx + 0x98], 8                        # 00476D89
    jne .L476D74                                         # 00476D90
    mov ax, word ptr [__112C2A8]                         # 00476D92
    mov cx, word ptr [__112C2AA]                         # 00476D98
    mov bl, byte ptr [esi + 5]                           # 00476D9F
    and ebx, 3                                           # 00476DA2
    sub ax, word ptr [ebx*4 + __4F9296]                  # 00476DA5
    sub cx, word ptr [ebx*4 + __4F9298]                  # 00476DAD
    mov dl, byte ptr [esi + 2]                           # 00476DB5
    mov_offset ebp, __1135C7C                            # 00476DB8
.L476DBD:
    cmp word ptr [ebp], -1                               # 00476DBD
    je .L476DDE                                          # 00476DC2
    cmp ax, word ptr [ebp]                               # 00476DC4
    jne .L476DD9                                         # 00476DC8
    cmp cx, word ptr [ebp + 2]                           # 00476DCA
    jne .L476DD9                                         # 00476DCE
    cmp dl, byte ptr [ebp + 4]                           # 00476DD0
    je .L477491                                          # 00476DD3
.L476DD9:
    add ebp, 6                                           # 00476DD9
    jmp .L476DBD                                         # 00476DDC
.L476DDE:
    mov word ptr [ebp], ax                               # 00476DDE
    mov word ptr [ebp + 2], cx                           # 00476DE2
    mov byte ptr [ebp + 4], dl                           # 00476DE6
    mov word ptr [ebp + 6], 0xffff                       # 00476DE9
    mov dword ptr [__F00158], esi                        # 00476DEF
    mov ebp, dword ptr [__112C290]                       # 00476DF5
    movzx di, byte ptr [esi + 2]                         # 00476DFB
    shl di, 2                                            # 00476E00
    mov bl, byte ptr [ebp + 0x14]                        # 00476E04
    test bl, 1                                           # 00476E07
    jne .L476E16                                         # 00476E0A
    cmp word ptr [__1135C82], -1                         # 00476E0C
    je .L476E19                                          # 00476E14
.L476E16:
    or bl, 0x80                                          # 00476E16
.L476E19:
    test bl, 0x50                                        # 00476E19
    je .L476E21                                          # 00476E1C
    and bl, 0xae                                         # 00476E1E
.L476E21:
    call _sub_42D74E                                     # 00476E21
    cmp ebx, 0x80000000                                  # 00476E26
    je .L476D74                                          # 00476E2C
    mov ebp, dword ptr [__112C290]                       # 00476E32
    add dword ptr [ebp], ebx                             # 00476E38
    test byte ptr [ebp + 0x14], 1                        # 00476E3B
    je .L477491                                          # 00476E3F
    test byte ptr [ebp + 0x14], 0x50                     # 00476E45
    jne .L477491                                         # 00476E49
    mov esi, dword ptr [__F00158]                        # 00476E4F
    mov dword ptr [__F0015C], esi                        # 00476E55
    popal                                                # 00476E5B
    msvc_and eax, eax                                    # 00476E5C
    ret                                                  # 00476E5E
.L476E5F:
    mov ebp, dword ptr [__112C290]                       # 00476E5F
    movzx ebx, byte ptr [esi + 4]                        # 00476E65
    mov ebx, dword ptr [ebx*4 + _treeObjects]            # 00476E69
    movsx ecx, word ptr [ebx + 0x42]                     # 00476E70
    movzx ebx, byte ptr [ebx + 0x3f]                     # 00476E74
    imul ecx, dword ptr [ebx*4 + _scenarioChunk3+70]     # 00476E78
    sar ecx, 0xc                                         # 00476E80
    add dword ptr [ebp], ecx                             # 00476E83
    test byte ptr [ebp + 0x14], 0x50                     # 00476E86
    jne .L477491                                         # 00476E8A
    test byte ptr [ebp + 0x14], 1                        # 00476E90
    je .L477491                                          # 00476E94
    mov dword ptr [__F00158], esi                        # 00476E9A
    mov ax, word ptr [__112C2A8]                         # 00476EA0
    mov cx, word ptr [__112C2AA]                         # 00476EA6
    mov bl, 1                                            # 00476EAD
    call _sub_4BB432                                     # 00476EAF
    mov esi, dword ptr [__F00158]                        # 00476EB4
    mov dword ptr [__F0015C], esi                        # 00476EBA
    popal                                                # 00476EC0
    msvc_and eax, eax                                    # 00476EC1
    ret                                                  # 00476EC3
.L476EC4:
    mov ebp, dword ptr [__112C290]                       # 00476EC4
    test byte ptr [esi + 4], 0x80                        # 00476ECA
    je .L476EEF                                          # 00476ECE
    movzx eax, byte ptr [esi + 6]                        # 00476ED0
    shr al, 5                                            # 00476ED4
    mov byte ptr [__1136075], al                         # 00476ED7
    mov eax, dword ptr [eax*4 + _bridgeObjects]          # 00476EDC
    test word ptr [eax + 0x14], 0x800                    # 00476EE3
    jne .L4774B6                                         # 00476EE9
.L476EEF:
    movzx eax, byte ptr [esi + 5]                        # 00476EEF
    shr al, 4                                            # 00476EF3
    mov ebx, dword ptr [eax*4 + _trackObjects]           # 00476EF6
    movzx eax, byte ptr [ebp + 0xc]                      # 00476EFD
    bt word ptr [ebx + 0x12], ax                         # 00476F01
    jb .L476F21                                          # 00476F06
    mov ebx, dword ptr [eax*4 + _roadObjects]            # 00476F08
    movzx eax, byte ptr [esi + 5]                        # 00476F0F
    shr al, 4                                            # 00476F13
    bt word ptr [ebx + 0x2c], ax                         # 00476F16
    jae .L47755B                                         # 00476F1B
.L476F21:
    test byte ptr [esi], 0x40                            # 00476F21
    jne .L4774D8                                         # 00476F24
    test byte ptr [esi], 0x80                            # 00476F2A
    jne .L4774C7                                         # 00476F2D
    test byte ptr [esi + 4], 0x80                        # 00476F33
    je .L476F48                                          # 00476F37
    mov al, byte ptr [esi + 6]                           # 00476F39
    shr al, 5                                            # 00476F3C
    cmp al, byte ptr [ebp + 0xf]                         # 00476F3F
    jne .L4774A5                                         # 00476F42
.L476F48:
    mov bl, byte ptr [esi + 4]                           # 00476F48
    and bl, 0x3f                                         # 00476F4B
    cmp bl, 0                                            # 00476F4E
    jne .L477494                                         # 00476F51
    mov bl, byte ptr [ebp + 0xd]                         # 00476F57
    cmp bl, 0                                            # 00476F5A
    jne .L477494                                         # 00476F5D
    mov dl, byte ptr [esi]                               # 00476F63
    sub dl, byte ptr [ebp + 0x15]                        # 00476F65
    test dl, 1                                           # 00476F68
    je .L477494                                          # 00476F6B
    mov al, byte ptr [esi + 2]                           # 00476F71
    cmp al, byte ptr [__112C2CC]                         # 00476F74
    jne .L477494                                         # 00476F7A
    or byte ptr [__112C2E2], 1                           # 00476F80
    or byte ptr [__1136073], 4                           # 00476F87
    test byte ptr [ebp + 0x14], 0x50                     # 00476F8E
    jne .L477491                                         # 00476F92
    test byte ptr [ebp + 0x14], 1                        # 00476F98
    je .L477491                                          # 00476F9C
    or byte ptr [esi + 6], 0x10                          # 00476FA2
    msvc_jmp .L477491                                    # 00476FA6
.L476FAB:
    mov ebp, dword ptr [__112C290]                       # 00476FAB
    test byte ptr [esi + 1], 0x30                        # 00476FB1
    jne .L476FBE                                         # 00476FB5
    or byte ptr [__1136073], 0x40                        # 00476FB7
.L476FBE:
    test byte ptr [esi + 4], 0x80                        # 00476FBE
    je .L476FCF                                          # 00476FC2
    mov al, byte ptr [esi + 6]                           # 00476FC4
    shr al, 5                                            # 00476FC7
    mov byte ptr [__1136075], al                         # 00476FCA
.L476FCF:
    mov bl, byte ptr [esi + 4]                           # 00476FCF
    and ebx, 0xf                                         # 00476FD2
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 00476FD5
    mov cl, byte ptr [esi + 5]                           # 00476FDC
    and ecx, 3                                           # 00476FDF
    shl ecx, 2                                           # 00476FE2
    mov dl, byte ptr [esi]                               # 00476FE5
    and dl, 3                                            # 00476FE7
    msvc_or cl, dl                                       # 00476FEA
    mov dh, byte ptr [ecx + ebx]                         # 00476FEC
    movzx ebx, byte ptr [ebp + 0xd]                      # 00476FEF
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 00476FF3
    mov ecx, dword ptr [__112C294]                       # 00476FFA
    movzx ecx, byte ptr [ecx]                            # 00477000
    shl ecx, 2                                           # 00477003
    mov dl, byte ptr [ebp + 0x15]                        # 00477006
    and dl, 3                                            # 00477009
    msvc_or cl, dl                                       # 0047700C
    test byte ptr [ecx + ebx], dh                        # 0047700E
    je .L477491                                          # 00477011
    test byte ptr [ebp + 0x14], 0x10                     # 00477017
    je .L477043                                          # 0047701B
    test dword ptr [__1135C68], 0x100000                 # 0047701D
    je .L477043                                          # 00477027
    movzx eax, byte ptr [esi + 5]                        # 00477029
    shr eax, 4                                           # 0047702D
    mov eax, dword ptr [eax*4 + _roadObjects]            # 00477030
    test word ptr [eax + 0x12], 1                        # 00477037
    jne .L477594                                         # 0047703D
.L477043:
    movzx eax, byte ptr [esi + 5]                        # 00477043
    shr eax, 4                                           # 00477047
    bt dword ptr [_scenarioChunk3+424], eax              # 0047704A
    jae .L477060                                         # 00477051
    movzx eax, byte ptr [ebp + 0xc]                      # 00477053
    bt dword ptr [_scenarioChunk3+424], eax              # 00477057
    jb .L477070                                          # 0047705E
.L477060:
    mov al, byte ptr [esi + 7]                           # 00477060
    and al, 0xf                                          # 00477063
    call _sub_431E6A                                     # 00477065
    jb .L47759D                                          # 0047706A
.L477070:
    mov al, byte ptr [esi + 2]                           # 00477070
    cmp al, byte ptr [__112C2CC]                         # 00477073
    jne .L477130                                         # 00477079
    mov cl, byte ptr [esi + 4]                           # 0047707F
    and ecx, 0xf                                         # 00477082
    test word ptr [ecx*2 + __4F7284], 3                  # 00477085
    je .L477130                                          # 0047708F
    cmp cl, byte ptr [ebp + 0xd]                         # 00477095
    jne .L4770B7                                         # 00477098
    mov al, byte ptr [esi]                               # 0047709A
    and al, 3                                            # 0047709C
    mov ah, byte ptr [ebp + 0x15]                        # 0047709E
    and ah, 3                                            # 004770A1
    cmp al, ah                                           # 004770A4
    jne .L4770B7                                         # 004770A6
    mov al, byte ptr [esi + 5]                           # 004770A8
    and al, 3                                            # 004770AB
    mov ebx, dword ptr [__112C294]                       # 004770AD
    cmp al, byte ptr [ebx]                               # 004770B3
    je .L4770ED                                          # 004770B5
.L4770B7:
    mov cl, byte ptr [ecx*8 + __4F7298]                  # 004770B7
    cmp cl, byte ptr [ebp + 0xd]                         # 004770BE
    jne .L477130                                         # 004770C1
    mov al, byte ptr [esi]                               # 004770C3
    and al, 3                                            # 004770C5
    xor al, 2                                            # 004770C7
    mov ah, byte ptr [ebp + 0x15]                        # 004770C9
    and ah, 3                                            # 004770CC
    cmp al, ah                                           # 004770CF
    jne .L477130                                         # 004770D1
    mov al, byte ptr [esi + 5]                           # 004770D3
    and al, 3                                            # 004770D6
    mov ah, byte ptr [ecx*8 + __4F729C]                  # 004770D8
    dec ah                                               # 004770DF
    msvc_sub ah, al                                      # 004770E1
    mov ebx, dword ptr [__112C294]                       # 004770E3
    cmp ah, byte ptr [ebx]                               # 004770E9
    jne .L477130                                         # 004770EB
.L4770ED:
    or byte ptr [__1136073], 0x20                        # 004770ED
    mov al, byte ptr [esi + 5]                           # 004770F4
    shr al, 4                                            # 004770F7
    cmp al, byte ptr [ebp + 0xc]                         # 004770FA
    jne .L477169                                         # 004770FD
    test dword ptr [__1135C68], 0x300000                 # 004770FF
    je .L477130                                          # 00477109
    test byte ptr [ebp + 0x14], 0x10                     # 0047710B
    je .L477130                                          # 0047710F
    test byte ptr [esi + 1], 0x20                        # 00477111
    jne .L477130                                         # 00477115
    test dword ptr [__1135C68], 0x100000                 # 00477117
    jne .L477169                                         # 00477121
    mov al, byte ptr [esi + 7]                           # 00477123
    and al, 0xf                                          # 00477126
    cmp al, byte ptr [__9C68EB]                          # 00477128
    je .L477169                                          # 0047712E
.L477130:
    mov al, byte ptr [esi + 4]                           # 00477130
    and eax, 0xf                                         # 00477133
    test word ptr [eax*2 + __4F7284], 3                  # 00477136
    jne .L477511                                         # 00477140
    movzx eax, byte ptr [ebp + 0xd]                      # 00477146
    test word ptr [eax*2 + __4F7284], 3                  # 0047714A
    jne .L477511                                         # 00477154
    mov al, byte ptr [esi + 2]                           # 0047715A
    cmp al, byte ptr [__112C2CC]                         # 0047715D
    jne .L4774E9                                         # 00477163
.L477169:
    test byte ptr [esi + 7], 0x20                        # 00477169
    je .L47717C                                          # 0047716D
    mov al, byte ptr [esi + 5]                           # 0047716F
    shr al, 2                                            # 00477172
    and al, 3                                            # 00477175
    mov byte ptr [__112C2E3], al                         # 00477177
.L47717C:
    mov al, byte ptr [esi + 5]                           # 0047717C
    shr al, 4                                            # 0047717F
    mov byte ptr [__112C2E9], al                         # 00477182
    test byte ptr [esi], 0x40                            # 00477187
    jne .L4774D8                                         # 0047718A
    test byte ptr [esi], 0x80                            # 00477190
    je .L47721A                                          # 00477193
    mov al, byte ptr [ebp + 0xd]                         # 00477199
    cmp al, 0                                            # 0047719C
    jne .L4774C7                                         # 0047719E
    mov al, byte ptr [esi]                               # 004771A4
    and al, 3                                            # 004771A6
    mov ah, byte ptr [ebp + 0x15]                        # 004771A8
    and ah, 3                                            # 004771AB
    cmp al, ah                                           # 004771AE
    je .L4771BC                                          # 004771B0
    xor al, 2                                            # 004771B2
    cmp al, ah                                           # 004771B4
    jne .L4774C7                                         # 004771B6
.L4771BC:
    msvc_mov ebx, esi                                    # 004771BC
.L4771BE:
    add ebx, 8                                           # 004771BE
    mov al, byte ptr [ebx]                               # 004771C1
    and al, 0x3c                                         # 004771C3
    cmp al, 8                                            # 004771C5
    jne .L4771BE                                         # 004771C7
    mov ax, word ptr [ebx + 6]                           # 004771C9
    and ax, 0x3ff                                        # 004771CD
    mov word ptr [__112C2EA], ax                         # 004771D1
    mov bl, byte ptr [ebx + 5]                           # 004771D7
    and ebx, 0x1f                                        # 004771DA
    movzx eax, byte ptr [ebp + 0xc]                      # 004771DD
    mov eax, dword ptr [eax*4 + _roadObjects]            # 004771E1
    msvc_xor ecx, ecx                                    # 004771E8
.L4771EA:
    cmp bl, byte ptr [ecx + eax + 0x1d]                  # 004771EA
    je .L477213                                          # 004771EE
    inc ecx                                              # 004771F0
    cmp ecx, 7                                           # 004771F1
    jb .L4771EA                                          # 004771F4
    mov ebx, dword ptr [ebx*4 + _roadStationObjects]     # 004771F6
    msvc_xor ecx, ecx                                    # 004771FD
    mov al, byte ptr [ebp + 0xc]                         # 004771FF
.L477202:
    cmp al, byte ptr [ecx + ebx + 0x21]                  # 00477202
    je .L477213                                          # 00477206
    inc ecx                                              # 00477208
    cmp ecx, 7                                           # 00477209
    jb .L477202                                          # 0047720C
    msvc_jmp .L4774C7                                    # 0047720E
.L477213:
    or byte ptr [__112C2EC], 1                           # 00477213
.L47721A:
    test byte ptr [esi + 4], 0x80                        # 0047721A
    je .L4772F4                                          # 0047721E
    movzx eax, byte ptr [esi + 6]                        # 00477224
    shr al, 5                                            # 00477228
    cmp al, byte ptr [ebp + 0xf]                         # 0047722B
    jne .L4774A5                                         # 0047722E
    mov eax, dword ptr [eax*4 + _bridgeObjects]          # 00477234
    test word ptr [eax + 0x14], 0x800                    # 0047723B
    je .L4772F4                                          # 00477241
    mov al, byte ptr [esi + 5]                           # 00477247
    shr al, 4                                            # 0047724A
    cmp al, byte ptr [ebp + 0xc]                         # 0047724D
    je .L4774B6                                          # 00477250
    mov al, byte ptr [esi + 4]                           # 00477256
    and al, 0xf                                          # 00477259
    cmp al, byte ptr [ebp + 0xd]                         # 0047725B
    jne .L47727D                                         # 0047725E
    mov al, byte ptr [esi]                               # 00477260
    and al, 3                                            # 00477262
    mov ah, byte ptr [ebp + 0x15]                        # 00477264
    and ah, 3                                            # 00477267
    cmp al, ah                                           # 0047726A
    jne .L47727D                                         # 0047726C
    mov al, byte ptr [esi + 5]                           # 0047726E
    and al, 3                                            # 00477271
    mov ebx, dword ptr [__112C294]                       # 00477273
    cmp al, byte ptr [ebx]                               # 00477279
    je .L4772F4                                          # 0047727B
.L47727D:
    mov cl, byte ptr [esi + 4]                           # 0047727D
    and ecx, 0xf                                         # 00477280
    mov al, byte ptr [ecx*8 + __4F7298]                  # 00477283
    cmp al, byte ptr [ebp + 0xd]                         # 0047728A
    jne .L4774B6                                         # 0047728D
    mov al, byte ptr [esi]                               # 00477293
    add al, byte ptr [ecx*8 + __4F7299]                  # 00477295
    and al, 3                                            # 0047729C
    mov ah, byte ptr [ebp + 0x15]                        # 0047729E
    and ah, 3                                            # 004772A1
    cmp al, ah                                           # 004772A4
    jne .L4774B6                                         # 004772A6
    mov al, byte ptr [ecx*8 + __4F729C]                  # 004772AC
    movzx ebx, byte ptr [ebp + 0xd]                      # 004772B3
    cmp al, byte ptr [ebx*8 + __4F729C]                  # 004772B7
    jne .L4774B6                                         # 004772BE
    mov ebx, dword ptr [__112C294]                       # 004772C4
    mov al, byte ptr [esi + 5]                           # 004772CA
    and al, 3                                            # 004772CD
    je .L4772E0                                          # 004772CF
    test byte ptr [esi + 1], 0x40                        # 004772D1
    jne .L4772EB                                         # 004772D5
    cmp al, byte ptr [ebx]                               # 004772D7
    je .L4772F4                                          # 004772D9
    msvc_jmp .L4774B6                                    # 004772DB
.L4772E0:
    cmp byte ptr [ebx + 0xa], 0xff                       # 004772E0
    je .L4772F4                                          # 004772E4
    msvc_jmp .L4774B6                                    # 004772E6
.L4772EB:
    cmp byte ptr [ebx], 0                                # 004772EB
    jne .L4774B6                                         # 004772EE
.L4772F4:
    mov al, byte ptr [esi + 4]                           # 004772F4
    and al, 0xf                                          # 004772F7
    cmp al, byte ptr [ebp + 0xd]                         # 004772F9
    jne .L477336                                         # 004772FC
    mov al, byte ptr [esi]                               # 004772FE
    and al, 3                                            # 00477300
    mov ah, byte ptr [ebp + 0x15]                        # 00477302
    and ah, 3                                            # 00477305
    cmp al, ah                                           # 00477308
    jne .L477336                                         # 0047730A
    mov al, byte ptr [esi + 5]                           # 0047730C
    and al, 3                                            # 0047730F
    mov ebx, dword ptr [__112C294]                       # 00477311
    cmp al, byte ptr [ebx]                               # 00477317
    jne .L477336                                         # 00477319
    or byte ptr [__1136073], 0x20                        # 0047731B
    mov al, byte ptr [esi + 5]                           # 00477322
    shr al, 4                                            # 00477325
    cmp al, byte ptr [ebp + 0xc]                         # 00477328
    je .L4773BC                                          # 0047732B
    msvc_jmp .L47744C                                    # 00477331
.L477336:
    mov cl, byte ptr [esi + 4]                           # 00477336
    and ecx, 0xf                                         # 00477339
    mov al, byte ptr [ecx*8 + __4F7298]                  # 0047733C
    cmp al, byte ptr [ebp + 0xd]                         # 00477343
    jne .L4773FE                                         # 00477346
    mov al, byte ptr [esi]                               # 0047734C
    add al, byte ptr [ecx*8 + __4F7299]                  # 0047734E
    and al, 3                                            # 00477355
    mov ah, byte ptr [ebp + 0x15]                        # 00477357
    and ah, 3                                            # 0047735A
    cmp al, ah                                           # 0047735D
    jne .L4773FE                                         # 0047735F
    mov al, byte ptr [ecx*8 + __4F729C]                  # 00477365
    movzx ebx, byte ptr [ebp + 0xd]                      # 0047736C
    cmp al, byte ptr [ebx*8 + __4F729C]                  # 00477370
    jne .L4773FE                                         # 00477377
    mov ebx, dword ptr [__112C294]                       # 0047737D
    mov al, byte ptr [esi + 5]                           # 00477383
    and al, 3                                            # 00477386
    je .L477396                                          # 00477388
    test byte ptr [esi + 1], 0x40                        # 0047738A
    jne .L47739E                                         # 0047738E
    cmp al, byte ptr [ebx]                               # 00477390
    je .L4773A5                                          # 00477392
    jmp .L4773FE                                         # 00477394
.L477396:
    cmp byte ptr [ebx + 0xa], 0xff                       # 00477396
    je .L4773A5                                          # 0047739A
    jmp .L4773FE                                         # 0047739C
.L47739E:
    cmp byte ptr [ebx], 0                                # 0047739E
    je .L4773A5                                          # 004773A1
    jmp .L4773FE                                         # 004773A3
.L4773A5:
    or byte ptr [__1136073], 0x20                        # 004773A5
    mov al, byte ptr [esi + 5]                           # 004773AC
    shr al, 4                                            # 004773AF
    cmp al, byte ptr [ebp + 0xc]                         # 004773B2
    je .L4773BC                                          # 004773B5
    msvc_jmp .L47744C                                    # 004773B7
.L4773BC:
    test dword ptr [__1135C68], 0x300000                 # 004773BC
    je .L477522                                          # 004773C6
    test byte ptr [ebp + 0x14], 0x10                     # 004773CC
    je .L477522                                          # 004773D0
    test byte ptr [esi + 1], 0x20                        # 004773D6
    jne .L477522                                         # 004773DA
    test dword ptr [__1135C68], 0x100000                 # 004773E0
    jne .L4773FE                                         # 004773EA
    mov al, byte ptr [esi + 7]                           # 004773EC
    and al, 0xf                                          # 004773EF
    cmp al, byte ptr [__9C68EB]                          # 004773F1
    je .L4773FE                                          # 004773F7
    msvc_jmp .L477522                                    # 004773F9
.L4773FE:
    movzx ecx, byte ptr [ebp + 0xd]                      # 004773FE
    mov eax, dword ptr [ecx*4 + __4F6D1C]                # 00477402
    cmp byte ptr [eax + 0xa], 0xff                       # 00477409
    jne .L477583                                         # 0047740D
    mov cl, byte ptr [esi + 4]                           # 00477413
    and ecx, 0xf                                         # 00477416
    mov eax, dword ptr [ecx*4 + __4F6D1C]                # 00477419
    cmp byte ptr [eax + 0xa], 0xff                       # 00477420
    jne .L477583                                         # 00477424
    mov al, byte ptr [esi + 5]                           # 0047742A
    shr al, 4                                            # 0047742D
    cmp al, byte ptr [ebp + 0xc]                         # 00477430
    jne .L47744C                                         # 00477433
    mov al, byte ptr [esi]                               # 00477435
    and ax, 3                                            # 00477437
    bts word ptr [ecx + __112C2D1], ax                   # 0047743B
    bts word ptr [__112C2D1], 7                          # 00477443
.L47744C:
    movzx eax, byte ptr [esi + 5]                        # 0047744C
    shr al, 4                                            # 00477450
    mov ebx, dword ptr [eax*4 + _roadObjects]            # 00477453
    cmp al, byte ptr [ebp + 0xc]                         # 0047745A
    je .L477485                                          # 0047745D
    movzx eax, byte ptr [ebp + 0xc]                      # 0047745F
    bt word ptr [ebx + 0x2a], ax                         # 00477463
    jb .L477491                                          # 00477468
    mov ebx, dword ptr [eax*4 + _roadObjects]            # 0047746A
    movzx eax, byte ptr [esi + 5]                        # 00477471
    shr al, 4                                            # 00477475
    bt word ptr [ebx + 0x2a], ax                         # 00477478
    jae .L477533                                         # 0047747D
    jmp .L477491                                         # 00477483
.L477485:
    test word ptr [ebx + 2], 0x40                        # 00477485
    je .L477594                                          # 0047748B
.L477491:
    popal                                                # 00477491
    clc                                                  # 00477492
    ret                                                  # 00477493
.L477494:
    mov word ptr [__9C68E6], 0x97                        # 00477494
    popal                                                # 0047749D
    mov esi, 0xffffffff                                  # 0047749E
    stc                                                  # 004774A3
    ret                                                  # 004774A4
.L4774A5:
    mov word ptr [__9C68E6], 0xa8                        # 004774A5
    popal                                                # 004774AE
    mov esi, 0xffffffff                                  # 004774AF
    stc                                                  # 004774B4
    ret                                                  # 004774B5
.L4774B6:
    mov word ptr [__9C68E6], 0xa9                        # 004774B6
    popal                                                # 004774BF
    mov esi, 0xffffffff                                  # 004774C0
    stc                                                  # 004774C5
    ret                                                  # 004774C6
.L4774C7:
    mov word ptr [__9C68E6], 0xa2                        # 004774C7
    popal                                                # 004774D0
    mov esi, 0xffffffff                                  # 004774D1
    stc                                                  # 004774D6
    ret                                                  # 004774D7
.L4774D8:
    mov word ptr [__9C68E6], 0xa3                        # 004774D8
    popal                                                # 004774E1
    mov esi, 0xffffffff                                  # 004774E2
    stc                                                  # 004774E7
    ret                                                  # 004774E8
.L4774E9:
    movzx eax, byte ptr [esi + 5]                        # 004774E9
    shr eax, 4                                           # 004774ED
    mov eax, dword ptr [eax*4 + _roadObjects]            # 004774F0
    mov ax, word ptr [eax]                               # 004774F7
    mov word ptr [__112C826], ax                         # 004774FA
    mov word ptr [__9C68E6], 0x9a                        # 00477500
    popal                                                # 00477509
    mov esi, 0xffffffff                                  # 0047750A
    stc                                                  # 0047750F
    ret                                                  # 00477510
.L477511:
    mov word ptr [__9C68E6], 0x99                        # 00477511
    popal                                                # 0047751A
    mov esi, 0xffffffff                                  # 0047751B
    stc                                                  # 00477520
    ret                                                  # 00477521
.L477522:
    mov word ptr [__9C68E6], 0x9b                        # 00477522
    popal                                                # 0047752B
    mov esi, 0xffffffff                                  # 0047752C
    stc                                                  # 00477531
    ret                                                  # 00477532
.L477533:
    movzx eax, byte ptr [esi + 5]                        # 00477533
    shr eax, 4                                           # 00477537
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047753A
    mov ax, word ptr [eax]                               # 00477541
    mov word ptr [__112C826], ax                         # 00477544
    mov word ptr [__9C68E6], 0x9c                        # 0047754A
    popal                                                # 00477553
    mov esi, 0xffffffff                                  # 00477554
    stc                                                  # 00477559
    ret                                                  # 0047755A
.L47755B:
    movzx eax, byte ptr [esi + 5]                        # 0047755B
    shr eax, 4                                           # 0047755F
    mov eax, dword ptr [eax*4 + _trackObjects]           # 00477562
    mov ax, word ptr [eax]                               # 00477569
    mov word ptr [__112C826], ax                         # 0047756C
    mov word ptr [__9C68E6], 0x9c                        # 00477572
    popal                                                # 0047757B
    mov esi, 0xffffffff                                  # 0047757C
    stc                                                  # 00477581
    ret                                                  # 00477582
.L477583:
    mov word ptr [__9C68E6], 0x98                        # 00477583
    popal                                                # 0047758C
    mov esi, 0xffffffff                                  # 0047758D
    stc                                                  # 00477592
    ret                                                  # 00477593
.L477594:
    mov word ptr [__9C68E6], 0x9d                        # 00477594
.L47759D:
    popal                                                # 0047759D
    mov esi, 0xffffffff                                  # 0047759E
    stc                                                  # 004775A3
    ret                                                  # 004775A4

    .global _sub_4775A5
_sub_4775A5:
    mov byte ptr [__9C68EA], 0x30                        # 004775A5
    mov word ptr [__9C68E0], ax                          # 004775AC
    mov word ptr [__9C68E2], cx                          # 004775B2
    add word ptr [__9C68E0], 0x10                        # 004775B9
    add word ptr [__9C68E2], 0x10                        # 004775C1
    mov word ptr [__9C68E4], di                          # 004775C9
    mov dword ptr [__112C298], 0                         # 004775D0
    mov byte ptr [__112C2CD], 0                          # 004775DA
    mov byte ptr [__112C2D0], 0xff                       # 004775E1
    mov byte ptr [__112C2CE], dh                         # 004775E8
    mov byte ptr [__112C2CF], dl                         # 004775EE
    mov word ptr [__112C2B0], bp                         # 004775F4
    mov byte ptr [__112C2F3], 0                          # 004775FB
    test bl, 0x40                                        # 00477602
    je .L47760E                                          # 00477605
    or byte ptr [__112C2F3], 0x10                        # 00477607
.L47760E:
    test bl, 0x10                                        # 0047760E
    je .L47761A                                          # 00477611
    or byte ptr [__112C2F3], 0x20                        # 00477613
.L47761A:
    push eax                                             # 0047761A
    mov al, byte ptr [__9C68EB]                          # 0047761B
    test word ptr [__508F14], 2                          # 00477620
    je .L47762D                                          # 00477629
    mov al, 0xf                                          # 0047762B
.L47762D:
    mov byte ptr [__112C2F7], al                         # 0047762D
    pop eax                                              # 00477632
    push eax                                             # 00477633
    push ebx                                             # 00477634
    push ecx                                             # 00477635
    msvc_mov bp, cx                                      # 00477636
    movzx esi, bp                                        # 00477639
    shl esi, 9                                           # 0047763C
    msvc_or si, ax                                       # 0047763F
    shr esi, 3                                           # 00477642
    mov esi, dword ptr [esi + __E40134]                  # 00477645
.L47764B:
    movzx bp, byte ptr [esi + 2]                         # 0047764B
    shl bp, 2                                            # 00477650
    msvc_cmp di, bp                                      # 00477654
    jne .L477692                                         # 00477657
    mov dh, byte ptr [esi]                               # 00477659
    and dh, 0x3c                                         # 0047765B
    cmp dh, 0x1c                                         # 0047765E
    jne .L477692                                         # 00477661
    mov dh, byte ptr [esi]                               # 00477663
    and dh, 3                                            # 00477665
    cmp dh, bh                                           # 00477668
    jne .L477692                                         # 0047766A
    mov dh, byte ptr [esi + 5]                           # 0047766C
    and dh, 3                                            # 0047766F
    cmp dh, byte ptr [__112C2CE]                         # 00477672
    jne .L477692                                         # 00477678
    mov dh, byte ptr [esi + 5]                           # 0047767A
    shr dh, 4                                            # 0047767D
    cmp dh, byte ptr [__112C2B0]                         # 00477680
    jne .L477692                                         # 00477686
    mov dh, byte ptr [esi + 4]                           # 00477688
    and dh, 0xf                                          # 0047768B
    cmp dl, dh                                           # 0047768E
    je .L477697                                          # 00477690
.L477692:
    add esi, 8                                           # 00477692
    jmp .L47764B                                         # 00477695
.L477697:
    mov dh, byte ptr [esi + 1]                           # 00477697
    and dh, 0x30                                         # 0047769A
    cmp dh, byte ptr [__112C2F3]                         # 0047769D
    jne .L477692                                         # 004776A3
    test byte ptr [__112C2F3], 0x10                      # 004776A5
    je .L4776BC                                          # 004776AC
    mov dh, byte ptr [esi + 7]                           # 004776AE
    and dh, 0xf                                          # 004776B1
    cmp dh, byte ptr [__112C2F7]                         # 004776B4
    jne .L477692                                         # 004776BA
.L4776BC:
    test byte ptr [__112C2F3], 0x10                      # 004776BC
    jne .L4776E3                                         # 004776C3
    mov al, byte ptr [esi + 7]                           # 004776C5
    and al, 0xf                                          # 004776C8
    call _sub_431E6A                                     # 004776CA
    jb _sub_477BB0                                       # 004776CF
    cmp al, 0xf                                          # 004776D5
    jne .L4776E3                                         # 004776D7
    test byte ptr [esi + 7], 0xc0                        # 004776D9
    jne _sub_477B78                                      # 004776DD
.L4776E3:
    pop ecx                                              # 004776E3
    pop ebx                                              # 004776E4
    pop eax                                              # 004776E5
    push eax                                             # 004776E6
    push ebx                                             # 004776E7
    push ecx                                             # 004776E8
    msvc_mov bp, cx                                      # 004776E9
    movzx esi, bp                                        # 004776EC
    shl esi, 9                                           # 004776EF
    msvc_or si, ax                                       # 004776F2
    shr esi, 3                                           # 004776F5
    mov esi, dword ptr [esi + __E40134]                  # 004776F8
    mov dword ptr [__112C278], esi                       # 004776FE
.L477704:
    movzx bp, byte ptr [esi + 2]                         # 00477704
    shl bp, 2                                            # 00477709
    msvc_cmp di, bp                                      # 0047770D
    jne .L47774B                                         # 00477710
    mov dh, byte ptr [esi]                               # 00477712
    and dh, 0x3c                                         # 00477714
    cmp dh, 0x1c                                         # 00477717
    jne .L47774B                                         # 0047771A
    mov dh, byte ptr [esi]                               # 0047771C
    and dh, 3                                            # 0047771E
    cmp dh, bh                                           # 00477721
    jne .L47774B                                         # 00477723
    mov dh, byte ptr [esi + 5]                           # 00477725
    and dh, 3                                            # 00477728
    cmp dh, byte ptr [__112C2CE]                         # 0047772B
    jne .L47774B                                         # 00477731
    mov dh, byte ptr [esi + 5]                           # 00477733
    shr dh, 4                                            # 00477736
    cmp dh, byte ptr [__112C2B0]                         # 00477739
    jne .L47774B                                         # 0047773F
    mov dh, byte ptr [esi + 4]                           # 00477741
    and dh, 0xf                                          # 00477744
    cmp dl, dh                                           # 00477747
    je .L477750                                          # 00477749
.L47774B:
    add esi, 8                                           # 0047774B
    jmp .L477704                                         # 0047774E
.L477750:
    mov dh, byte ptr [esi + 1]                           # 00477750
    and dh, 0x30                                         # 00477753
    cmp dh, byte ptr [__112C2F3]                         # 00477756
    jne .L47774B                                         # 0047775C
    test byte ptr [__112C2F3], 0x10                      # 0047775E
    je .L477775                                          # 00477765
    mov dh, byte ptr [esi + 7]                           # 00477767
    and dh, 0xf                                          # 0047776A
    cmp dh, byte ptr [__112C2F7]                         # 0047776D
    jne .L47774B                                         # 00477773
.L477775:
    pop ecx                                              # 00477775
    pop ebx                                              # 00477776
    pop eax                                              # 00477777
    test byte ptr [esi], 0x80                            # 00477778
    je .L4777EB                                          # 0047777B
    push eax                                             # 0047777D
    mov al, byte ptr [esi + 8]                           # 0047777E
    and al, 0x3c                                         # 00477781
    cmp al, 0x1c                                         # 00477783
    je .L4777EA                                          # 00477785
    cmp esi, dword ptr [__112C278]                       # 00477787
    je .L47779E                                          # 0047778D
    mov al, byte ptr [esi - 8]                           # 0047778F
    and al, 0x3c                                         # 00477792
    cmp al, 0x1c                                         # 00477794
    jne .L47779E                                         # 00477796
    test byte ptr [esi - 8], 0x80                        # 00477798
    jne .L4777EA                                         # 0047779C
.L47779E:
    pop eax                                              # 0047779E
    test byte ptr [esi + 9], 0x20                        # 0047779F
    jne .L4777D6                                         # 004777A3
    push eax                                             # 004777A5
    push ebx                                             # 004777A6
    push ecx                                             # 004777A7
    push edx                                             # 004777A8
    push edi                                             # 004777A9
    push ebp                                             # 004777AA
    mov dh, byte ptr [__112C2CE]                         # 004777AB
    mov dl, byte ptr [__112C2CF]                         # 004777B1
    mov bp, word ptr [__112C2B0]                         # 004777B7
    mov esi, 0x2b                                        # 004777BE
    call _sub_431315                                     # 004777C3
    cmp ebx, 0x80000000                                  # 004777C8
    jne .L4777DC                                         # 004777CE
    pop ebp                                              # 004777D0
    pop edi                                              # 004777D1
    pop edx                                              # 004777D2
    pop ecx                                              # 004777D3
    pop ebx                                              # 004777D4
    pop eax                                              # 004777D5
.L4777D6:
    mov ebx, 0x80000000                                  # 004777D6
    ret                                                  # 004777DB
.L4777DC:
    add dword ptr [__112C298], ebx                       # 004777DC
    pop ebp                                              # 004777E2
    pop edi                                              # 004777E3
    pop edx                                              # 004777E4
    pop ecx                                              # 004777E5
    pop ebx                                              # 004777E6
    pop eax                                              # 004777E7
    jmp .L4777EB                                         # 004777E8
.L4777EA:
    pop eax                                              # 004777EA
.L4777EB:
    push eax                                             # 004777EB
    push ebx                                             # 004777EC
    push ecx                                             # 004777ED
    msvc_mov bp, cx                                      # 004777EE
    movzx esi, bp                                        # 004777F1
    shl esi, 9                                           # 004777F4
    msvc_or si, ax                                       # 004777F7
    shr esi, 3                                           # 004777FA
    mov esi, dword ptr [esi + __E40134]                  # 004777FD
.L477803:
    movzx bp, byte ptr [esi + 2]                         # 00477803
    shl bp, 2                                            # 00477808
    msvc_cmp di, bp                                      # 0047780C
    jne .L47784A                                         # 0047780F
    mov dh, byte ptr [esi]                               # 00477811
    and dh, 0x3c                                         # 00477813
    cmp dh, 0x1c                                         # 00477816
    jne .L47784A                                         # 00477819
    mov dh, byte ptr [esi]                               # 0047781B
    and dh, 3                                            # 0047781D
    cmp dh, bh                                           # 00477820
    jne .L47784A                                         # 00477822
    mov dh, byte ptr [esi + 5]                           # 00477824
    and dh, 3                                            # 00477827
    cmp dh, byte ptr [__112C2CE]                         # 0047782A
    jne .L47784A                                         # 00477830
    mov dh, byte ptr [esi + 5]                           # 00477832
    shr dh, 4                                            # 00477835
    cmp dh, byte ptr [__112C2B0]                         # 00477838
    jne .L47784A                                         # 0047783E
    mov dh, byte ptr [esi + 4]                           # 00477840
    and dh, 0xf                                          # 00477843
    cmp dl, dh                                           # 00477846
    je .L47784F                                          # 00477848
.L47784A:
    add esi, 8                                           # 0047784A
    jmp .L477803                                         # 0047784D
.L47784F:
    mov dh, byte ptr [esi + 1]                           # 0047784F
    and dh, 0x30                                         # 00477852
    cmp dh, byte ptr [__112C2F3]                         # 00477855
    jne .L47784A                                         # 0047785B
    test byte ptr [__112C2F3], 0x10                      # 0047785D
    je .L477874                                          # 00477864
    mov dh, byte ptr [esi + 7]                           # 00477866
    and dh, 0xf                                          # 00477869
    cmp dh, byte ptr [__112C2F7]                         # 0047786C
    jne .L47784A                                         # 00477872
.L477874:
    msvc_mov bl, dl                                      # 00477874
    msvc_xchg di, dx                                     # 00477876
    and edi, 0xff                                        # 00477879
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047787F
    mov bp, word ptr [esi + 5]                           # 00477886
    and ebp, 3                                           # 0047788A
    imul ebp, ebp, 0xa                                   # 0047788D
    mov si, word ptr [esi]                               # 00477890
    and esi, 3                                           # 00477893
    jmp dword ptr [esi*4 + __4FE500]                     # 00477896

    .global _sub_47789D
_sub_47789D:
    sub ax, word ptr [ebp + edi + 1]                     # 0047789D
    sub cx, word ptr [ebp + edi + 3]                     # 004778A2
    jmp _sub_4778CB                                      # 004778A7

    .global _sub_4778A9
_sub_4778A9:
    sub ax, word ptr [ebp + edi + 3]                     # 004778A9
    add cx, word ptr [ebp + edi + 1]                     # 004778AE
    jmp _sub_4778CB                                      # 004778B3

    .global _sub_4778B5
_sub_4778B5:
    add ax, word ptr [ebp + edi + 1]                     # 004778B5
    add cx, word ptr [ebp + edi + 3]                     # 004778BA
    jmp _sub_4778CB                                      # 004778BF

    .global _sub_4778C1
_sub_4778C1:
    add ax, word ptr [ebp + edi + 3]                     # 004778C1
    sub cx, word ptr [ebp + edi + 1]                     # 004778C6

    .global _sub_4778CB
_sub_4778CB:
    sub dx, word ptr [ebp + edi + 5]                     # 004778CB
    push eax                                             # 004778D0
    push ecx                                             # 004778D1
    push edx                                             # 004778D2
    push 0                                               # 004778D3
    msvc_xor ebp, ebp                                    # 004778D5

    .global _sub_4778D7
_sub_4778D7:
    cmp byte ptr [ebp + edi], 0xff                       # 004778D7
    je _sub_477B39                                       # 004778DC
    push eax                                             # 004778E2
    push ecx                                             # 004778E3
    push edx                                             # 004778E4
    push esi                                             # 004778E5
    jmp dword ptr [esi*4 + __4FE510]                     # 004778E6

    .global _sub_4778ED
_sub_4778ED:
    add ax, word ptr [ebp + edi + 1]                     # 004778ED
    add cx, word ptr [ebp + edi + 3]                     # 004778F2
    jmp _sub_47791B                                      # 004778F7

    .global _sub_4778F9
_sub_4778F9:
    add ax, word ptr [ebp + edi + 3]                     # 004778F9
    sub cx, word ptr [ebp + edi + 1]                     # 004778FE
    jmp _sub_47791B                                      # 00477903

    .global _sub_477905
_sub_477905:
    sub ax, word ptr [ebp + edi + 1]                     # 00477905
    sub cx, word ptr [ebp + edi + 3]                     # 0047790A
    jmp _sub_47791B                                      # 0047790F

    .global _sub_477911
_sub_477911:
    sub ax, word ptr [ebp + edi + 3]                     # 00477911
    add cx, word ptr [ebp + edi + 1]                     # 00477916

    .global _sub_47791B
_sub_47791B:
    add dx, word ptr [ebp + edi + 5]                     # 0047791B
    shr dx, 2                                            # 00477920
    test byte ptr [__112C2F3], 0x20                      # 00477924
    je .L47792F                                          # 0047792B
    jmp .L477934                                         # 0047792D
.L47792F:
    call _sub_4CBE5F                                     # 0047792F
.L477934:
    mov word ptr [__112C2AC], ax                         # 00477934
    mov word ptr [__112C2AE], cx                         # 0047793A
    movzx esi, cx                                        # 00477941
    shl esi, 9                                           # 00477944
    msvc_or si, ax                                       # 00477947
    shr esi, 3                                           # 0047794A
    mov esi, dword ptr [esi + __E40134]                  # 0047794D
.L477953:
    cmp dl, byte ptr [esi + 2]                           # 00477953
    jne .L47798A                                         # 00477956
    mov al, byte ptr [esi]                               # 00477958
    and al, 0x3c                                         # 0047795A
    cmp al, 0x1c                                         # 0047795C
    jne .L47798A                                         # 0047795E
    mov al, byte ptr [esi]                               # 00477960
    and al, 3                                            # 00477962
    cmp al, bh                                           # 00477964
    jne .L47798A                                         # 00477966
    mov al, byte ptr [esi + 5]                           # 00477968
    and al, 3                                            # 0047796B
    cmp al, byte ptr [ebp + edi]                         # 0047796D
    jne .L47798A                                         # 00477971
    mov al, byte ptr [esi + 5]                           # 00477973
    shr al, 4                                            # 00477976
    cmp al, byte ptr [__112C2B0]                         # 00477979
    jne .L47798A                                         # 0047797F
    mov al, byte ptr [esi + 4]                           # 00477981
    and al, 0xf                                          # 00477984
    cmp bl, al                                           # 00477986
    je .L47798F                                          # 00477988
.L47798A:
    add esi, 8                                           # 0047798A
    jmp .L477953                                         # 0047798D
.L47798F:
    mov al, byte ptr [esi + 1]                           # 0047798F
    and al, 0x30                                         # 00477992
    cmp al, byte ptr [__112C2F3]                         # 00477994
    jne .L47798A                                         # 0047799A
    test byte ptr [__112C2F3], 0x10                      # 0047799C
    je .L4779B2                                          # 004779A3
    mov al, byte ptr [esi + 7]                           # 004779A5
    and al, 0xf                                          # 004779A8
    cmp al, byte ptr [__112C2F7]                         # 004779AA
    jne .L47798A                                         # 004779B0
.L4779B2:
    test byte ptr [esi + 4], 0x80                        # 004779B2
    je .L477A10                                          # 004779B6
    mov cl, byte ptr [esi + 6]                           # 004779B8
    shr cl, 5                                            # 004779BB
    mov byte ptr [__112C2D0], cl                         # 004779BE
    push esi                                             # 004779C4
    mov ax, word ptr [__112C2AC]                         # 004779C5
    mov cx, word ptr [__112C2AE]                         # 004779CB
    movzx esi, cx                                        # 004779D2
    shl esi, 9                                           # 004779D5
    msvc_or si, ax                                       # 004779D8
    shr esi, 3                                           # 004779DB
    mov esi, dword ptr [esi + __E40134]                  # 004779DE
.L4779E4:
    cmp dl, byte ptr [esi + 2]                           # 004779E4
    jne .L4779FF                                         # 004779E7
    mov al, byte ptr [esi]                               # 004779E9
    and al, 0x3c                                         # 004779EB
    cmp al, 0x1c                                         # 004779ED
    jne .L4779FF                                         # 004779EF
    test byte ptr [esi + 1], 0x30                        # 004779F1
    jne .L4779FF                                         # 004779F5
    cmp esi, dword ptr [esp]                             # 004779F7
    je .L4779FF                                          # 004779FA
    pop esi                                              # 004779FC
    jmp .L477A10                                         # 004779FD
.L4779FF:
    add esi, 8                                           # 004779FF
    test byte ptr [esi - 7], 0x80                        # 00477A02
    je .L4779E4                                          # 00477A06
    pop esi                                              # 00477A08
    or byte ptr [__112C2CD], 1                           # 00477A09
.L477A10:
    msvc_or ebp, ebp                                     # 00477A10
    jne .L477B03                                         # 00477A12
    movzx ecx, byte ptr [esi + 5]                        # 00477A18
    shr ecx, 4                                           # 00477A1C
    mov ecx, dword ptr [ecx*4 + _roadObjects]            # 00477A1F
    mov al, byte ptr [esi + 7]                           # 00477A26
    and al, 0xf                                          # 00477A29
    mov byte ptr [__112C2F8], al                         # 00477A2B
    cmp al, 0xf                                          # 00477A30
    je .L477A5F                                          # 00477A32
    movsx eax, word ptr [ecx + 6]                        # 00477A34
    movzx ecx, byte ptr [ecx + 0xa]                      # 00477A38
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00477A3C
    sar eax, 0xa                                         # 00477A44
    mov cl, byte ptr [esi + 4]                           # 00477A47
    and ecx, 0xf                                         # 00477A4A
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00477A4D
    imul eax, ecx                                        # 00477A55
    sar eax, 8                                           # 00477A58
    add dword ptr [esp + 0x10], eax                      # 00477A5B
.L477A5F:
    test byte ptr [esi + 7], 0x40                        # 00477A5F
    je .L477AB1                                          # 00477A63
    movzx ecx, byte ptr [esi + 5]                        # 00477A65
    shr ecx, 4                                           # 00477A69
    mov ecx, dword ptr [ecx*4 + _roadObjects]            # 00477A6C
    test word ptr [ecx + 0x12], 8                        # 00477A73
    jne .L477AB1                                         # 00477A79
    movzx ecx, byte ptr [ecx + 0x26]                     # 00477A7B
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 00477A7F
    movsx eax, word ptr [ecx + 8]                        # 00477A86
    movzx ecx, byte ptr [ecx + 5]                        # 00477A8A
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00477A8E
    sar eax, 0xa                                         # 00477A96
    mov cl, byte ptr [esi + 4]                           # 00477A99
    and ecx, 0xf                                         # 00477A9C
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00477A9F
    imul eax, ecx                                        # 00477AA7
    sar eax, 8                                           # 00477AAA
    add dword ptr [esp + 0x10], eax                      # 00477AAD
.L477AB1:
    test byte ptr [esi + 7], 0x80                        # 00477AB1
    je .L477B03                                          # 00477AB5
    movzx ecx, byte ptr [esi + 5]                        # 00477AB7
    shr ecx, 4                                           # 00477ABB
    mov ecx, dword ptr [ecx*4 + _roadObjects]            # 00477ABE
    test word ptr [ecx + 0x12], 8                        # 00477AC5
    jne .L477B03                                         # 00477ACB
    movzx ecx, byte ptr [ecx + 0x27]                     # 00477ACD
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 00477AD1
    movsx eax, word ptr [ecx + 8]                        # 00477AD8
    movzx ecx, byte ptr [ecx + 5]                        # 00477ADC
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 00477AE0
    sar eax, 0xa                                         # 00477AE8
    mov cl, byte ptr [esi + 4]                           # 00477AEB
    and ecx, 0xf                                         # 00477AEE
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 00477AF1
    imul eax, ecx                                        # 00477AF9
    sar eax, 8                                           # 00477AFC
    add dword ptr [esp + 0x10], eax                      # 00477AFF
.L477B03:
    test byte ptr [esp + 0x24], 1                        # 00477B03
    je .L477B2D                                          # 00477B08
    mov ax, word ptr [__112C2AC]                         # 00477B0A
    mov cx, word ptr [__112C2AE]                         # 00477B10
    mov dl, byte ptr [esi + 2]                           # 00477B17
    push esi                                             # 00477B1A
    call _sub_461760                                     # 00477B1B
    pop esi                                              # 00477B20
    mov byte ptr [_scenarioChunk1+8], 1                  # 00477B21
    call _sub_4795D1                                     # 00477B28
.L477B2D:
    pop esi                                              # 00477B2D
    pop edx                                              # 00477B2E
    pop ecx                                              # 00477B2F
    pop eax                                              # 00477B30
    add ebp, 0xa                                         # 00477B31
    msvc_jmp _sub_4778D7                                 # 00477B34

    .global _sub_477B39
_sub_477B39:
    pop ebp                                              # 00477B39
    add ebp, dword ptr [__112C298]                       # 00477B3A
    pop edx                                              # 00477B40
    pop ecx                                              # 00477B41
    pop eax                                              # 00477B42
    pop ecx                                              # 00477B43
    pop ebx                                              # 00477B44
    pop eax                                              # 00477B45
    test bl, 1                                           # 00477B46
    je .L477B75                                          # 00477B49
    test bl, 0x50                                        # 00477B4B
    jne .L477B75                                         # 00477B4E
    cmp byte ptr [__9C68EB], 0xf                         # 00477B50
    je .L477B75                                          # 00477B57
    pushal                                               # 00477B59
    mov cx, word ptr [__9C68E0]                          # 00477B5A
    mov dx, word ptr [__9C68E2]                          # 00477B61
    mov bp, word ptr [__9C68E4]                          # 00477B68
    call _sub_48B04E                                     # 00477B6F
    popal                                                # 00477B74
.L477B75:
    msvc_mov ebx, ebp                                    # 00477B75
    ret                                                  # 00477B77

    .global _sub_477B78
_sub_477B78:
    mov word ptr [__9C68E6], 0                           # 00477B78
    mov ax, word ptr [esp + 8]                           # 00477B81
    mov cx, word ptr [esp]                               # 00477B86
    call _sub_497E52                                     # 00477B8A
    cmp ebx, -1                                          # 00477B8F
    je _sub_477BB0                                       # 00477B92
    imul ebx, ebx, 0x270                                 # 00477B94
    mov ax, word ptr [ebx + _towns]                      # 00477B9A
    mov word ptr [__112C826], ax                         # 00477BA1
    mov word ptr [__9C68E6], 0x5b8                       # 00477BA7

    .global _sub_477BB0
_sub_477BB0:
    pop ecx                                              # 00477BB0
    pop ebx                                              # 00477BB1
    pop eax                                              # 00477BB2
    mov ebx, 0x80000000                                  # 00477BB3
    ret                                                  # 00477BB8

    .global _sub_477BB9
_sub_477BB9:
    cmp al, 3                                            # 00477BB9
    je .L477DF9                                          # 00477BBB
    cmp al, 1                                            # 00477BC1
    je .L477D9E                                          # 00477BC3
    ja .L477DBC                                          # 00477BC9
    lea ebp, [esi + 0x30]                                # 00477BCF
    msvc_xor edx, edx                                    # 00477BD2
    call _sub_472172                                     # 00477BD4
    mov word ptr [esi], ax                               # 00477BD9
    mov edi, dword ptr [__50D158]                        # 00477BDC
    cmp edi, -1                                          # 00477BE2
    je .L477BEB                                          # 00477BE5
    mov byte ptr [edi], 0                                # 00477BE7
    inc edi                                              # 00477BEA
.L477BEB:
    mov dword ptr [__112C20D], edi                       # 00477BEB
    movzx edi, byte ptr [esi + 0x28]                     # 00477BF1
    msvc_xor eax, eax                                    # 00477BF5
    push eax                                             # 00477BF7
.L477BF8:
    msvc_or edi, edi                                     # 00477BF8
    je .L477C27                                          # 00477BFA
    push ebx                                             # 00477BFC
    push ecx                                             # 00477BFD
    push edi                                             # 00477BFE
    push esi                                             # 00477BFF
    call _sub_47206C                                     # 00477C00
    jb .L477C1D                                          # 00477C05
    cmp cl, 0x11                                         # 00477C07
    jne .L477C12                                         # 00477C0A
    bts word ptr [esp + 0x10], bx                        # 00477C0C
.L477C12:
    cmp cl, 0x14                                         # 00477C12
    jne .L477C1D                                         # 00477C15
    bts word ptr [esp + 0x12], bx                        # 00477C17
.L477C1D:
    pop esi                                              # 00477C1D
    pop edi                                              # 00477C1E
    pop ecx                                              # 00477C1F
    pop ebx                                              # 00477C20
    add ebp, 0x10                                        # 00477C21
    dec edi                                              # 00477C24
    jmp .L477BF8                                         # 00477C25
.L477C27:
    pop eax                                              # 00477C27
    mov word ptr [esi + 0x2c], ax                        # 00477C28
    ror eax, 0x10                                        # 00477C2C
    mov word ptr [esi + 0x2a], ax                        # 00477C2F
    mov word ptr [esi + 0x26], 0xffff                    # 00477C33
    movzx edi, byte ptr [esi + 0x25]                     # 00477C39
    msvc_xor eax, eax                                    # 00477C3D
    push eax                                             # 00477C3F
.L477C40:
    msvc_or edi, edi                                     # 00477C40
    je .L477C6D                                          # 00477C42
    push ebx                                             # 00477C44
    push ecx                                             # 00477C45
    push edi                                             # 00477C46
    push esi                                             # 00477C47
    call _sub_4720EB                                     # 00477C48
    jb .L477C63                                          # 00477C4D
    cmp cl, 0x13                                         # 00477C4F
    jne .L477C63                                         # 00477C52
    mov eax, dword ptr [esp + 0x10]                      # 00477C54
    mov esi, dword ptr [esp]                             # 00477C58
    mov byte ptr [eax + esi + 0x26], bl                  # 00477C5B
    inc dword ptr [esp + 0x10]                           # 00477C5F
.L477C63:
    pop esi                                              # 00477C63
    pop edi                                              # 00477C64
    pop ecx                                              # 00477C65
    pop ebx                                              # 00477C66
    add ebp, 0x10                                        # 00477C67
    dec edi                                              # 00477C6A
    jmp .L477C40                                         # 00477C6B
.L477C6D:
    pop eax                                              # 00477C6D
    push ebx                                             # 00477C6E
    push ecx                                             # 00477C6F
    push edi                                             # 00477C70
    push esi                                             # 00477C71
    mov edi, dword ptr [__112C20D]                       # 00477C72
    cmp edi, -1                                          # 00477C78
    je .L477CA3                                          # 00477C7B
    mov eax, dword ptr [ebp]                             # 00477C7D
    mov dword ptr [edi], eax                             # 00477C80
    mov eax, dword ptr [ebp + 4]                         # 00477C82
    mov dword ptr [edi + 4], eax                         # 00477C85
    mov eax, dword ptr [ebp + 8]                         # 00477C88
    mov dword ptr [edi + 8], eax                         # 00477C8B
    mov eax, dword ptr [ebp + 0xc]                       # 00477C8E
    mov dword ptr [edi + 0xc], eax                       # 00477C91
    add dword ptr [__112C20D], 0x10                      # 00477C94
    mov edi, dword ptr [__50D158]                        # 00477C9B
    inc byte ptr [edi]                                   # 00477CA1
.L477CA3:
    call _sub_4720EB                                     # 00477CA3
    mov esi, dword ptr [esp]                             # 00477CA8
    mov byte ptr [esi + 0xb], bl                         # 00477CAB
    pop esi                                              # 00477CAE
    pop edi                                              # 00477CAF
    pop ecx                                              # 00477CB0
    pop ebx                                              # 00477CB1
    add ebp, 0x10                                        # 00477CB2
    msvc_xor eax, eax                                    # 00477CB5
.L477CB7:
    mov byte ptr [eax + esi + 0x15], 0xff                # 00477CB7
    inc eax                                              # 00477CBC
    cmp eax, 7                                           # 00477CBD
    jb .L477CB7                                          # 00477CC0
    movzx edi, byte ptr [esi + 0x14]                     # 00477CC2
    msvc_xor eax, eax                                    # 00477CC6
.L477CC8:
    msvc_or edi, edi                                     # 00477CC8
    je .L477D1E                                          # 00477CCA
    push ebx                                             # 00477CCC
    push ecx                                             # 00477CCD
    push edi                                             # 00477CCE
    mov byte ptr [eax + esi + 0x15], 0xff                # 00477CCF
    push eax                                             # 00477CD4
    push esi                                             # 00477CD5
    mov edi, dword ptr [__112C20D]                       # 00477CD6
    cmp edi, -1                                          # 00477CDC
    je .L477D07                                          # 00477CDF
    mov eax, dword ptr [ebp]                             # 00477CE1
    mov dword ptr [edi], eax                             # 00477CE4
    mov eax, dword ptr [ebp + 4]                         # 00477CE6
    mov dword ptr [edi + 4], eax                         # 00477CE9
    mov eax, dword ptr [ebp + 8]                         # 00477CEC
    mov dword ptr [edi + 8], eax                         # 00477CEF
    mov eax, dword ptr [ebp + 0xc]                       # 00477CF2
    mov dword ptr [edi + 0xc], eax                       # 00477CF5
    add dword ptr [__112C20D], 0x10                      # 00477CF8
    mov edi, dword ptr [__50D158]                        # 00477CFF
    inc byte ptr [edi]                                   # 00477D05
.L477D07:
    call _sub_4720EB                                     # 00477D07
    pop esi                                              # 00477D0C
    pop eax                                              # 00477D0D
    jb .L477D14                                          # 00477D0E
    mov byte ptr [eax + esi + 0x15], bl                  # 00477D10
.L477D14:
    inc eax                                              # 00477D14
    pop edi                                              # 00477D15
    pop ecx                                              # 00477D16
    pop ebx                                              # 00477D17
    add ebp, 0x10                                        # 00477D18
    dec edi                                              # 00477D1B
    jmp .L477CC8                                         # 00477D1C
.L477D1E:
    msvc_xor eax, eax                                    # 00477D1E
.L477D20:
    mov byte ptr [eax + esi + 0x1d], 0xff                # 00477D20
    inc eax                                              # 00477D25
    cmp eax, 7                                           # 00477D26
    jb .L477D20                                          # 00477D29
    movzx edi, byte ptr [esi + 0x1c]                     # 00477D2B
    msvc_xor eax, eax                                    # 00477D2F
.L477D31:
    msvc_or edi, edi                                     # 00477D31
    je .L477D87                                          # 00477D33
    push ebx                                             # 00477D35
    push ecx                                             # 00477D36
    push edi                                             # 00477D37
    mov byte ptr [eax + esi + 0x1d], 0xff                # 00477D38
    push eax                                             # 00477D3D
    push esi                                             # 00477D3E
    mov edi, dword ptr [__112C20D]                       # 00477D3F
    cmp edi, -1                                          # 00477D45
    je .L477D70                                          # 00477D48
    mov eax, dword ptr [ebp]                             # 00477D4A
    mov dword ptr [edi], eax                             # 00477D4D
    mov eax, dword ptr [ebp + 4]                         # 00477D4F
    mov dword ptr [edi + 4], eax                         # 00477D52
    mov eax, dword ptr [ebp + 8]                         # 00477D55
    mov dword ptr [edi + 8], eax                         # 00477D58
    mov eax, dword ptr [ebp + 0xc]                       # 00477D5B
    mov dword ptr [edi + 0xc], eax                       # 00477D5E
    add dword ptr [__112C20D], 0x10                      # 00477D61
    mov edi, dword ptr [__50D158]                        # 00477D68
    inc byte ptr [edi]                                   # 00477D6E
.L477D70:
    call _sub_4720EB                                     # 00477D70
    pop esi                                              # 00477D75
    pop eax                                              # 00477D76
    jb .L477D7D                                          # 00477D77
    mov byte ptr [eax + esi + 0x1d], bl                  # 00477D79
.L477D7D:
    inc eax                                              # 00477D7D
    pop edi                                              # 00477D7E
    pop ecx                                              # 00477D7F
    pop ebx                                              # 00477D80
    add ebp, 0x10                                        # 00477D81
    dec edi                                              # 00477D84
    jmp .L477D31                                         # 00477D85
.L477D87:
    call _sub_47221F                                     # 00477D87
    mov dword ptr [esi + 0xe], eax                       # 00477D8C
    mov edi, dword ptr [__112C20D]                       # 00477D8F
    cmp edi, -1                                          # 00477D95
    je .L477D9D                                          # 00477D98
    mov byte ptr [edi], 0                                # 00477D9A
.L477D9D:
    ret                                                  # 00477D9D
.L477D9E:
    mov word ptr [esi], 0                                # 00477D9E
    mov byte ptr [esi + 0xb], 0                          # 00477DA3
    mov dword ptr [esi + 0xe], 0                         # 00477DA7
    msvc_xor ecx, ecx                                    # 00477DAE
.L477DB0:
    mov byte ptr [ecx + esi + 0x15], 0                   # 00477DB0
    inc ecx                                              # 00477DB5
    cmp ecx, 7                                           # 00477DB6
    jb .L477DB0                                          # 00477DB9
    ret                                                  # 00477DBB
.L477DBC:
    movsx eax, word ptr [esi + 4]                        # 00477DBC
    mov bx, word ptr [esi + 6]                           # 00477DC0
    neg bx                                               # 00477DC4
    msvc_cmp bx, ax                                      # 00477DC7
    jg .L477DF7                                          # 00477DCA
    cmp word ptr [esi + 4], 0                            # 00477DCC
    jle .L477DF7                                         # 00477DD1
    cmp word ptr [esi + 8], 0                            # 00477DD3
    jle .L477DF7                                         # 00477DD8
    cmp byte ptr [esi + 0x14], 7                         # 00477DDA
    ja .L477DF7                                          # 00477DDE
    cmp byte ptr [esi + 0x25], 2                         # 00477DE0
    ja .L477DF7                                          # 00477DE4
    test word ptr [esi + 0x12], 8                        # 00477DE6
    je .L477DF4                                          # 00477DEC
    cmp byte ptr [esi + 0x25], 0                         # 00477DEE
    jne .L477DF7                                         # 00477DF2
.L477DF4:
    msvc_and eax, eax                                    # 00477DF4
    ret                                                  # 00477DF6
.L477DF7:
    stc                                                  # 00477DF7
    ret                                                  # 00477DF8
.L477DF9:
    push esi                                             # 00477DF9
    msvc_or ah, ah                                       # 00477DFA
    jne .L477E46                                         # 00477DFC
    cmp byte ptr [ebp + 0x24], 1                         # 00477DFE
    je .L477E14                                          # 00477E02
    mov ebx, dword ptr [ebp + 0xe]                       # 00477E04
    add ebx, 0x20c80022                                  # 00477E07
    call _sub_448C79                                     # 00477E0D
    pop esi                                              # 00477E12
    ret                                                  # 00477E13
.L477E14:
    mov ebx, dword ptr [ebp + 0xe]                       # 00477E14
    push ebx                                             # 00477E17
    push ecx                                             # 00477E18
    push edx                                             # 00477E19
    add ebx, 0x20c80022                                  # 00477E1A
    call _sub_448C79                                     # 00477E20
    pop edx                                              # 00477E25
    pop ecx                                              # 00477E26
    pop ebx                                              # 00477E27
    push ebx                                             # 00477E28
    push ecx                                             # 00477E29
    push edx                                             # 00477E2A
    add ebx, 0x20c80024                                  # 00477E2B
    call _sub_448C79                                     # 00477E31
    pop edx                                              # 00477E36
    pop ecx                                              # 00477E37
    pop ebx                                              # 00477E38
    add ebx, 0x20c80026                                  # 00477E39
    call _sub_448C79                                     # 00477E3F
    pop esi                                              # 00477E44
    ret                                                  # 00477E45
.L477E46:
    pop esi                                              # 00477E46
    ret                                                  # 00477E47

    .global _sub_477E48
_sub_477E48:
    cmp al, 3                                            # 00477E48
    je .L477EB4                                          # 00477E4A
    cmp al, 1                                            # 00477E4C
    je .L477E7E                                          # 00477E4E
    ja .L477E92                                          # 00477E50
    lea ebp, [esi + 0x12]                                # 00477E52
    msvc_xor edx, edx                                    # 00477E55
    call _sub_472172                                     # 00477E57
    mov word ptr [esi], ax                               # 00477E5C
    call _sub_47221F                                     # 00477E5F
    mov dword ptr [esi + 0xe], eax                       # 00477E64
    add eax, 8                                           # 00477E67
    mov dword ptr [esi + 0xa], eax                       # 00477E6A
    mov edi, dword ptr [__50D158]                        # 00477E6D
    cmp edi, -1                                          # 00477E73
    je .L477E7D                                          # 00477E76
    mov word ptr [edi], 0                                # 00477E78
.L477E7D:
    ret                                                  # 00477E7D
.L477E7E:
    mov word ptr [esi], 0                                # 00477E7E
    mov dword ptr [esi + 0xe], 0                         # 00477E83
    mov dword ptr [esi + 0xa], 0                         # 00477E8A
    ret                                                  # 00477E91
.L477E92:
    cmp byte ptr [esi + 4], 2                            # 00477E92
    jae .L477EB2                                         # 00477E96
    movsx eax, word ptr [esi + 6]                        # 00477E98
    mov bx, word ptr [esi + 8]                           # 00477E9C
    neg bx                                               # 00477EA0
    msvc_cmp bx, ax                                      # 00477EA3
    jg .L477EB2                                          # 00477EA6
    cmp word ptr [esi + 6], 0                            # 00477EA8
    jle .L477EB2                                         # 00477EAD
    msvc_and eax, eax                                    # 00477EAF
    ret                                                  # 00477EB1
.L477EB2:
    stc                                                  # 00477EB2
    ret                                                  # 00477EB3
.L477EB4:
    push esi                                             # 00477EB4
    msvc_or ah, ah                                       # 00477EB5
    jne .L477F0D                                         # 00477EB7
    mov ebx, dword ptr [ebp + 0xa]                       # 00477EB9
    push ebx                                             # 00477EBC
    push ecx                                             # 00477EBD
    push edx                                             # 00477EBE
    add ebx, 0x20c80024                                  # 00477EBF
    call _sub_448C79                                     # 00477EC5
    pop edx                                              # 00477ECA
    pop ecx                                              # 00477ECB
    pop ebx                                              # 00477ECC
    push ebx                                             # 00477ECD
    push ecx                                             # 00477ECE
    push edx                                             # 00477ECF
    add ebx, 0x20c80025                                  # 00477ED0
    call _sub_448C79                                     # 00477ED6
    pop edx                                              # 00477EDB
    pop ecx                                              # 00477EDC
    pop ebx                                              # 00477EDD
    push ebx                                             # 00477EDE
    push ecx                                             # 00477EDF
    push edx                                             # 00477EE0
    add ebx, 0x20c80000                                  # 00477EE1
    call _sub_448C79                                     # 00477EE7
    pop edx                                              # 00477EEC
    pop ecx                                              # 00477EED
    pop ebx                                              # 00477EEE
    push ebx                                             # 00477EEF
    push ecx                                             # 00477EF0
    push edx                                             # 00477EF1
    add ebx, 0x20c80021                                  # 00477EF2
    call _sub_448C79                                     # 00477EF8
    pop edx                                              # 00477EFD
    pop ecx                                              # 00477EFE
    pop ebx                                              # 00477EFF
    add ebx, 0x20c80020                                  # 00477F00
    call _sub_448C79                                     # 00477F06
    pop esi                                              # 00477F0B
    ret                                                  # 00477F0C
.L477F0D:
    pop esi                                              # 00477F0D
    ret                                                  # 00477F0E

    .global _sub_477F0F
_sub_477F0F:
    cmp al, 3                                            # 00477F0F
    je .L477F64                                          # 00477F11
    cmp al, 1                                            # 00477F13
    je .L477F52                                          # 00477F15
    ja .L477F5F                                          # 00477F17
    lea ebp, [esi + 0xc]                                 # 00477F19
    msvc_xor edx, edx                                    # 00477F1C
    call _sub_472172                                     # 00477F1E
    mov word ptr [esi], ax                               # 00477F23
    mov edi, dword ptr [__50D158]                        # 00477F26
    cmp edi, -1                                          # 00477F2C
    je .L477F35                                          # 00477F2F
    mov byte ptr [edi], 0                                # 00477F31
    inc edi                                              # 00477F34
.L477F35:
    mov dword ptr [__112C20D], edi                       # 00477F35
    call _sub_47221F                                     # 00477F3B
    mov dword ptr [esi + 8], eax                         # 00477F40
    mov edi, dword ptr [__112C20D]                       # 00477F43
    cmp edi, -1                                          # 00477F49
    je .L477F51                                          # 00477F4C
    mov byte ptr [edi], 0                                # 00477F4E
.L477F51:
    ret                                                  # 00477F51
.L477F52:
    mov word ptr [esi], 0                                # 00477F52
    mov dword ptr [esi + 8], 0                           # 00477F57
    ret                                                  # 00477F5E
.L477F5F:
    msvc_and eax, eax                                    # 00477F5F
    ret                                                  # 00477F61
.L477F62:
    stc                                                  # 00477F62
    ret                                                  # 00477F63
.L477F64:
    push esi                                             # 00477F64
    msvc_or ah, ah                                       # 00477F65
    jne .L477FC0                                         # 00477F67
    push ecx                                             # 00477F69
    push edx                                             # 00477F6A
    sub cx, 0x14                                         # 00477F6B
    sub dx, -1                                           # 00477F6F
    msvc_xor ebx, ebx                                    # 00477F73
.L477F75:
    push ebx                                             # 00477F75
    push ecx                                             # 00477F76
    push edx                                             # 00477F77
    push ebp                                             # 00477F78
    sub cx, 0xe                                          # 00477F79
    add dx, 7                                            # 00477F7D
    shl ebx, 2                                           # 00477F81
    add ebx, dword ptr [ebp + 8]                         # 00477F84
    add ebx, 2                                           # 00477F87
    call _sub_448C79                                     # 00477F8A
    pop ebp                                              # 00477F8F
    pop edx                                              # 00477F90
    pop ecx                                              # 00477F91
    pop ebx                                              # 00477F92
    push ebx                                             # 00477F93
    push ecx                                             # 00477F94
    push edx                                             # 00477F95
    push ebp                                             # 00477F96
    add cx, 0xe                                          # 00477F97
    sub dx, 7                                            # 00477F9B
    shl ebx, 2                                           # 00477F9F
    add ebx, dword ptr [ebp + 8]                         # 00477FA2
    call _sub_448C79                                     # 00477FA5
    pop ebp                                              # 00477FAA
    pop edx                                              # 00477FAB
    pop ecx                                              # 00477FAC
    pop ebx                                              # 00477FAD
    add cx, 0x14                                         # 00477FAE
    add dx, 0xa                                          # 00477FB2
    inc ebx                                              # 00477FB6
    cmp ebx, 3                                           # 00477FB7
    jb .L477F75                                          # 00477FBA
    pop edx                                              # 00477FBC
    pop ecx                                              # 00477FBD
    pop esi                                              # 00477FBE
    ret                                                  # 00477FBF
.L477FC0:
    pop esi                                              # 00477FC0
    ret                                                  # 00477FC1

    .global _sub_477FC2
_sub_477FC2:
    mov bl, byte ptr [esi + 7]                           # 00477FC2
    and bl, 0xf                                          # 00477FC5
    cmp bl, 0xf                                          # 00477FC8
    je .L4780DC                                          # 00477FCB
    cmp bl, byte ptr [_scenarioChunk3+36]                # 00477FD1
    je .L4780DC                                          # 00477FD7
    cmp bl, byte ptr [_scenarioChunk3+37]                # 00477FDD
    je .L4780DC                                          # 00477FE3
    movzx ebx, byte ptr [esi + 5]                        # 00477FE9
    shr ebx, 4                                           # 00477FED
    bt dword ptr [_scenarioChunk3+420], ebx              # 00477FF0
    jae .L4780DC                                         # 00477FF7
    test byte ptr [esi + 5], 3                           # 00477FFD
    jne .L4780DC                                         # 00478001
    test byte ptr [esi + 7], 0xf0                        # 00478007
    jne .L4780DC                                         # 0047800B
    test byte ptr [esi + 1], 0x30                        # 00478011
    jne .L4780DC                                         # 00478015
    test byte ptr [esi], 0x80                            # 0047801B
    jne .L4780DC                                         # 0047801E
    pushal                                               # 00478024
    mov dl, byte ptr [esi + 2]                           # 00478025
    movzx esi, cx                                        # 00478028
    shl esi, 9                                           # 0047802B
    msvc_or si, ax                                       # 0047802E
    shr esi, 3                                           # 00478031
    mov esi, dword ptr [esi + __E40134]                  # 00478034
.L47803A:
    mov al, byte ptr [esi]                               # 0047803A
    and al, 0x3c                                         # 0047803C
    cmp al, 0x1c                                         # 0047803E
    jne .L478089                                         # 00478040
    cmp dl, byte ptr [esi + 2]                           # 00478042
    jne .L478089                                         # 00478045
    mov bl, byte ptr [esi + 7]                           # 00478047
    and bl, 0xf                                          # 0047804A
    cmp bl, 0xf                                          # 0047804D
    je .L478089                                          # 00478050
    cmp bl, byte ptr [_scenarioChunk3+36]                # 00478052
    je .L478089                                          # 00478058
    cmp bl, byte ptr [_scenarioChunk3+37]                # 0047805A
    je .L478089                                          # 00478060
    movzx ebx, byte ptr [esi + 5]                        # 00478062
    shr ebx, 4                                           # 00478066
    bt dword ptr [_scenarioChunk3+420], ebx              # 00478069
    jae .L478089                                         # 00478070
    test byte ptr [esi + 5], 3                           # 00478072
    jne .L4780DB                                         # 00478076
    test byte ptr [esi + 7], 0xf0                        # 00478078
    jne .L4780DB                                         # 0047807C
    test byte ptr [esi + 1], 0x30                        # 0047807E
    jne .L4780DB                                         # 00478082
    test byte ptr [esi], 0x80                            # 00478084
    jne .L4780DB                                         # 00478087
.L478089:
    add esi, 8                                           # 00478089
    test byte ptr [esi - 7], 0x80                        # 0047808C
    je .L47803A                                          # 00478090
    popal                                                # 00478092
    pushal                                               # 00478093
    mov bl, byte ptr [esi + 7]                           # 00478094
    and bl, 0xf                                          # 00478097
    xchg byte ptr [__9C68EB], bl                         # 0047809A
    push ebx                                             # 004780A0
    movzx di, byte ptr [esi + 2]                         # 004780A1
    shl di, 2                                            # 004780A6
    mov dl, byte ptr [esi + 4]                           # 004780AA
    and dl, 0xf                                          # 004780AD
    mov dh, byte ptr [esi + 5]                           # 004780B0
    and dh, 3                                            # 004780B3
    movzx bp, byte ptr [esi + 5]                         # 004780B6
    shr bp, 4                                            # 004780BB
    mov bh, byte ptr [esi]                               # 004780BF
    and bh, 3                                            # 004780C1
    mov bl, 1                                            # 004780C4
    mov esi, 0x27                                        # 004780C6
    call _sub_431315                                     # 004780CB
    pop ebx                                              # 004780D0
    mov byte ptr [__9C68EB], bl                          # 004780D1
    popal                                                # 004780D7
    msvc_xor esi, esi                                    # 004780D8
    ret                                                  # 004780DA
.L4780DB:
    popal                                                # 004780DB
.L4780DC:
    ret                                                  # 004780DC

    .global _sub_4780DD
_sub_4780DD:
    cmp al, 3                                            # 004780DD
    je .L478151                                          # 004780DF
    cmp al, 1                                            # 004780E1
    je .L47810D                                          # 004780E3
    ja .L47811A                                          # 004780E5
    lea ebp, [esi + 0x12]                                # 004780E7
    msvc_xor edx, edx                                    # 004780EA
    call _sub_472172                                     # 004780EC
    mov word ptr [esi], ax                               # 004780F1
    call _sub_47221F                                     # 004780F4
    mov dword ptr [esi + 0xe], eax                       # 004780F9
    mov edi, dword ptr [__50D158]                        # 004780FC
    cmp edi, -1                                          # 00478102
    je .L47810C                                          # 00478105
    mov word ptr [edi], 0                                # 00478107
.L47810C:
    ret                                                  # 0047810C
.L47810D:
    mov word ptr [esi], 0                                # 0047810D
    mov dword ptr [esi + 0xe], 0                         # 00478112
    ret                                                  # 00478119
.L47811A:
    movsx eax, word ptr [esi + 2]                        # 0047811A
    mov bx, word ptr [esi + 4]                           # 0047811E
    neg bx                                               # 00478122
    msvc_cmp bx, ax                                      # 00478125
    jg .L47814F                                          # 00478128
    cmp word ptr [esi + 2], 0                            # 0047812A
    jle .L47814F                                         # 0047812F
    mov al, byte ptr [esi + 8]                           # 00478131
    cmp al, 1                                            # 00478134
    je .L47814C                                          # 00478136
    cmp al, 2                                            # 00478138
    je .L47814C                                          # 0047813A
    cmp al, 4                                            # 0047813C
    je .L47814C                                          # 0047813E
    cmp al, 8                                            # 00478140
    je .L47814C                                          # 00478142
    cmp al, 0x10                                         # 00478144
    je .L47814C                                          # 00478146
    cmp al, 0x20                                         # 00478148
    jne .L47814F                                         # 0047814A
.L47814C:
    msvc_and eax, eax                                    # 0047814C
    ret                                                  # 0047814E
.L47814F:
    stc                                                  # 0047814F
    ret                                                  # 00478150
.L478151:
    push esi                                             # 00478151
    msvc_or ah, ah                                       # 00478152
    jne .L4781A4                                         # 00478154
    movzx ebx, byte ptr [ebp + 9]                        # 00478156
    inc ebx                                              # 0047815A
    shl ebx, 3                                           # 0047815B
    push ecx                                             # 0047815E
    mov eax, dword ptr [_scenarioChunk3+326]             # 0047815F
    mov cl, byte ptr [ebp + 7]                           # 00478164
    shr eax, cl                                          # 00478167
    movzx ecx, byte ptr [ebp + 8]                        # 00478169
    dec ecx                                              # 0047816D
    msvc_and eax, ecx                                    # 0047816E
    shl eax, 3                                           # 00478170
    msvc_add ebx, eax                                    # 00478173
    pop ecx                                              # 00478175
    add ebx, dword ptr [ebp + 0xe]                       # 00478176
    push ebx                                             # 00478179
    push ecx                                             # 0047817A
    push edx                                             # 0047817B
    call _sub_448C79                                     # 0047817C
    pop edx                                              # 00478181
    pop ecx                                              # 00478182
    pop ebx                                              # 00478183
    inc ebx                                              # 00478184
    push ebx                                             # 00478185
    push ecx                                             # 00478186
    push edx                                             # 00478187
    call _sub_448C79                                     # 00478188
    pop edx                                              # 0047818D
    pop ecx                                              # 0047818E
    pop ebx                                              # 0047818F
    inc ebx                                              # 00478190
    push ebx                                             # 00478191
    push ecx                                             # 00478192
    push edx                                             # 00478193
    call _sub_448C79                                     # 00478194
    pop edx                                              # 00478199
    pop ecx                                              # 0047819A
    pop ebx                                              # 0047819B
    inc ebx                                              # 0047819C
    call _sub_448C79                                     # 0047819D
    pop esi                                              # 004781A2
    ret                                                  # 004781A3
.L4781A4:
    cmp word ptr [ebp + 0xc], 0                          # 004781A4
    je .L4781C3                                          # 004781A9
    push ecx                                             # 004781AB
    push edx                                             # 004781AC
    push ebp                                             # 004781AD
    lea esi, [ebp + 0xc]                                 # 004781AE
    mov bx, 0x6bb                                        # 004781B1
    msvc_xor al, al                                      # 004781B5
    call _sub_494B3F                                     # 004781B7
    pop ebp                                              # 004781BC
    pop edx                                              # 004781BD
    pop ecx                                              # 004781BE
    add dx, 0xa                                          # 004781BF
.L4781C3:
    pop esi                                              # 004781C3
    ret                                                  # 004781C4

    .global _sub_4781C5
_sub_4781C5:
    push ebx                                             # 004781C5
    push ecx                                             # 004781C6
    push edx                                             # 004781C7
    push esi                                             # 004781C8
    push ebp                                             # 004781C9
    mov dword ptr [edi], 0xffffffff                      # 004781CA
    push edi                                             # 004781D0
    msvc_xor ebx, ebx                                    # 004781D1
    movzx esi, byte ptr [__9C68EB]                       # 004781D3
    imul esi, esi, 0x8fa8                                # 004781DA
    msvc_xor ecx, ecx                                    # 004781E0
.L4781E2:
    mov ebp, dword ptr [ecx*4 + _vehicleObjects]         # 004781E2
    cmp ebp, -1                                          # 004781E9
    je .L478234                                          # 004781EC
    cmp byte ptr [ebp + 2], 1                            # 004781EE
    jne .L478234                                         # 004781F2
    cmp al, byte ptr [ebp + 5]                           # 004781F4
    jne .L478234                                         # 004781F7
    msvc_mov edi, ecx                                    # 004781F9
    msvc_mov edx, ecx                                    # 004781FB
    and edx, 0x1f                                        # 004781FD
    shr edi, 5                                           # 00478200
    bt dword ptr [esi + edi*4 + _companies+52], edx      # 00478203
    jae .L478234                                         # 0047820B
    msvc_xor edx, edx                                    # 0047820D
.L47820F:
    cmp dl, byte ptr [ebp + 6]                           # 0047820F
    jae .L47821F                                         # 00478212
    movzx edi, byte ptr [edx + ebp + 0x20]               # 00478214
    bts ebx, edi                                         # 00478219
    inc edx                                              # 0047821C
    jmp .L47820F                                         # 0047821D
.L47821F:
    test word ptr [ebp + 0xe0], 0x40                     # 0047821F
    je .L478234                                          # 00478228
    movzx edi, byte ptr [ebp + 0x118]                    # 0047822A
    bts ebx, edi                                         # 00478231
.L478234:
    inc ecx                                              # 00478234
    cmp ecx, 0xe0                                        # 00478235
    jb .L4781E2                                          # 0047823B
    pop edi                                              # 0047823D
    movzx ebp, al                                        # 0047823E
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 00478241
    msvc_xor ecx, ecx                                    # 00478248
.L47824A:
    cmp cl, byte ptr [ebp + 0x25]                        # 0047824A
    jae .L47825F                                         # 0047824D
    movzx edx, byte ptr [ecx + ebp + 0x26]               # 0047824F
    bt ebx, edx                                          # 00478254
    jae .L47825B                                         # 00478257
    mov byte ptr [edi], dl                               # 00478259
.L47825B:
    inc edi                                              # 0047825B
    inc ecx                                              # 0047825C
    jmp .L47824A                                         # 0047825D
.L47825F:
    pop ebp                                              # 0047825F
    pop esi                                              # 00478260
    pop edx                                              # 00478261
    pop ecx                                              # 00478262
    pop ebx                                              # 00478263
    ret                                                  # 00478264

    .global _sub_478265
_sub_478265:
    push eax                                             # 00478265
    push ebx                                             # 00478266
    push ecx                                             # 00478267
    push edx                                             # 00478268
    push esi                                             # 00478269
    push ebp                                             # 0047826A
    msvc_xor ebx, ebx                                    # 0047826B
    movzx esi, byte ptr [__9C68EB]                       # 0047826D
    imul esi, esi, 0x8fa8                                # 00478274
    msvc_xor ecx, ecx                                    # 0047827A
.L47827C:
    mov ebp, dword ptr [ecx*4 + _vehicleObjects]         # 0047827C
    cmp ebp, -1                                          # 00478283
    je .L4782AE                                          # 00478286
    msvc_mov eax, ecx                                    # 00478288
    msvc_mov edx, ecx                                    # 0047828A
    and edx, 0x1f                                        # 0047828C
    shr eax, 5                                           # 0047828F
    bt dword ptr [esi + eax*4 + _companies+52], edx      # 00478292
    jae .L4782AE                                         # 0047829A
    cmp byte ptr [ebp + 2], 1                            # 0047829C
    jne .L4782AE                                         # 004782A0
    movsx eax, byte ptr [ebp + 5]                        # 004782A2
    cmp eax, -1                                          # 004782A6
    je .L4782AE                                          # 004782A9
    bts ebx, eax                                         # 004782AB
.L4782AE:
    inc ecx                                              # 004782AE
    cmp ecx, 0xe0                                        # 004782AF
    jb .L47827C                                          # 004782B5
    msvc_xor ecx, ecx                                    # 004782B7
.L4782B9:
    mov ebp, dword ptr [ecx*4 + _roadObjects]            # 004782B9
    cmp ebp, -1                                          # 004782C0
    je .L4782D0                                          # 004782C3
    test word ptr [ebp + 0x12], 8                        # 004782C5
    je .L4782D0                                          # 004782CB
    bts ebx, ecx                                         # 004782CD
.L4782D0:
    inc ecx                                              # 004782D0
    cmp ecx, 8                                           # 004782D1
    jb .L4782B9                                          # 004782D4
.L4782D6:
    bsf eax, ebx                                         # 004782D6
    je .L4782F4                                          # 004782D9
    btr ebx, eax                                         # 004782DB
    mov ebp, dword ptr [eax*4 + _roadObjects]            # 004782DE
    test word ptr [ebp + 0x12], 2                        # 004782E5
    jne .L4782D6                                         # 004782EB
    or al, 0x80                                          # 004782ED
    mov byte ptr [edi], al                               # 004782EF
    inc edi                                              # 004782F1
    jmp .L4782D6                                         # 004782F2
.L4782F4:
    msvc_xor ebx, ebx                                    # 004782F4
    movzx esi, byte ptr [__9C68EB]                       # 004782F6
    imul esi, esi, 0x8fa8                                # 004782FD
    msvc_xor ecx, ecx                                    # 00478303
.L478305:
    mov ebp, dword ptr [ecx*4 + _vehicleObjects]         # 00478305
    cmp ebp, -1                                          # 0047830C
    je .L478332                                          # 0047830F
    msvc_mov eax, ecx                                    # 00478311
    msvc_mov edx, ecx                                    # 00478313
    and edx, 0x1f                                        # 00478315
    shr eax, 5                                           # 00478318
    bt dword ptr [esi + eax*4 + _companies+52], edx      # 0047831B
    jae .L478332                                         # 00478323
    cmp byte ptr [ebp + 2], 0                            # 00478325
    jne .L478332                                         # 00478329
    movzx eax, byte ptr [ebp + 5]                        # 0047832B
    bts ebx, eax                                         # 0047832F
.L478332:
    inc ecx                                              # 00478332
    cmp ecx, 0xe0                                        # 00478333
    jb .L478305                                          # 00478339
.L47833B:
    bsf eax, ebx                                         # 0047833B
    je .L478357                                          # 0047833E
    btr ebx, eax                                         # 00478340
    mov ebp, dword ptr [eax*4 + _trackObjects]           # 00478343
    test word ptr [ebp + 0x22], 4                        # 0047834A
    je .L47833B                                          # 00478350
    mov byte ptr [edi], al                               # 00478352
    inc edi                                              # 00478354
    jmp .L47833B                                         # 00478355
.L478357:
    mov byte ptr [edi], 0xff                             # 00478357
    pop ebp                                              # 0047835A
    pop esi                                              # 0047835B
    pop edx                                              # 0047835C
    pop ecx                                              # 0047835D
    pop ebx                                              # 0047835E
    pop eax                                              # 0047835F
    ret                                                  # 00478360

    .global _sub_478361
_sub_478361:
    mov word ptr [__113600C], ax                         # 00478361
    mov word ptr [__113600E], bx                         # 00478367
    push esi                                             # 0047836E
    mov edx, 0xffffffdf                                  # 0047836F
    call _sub_459E54                                     # 00478374
    mov dword ptr [__1135F52], edi                       # 00478379
    cmp bl, 0x10                                         # 0047837F
    jne _sub_478412                                      # 00478382
    msvc_mov esi, edx                                    # 00478388
    movzx di, byte ptr [esi + 2]                         # 0047838A
    shl di, 2                                            # 0047838F
    mov bh, byte ptr [esi]                               # 00478393
    and bh, 3                                            # 00478395
    mov dl, byte ptr [esi + 4]                           # 00478398
    and dl, 0xf                                          # 0047839B
    movzx bp, byte ptr [esi + 5]                         # 0047839E
    shr bp, 4                                            # 004783A3
    push edx                                             # 004783A7
    push esi                                             # 004783A8
    msvc_mov edx, esi                                    # 004783A9
    mov esi, dword ptr [__1135F52]                       # 004783AB
    call _sub_4784CA                                     # 004783B1
    msvc_or dl, dl                                       # 004783B6
    pop esi                                              # 004783B8
    pop edx                                              # 004783B9
    mov dh, 0                                            # 004783BA
    je .L4783C0                                          # 004783BC
    inc dh                                               # 004783BE
.L4783C0:
    push ebx                                             # 004783C0
    push ebp                                             # 004783C1
    movzx ebx, bh                                        # 004783C2
    movzx ebp, dl                                        # 004783C5
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 004783C8
    movzx esi, byte ptr [esi + 5]                        # 004783CF
    and esi, 3                                           # 004783D3
    imul esi, esi, 0xa                                   # 004783D6
    msvc_add ebp, esi                                    # 004783D9
    jmp dword ptr [ebx*4 + __4FE520]                     # 004783DB

    .global _sub_4783E2
_sub_4783E2:
    sub ax, word ptr [ebp + 1]                           # 004783E2
    sub cx, word ptr [ebp + 3]                           # 004783E6
    jmp _sub_478408                                      # 004783EA

    .global _sub_4783EC
_sub_4783EC:
    sub ax, word ptr [ebp + 3]                           # 004783EC
    add cx, word ptr [ebp + 1]                           # 004783F0
    jmp _sub_478408                                      # 004783F4

    .global _sub_4783F6
_sub_4783F6:
    add ax, word ptr [ebp + 1]                           # 004783F6
    add cx, word ptr [ebp + 3]                           # 004783FA
    jmp _sub_478408                                      # 004783FE

    .global _sub_478400
_sub_478400:
    add ax, word ptr [ebp + 3]                           # 00478400
    sub cx, word ptr [ebp + 1]                           # 00478404

    .global _sub_478408
_sub_478408:
    sub di, word ptr [ebp + 5]                           # 00478408
    pop ebp                                              # 0047840C
    pop ebx                                              # 0047840D
    pop esi                                              # 0047840E
    msvc_and eax, eax                                    # 0047840F
    ret                                                  # 00478411

    .global _sub_478412
_sub_478412:
    pop esi                                              # 00478412
    stc                                                  # 00478413
    ret                                                  # 00478414

    .global _sub_478415
_sub_478415:
    mov word ptr [__113600C], ax                         # 00478415
    mov word ptr [__113600E], bx                         # 0047841B
    push esi                                             # 00478422
    mov edx, 0xffffffdf                                  # 00478423
    call _sub_459E54                                     # 00478428
    mov dword ptr [__1135F52], edi                       # 0047842D
    cmp bl, 0x10                                         # 00478433
    jne _sub_4784C7                                      # 00478436
    msvc_mov esi, edx                                    # 0047843C
    movzx di, byte ptr [esi + 2]                         # 0047843E
    shl di, 2                                            # 00478443
    mov bh, byte ptr [esi]                               # 00478447
    and bh, 3                                            # 00478449
    mov dl, byte ptr [esi + 4]                           # 0047844C
    and dl, 0xf                                          # 0047844F
    movzx bp, byte ptr [esi + 5]                         # 00478452
    shr bp, 4                                            # 00478457
    push edx                                             # 0047845B
    push esi                                             # 0047845C
    msvc_mov edx, esi                                    # 0047845D
    mov esi, dword ptr [__1135F52]                       # 0047845F
    call _sub_478734                                     # 00478465
    ror edi, 0x10                                        # 0047846A
    msvc_mov di, dx                                      # 0047846D
    ror edi, 0x10                                        # 00478470
    pop esi                                              # 00478473
    pop edx                                              # 00478474
    push ebx                                             # 00478475
    push ebp                                             # 00478476
    movzx ebx, bh                                        # 00478477
    movzx ebp, dl                                        # 0047847A
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047847D
    movzx esi, byte ptr [esi + 5]                        # 00478484
    and esi, 3                                           # 00478488
    imul esi, esi, 0xa                                   # 0047848B
    msvc_add ebp, esi                                    # 0047848E
    jmp dword ptr [ebx*4 + __4FE530]                     # 00478490

    .global _sub_478497
_sub_478497:
    sub ax, word ptr [ebp + 1]                           # 00478497
    sub cx, word ptr [ebp + 3]                           # 0047849B
    jmp _sub_4784BD                                      # 0047849F

    .global _sub_4784A1
_sub_4784A1:
    sub ax, word ptr [ebp + 3]                           # 004784A1
    add cx, word ptr [ebp + 1]                           # 004784A5
    jmp _sub_4784BD                                      # 004784A9

    .global _sub_4784AB
_sub_4784AB:
    add ax, word ptr [ebp + 1]                           # 004784AB
    add cx, word ptr [ebp + 3]                           # 004784AF
    jmp _sub_4784BD                                      # 004784B3

    .global _sub_4784B5
_sub_4784B5:
    add ax, word ptr [ebp + 3]                           # 004784B5
    sub cx, word ptr [ebp + 1]                           # 004784B9

    .global _sub_4784BD
_sub_4784BD:
    sub di, word ptr [ebp + 5]                           # 004784BD
    pop ebp                                              # 004784C1
    pop ebx                                              # 004784C2
    pop esi                                              # 004784C3
    msvc_and eax, eax                                    # 004784C4
    ret                                                  # 004784C6

    .global _sub_4784C7
_sub_4784C7:
    pop esi                                              # 004784C7
    stc                                                  # 004784C8
    ret                                                  # 004784C9

    .global _sub_4784CA
_sub_4784CA:
    push eax                                             # 004784CA
    push ebx                                             # 004784CB
    push ecx                                             # 004784CC
    push edi                                             # 004784CD
    push esi                                             # 004784CE
    push ebp                                             # 004784CF
    movzx ebp, byte ptr [edx + 4]                        # 004784D0
    and ebp, 0xf                                         # 004784D4
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 004784D7
    movzx esi, byte ptr [edx + 5]                        # 004784DE
    and esi, 3                                           # 004784E2
    imul esi, esi, 0xa                                   # 004784E5
    msvc_add ebp, esi                                    # 004784E8
    mov bl, byte ptr [edx]                               # 004784EA
    and ebx, 3                                           # 004784EC
    movzx di, byte ptr [edx + 2]                         # 004784EF
    shl di, 2                                            # 004784F4
    jmp dword ptr [ebx*4 + __4FE540]                     # 004784F8

    .global _sub_4784FF
_sub_4784FF:
    sub ax, word ptr [ebp + 1]                           # 004784FF
    sub cx, word ptr [ebp + 3]                           # 00478503
    jmp _sub_478525                                      # 00478507

    .global _sub_478509
_sub_478509:
    sub ax, word ptr [ebp + 3]                           # 00478509
    add cx, word ptr [ebp + 1]                           # 0047850D
    jmp _sub_478525                                      # 00478511

    .global _sub_478513
_sub_478513:
    add ax, word ptr [ebp + 1]                           # 00478513
    add cx, word ptr [ebp + 3]                           # 00478517
    jmp _sub_478525                                      # 0047851B

    .global _sub_47851D
_sub_47851D:
    add ax, word ptr [ebp + 3]                           # 0047851D
    sub cx, word ptr [ebp + 1]                           # 00478521

    .global _sub_478525
_sub_478525:
    sub di, word ptr [ebp + 5]                           # 00478525
    mov bl, byte ptr [edx + 4]                           # 00478529
    and ebx, 0xf                                         # 0047852C
    mov dl, byte ptr [edx]                               # 0047852F
    shl ebx, 3                                           # 00478531
    and dl, 3                                            # 00478534
    msvc_or bl, dl                                       # 00478537
    push eax                                             # 00478539
    push ecx                                             # 0047853A
    push edx                                             # 0047853B
    push edi                                             # 0047853C
    add ax, word ptr [ebx*8 + __4F6F8E]                  # 0047853D
    add cx, word ptr [ebx*8 + __4F6F90]                  # 00478545
    add di, word ptr [ebx*8 + __4F6F92]                  # 0047854D
    mov dl, byte ptr [ebx*8 + __4F6F8D]                  # 00478555
    mov word ptr [__1135FC6], ax                         # 0047855C
    mov word ptr [__1135FC8], cx                         # 00478562
    mov word ptr [__1135FCA], di                         # 00478569
    mov word ptr [__1135FCC], dx                         # 00478570
    pop edi                                              # 00478577
    pop edx                                              # 00478578
    pop ecx                                              # 00478579
    pop eax                                              # 0047857A
    movzx edx, byte ptr [ebx*8 + __4F6F8C]               # 0047857B
    movzx edx, byte ptr [edx + __503CAC]                 # 00478583
    mov word ptr [__1135FD4], dx                         # 0047858A
    cmp dl, 0xc                                          # 00478591
    jae .L4785A6                                         # 00478594
    add ax, word ptr [edx*4 + __503C6C]                  # 00478596
    add cx, word ptr [edx*4 + __503C6E]                  # 0047859E
.L4785A6:
    mov word ptr [__1135FCE], ax                         # 004785A6
    mov word ptr [__1135FD0], cx                         # 004785AC
    mov word ptr [__1135FD2], di                         # 004785B3
    mov ax, word ptr [__1135FC6]                         # 004785BA
    mov cx, word ptr [__1135FC8]                         # 004785C0
    add ax, 0x10                                         # 004785C7
    add cx, 0x10                                         # 004785CB
    mov dx, word ptr [__1135FCA]                         # 004785CF
    mov ebx, dword ptr [__E3F0B8]                        # 004785D6
    jmp dword ptr [ebx*4 + __4FE550]                     # 004785DC

    .global _sub_4785E3
_sub_4785E3:
    msvc_mov bx, ax                                      # 004785E3
    neg ax                                               # 004785E6
    msvc_add ax, cx                                      # 004785E9
    msvc_add cx, bx                                      # 004785EC
    sar cx, 1                                            # 004785EF
    msvc_sub cx, dx                                      # 004785F2
    jmp _sub_478631                                      # 004785F5

    .global _sub_4785F7
_sub_4785F7:
    neg ax                                               # 004785F7
    msvc_mov bx, ax                                      # 004785FA
    msvc_sub ax, cx                                      # 004785FD
    msvc_add cx, bx                                      # 00478600
    sar cx, 1                                            # 00478603
    msvc_sub cx, dx                                      # 00478606
    jmp _sub_478631                                      # 00478609

    .global _sub_47860B
_sub_47860B:
    msvc_mov bx, ax                                      # 0047860B
    msvc_sub ax, cx                                      # 0047860E
    neg cx                                               # 00478611
    msvc_sub cx, bx                                      # 00478614
    sar cx, 1                                            # 00478617
    msvc_sub cx, dx                                      # 0047861A
    jmp _sub_478631                                      # 0047861D

    .global _sub_47861F
_sub_47861F:
    msvc_mov bx, ax                                      # 0047861F
    msvc_add ax, cx                                      # 00478622
    neg cx                                               # 00478625
    msvc_add cx, bx                                      # 00478628
    sar cx, 1                                            # 0047862B
    msvc_sub cx, dx                                      # 0047862E

    .global _sub_478631
_sub_478631:
    msvc_mov bx, cx                                      # 00478631
    mov edi, dword ptr [esp + 4]                         # 00478634
    mov cl, byte ptr [edi + 0x10]                        # 00478638
    sub ax, word ptr [edi + 8]                           # 0047863B
    sub bx, word ptr [edi + 0xa]                         # 0047863F
    sar ax, cl                                           # 00478643
    sar bx, cl                                           # 00478646
    add ax, word ptr [edi + 4]                           # 00478649
    add bx, word ptr [edi + 6]                           # 0047864D
    sub ax, word ptr [__113600C]                         # 00478651
    jns .L47865D                                         # 00478658
    neg ax                                               # 0047865A
.L47865D:
    sub bx, word ptr [__113600E]                         # 0047865D
    jns .L478669                                         # 00478664
    neg bx                                               # 00478666
.L478669:
    msvc_add ax, bx                                      # 00478669
    msvc_mov bp, ax                                      # 0047866C
    mov ax, word ptr [__1135FCE]                         # 0047866F
    mov cx, word ptr [__1135FD0]                         # 00478675
    add ax, 0x10                                         # 0047867C
    add cx, 0x10                                         # 00478680
    mov dx, word ptr [__1135FD2]                         # 00478684
    mov ebx, dword ptr [__E3F0B8]                        # 0047868B
    jmp dword ptr [ebx*4 + __4FE560]                     # 00478691

    .global _sub_478698
_sub_478698:
    msvc_mov bx, ax                                      # 00478698
    neg ax                                               # 0047869B
    msvc_add ax, cx                                      # 0047869E
    msvc_add cx, bx                                      # 004786A1
    sar cx, 1                                            # 004786A4
    msvc_sub cx, dx                                      # 004786A7
    jmp _sub_4786E6                                      # 004786AA

    .global _sub_4786AC
_sub_4786AC:
    neg ax                                               # 004786AC
    msvc_mov bx, ax                                      # 004786AF
    msvc_sub ax, cx                                      # 004786B2
    msvc_add cx, bx                                      # 004786B5
    sar cx, 1                                            # 004786B8
    msvc_sub cx, dx                                      # 004786BB
    jmp _sub_4786E6                                      # 004786BE

    .global _sub_4786C0
_sub_4786C0:
    msvc_mov bx, ax                                      # 004786C0
    msvc_sub ax, cx                                      # 004786C3
    neg cx                                               # 004786C6
    msvc_sub cx, bx                                      # 004786C9
    sar cx, 1                                            # 004786CC
    msvc_sub cx, dx                                      # 004786CF
    jmp _sub_4786E6                                      # 004786D2

    .global _sub_4786D4
_sub_4786D4:
    msvc_mov bx, ax                                      # 004786D4
    msvc_add ax, cx                                      # 004786D7
    neg cx                                               # 004786DA
    msvc_add cx, bx                                      # 004786DD
    sar cx, 1                                            # 004786E0
    msvc_sub cx, dx                                      # 004786E3

    .global _sub_4786E6
_sub_4786E6:
    msvc_mov bx, cx                                      # 004786E6
    mov edi, dword ptr [esp + 4]                         # 004786E9
    mov cl, byte ptr [edi + 0x10]                        # 004786ED
    sub ax, word ptr [edi + 8]                           # 004786F0
    sub bx, word ptr [edi + 0xa]                         # 004786F4
    sar ax, cl                                           # 004786F8
    sar bx, cl                                           # 004786FB
    add ax, word ptr [edi + 4]                           # 004786FE
    add bx, word ptr [edi + 6]                           # 00478702
    sub ax, word ptr [__113600C]                         # 00478706
    jns .L478712                                         # 0047870D
    neg ax                                               # 0047870F
.L478712:
    sub bx, word ptr [__113600E]                         # 00478712
    jns .L47871E                                         # 00478719
    neg bx                                               # 0047871B
.L47871E:
    msvc_add ax, bx                                      # 0047871E
    msvc_mov di, ax                                      # 00478721
    msvc_xor dl, dl                                      # 00478724
    msvc_cmp bp, di                                      # 00478726
    ja .L47872D                                          # 00478729
    inc dl                                               # 0047872B
.L47872D:
    pop ebp                                              # 0047872D
    pop esi                                              # 0047872E
    pop edi                                              # 0047872F
    pop ecx                                              # 00478730
    pop ebx                                              # 00478731
    pop eax                                              # 00478732
    ret                                                  # 00478733

    .global _sub_478734
_sub_478734:
    push eax                                             # 00478734
    push ebx                                             # 00478735
    push ecx                                             # 00478736
    push edi                                             # 00478737
    push esi                                             # 00478738
    push ebp                                             # 00478739
    movzx ebp, byte ptr [edx + 4]                        # 0047873A
    and ebp, 0xf                                         # 0047873E
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478741
    movzx esi, byte ptr [edx + 5]                        # 00478748
    and esi, 3                                           # 0047874C
    imul esi, esi, 0xa                                   # 0047874F
    msvc_add ebp, esi                                    # 00478752
    mov bl, byte ptr [edx]                               # 00478754
    and ebx, 3                                           # 00478756
    movzx di, byte ptr [edx + 2]                         # 00478759
    shl di, 2                                            # 0047875E
    jmp dword ptr [ebx*4 + __4FE570]                     # 00478762

    .global _sub_478769
_sub_478769:
    sub ax, word ptr [ebp + 1]                           # 00478769
    sub cx, word ptr [ebp + 3]                           # 0047876D
    jmp _sub_47878F                                      # 00478771

    .global _sub_478773
_sub_478773:
    sub ax, word ptr [ebp + 3]                           # 00478773
    add cx, word ptr [ebp + 1]                           # 00478777
    jmp _sub_47878F                                      # 0047877B

    .global _sub_47877D
_sub_47877D:
    add ax, word ptr [ebp + 1]                           # 0047877D
    add cx, word ptr [ebp + 3]                           # 00478781
    jmp _sub_47878F                                      # 00478785

    .global _sub_478787
_sub_478787:
    add ax, word ptr [ebp + 3]                           # 00478787
    sub cx, word ptr [ebp + 1]                           # 0047878B

    .global _sub_47878F
_sub_47878F:
    sub di, word ptr [ebp + 5]                           # 0047878F
    mov bl, byte ptr [edx + 4]                           # 00478793
    and ebx, 0xf                                         # 00478796
    mov dl, byte ptr [edx]                               # 00478799
    shl ebx, 3                                           # 0047879B
    and dl, 3                                            # 0047879E
    msvc_or bl, dl                                       # 004787A1
    mov ebp, dword ptr [ebx*4 + __4D9CA4]                # 004787A3
    movzx edx, word ptr [ebp - 2]                        # 004787AA
    mov word ptr [__1135FC6], 0xffff                     # 004787AE

    .global _sub_4787B7
_sub_4787B7:
    dec edx                                              # 004787B7
    js _sub_478884                                       # 004787B8
    push eax                                             # 004787BE
    push ecx                                             # 004787BF
    push edi                                             # 004787C0
    add ax, word ptr [ebp + edx*8]                       # 004787C1
    add cx, word ptr [ebp + edx*8 + 2]                   # 004787C6
    add di, word ptr [ebp + edx*8 + 4]                   # 004787CB
    mov ebx, dword ptr [__E3F0B8]                        # 004787D0
    jmp dword ptr [ebx*4 + __4FE580]                     # 004787D6

    .global _sub_4787DD
_sub_4787DD:
    msvc_mov bx, ax                                      # 004787DD
    neg ax                                               # 004787E0
    msvc_add ax, cx                                      # 004787E3
    msvc_add cx, bx                                      # 004787E6
    sar cx, 1                                            # 004787E9
    msvc_sub cx, di                                      # 004787EC
    jmp _sub_47882B                                      # 004787EF

    .global _sub_4787F1
_sub_4787F1:
    neg ax                                               # 004787F1
    msvc_mov bx, ax                                      # 004787F4
    msvc_sub ax, cx                                      # 004787F7
    msvc_add cx, bx                                      # 004787FA
    sar cx, 1                                            # 004787FD
    msvc_sub cx, di                                      # 00478800
    jmp _sub_47882B                                      # 00478803

    .global _sub_478805
_sub_478805:
    msvc_mov bx, ax                                      # 00478805
    msvc_sub ax, cx                                      # 00478808
    neg cx                                               # 0047880B
    msvc_sub cx, bx                                      # 0047880E
    sar cx, 1                                            # 00478811
    msvc_sub cx, di                                      # 00478814
    jmp _sub_47882B                                      # 00478817

    .global _sub_478819
_sub_478819:
    msvc_mov bx, ax                                      # 00478819
    msvc_add ax, cx                                      # 0047881C
    neg cx                                               # 0047881F
    msvc_add cx, bx                                      # 00478822
    sar cx, 1                                            # 00478825
    msvc_sub cx, di                                      # 00478828

    .global _sub_47882B
_sub_47882B:
    msvc_mov bx, cx                                      # 0047882B
    mov edi, dword ptr [esp + 0x10]                      # 0047882E
    mov cl, byte ptr [edi + 0x10]                        # 00478832
    sub ax, word ptr [edi + 8]                           # 00478835
    sub bx, word ptr [edi + 0xa]                         # 00478839
    sar ax, cl                                           # 0047883D
    sar bx, cl                                           # 00478840
    add ax, word ptr [edi + 4]                           # 00478843
    add bx, word ptr [edi + 6]                           # 00478847
    sub ax, word ptr [__113600C]                         # 0047884B
    jns .L478857                                         # 00478852
    neg ax                                               # 00478854
.L478857:
    sub bx, word ptr [__113600E]                         # 00478857
    jns .L478863                                         # 0047885E
    neg bx                                               # 00478860
.L478863:
    msvc_add ax, bx                                      # 00478863
    cmp ax, word ptr [__1135FC6]                         # 00478866
    jae .L47887C                                         # 0047886D
    mov word ptr [__1135FC6], ax                         # 0047886F
    mov word ptr [__1135FC8], dx                         # 00478875
.L47887C:
    pop edi                                              # 0047887C
    pop ecx                                              # 0047887D
    pop eax                                              # 0047887E
    msvc_jmp _sub_4787B7                                 # 0047887F

    .global _sub_478884
_sub_478884:
    movzx edx, word ptr [__1135FC8]                      # 00478884
    pop ebp                                              # 0047888B
    pop esi                                              # 0047888C
    pop edi                                              # 0047888D
    pop ecx                                              # 0047888E
    pop ebx                                              # 0047888F
    pop eax                                              # 00478890
    ret                                                  # 00478891

    .global _sub_478892
_sub_478892:
    pushal                                               # 00478892
    jmp .L4788C8                                         # 00478893

    .global _sub_478895
_sub_478895:
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00478895
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047889D
    add dx, word ptr [ebp*8 + __4F6F92]                  # 004788A5
    mov word ptr [__1135FAE], 0xffff                     # 004788AD
    pushal                                               # 004788B6
    shr dx, 2                                            # 004788B7
    mov dh, byte ptr [ebp*8 + __4F6F8D]                  # 004788BB
    mov byte ptr [__112C2EE], dh                         # 004788C2
.L4788C8:
    mov dword ptr [__1135EE6], edi                       # 004788C8
    movzx esi, cx                                        # 004788CE
    shl esi, 9                                           # 004788D1
    msvc_or si, ax                                       # 004788D4
    shr esi, 3                                           # 004788D7
    mov esi, dword ptr [esi + __E40134]                  # 004788DA
.L4788E0:
    mov al, byte ptr [esi]                               # 004788E0
    and al, 0x3c                                         # 004788E2
    cmp al, 0x1c                                         # 004788E4
    jne .L478AA5                                         # 004788E6
    movzx eax, byte ptr [esi + 5]                        # 004788EC
    shr eax, 4                                           # 004788F0
    bt dword ptr [_scenarioChunk3+424], eax              # 004788F3
    jb .L47890A                                          # 004788FA
    mov cl, byte ptr [esi + 7]                           # 004788FC
    and cl, 0xf                                          # 004788FF
    cmp cl, bl                                           # 00478902
    jne .L478AA5                                         # 00478904
.L47890A:
    cmp al, bh                                           # 0047890A
    je .L478924                                          # 0047890C
    cmp bh, 0xff                                         # 0047890E
    jne .L478AA5                                         # 00478911
    bt dword ptr [_scenarioChunk3+420], eax              # 00478917
    jae .L478AA5                                         # 0047891E
.L478924:
    mov al, byte ptr [esi + 7]                           # 00478924
    shr al, 6                                            # 00478927
    and al, byte ptr [__113601A]                         # 0047892A
    cmp al, byte ptr [__113601A]                         # 00478930
    jne .L478AA5                                         # 00478936
    test byte ptr [esi + 1], 0x30                        # 0047893C
    jne .L478AA5                                         # 00478940
    mov cl, byte ptr [esi + 4]                           # 00478946
    and ecx, 0xf                                         # 00478949
    shl ecx, 3                                           # 0047894C
    mov al, byte ptr [esi]                               # 0047894F
    and al, 3                                            # 00478951
    msvc_or cl, al                                       # 00478953
    test byte ptr [esi + 5], 3                           # 00478955
    jne .L4789F9                                         # 00478959
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 0047895F
    jne .L4789F9                                         # 00478966
    msvc_mov ebp, ecx                                    # 0047896C
    shr ebp, 3                                           # 0047896E
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478971
    mov ax, word ptr [ebp + 5]                           # 00478978
    sar ax, 2                                            # 0047897C
    neg al                                               # 00478980
    add al, byte ptr [esi + 2]                           # 00478982
    cmp al, dl                                           # 00478985
    jne .L4789F9                                         # 00478987
    test byte ptr [esi + 4], 0x80                        # 00478989
    je .L4789A2                                          # 0047898D
    mov al, byte ptr [esi + 6]                           # 0047898F
    and ax, 0xe0                                         # 00478992
    or cx, 0x1000                                        # 00478996
    shl ax, 4                                            # 0047899B
    msvc_or cx, ax                                       # 0047899F
.L4789A2:
    mov al, byte ptr [esi + 7]                           # 004789A2
    shr al, 6                                            # 004789A5
    test byte ptr [__113601B], al                        # 004789A8
    je .L4789B5                                          # 004789AE
    or cx, 0x2000                                        # 004789B0
.L4789B5:
    test byte ptr [esi], 0x80                            # 004789B5
    je .L4789E5                                          # 004789B8
    push esi                                             # 004789BA
.L4789BB:
    add esi, 8                                           # 004789BB
    mov al, byte ptr [esi]                               # 004789BE
    and al, 0x3c                                         # 004789C0
    cmp al, 8                                            # 004789C2
    jne .L4789BB                                         # 004789C4
    test byte ptr [esi + 1], 0x30                        # 004789C6
    jne .L4789E4                                         # 004789CA
    mov ax, word ptr [esi + 6]                           # 004789CC
    and ax, 0x3ff                                        # 004789D0
    mov word ptr [__1135FAE], ax                         # 004789D4
    mov al, byte ptr [esi + 5]                           # 004789DA
    and al, 0x1f                                         # 004789DD
    mov byte ptr [__1136087], al                         # 004789DF
.L4789E4:
    pop esi                                              # 004789E4
.L4789E5:
    mov al, byte ptr [esi + 5]                           # 004789E5
    shr al, 4                                            # 004789E8
    mov byte ptr [__112C2ED], al                         # 004789EB
    mov word ptr [edi], cx                               # 004789F0
    add edi, 2                                           # 004789F3
    and ecx, 0x7b                                        # 004789F6
.L4789F9:
    test byte ptr [esi + 1], 0x40                        # 004789F9
    je .L478AA5                                          # 004789FD
    or ecx, 4                                            # 00478A03
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 00478A06
    jne .L478AA5                                         # 00478A0D
    msvc_mov ebp, ecx                                    # 00478A13
    shr ebp, 3                                           # 00478A15
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478A18
    mov al, byte ptr [esi + 5]                           # 00478A1F
    and eax, 3                                           # 00478A22
    imul eax, eax, 0xa                                   # 00478A25
    msvc_add ebp, eax                                    # 00478A28
    mov ax, word ptr [ebp + 5]                           # 00478A2A
    add ax, word ptr [ecx*8 + __4F6F92]                  # 00478A2E
    sar ax, 2                                            # 00478A36
    neg al                                               # 00478A3A
    add al, byte ptr [esi + 2]                           # 00478A3C
    cmp al, dl                                           # 00478A3F
    jne .L478AA5                                         # 00478A41
    test byte ptr [esi + 4], 0x80                        # 00478A43
    je .L478A5C                                          # 00478A47
    mov al, byte ptr [esi + 6]                           # 00478A49
    and ax, 0xe0                                         # 00478A4C
    or cx, 0x1000                                        # 00478A50
    shl ax, 4                                            # 00478A55
    msvc_or cx, ax                                       # 00478A59
.L478A5C:
    mov al, byte ptr [esi + 7]                           # 00478A5C
    shr al, 6                                            # 00478A5F
    test byte ptr [__113601B], al                        # 00478A62
    je .L478A6F                                          # 00478A68
    or cx, 0x2000                                        # 00478A6A
.L478A6F:
    test byte ptr [esi], 0x80                            # 00478A6F
    je .L478A9F                                          # 00478A72
    push esi                                             # 00478A74
.L478A75:
    add esi, 8                                           # 00478A75
    mov al, byte ptr [esi]                               # 00478A78
    and al, 0x3c                                         # 00478A7A
    cmp al, 8                                            # 00478A7C
    jne .L478A75                                         # 00478A7E
    test byte ptr [esi + 1], 0x30                        # 00478A80
    jne .L478A9E                                         # 00478A84
    mov ax, word ptr [esi + 6]                           # 00478A86
    and ax, 0x3ff                                        # 00478A8A
    mov word ptr [__1135FAE], ax                         # 00478A8E
    mov al, byte ptr [esi + 5]                           # 00478A94
    and al, 0x1f                                         # 00478A97
    mov byte ptr [__1136087], al                         # 00478A99
.L478A9E:
    pop esi                                              # 00478A9E
.L478A9F:
    mov word ptr [edi], cx                               # 00478A9F
    add edi, 2                                           # 00478AA2
.L478AA5:
    add esi, 8                                           # 00478AA5
    test byte ptr [esi - 7], 0x80                        # 00478AA8
    je .L4788E0                                          # 00478AAC
    mov word ptr [edi], 0xffff                           # 00478AB2
    mov esi, dword ptr [__1135EE6]                       # 00478AB7
    msvc_sub edi, esi                                    # 00478ABD
    shr edi, 1                                           # 00478ABF
    mov dword ptr [esi - 4], edi                         # 00478AC1
    popal                                                # 00478AC4
    ret                                                  # 00478AC5

    .global _sub_478AC6
_sub_478AC6:
    pushal                                               # 00478AC6
    jmp .L478AF6                                         # 00478AC7

    .global _sub_478AC9
_sub_478AC9:
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00478AC9
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00478AD1
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00478AD9
    mov word ptr [__1135FAE], 0xffff                     # 00478AE1
    pushal                                               # 00478AEA
    shr dx, 2                                            # 00478AEB
    mov dh, byte ptr [ebp*8 + __4F6F8D]                  # 00478AEF
.L478AF6:
    mov byte ptr [__112C2EE], dh                         # 00478AF6
    mov dword ptr [__1135EE6], edi                       # 00478AFC
    movzx esi, cx                                        # 00478B02
    shl esi, 9                                           # 00478B05
    msvc_or si, ax                                       # 00478B08
    shr esi, 3                                           # 00478B0B
    mov esi, dword ptr [esi + __E40134]                  # 00478B0E
.L478B14:
    mov al, byte ptr [esi]                               # 00478B14
    and al, 0x3c                                         # 00478B16
    cmp al, 0x1c                                         # 00478B18
    jne .L478CC5                                         # 00478B1A
    movzx eax, byte ptr [esi + 5]                        # 00478B20
    shr eax, 4                                           # 00478B24
    bt dword ptr [_scenarioChunk3+424], eax              # 00478B27
    jb .L478B3E                                          # 00478B2E
    mov cl, byte ptr [esi + 7]                           # 00478B30
    and cl, 0xf                                          # 00478B33
    cmp cl, bl                                           # 00478B36
    jne .L478CC5                                         # 00478B38
.L478B3E:
    cmp al, bh                                           # 00478B3E
    je .L478B58                                          # 00478B40
    cmp bh, 0xff                                         # 00478B42
    jne .L478CC5                                         # 00478B45
    bt dword ptr [_scenarioChunk3+420], eax              # 00478B4B
    jae .L478CC5                                         # 00478B52
.L478B58:
    mov al, byte ptr [esi + 7]                           # 00478B58
    shr al, 6                                            # 00478B5B
    and al, byte ptr [__113601A]                         # 00478B5E
    cmp al, byte ptr [__113601A]                         # 00478B64
    jne .L478CC5                                         # 00478B6A
    test byte ptr [esi + 1], 0x20                        # 00478B70
    je .L478CC5                                          # 00478B74
    mov cl, byte ptr [esi + 4]                           # 00478B7A
    and ecx, 0xf                                         # 00478B7D
    shl ecx, 3                                           # 00478B80
    mov al, byte ptr [esi]                               # 00478B83
    and al, 3                                            # 00478B85
    msvc_or cl, al                                       # 00478B87
    test byte ptr [esi + 5], 3                           # 00478B89
    jne .L478C23                                         # 00478B8D
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 00478B93
    jne .L478C23                                         # 00478B9A
    msvc_mov ebp, ecx                                    # 00478BA0
    shr ebp, 3                                           # 00478BA2
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478BA5
    mov ax, word ptr [ebp + 5]                           # 00478BAC
    sar ax, 2                                            # 00478BB0
    neg al                                               # 00478BB4
    add al, byte ptr [esi + 2]                           # 00478BB6
    cmp al, dl                                           # 00478BB9
    jne .L478C23                                         # 00478BBB
    test byte ptr [esi + 4], 0x80                        # 00478BBD
    je .L478BD6                                          # 00478BC1
    mov al, byte ptr [esi + 6]                           # 00478BC3
    and ax, 0xe0                                         # 00478BC6
    or cx, 0x1000                                        # 00478BCA
    shl ax, 4                                            # 00478BCF
    msvc_or cx, ax                                       # 00478BD3
.L478BD6:
    mov al, byte ptr [esi + 7]                           # 00478BD6
    shr al, 6                                            # 00478BD9
    test byte ptr [__113601B], al                        # 00478BDC
    je .L478BE9                                          # 00478BE2
    or cx, 0x2000                                        # 00478BE4
.L478BE9:
    test byte ptr [esi], 0x80                            # 00478BE9
    je .L478C0F                                          # 00478BEC
    push esi                                             # 00478BEE
.L478BEF:
    add esi, 8                                           # 00478BEF
    mov al, byte ptr [esi]                               # 00478BF2
    and al, 0x3c                                         # 00478BF4
    cmp al, 8                                            # 00478BF6
    jne .L478BEF                                         # 00478BF8
    test byte ptr [esi + 1], 0x30                        # 00478BFA
    jne .L478C0E                                         # 00478BFE
    mov ax, word ptr [esi + 6]                           # 00478C00
    and ax, 0x3ff                                        # 00478C04
    mov word ptr [__1135FAE], ax                         # 00478C08
.L478C0E:
    pop esi                                              # 00478C0E
.L478C0F:
    mov al, byte ptr [esi + 5]                           # 00478C0F
    shr al, 4                                            # 00478C12
    mov byte ptr [__112C2ED], al                         # 00478C15
    mov word ptr [edi], cx                               # 00478C1A
    add edi, 2                                           # 00478C1D
    and ecx, 0x7b                                        # 00478C20
.L478C23:
    test byte ptr [esi + 1], 0x40                        # 00478C23
    je .L478CC5                                          # 00478C27
    or ecx, 4                                            # 00478C2D
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 00478C30
    jne .L478CC5                                         # 00478C37
    msvc_mov ebp, ecx                                    # 00478C3D
    shr ebp, 3                                           # 00478C3F
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478C42
    mov al, byte ptr [esi + 5]                           # 00478C49
    and eax, 3                                           # 00478C4C
    imul eax, eax, 0xa                                   # 00478C4F
    msvc_add ebp, eax                                    # 00478C52
    mov ax, word ptr [ebp + 5]                           # 00478C54
    add ax, word ptr [ecx*8 + __4F6F92]                  # 00478C58
    sar ax, 2                                            # 00478C60
    neg al                                               # 00478C64
    add al, byte ptr [esi + 2]                           # 00478C66
    cmp al, dl                                           # 00478C69
    jne .L478CC5                                         # 00478C6B
    test byte ptr [esi + 4], 0x80                        # 00478C6D
    je .L478C86                                          # 00478C71
    mov al, byte ptr [esi + 6]                           # 00478C73
    and ax, 0xe0                                         # 00478C76
    or cx, 0x1000                                        # 00478C7A
    shl ax, 4                                            # 00478C7F
    msvc_or cx, ax                                       # 00478C83
.L478C86:
    mov al, byte ptr [esi + 7]                           # 00478C86
    shr al, 6                                            # 00478C89
    test byte ptr [__113601B], al                        # 00478C8C
    je .L478C99                                          # 00478C92
    or cx, 0x2000                                        # 00478C94
.L478C99:
    test byte ptr [esi], 0x80                            # 00478C99
    je .L478CBF                                          # 00478C9C
    push esi                                             # 00478C9E
.L478C9F:
    add esi, 8                                           # 00478C9F
    mov al, byte ptr [esi]                               # 00478CA2
    and al, 0x3c                                         # 00478CA4
    cmp al, 8                                            # 00478CA6
    jne .L478C9F                                         # 00478CA8
    test byte ptr [esi + 1], 0x30                        # 00478CAA
    jne .L478CBE                                         # 00478CAE
    mov ax, word ptr [esi + 6]                           # 00478CB0
    and ax, 0x3ff                                        # 00478CB4
    mov word ptr [__1135FAE], ax                         # 00478CB8
.L478CBE:
    pop esi                                              # 00478CBE
.L478CBF:
    mov word ptr [edi], cx                               # 00478CBF
    add edi, 2                                           # 00478CC2
.L478CC5:
    add esi, 8                                           # 00478CC5
    test byte ptr [esi - 7], 0x80                        # 00478CC8
    je .L478B14                                          # 00478CCC
    mov word ptr [edi], 0xffff                           # 00478CD2
    mov esi, dword ptr [__1135EE6]                       # 00478CD7
    msvc_sub edi, esi                                    # 00478CDD
    shr edi, 1                                           # 00478CDF
    mov dword ptr [esi - 4], edi                         # 00478CE1
    popal                                                # 00478CE4
    ret                                                  # 00478CE5
.L478CE6:
    pushal                                               # 00478CE6
    jmp .L478D16                                         # 00478CE7

    .global _sub_478CE9
_sub_478CE9:
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00478CE9
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00478CF1
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00478CF9
    mov word ptr [__1135FAE], 0xffff                     # 00478D01
    pushal                                               # 00478D0A
    shr dx, 2                                            # 00478D0B
    mov dh, byte ptr [ebp*8 + __4F6F8D]                  # 00478D0F
.L478D16:
    mov dword ptr [__1135EE6], edi                       # 00478D16
    movzx esi, cx                                        # 00478D1C
    shl esi, 9                                           # 00478D1F
    msvc_or si, ax                                       # 00478D22
    shr esi, 3                                           # 00478D25
    mov esi, dword ptr [esi + __E40134]                  # 00478D28
.L478D2E:
    mov al, byte ptr [esi]                               # 00478D2E
    and al, 0x3c                                         # 00478D30
    cmp al, 0x1c                                         # 00478D32
    jne .L478EFE                                         # 00478D34
    movzx eax, byte ptr [esi + 5]                        # 00478D3A
    shr eax, 4                                           # 00478D3E
    bt dword ptr [_scenarioChunk3+424], eax              # 00478D41
    jb .L478D58                                          # 00478D48
    mov cl, byte ptr [esi + 7]                           # 00478D4A
    and cl, 0xf                                          # 00478D4D
    cmp cl, bl                                           # 00478D50
    jne .L478EFE                                         # 00478D52
.L478D58:
    cmp al, bh                                           # 00478D58
    je .L478D72                                          # 00478D5A
    cmp bh, 0xff                                         # 00478D5C
    jne .L478EFE                                         # 00478D5F
    bt dword ptr [_scenarioChunk3+420], eax              # 00478D65
    jae .L478EFE                                         # 00478D6C
.L478D72:
    mov al, byte ptr [esi + 7]                           # 00478D72
    shr al, 6                                            # 00478D75
    and al, byte ptr [__113601A]                         # 00478D78
    cmp al, byte ptr [__113601A]                         # 00478D7E
    jne .L478EFE                                         # 00478D84
    test byte ptr [esi + 1], 0x30                        # 00478D8A
    jne .L478EFE                                         # 00478D8E
    mov cl, byte ptr [esi + 4]                           # 00478D94
    and ecx, 0xf                                         # 00478D97
    shl ecx, 3                                           # 00478D9A
    mov al, byte ptr [esi]                               # 00478D9D
    and al, 3                                            # 00478D9F
    msvc_or cl, al                                       # 00478DA1
    test byte ptr [esi + 5], 3                           # 00478DA3
    jne .L478E3C                                         # 00478DA7
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 00478DAD
    jne .L478E3C                                         # 00478DB4
    msvc_mov ebp, ecx                                    # 00478DBA
    shr ebp, 3                                           # 00478DBC
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478DBF
    mov ax, word ptr [ebp + 5]                           # 00478DC6
    sar ax, 2                                            # 00478DCA
    neg al                                               # 00478DCE
    add al, byte ptr [esi + 2]                           # 00478DD0
    cmp al, dl                                           # 00478DD3
    jne .L478E3C                                         # 00478DD5
    test byte ptr [esi + 4], 0x80                        # 00478DD7
    je .L478DF0                                          # 00478DDB
    mov al, byte ptr [esi + 6]                           # 00478DDD
    and ax, 0xe0                                         # 00478DE0
    or cx, 0x1000                                        # 00478DE4
    shl ax, 4                                            # 00478DE9
    msvc_or cx, ax                                       # 00478DED
.L478DF0:
    mov al, byte ptr [esi + 7]                           # 00478DF0
    shr al, 6                                            # 00478DF3
    test byte ptr [__113601B], al                        # 00478DF6
    je .L478E03                                          # 00478DFC
    or cx, 0x2000                                        # 00478DFE
.L478E03:
    test byte ptr [esi], 0x80                            # 00478E03
    je .L478E33                                          # 00478E06
    push esi                                             # 00478E08
.L478E09:
    add esi, 8                                           # 00478E09
    mov al, byte ptr [esi]                               # 00478E0C
    and al, 0x3c                                         # 00478E0E
    cmp al, 8                                            # 00478E10
    jne .L478E09                                         # 00478E12
    test byte ptr [esi + 1], 0x30                        # 00478E14
    jne .L478E32                                         # 00478E18
    mov ax, word ptr [esi + 6]                           # 00478E1A
    and ax, 0x3ff                                        # 00478E1E
    mov word ptr [__1135FAE], ax                         # 00478E22
    mov al, byte ptr [esi + 5]                           # 00478E28
    and al, 0x1f                                         # 00478E2B
    mov byte ptr [__1136087], al                         # 00478E2D
.L478E32:
    pop esi                                              # 00478E32
.L478E33:
    mov word ptr [edi], cx                               # 00478E33
    add edi, 2                                           # 00478E36
    and ecx, 0x7b                                        # 00478E39
.L478E3C:
    test byte ptr [esi + 1], 0x40                        # 00478E3C
    je .L478EFE                                          # 00478E40
    or ecx, 4                                            # 00478E46
    cmp dh, byte ptr [ecx*8 + __4F6F8C]                  # 00478E49
    jne .L478EFE                                         # 00478E50
    msvc_mov ebp, ecx                                    # 00478E56
    shr ebp, 3                                           # 00478E58
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00478E5B
    mov al, byte ptr [esi + 5]                           # 00478E62
    and eax, 3                                           # 00478E65
    imul eax, eax, 0xa                                   # 00478E68
    msvc_add ebp, eax                                    # 00478E6B
    mov ax, word ptr [ebp + 5]                           # 00478E6D
    add ax, word ptr [ecx*8 + __4F6F92]                  # 00478E71
    sar ax, 2                                            # 00478E79
    neg al                                               # 00478E7D
    add al, byte ptr [esi + 2]                           # 00478E7F
    cmp al, dl                                           # 00478E82
    jne .L478EFE                                         # 00478E84
    movzx eax, byte ptr [esi + 5]                        # 00478E86
    shr eax, 4                                           # 00478E8A
    mov eax, dword ptr [eax*4 + _roadObjects]            # 00478E8D
    test word ptr [eax + 0x12], 1                        # 00478E94
    jne .L478EFE                                         # 00478E9A
    test byte ptr [esi + 4], 0x80                        # 00478E9C
    je .L478EB5                                          # 00478EA0
    mov al, byte ptr [esi + 6]                           # 00478EA2
    and ax, 0xe0                                         # 00478EA5
    or cx, 0x1000                                        # 00478EA9
    shl ax, 4                                            # 00478EAE
    msvc_or cx, ax                                       # 00478EB2
.L478EB5:
    mov al, byte ptr [esi + 7]                           # 00478EB5
    shr al, 6                                            # 00478EB8
    test byte ptr [__113601B], al                        # 00478EBB
    je .L478EC8                                          # 00478EC1
    or cx, 0x2000                                        # 00478EC3
.L478EC8:
    test byte ptr [esi], 0x80                            # 00478EC8
    je .L478EF8                                          # 00478ECB
    push esi                                             # 00478ECD
.L478ECE:
    add esi, 8                                           # 00478ECE
    mov al, byte ptr [esi]                               # 00478ED1
    and al, 0x3c                                         # 00478ED3
    cmp al, 8                                            # 00478ED5
    jne .L478ECE                                         # 00478ED7
    test byte ptr [esi + 1], 0x30                        # 00478ED9
    jne .L478EF7                                         # 00478EDD
    mov ax, word ptr [esi + 6]                           # 00478EDF
    and ax, 0x3ff                                        # 00478EE3
    mov word ptr [__1135FAE], ax                         # 00478EE7
    mov al, byte ptr [esi + 5]                           # 00478EED
    and al, 0x1f                                         # 00478EF0
    mov byte ptr [__1136087], al                         # 00478EF2
.L478EF7:
    pop esi                                              # 00478EF7
.L478EF8:
    mov word ptr [edi], cx                               # 00478EF8
    add edi, 2                                           # 00478EFB
.L478EFE:
    add esi, 8                                           # 00478EFE
    test byte ptr [esi - 7], 0x80                        # 00478F01
    je .L478D2E                                          # 00478F05
    mov word ptr [edi], 0xffff                           # 00478F0B
    mov esi, dword ptr [__1135EE6]                       # 00478F10
    msvc_sub edi, esi                                    # 00478F16
    shr edi, 1                                           # 00478F18
    mov dword ptr [esi - 4], edi                         # 00478F1A
    popal                                                # 00478F1D
    ret                                                  # 00478F1E

    .global _sub_478F1F
_sub_478F1F:
    push word ptr [__E3F0BC]                             # 00478F1F
    mov word ptr [__E3F0BC], 0                           # 00478F26
    pushal                                               # 00478F2F
    mov edi, dword ptr [__E0C3E0]                        # 00478F30
    mov_offset eax, __E0C410                             # 00478F36
    add eax, 0x32c40                                     # 00478F3B
    mov dword ptr [__E0C404], eax                        # 00478F40
    mov_offset ebp, __E0C410                             # 00478F45
    call _sub_45A6CA                                     # 00478F4A
    popal                                                # 00478F4F
    mov si, word ptr [__F24484]                          # 00478F50
    push esi                                             # 00478F57
    mov si, word ptr [__F24942]                          # 00478F58
    push esi                                             # 00478F5F
    mov si, word ptr [__F24944]                          # 00478F60
    push esi                                             # 00478F67
    mov si, word ptr [__F24946]                          # 00478F68
    push esi                                             # 00478F6F
    movzx si, byte ptr [__F24948]                        # 00478F70
    push esi                                             # 00478F78
    and word ptr [__F24484], 0xfffb                      # 00478F79
    test byte ptr [__522095], 2                          # 00478F81
    je .L478FAC                                          # 00478F88
    or word ptr [__F24484], 4                            # 00478F8A
    mov word ptr [__F24942], ax                          # 00478F92
    mov word ptr [__F24944], cx                          # 00478F98
    mov word ptr [__F24946], di                          # 00478F9F
    mov byte ptr [__F24948], bh                          # 00478FA6
.L478FAC:
    and bh, 3                                            # 00478FAC
    push eax                                             # 00478FAF
    push edx                                             # 00478FB0
    push ebp                                             # 00478FB1
    ror edi, 0x10                                        # 00478FB2
    movzx ebp, dl                                        # 00478FB5
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 00478FB8
    msvc_xor esi, esi                                    # 00478FBF
.L478FC1:
    bt di, si                                            # 00478FC1
    jae .L478FF2                                         # 00478FC5
    push ebp                                             # 00478FC7
    movzx ebp, byte ptr [esi + ebp + 0x26]               # 00478FC8
    mov ebp, dword ptr [ebp*4 + _roadExtraObjects]       # 00478FCD
    movzx edx, dh                                        # 00478FD4
    mov ax, word ptr [edx*2 + __4F72E8]                  # 00478FD7
    and ax, word ptr [ebp + 2]                           # 00478FDF
    cmp ax, word ptr [edx*2 + __4F72E8]                  # 00478FE3
    je .L478FF1                                          # 00478FEB
    btr di, si                                           # 00478FED
.L478FF1:
    pop ebp                                              # 00478FF1
.L478FF2:
    inc esi                                              # 00478FF2
    cmp esi, 2                                           # 00478FF3
    jb .L478FC1                                          # 00478FF6
    ror edi, 0x10                                        # 00478FF8
    pop ebp                                              # 00478FFB
    pop edx                                              # 00478FFC
    pop eax                                              # 00478FFD
    push eax                                             # 00478FFE
    push ebx                                             # 00478FFF
    push ecx                                             # 00479000
    push edx                                             # 00479001
    push edi                                             # 00479002
    push esi                                             # 00479003
    push 0                                               # 00479004
    movzx ebp, dh                                        # 00479006
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00479009

    .global _sub_479010
_sub_479010:
    cmp byte ptr [ebp], 0xff                             # 00479010
    je _sub_4792AA                                       # 00479014
    mov ax, word ptr [ebp + 1]                           # 0047901A
    mov cx, word ptr [ebp + 3]                           # 0047901E
    mov bl, byte ptr [ebp + 8]                           # 00479022
    movzx edi, byte ptr [esp + 0x15]                     # 00479025
    jmp dword ptr [edi*4 + __4FE590]                     # 0047902A

    .global _sub_479031
_sub_479031:
    xchg ax, cx                                          # 00479031
    neg cx                                               # 00479033
    rol bl, 1                                            # 00479036
    msvc_mov bh, bl                                      # 00479038
    ror bh, 4                                            # 0047903A
    and bx, 0x11ee                                       # 0047903D
    msvc_or bl, bh                                       # 00479042
    jmp _sub_479071                                      # 00479044

    .global _sub_479046
_sub_479046:
    neg ax                                               # 00479046
    neg cx                                               # 00479049
    rol bl, 2                                            # 0047904C
    msvc_mov bh, bl                                      # 0047904F
    ror bh, 4                                            # 00479051
    and bx, 0x33cc                                       # 00479054
    msvc_or bl, bh                                       # 00479059
    jmp _sub_479071                                      # 0047905B

    .global _sub_47905D
_sub_47905D:
    xchg ax, cx                                          # 0047905D
    neg ax                                               # 0047905F
    rol bl, 3                                            # 00479062
    msvc_mov bh, bl                                      # 00479065
    ror bh, 4                                            # 00479067
    and bx, 0x7788                                       # 0047906A
    msvc_or bl, bh                                       # 0047906F

    .global _sub_479071
_sub_479071:
    add ax, word ptr [esp + 0x18]                        # 00479071
    add cx, word ptr [esp + 0x10]                        # 00479076
    mov dx, word ptr [ebp + 5]                           # 0047907B
    add dx, word ptr [esp + 8]                           # 0047907F
    shr dx, 2                                            # 00479084
    mov dh, byte ptr [ebp + 7]                           # 00479088
    add dh, 0x20                                         # 0047908B
    shr dh, 2                                            # 0047908E
    msvc_add dh, dl                                      # 00479091
    push ebp                                             # 00479093
    msvc_mov bp, cx                                      # 00479094
    movzx ebp, bp                                        # 00479097
    shl ebp, 9                                           # 0047909A
    msvc_or bp, ax                                       # 0047909D
    shr ebp, 3                                           # 004790A0
    add_offset ebp, __E40134                             # 004790A3
    mov_offset esi, __522098                             # 004790A9
    xchg dword ptr [ebp], esi                            # 004790AE
    mov dword ptr [__5220A8], esi                        # 004790B1
    msvc_mov bp, cx                                      # 004790B7
    add ax, 0x20                                         # 004790BA
    and ax, 0x3fe0                                       # 004790BE
    movzx ebp, bp                                        # 004790C2
    shl ebp, 9                                           # 004790C5
    msvc_or bp, ax                                       # 004790C8
    shr ebp, 3                                           # 004790CB
    add_offset ebp, __E40134                             # 004790CE
    mov_offset esi, __5220A0                             # 004790D4
    xchg dword ptr [ebp], esi                            # 004790D9
    mov dword ptr [__5220AC], esi                        # 004790DC
    msvc_mov bp, cx                                      # 004790E2
    sub ax, 0x40                                         # 004790E5
    and ax, 0x3fe0                                       # 004790E9
    movzx ebp, bp                                        # 004790ED
    shl ebp, 9                                           # 004790F0
    msvc_or bp, ax                                       # 004790F3
    shr ebp, 3                                           # 004790F6
    add_offset ebp, __E40134                             # 004790F9
    mov_offset esi, __5220A0                             # 004790FF
    xchg dword ptr [ebp], esi                            # 00479104
    mov dword ptr [__5220B0], esi                        # 00479107
    msvc_mov bp, cx                                      # 0047910D
    add ax, 0x20                                         # 00479110
    and ax, 0x3fe0                                       # 00479114
    add bp, 0x20                                         # 00479118
    and bp, 0x3fe0                                       # 0047911C
    movzx ebp, bp                                        # 00479121
    shl ebp, 9                                           # 00479124
    msvc_or bp, ax                                       # 00479127
    shr ebp, 3                                           # 0047912A
    add_offset ebp, __E40134                             # 0047912D
    mov_offset esi, __5220A0                             # 00479133
    xchg dword ptr [ebp], esi                            # 00479138
    mov dword ptr [__5220B4], esi                        # 0047913B
    msvc_mov bp, cx                                      # 00479141
    sub bp, 0x20                                         # 00479144
    and bp, 0x3fe0                                       # 00479148
    movzx ebp, bp                                        # 0047914D
    shl ebp, 9                                           # 00479150
    msvc_or bp, ax                                       # 00479153
    shr ebp, 3                                           # 00479156
    add_offset ebp, __E40134                             # 00479159
    mov_offset esi, __5220A0                             # 0047915F
    xchg dword ptr [ebp], esi                            # 00479164
    mov dword ptr [__5220B8], esi                        # 00479167
    pop ebp                                              # 0047916D
    msvc_mov bh, bl                                      # 0047916E
    and bh, 0xf                                          # 00479170
    or bh, 0x80                                          # 00479173
    mov byte ptr [__522099], bh                          # 00479176
    mov byte ptr [__52209A], dl                          # 0047917C
    mov byte ptr [__52209B], dh                          # 00479182
    mov bl, byte ptr [esp + 0x15]                        # 00479188
    or bl, 0x1c                                          # 0047918C
    mov byte ptr [__522098], bl                          # 0047918F
    mov bl, byte ptr [ebp]                               # 00479195
    mov byte ptr [__52209D], bl                          # 00479198
    mov bl, byte ptr [esp + 0xc]                         # 0047919E
    shl bl, 4                                            # 004791A2
    or byte ptr [__52209D], bl                           # 004791A5
    mov bl, byte ptr [esp + 0xd]                         # 004791AB
    mov byte ptr [__52209C], bl                          # 004791AF
    mov byte ptr [__52209E], 0                           # 004791B5
    mov bl, byte ptr [_scenarioChunk3+36]                # 004791BC
    mov byte ptr [__52209F], bl                          # 004791C2
    mov bl, byte ptr [esp + 0xa]                         # 004791C8
    shl bl, 6                                            # 004791CC
    or byte ptr [__52209F], bl                           # 004791CF
    push ebp                                             # 004791D5
    movzx eax, ax                                        # 004791D6
    movzx ecx, cx                                        # 004791D9
    call _sub_461CF8                                     # 004791DC
    msvc_mov bp, cx                                      # 004791E1
    movzx ebp, bp                                        # 004791E4
    shl ebp, 9                                           # 004791E7
    msvc_or bp, ax                                       # 004791EA
    shr ebp, 3                                           # 004791ED
    add_offset ebp, __E40134                             # 004791F0
    mov esi, dword ptr [__5220A8]                        # 004791F6
    mov dword ptr [ebp], esi                             # 004791FC
    msvc_mov bp, cx                                      # 004791FF
    add ax, 0x20                                         # 00479202
    and ax, 0x3fe0                                       # 00479206
    movzx ebp, bp                                        # 0047920A
    shl ebp, 9                                           # 0047920D
    msvc_or bp, ax                                       # 00479210
    shr ebp, 3                                           # 00479213
    add_offset ebp, __E40134                             # 00479216
    mov esi, dword ptr [__5220AC]                        # 0047921C
    mov dword ptr [ebp], esi                             # 00479222
    msvc_mov bp, cx                                      # 00479225
    sub ax, 0x40                                         # 00479228
    and ax, 0x3fe0                                       # 0047922C
    movzx ebp, bp                                        # 00479230
    shl ebp, 9                                           # 00479233
    msvc_or bp, ax                                       # 00479236
    shr ebp, 3                                           # 00479239
    add_offset ebp, __E40134                             # 0047923C
    mov esi, dword ptr [__5220B0]                        # 00479242
    mov dword ptr [ebp], esi                             # 00479248
    msvc_mov bp, cx                                      # 0047924B
    add ax, 0x20                                         # 0047924E
    and ax, 0x3fe0                                       # 00479252
    add bp, 0x20                                         # 00479256
    and bp, 0x3fe0                                       # 0047925A
    movzx ebp, bp                                        # 0047925F
    shl ebp, 9                                           # 00479262
    msvc_or bp, ax                                       # 00479265
    shr ebp, 3                                           # 00479268
    add_offset ebp, __E40134                             # 0047926B
    mov esi, dword ptr [__5220B4]                        # 00479271
    mov dword ptr [ebp], esi                             # 00479277
    msvc_mov bp, cx                                      # 0047927A
    sub bp, 0x20                                         # 0047927D
    and bp, 0x3fe0                                       # 00479281
    movzx ebp, bp                                        # 00479286
    shl ebp, 9                                           # 00479289
    msvc_or bp, ax                                       # 0047928C
    shr ebp, 3                                           # 0047928F
    add_offset ebp, __E40134                             # 00479292
    mov esi, dword ptr [__5220B8]                        # 00479298
    mov dword ptr [ebp], esi                             # 0047929E
    pop ebp                                              # 004792A1
    add ebp, 0xa                                         # 004792A2
    msvc_jmp _sub_479010                                 # 004792A5

    .global _sub_4792AA
_sub_4792AA:
    pop ebx                                              # 004792AA
    pop esi                                              # 004792AB
    pop edi                                              # 004792AC
    pop edx                                              # 004792AD
    pop ecx                                              # 004792AE
    pop eax                                              # 004792AF
    pop eax                                              # 004792B0
    pushal                                               # 004792B1
    call _sub_45E7B5                                     # 004792B2
    call _sub_45EA23                                     # 004792B7
    popal                                                # 004792BC
    pop eax                                              # 004792BD
    mov byte ptr [__F24948], al                          # 004792BE
    pop eax                                              # 004792C3
    mov word ptr [__F24946], ax                          # 004792C4
    pop eax                                              # 004792CA
    mov word ptr [__F24944], ax                          # 004792CB
    pop eax                                              # 004792D1
    mov word ptr [__F24942], ax                          # 004792D2
    pop eax                                              # 004792D8
    mov word ptr [__F24484], ax                          # 004792D9
    pop word ptr [__E3F0BC]                              # 004792DF
    ret                                                  # 004792E6

    .global _sub_4792E7
_sub_4792E7:
    msvc_xor ebx, ebx                                    # 004792E7
    xchg dword ptr [__112C300], ebx                      # 004792E9
    push ebx                                             # 004792EF
    mov ebx, dword ptr [ebx*4 + __4FE450]                # 004792F0
    mov ax, word ptr [ebx*8 + __4FE490]                  # 004792F7
    mov cx, word ptr [ebx*8 + __4FE492]                  # 004792FF
    mov word ptr [__E3F0A0], ax                          # 00479307
    mov word ptr [__E3F0A2], cx                          # 0047930D
    mov di, word ptr [ebx*8 + __4FE494]                  # 00479314
    mov si, word ptr [ebx*8 + __4FE496]                  # 0047931C
    mov dx, word ptr [__112C304]                         # 00479324
    add ebx, dword ptr [__112C2FC]                       # 0047932B
    mov word ptr [__E3F0A4], dx                          # 00479331
    mov ebp, dword ptr [__E3F0B8]                        # 00479338
    mov ecx, 2                                           # 0047933E
    call dword ptr [ebp*4 + __4FD170]                    # 00479343
    pop ebp                                              # 0047934A
    msvc_xor ebx, ebx                                    # 0047934B
    xchg word ptr [__112C306], bx                        # 0047934D
    dec ebx                                              # 00479354
    js .L4793C3                                          # 00479355
    mov edi, dword ptr [_streetLightObjects]             # 00479357
    shl ebx, 2                                           # 0047935D
    add ebx, dword ptr [edi + 8]                         # 00479360
    msvc_xor esi, esi                                    # 00479363
.L479365:
    bt ebp, esi                                          # 00479365
    jb .L4793BC                                          # 00479368
    push ebx                                             # 0047936A
    push esi                                             # 0047936B
    push ebp                                             # 0047936C
    movzx ax, byte ptr [esi*2 + __4FE4E8]                # 0047936D
    movzx cx, byte ptr [esi*2 + __4FE4E9]                # 00479376
    mov word ptr [__E3F0A0], ax                          # 0047937F
    mov word ptr [__E3F0A2], cx                          # 00479385
    mov di, 1                                            # 0047938C
    mov si, 1                                            # 00479390
    mov ah, 7                                            # 00479394
    mov dx, word ptr [__112C304]                         # 00479396
    add dx, 4                                            # 0047939D
    mov word ptr [__E3F0A4], dx                          # 004793A1
    sub dx, 4                                            # 004793A8
    mov ebp, dword ptr [__E3F0B8]                        # 004793AC
    call dword ptr [ebp*4 + __4FD140]                    # 004793B2
    pop ebp                                              # 004793B9
    pop esi                                              # 004793BA
    pop ebx                                              # 004793BB
.L4793BC:
    inc ebx                                              # 004793BC
    inc esi                                              # 004793BD
    cmp esi, 4                                           # 004793BE
    jb .L479365                                          # 004793C1
.L4793C3:
    ret                                                  # 004793C3

    .global _sub_4793C4
_sub_4793C4:
    cmp byte ptr [__112C2E1], 0                          # 004793C4
    jne .L4793E8                                         # 004793CB
    push edi                                             # 004793CD
    push esi                                             # 004793CE
    call _sub_4CE438                                     # 004793CF
    jb .L4793E6                                          # 004793D4
    mov edi, dword ptr [esi + 4]                         # 004793D6
    bts word ptr [edi + 0x12], 4                         # 004793D9
    jb .L4793E6                                          # 004793DF
    call _sub_4CA4BD                                     # 004793E1
.L4793E6:
    pop esi                                              # 004793E6
    pop edi                                              # 004793E7
.L4793E8:
    inc byte ptr [__112C2E1]                             # 004793E8
    ret                                                  # 004793EE

    .global _sub_4793EF
_sub_4793EF:
    dec byte ptr [__112C2E1]                             # 004793EF
    jne .L479412                                         # 004793F5
    push edi                                             # 004793F7
    push esi                                             # 004793F8
    call _sub_4CE438                                     # 004793F9
    jb .L479410                                          # 004793FE
    mov edi, dword ptr [esi + 4]                         # 00479400
    btr word ptr [edi + 0x12], 4                         # 00479403
    jae .L479410                                         # 00479409
    call _sub_4CA4BD                                     # 0047940B
.L479410:
    pop esi                                              # 00479410
    pop edi                                              # 00479411
.L479412:
    ret                                                  # 00479412

    .global _sub_479413
_sub_479413:
    msvc_mov si, cx                                      # 00479413
    msvc_xor dh, dh                                      # 00479416
    movzx esi, si                                        # 00479418
    shl esi, 9                                           # 0047941B
    msvc_or si, ax                                       # 0047941E
    shr esi, 3                                           # 00479421
    mov esi, dword ptr [esi + __E40134]                  # 00479424
.L47942A:
    cmp dl, byte ptr [esi + 2]                           # 0047942A
    jne .L47948E                                         # 0047942D
    mov bl, byte ptr [esi]                               # 0047942F
    and bl, 0x3c                                         # 00479431
    cmp bl, 0x1c                                         # 00479434
    jne .L47948E                                         # 00479437
    test byte ptr [esi + 7], 0x20                        # 00479439
    je .L47948E                                          # 0047943D
    mov bl, byte ptr [esi + 5]                           # 0047943F
    and ebx, 0xc                                         # 00479442
    mov ebp, dword ptr [ebx + _levelCrossingObjects]     # 00479445
    movzx edi, byte ptr [ebp + 0xa]                      # 0047944B
    test dword ptr [_scenarioChunk3+326], edi            # 0047944F
    jne .L4794B7                                         # 00479455
    mov bl, byte ptr [esi + 6]                           # 00479457
    or dh, 2                                             # 0047945A
    and bl, 0xf                                          # 0047945D
    test byte ptr [esi + 7], 0x10                        # 00479460
    jne .L479476                                         # 00479464
    msvc_or bl, bl                                       # 00479466
    je .L47948E                                          # 00479468
    dec bl                                               # 0047946A
    cmp bl, 0xe                                          # 0047946C
    jne .L479484                                         # 0047946F
    mov bl, byte ptr [ebp + 9]                           # 00479471
    jmp .L479484                                         # 00479474
.L479476:
    cmp bl, 0xf                                          # 00479476
    je .L47948B                                          # 00479479
    inc bl                                               # 0047947B
    cmp bl, byte ptr [ebp + 9]                           # 0047947D
    jbe .L479484                                         # 00479480
    mov bl, 0xf                                          # 00479482
.L479484:
    and byte ptr [esi + 6], 0xf0                         # 00479484
    or byte ptr [esi + 6], bl                            # 00479488
.L47948B:
    or dh, 1                                             # 0047948B
.L47948E:
    add esi, 8                                           # 0047948E
    test byte ptr [esi - 7], 0x80                        # 00479491
    je .L47942A                                          # 00479495
    test dh, 2                                           # 00479497
    je .L4794B2                                          # 0047949A
    push edx                                             # 0047949C
    movzx di, dl                                         # 0047949D
    shl di, 2                                            # 004794A1
    msvc_mov si, di                                      # 004794A5
    add si, 0x20                                         # 004794A8
    call _sub_4CC390                                     # 004794AC
    pop edx                                              # 004794B1
.L4794B2:
    test dh, 1                                           # 004794B2
    je .L4794BA                                          # 004794B5
.L4794B7:
    msvc_and eax, eax                                    # 004794B7
    ret                                                  # 004794B9
.L4794BA:
    stc                                                  # 004794BA
    ret                                                  # 004794BB

    .global _sub_4794BC
_sub_4794BC:
    pushal                                               # 004794BC
    test ebp, 4                                          # 004794BD
    je .L4794FC                                          # 004794C3
    push ebx                                             # 004794C5
    add ax, word ptr [ebp*8 + __4F7B5E]                  # 004794C6
    add cx, word ptr [ebp*8 + __4F7B60]                  # 004794CE
    add dx, word ptr [ebp*8 + __4F7B62]                  # 004794D6
    movzx ebx, byte ptr [ebp*8 + __4F7B5D]               # 004794DE
    cmp bl, 0xc                                          # 004794E6
    jae .L4794FB                                         # 004794E9
    sub ax, word ptr [ebx*4 + __503C6C]                  # 004794EB
    sub cx, word ptr [ebx*4 + __503C6E]                  # 004794F3
.L4794FB:
    pop ebx                                              # 004794FB
.L4794FC:
    msvc_mov esi, ebp                                    # 004794FC
    and esi, 3                                           # 004794FE
    shr ebp, 3                                           # 00479501
    mov ebp, dword ptr [ebp*4 + __4F73D8]                # 00479504
    push eax                                             # 0047950B
    push ecx                                             # 0047950C
    push edx                                             # 0047950D
    push esi                                             # 0047950E
    jmp dword ptr [esi*4 + __4FE5A0]                     # 0047950F

    .global _sub_479516
_sub_479516:
    add ax, word ptr [ebp + 1]                           # 00479516
    add cx, word ptr [ebp + 3]                           # 0047951A
    jmp _sub_47953C                                      # 0047951E

    .global _sub_479520
_sub_479520:
    add ax, word ptr [ebp + 3]                           # 00479520
    sub cx, word ptr [ebp + 1]                           # 00479524
    jmp _sub_47953C                                      # 00479528

    .global _sub_47952A
_sub_47952A:
    sub ax, word ptr [ebp + 1]                           # 0047952A
    sub cx, word ptr [ebp + 3]                           # 0047952E
    jmp _sub_47953C                                      # 00479532

    .global _sub_479534
_sub_479534:
    sub ax, word ptr [ebp + 3]                           # 00479534
    add cx, word ptr [ebp + 1]                           # 00479538

    .global _sub_47953C
_sub_47953C:
    add dx, word ptr [ebp + 5]                           # 0047953C
    mov word ptr [__112C2B2], ax                         # 00479540
    mov word ptr [__112C2B4], cx                         # 00479546
    mov word ptr [__112C2B6], dx                         # 0047954D
    shr dx, 2                                            # 00479554
    movzx esi, cx                                        # 00479558
    shl esi, 9                                           # 0047955B
    msvc_or si, ax                                       # 0047955E
    shr esi, 3                                           # 00479561
    mov esi, dword ptr [esi + __E40134]                  # 00479564
.L47956A:
    cmp dl, byte ptr [esi + 2]                           # 0047956A
    jne .L4795A2                                         # 0047956D
    mov al, byte ptr [esi]                               # 0047956F
    and al, 0x3c                                         # 00479571
    cmp al, 0x1c                                         # 00479573
    jne .L4795A2                                         # 00479575
    mov al, byte ptr [esi + 4]                           # 00479577
    and al, 0xf                                          # 0047957A
    cmp al, 0                                            # 0047957C
    jne .L4795A2                                         # 0047957E
    and byte ptr [esi + 7], 0xef                         # 00479580
    cmp di, 8                                            # 00479584
    jne .L4795A2                                         # 00479588
    or byte ptr [esi + 7], 0x10                          # 0047958A
    mov ax, word ptr [__112C2B2]                         # 0047958E
    mov cx, word ptr [__112C2B4]                         # 00479594
    mov dh, 1                                            # 0047959B
    call _sub_4612A6                                     # 0047959D
.L4795A2:
    add esi, 8                                           # 004795A2
    test byte ptr [esi - 7], 0x80                        # 004795A5
    je .L47956A                                          # 004795A9
    mov di, word ptr [__112C2B6]                         # 004795AB
    mov ax, word ptr [__112C2B2]                         # 004795B2
    msvc_mov si, di                                      # 004795B8
    mov cx, word ptr [__112C2B4]                         # 004795BB
    add si, 0x20                                         # 004795C2
    call _sub_4CC20F                                     # 004795C6
    pop esi                                              # 004795CB
    pop edx                                              # 004795CC
    pop ecx                                              # 004795CD
    pop eax                                              # 004795CE
    popal                                                # 004795CF
    ret                                                  # 004795D0

    .global _sub_4795D1
_sub_4795D1:
    pushal                                               # 004795D1
    mov dh, 3                                            # 004795D2
.L4795D4:
    msvc_mov si, cx                                      # 004795D4
    movzx esi, si                                        # 004795D7
    shl esi, 9                                           # 004795DA
    msvc_or si, ax                                       # 004795DD
    shr esi, 3                                           # 004795E0
    mov esi, dword ptr [esi + __E40134]                  # 004795E3
.L4795E9:
    cmp dl, byte ptr [esi + 2]                           # 004795E9
    jne .L479645                                         # 004795EC
    test byte ptr [esi + 1], 0x20                        # 004795EE
    jne .L479645                                         # 004795F2
    mov bl, byte ptr [esi]                               # 004795F4
    and bl, 0x3c                                         # 004795F6
    cmp bl, 4                                            # 004795F9
    je .L479627                                          # 004795FC
    cmp bl, 0x1c                                         # 004795FE
    jne .L479645                                         # 00479601
    mov bl, byte ptr [esi + 4]                           # 00479603
    and bl, 0xf                                          # 00479606
    cmp bl, 0                                            # 00479609
    jne .L479645                                         # 0047960C
    msvc_or dh, dh                                       # 0047960E
    js .L47961D                                          # 00479610
    test byte ptr [esi + 7], 0x20                        # 00479612
    je .L479645                                          # 00479616
    and dh, 0xfd                                         # 00479618
    jmp .L479645                                         # 0047961B
.L47961D:
    and byte ptr [esi + 7], 0xcf                         # 0047961D
    and byte ptr [esi + 5], 0xf3                         # 00479621
    jmp .L479645                                         # 00479625
.L479627:
    mov bl, byte ptr [esi + 4]                           # 00479627
    and bl, 0x3f                                         # 0047962A
    cmp bl, 0                                            # 0047962D
    jne .L479645                                         # 00479630
    msvc_or dh, dh                                       # 00479632
    js .L479641                                          # 00479634
    test byte ptr [esi + 6], 0x10                        # 00479636
    je .L479645                                          # 0047963A
    and dh, 0xfe                                         # 0047963C
    jmp .L479645                                         # 0047963F
.L479641:
    and byte ptr [esi + 6], 0xef                         # 00479641
.L479645:
    add esi, 8                                           # 00479645
    test byte ptr [esi - 7], 0x80                        # 00479648
    je .L4795E9                                          # 0047964C
    msvc_or dh, dh                                       # 0047964E
    js .L47966C                                          # 00479650
    test dh, 3                                           # 00479652
    je .L47966C                                          # 00479655
    or dh, 0x80                                          # 00479657
    test dh, 1                                           # 0047965A
    je .L4795D4                                          # 0047965D
    test dh, 2                                           # 00479663
    je .L4795D4                                          # 00479666
.L47966C:
    popal                                                # 0047966C
    ret                                                  # 0047966D

    .global _sub_47966E
_sub_47966E:
    msvc_xor ecx, ecx                                    # 0047966E
    msvc_xor edx, edx                                    # 00479670
    msvc_xor ebx, ebx                                    # 00479672
.L479674:
    mov ebp, dword ptr [ecx*4 + _roadObjects]            # 00479674
    cmp ebp, -1                                          # 0047967B
    je .L479696                                          # 0047967E
    test word ptr [ebp + 0x12], 8                        # 00479680
    je .L47968B                                          # 00479686
    bts edx, ecx                                         # 00479688
.L47968B:
    test word ptr [ebp + 0x12], 0x80                     # 0047968B
    je .L479696                                          # 00479691
    bts ebx, ecx                                         # 00479693
.L479696:
    inc ecx                                              # 00479696
    cmp ecx, 8                                           # 00479697
    jb .L479674                                          # 0047969A
    mov dword ptr [_scenarioChunk3+420], edx             # 0047969C
    mov dword ptr [_scenarioChunk3+424], ebx             # 004796A2
    ret                                                  # 004796A8

    .global _sub_4796A9
_sub_4796A9:
    movzx eax, word ptr [_scenarioChunk3+26]             # 004796A9
    msvc_xor edi, edi                                    # 004796B0
    mov cx, 0xffff                                       # 004796B2
.L4796B6:
    mov ebp, dword ptr [edi*4 + _levelCrossingObjects]   # 004796B6
    cmp ebp, -1                                          # 004796BD
    je .L4796D4                                          # 004796C0
    cmp ax, word ptr [ebp + 0xc]                         # 004796C2
    jb .L4796D4                                          # 004796C6
    cmp cx, word ptr [ebp + 0xc]                         # 004796C8
    jg .L4796D4                                          # 004796CC
    mov cx, word ptr [ebp + 0xc]                         # 004796CE
    msvc_mov edx, edi                                    # 004796D2
.L4796D4:
    inc edi                                              # 004796D4
    cmp edi, 4                                           # 004796D5
    jb .L4796B6                                          # 004796D8
    cmp cx, -1                                           # 004796DA
    jne .L479700                                         # 004796DE
    msvc_xor edi, edi                                    # 004796E0
.L4796E2:
    mov ebp, dword ptr [edi*4 + _levelCrossingObjects]   # 004796E2
    cmp ebp, -1                                          # 004796E9
    je .L4796FA                                          # 004796EC
    cmp cx, word ptr [ebp + 0xc]                         # 004796EE
    jg .L4796FA                                          # 004796F2
    mov cx, word ptr [ebp + 0xc]                         # 004796F4
    msvc_mov edx, edi                                    # 004796F8
.L4796FA:
    inc edi                                              # 004796FA
    cmp edi, 4                                           # 004796FB
    jb .L4796E2                                          # 004796FE
.L479700:
    mov byte ptr [_scenarioChunk3+428], dl               # 00479700
    ret                                                  # 00479706

    .global _sub_479707
_sub_479707:
    call _sub_478415                                     # 00479707
    jb .L4797BA                                          # 0047970C
    push esi                                             # 00479712
    msvc_mov bp, dx                                      # 00479713
    and ebp, 0xf                                         # 00479716
    shl ebp, 3                                           # 00479719
    msvc_mov bl, bh                                      # 0047971C
    and ebx, 3                                           # 0047971E
    msvc_or ebp, ebx                                     # 00479721
    msvc_mov ebx, edi                                    # 00479723
    shr ebx, 0x10                                        # 00479725
    mov esi, dword ptr [ebp*4 + __4D9CA4]                # 00479728
    mov dl, byte ptr [esi + ebx*8 + 6]                   # 0047972F
    mov dh, byte ptr [__E3F0B8]                          # 00479733
    shl dh, 4                                            # 00479739
    msvc_add dl, dh                                      # 0047973C
    sub dl, 0x37                                         # 0047973E
    cmp byte ptr [_scenarioChunk3+408], 0                # 00479741
    je .L47974D                                          # 00479748
    sub dl, 0x20                                         # 0047974A
.L47974D:
    and dl, 0x3f                                         # 0047974D
    cmp dl, 0x20                                         # 00479750
    ja .L4797AF                                          # 00479753
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00479755
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047975D
    add di, word ptr [ebp*8 + __4F6F92]                  # 00479765
    movzx esi, byte ptr [ebp*8 + __4F6F8D]               # 0047976D
    cmp esi, 0xc                                         # 00479775
    jae .L47978A                                         # 00479778
    sub ax, word ptr [esi*4 + __503C6C]                  # 0047977A
    sub cx, word ptr [esi*4 + __503C6E]                  # 00479782
.L47978A:
    mov esi, dword ptr [ebp*4 + __4D9CA4]                # 0047978A
    sub bx, word ptr [esi - 2]                           # 00479791
    neg bx                                               # 00479795
    msvc_or bx, bx                                       # 00479798
    jns .L4797A0                                         # 0047979B
    msvc_xor bx, bx                                      # 0047979D
.L4797A0:
    cmp bx, word ptr [esi - 2]                           # 004797A0
    jb .L4797AC                                          # 004797A4
    mov bx, word ptr [esi - 2]                           # 004797A6
    dec bx                                               # 004797AA
.L4797AC:
    xor ebp, 4                                           # 004797AC
.L4797AF:
    msvc_mov dx, di                                      # 004797AF
    shr dx, 2                                            # 004797B2
    pop esi                                              # 004797B6
    msvc_and eax, eax                                    # 004797B7
    ret                                                  # 004797B9
.L4797BA:
    stc                                                  # 004797BA
    ret                                                  # 004797BB

    .global _sub_4797BC
_sub_4797BC:
    mov dword ptr [__1135F0E], esi                       # 004797BC
    mov dword ptr [__1135F12], edi                       # 004797C2
    sub esp, 0x3000                                      # 004797C8
    mov dword ptr [__1135F06], esp                       # 004797CE
    push eax                                             # 004797D4
    push ecx                                             # 004797D5
    mov edi, dword ptr [__1135F06]                       # 004797D6
    mov ecx, 0x400                                       # 004797DC
    mov eax, 0xffffffff                                  # 004797E1
    rep stosd dword ptr es:[edi], eax                    # 004797E6
    pop ecx                                              # 004797E8
    pop eax                                              # 004797E9
    mov dword ptr [__1135F0A], 0                         # 004797EA
    mov word ptr [__1135FA6], 1                          # 004797F4
    call _sub_479944                                     # 004797FD
    cmp dword ptr [__1135F12], -1                        # 00479802
    je .L479817                                          # 00479809
    mov ebp, dword ptr [__1135F06]                       # 0047980B
    msvc_abscall __1135F12                               # 00479811
.L479817:
    add esp, 0x3000                                      # 00479817
    ret                                                  # 0047981D

    .global _sub_47981E
_sub_47981E:
    mov dword ptr [__1135F0E], esi                       # 0047981E
    mov dword ptr [__1135F12], edi                       # 00479824
    sub esp, 0xc000                                      # 0047982A
    mov dword ptr [__1135F06], esp                       # 00479830
    push eax                                             # 00479836
    push ecx                                             # 00479837
    mov edi, dword ptr [__1135F06]                       # 00479838
    mov ecx, 0x1000                                      # 0047983E
    mov eax, 0xffffffff                                  # 00479843
    rep stosd dword ptr es:[edi], eax                    # 00479848
    pop ecx                                              # 0047984A
    pop eax                                              # 0047984B
    mov dword ptr [__1135F0A], 0                         # 0047984C
    mov word ptr [__1135FA6], 1                          # 00479856
    call _sub_479DB1                                     # 0047985F
    cmp dword ptr [__1135F12], -1                        # 00479864
    je .L479879                                          # 0047986B
    mov ebp, dword ptr [__1135F06]                       # 0047986D
    msvc_abscall __1135F12                               # 00479873
.L479879:
    add esp, 0xc000                                      # 00479879
    ret                                                  # 0047987F

    .global _sub_479880
_sub_479880:
    mov dword ptr [__1135F0E], esi                       # 00479880
    mov dword ptr [__1135F12], edi                       # 00479886
    sub esp, 0x3000                                      # 0047988C
    mov dword ptr [__1135F06], esp                       # 00479892
    push eax                                             # 00479898
    push ecx                                             # 00479899
    mov edi, dword ptr [__1135F06]                       # 0047989A
    mov ecx, 0x400                                       # 004798A0
    mov eax, 0xffffffff                                  # 004798A5
    rep stosd dword ptr es:[edi], eax                    # 004798AA
    pop ecx                                              # 004798AC
    pop eax                                              # 004798AD
    mov dword ptr [__1135F0A], 0                         # 004798AE
    mov word ptr [__1135FA6], 5                          # 004798B8
    call _sub_479944                                     # 004798C1
    cmp dword ptr [__1135F12], -1                        # 004798C6
    je .L4798DB                                          # 004798CD
    mov ebp, dword ptr [__1135F06]                       # 004798CF
    msvc_abscall __1135F12                               # 004798D5
.L4798DB:
    add esp, 0x3000                                      # 004798DB
    ret                                                  # 004798E1

    .global _sub_4798E2
_sub_4798E2:
    mov dword ptr [__1135F0E], esi                       # 004798E2
    mov dword ptr [__1135F12], edi                       # 004798E8
    sub esp, 0xc000                                      # 004798EE
    mov dword ptr [__1135F06], esp                       # 004798F4
    push eax                                             # 004798FA
    push ecx                                             # 004798FB
    mov edi, dword ptr [__1135F06]                       # 004798FC
    mov ecx, 0x1000                                      # 00479902
    mov eax, 0xffffffff                                  # 00479907
    rep stosd dword ptr es:[edi], eax                    # 0047990C
    pop ecx                                              # 0047990E
    pop eax                                              # 0047990F
    mov dword ptr [__1135F0A], 0                         # 00479910
    mov word ptr [__1135FA6], 5                          # 0047991A
    call _sub_479DB1                                     # 00479923
    cmp dword ptr [__1135F12], -1                        # 00479928
    je .L47993D                                          # 0047992F
    mov ebp, dword ptr [__1135F06]                       # 00479931
    msvc_abscall __1135F12                               # 00479937
.L47993D:
    add esp, 0xc000                                      # 0047993D
    ret                                                  # 00479943

    .global _sub_479944
_sub_479944:
    mov word ptr [__1135F96], ax                         # 00479944
    mov word ptr [__1135F98], cx                         # 0047994A
    mov word ptr [__1135F9A], dx                         # 00479951
    and ebp, 0x7f                                        # 00479958
    mov dword ptr [__1135EFE], ebp                       # 0047995B
    mov word ptr [__113601A], 0                          # 00479961
    mov_offset edi, __11360A0                            # 0047996A
    call _sub_478895                                     # 0047996F
    cmp dword ptr [__113609C], 1                         # 00479974
    jb .L4799B8                                          # 0047997B
    msvc_xor esi, esi                                    # 0047997D
.L47997F:
    mov bp, word ptr [esi*2 + __11360A0]                 # 0047997F
    push esi                                             # 00479987
    and ebp, 0x807f                                      # 00479988
    call _sub_4A38DE                                     # 0047998E
    pop esi                                              # 00479993
    jb .L4799AF                                          # 00479994
    push esi                                             # 00479996
    msvc_abscall __1135F0E                               # 00479997
    pop esi                                              # 0047999D
    jb .L4799AF                                          # 0047999E
    push ax                                              # 004799A0
    push bx                                              # 004799A2
    push cx                                              # 004799A4
    push dx                                              # 004799A6
    push bp                                              # 004799A8
    push_dword _sub_479A8D                               # 004799AA
.L4799AF:
    inc esi                                              # 004799AF
    cmp esi, dword ptr [__113609C]                       # 004799B0
    jb .L47997F                                          # 004799B6
.L4799B8:
    test word ptr [__1135FA6], 2                         # 004799B8
    jne .L479A8C                                         # 004799C1
    btr word ptr [__1135FA6], 1                          # 004799C7
    jb .L479A8C                                          # 004799D0
    mov ax, word ptr [__1135F96]                         # 004799D6
    mov cx, word ptr [__1135F98]                         # 004799DC
    mov dx, word ptr [__1135F9A]                         # 004799E3
    mov ebp, dword ptr [__1135EFE]                       # 004799EA
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 004799F0
    add cx, word ptr [ebp*8 + __4F6F90]                  # 004799F8
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00479A00
    shr dx, 2                                            # 00479A08
    movzx ebp, byte ptr [ebp*8 + __4F6F8D]               # 00479A0C
    cmp ebp, 0xc                                         # 00479A14
    jae .L479A29                                         # 00479A17
    sub ax, word ptr [ebp*4 + __503C6C]                  # 00479A19
    sub cx, word ptr [ebp*4 + __503C6E]                  # 00479A21
.L479A29:
    mov dh, byte ptr [ebp + __503CAC]                    # 00479A29
    mov word ptr [__113601A], 0                          # 00479A2F
    mov_offset edi, __11360A0                            # 00479A38
    call _sub_478892                                     # 00479A3D
    cmp dword ptr [__113609C], 1                         # 00479A42
    jb .L479A8C                                          # 00479A49
    msvc_xor dh, dh                                      # 00479A4B
    shl dx, 2                                            # 00479A4D
    msvc_xor esi, esi                                    # 00479A51
.L479A53:
    mov bp, word ptr [esi*2 + __11360A0]                 # 00479A53
    push esi                                             # 00479A5B
    and ebp, 0x807f                                      # 00479A5C
    call _sub_4A38DE                                     # 00479A62
    pop esi                                              # 00479A67
    jb .L479A83                                          # 00479A68
    push esi                                             # 00479A6A
    msvc_abscall __1135F0E                               # 00479A6B
    pop esi                                              # 00479A71
    jb .L479A83                                          # 00479A72
    push ax                                              # 00479A74
    push bx                                              # 00479A76
    push cx                                              # 00479A78
    push dx                                              # 00479A7A
    push bp                                              # 00479A7C
    push_dword _sub_479A8D                               # 00479A7E
.L479A83:
    inc esi                                              # 00479A83
    cmp esi, dword ptr [__113609C]                       # 00479A84
    jb .L479A53                                          # 00479A8A
.L479A8C:
    ret                                                  # 00479A8C

    .global _sub_479A8D
_sub_479A8D:
    msvc_xor ebp, ebp                                    # 00479A8D
    pop bp                                               # 00479A8F
    pop dx                                               # 00479A91
    pop cx                                               # 00479A93
    pop bx                                               # 00479A95
    pop ax                                               # 00479A97
    test word ptr [__1135FA6], 4                         # 00479A99
    je _sub_479944                                       # 00479AA2
    mov dword ptr [__1135EFE], ebp                       # 00479AA8
    mov word ptr [__1135F9C], ax                         # 00479AAE
    mov word ptr [__1135F9E], cx                         # 00479AB4
    mov word ptr [__1135FA0], dx                         # 00479ABB
    and ebp, 0x7f                                        # 00479AC2
    test ebp, 4                                          # 00479AC5
    je .L479B04                                          # 00479ACB
    push ebx                                             # 00479ACD
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00479ACE
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00479AD6
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00479ADE
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 00479AE6
    cmp bl, 0xc                                          # 00479AEE
    jae .L479B03                                         # 00479AF1
    sub ax, word ptr [ebx*4 + __503C6C]                  # 00479AF3
    sub cx, word ptr [ebx*4 + __503C6E]                  # 00479AFB
.L479B03:
    pop ebx                                              # 00479B03
.L479B04:
    mov word ptr [__1135F96], ax                         # 00479B04
    mov word ptr [__1135F98], cx                         # 00479B0A
    mov word ptr [__1135F9A], dx                         # 00479B11
    mov byte ptr [__1136050], bl                         # 00479B18
    mov byte ptr [__1136051], bh                         # 00479B1E
    msvc_mov esi, ebp                                    # 00479B24
    and esi, 3                                           # 00479B26
    mov dword ptr [__1135EFA], esi                       # 00479B29
    shr ebp, 3                                           # 00479B2F
    mov dword ptr [__1135F02], ebp                       # 00479B32
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00479B38

    .global _sub_479B3F
_sub_479B3F:
    mov esi, dword ptr [__1135F02]                       # 00479B3F
    movzx ebx, byte ptr [ebp]                            # 00479B45
    mov esi, dword ptr [esi*4 + __4F6F1C]                # 00479B49
    shl ebx, 2                                           # 00479B50
    add ebx, dword ptr [__1135EFA]                       # 00479B53
    mov bl, byte ptr [esi + ebx]                         # 00479B59
    mov byte ptr [__1136052], bl                         # 00479B5C
    mov ax, word ptr [__1135F96]                         # 00479B62
    mov cx, word ptr [__1135F98]                         # 00479B68
    mov dx, word ptr [__1135F9A]                         # 00479B6F
    mov esi, dword ptr [__1135EFA]                       # 00479B76
    jmp dword ptr [esi*4 + __4FE5B0]                     # 00479B7C

    .global _sub_479B83
_sub_479B83:
    add ax, word ptr [ebp + 1]                           # 00479B83
    add cx, word ptr [ebp + 3]                           # 00479B87
    jmp _sub_479BA9                                      # 00479B8B

    .global _sub_479B8D
_sub_479B8D:
    add ax, word ptr [ebp + 3]                           # 00479B8D
    sub cx, word ptr [ebp + 1]                           # 00479B91
    jmp _sub_479BA9                                      # 00479B95

    .global _sub_479B97
_sub_479B97:
    sub ax, word ptr [ebp + 1]                           # 00479B97
    sub cx, word ptr [ebp + 3]                           # 00479B9B
    jmp _sub_479BA9                                      # 00479B9F

    .global _sub_479BA1
_sub_479BA1:
    sub ax, word ptr [ebp + 3]                           # 00479BA1
    add cx, word ptr [ebp + 1]                           # 00479BA5

    .global _sub_479BA9
_sub_479BA9:
    add dx, word ptr [ebp + 5]                           # 00479BA9
    shr dx, 2                                            # 00479BAD
    mov word ptr [__1135FA2], ax                         # 00479BB1
    mov word ptr [__1135FA4], cx                         # 00479BB7
    mov byte ptr [__1136053], dl                         # 00479BBE
    movzx esi, cx                                        # 00479BC4
    shl esi, 9                                           # 00479BC7
    msvc_or si, ax                                       # 00479BCA
    shr esi, 3                                           # 00479BCD
    mov esi, dword ptr [esi + __E40134]                  # 00479BD0

    .global _sub_479BD6
_sub_479BD6:
    cmp dl, byte ptr [esi + 2]                           # 00479BD6
    jne _sub_479D6C                                      # 00479BD9
    mov al, byte ptr [esi]                               # 00479BDF
    and al, 0x3c                                         # 00479BE1
    cmp al, 0x1c                                         # 00479BE3
    jne _sub_479D6C                                      # 00479BE5
    test byte ptr [esi + 1], 0x30                        # 00479BEB
    jne _sub_479D6C                                      # 00479BEF
    mov bl, byte ptr [esi + 4]                           # 00479BF5
    and ebx, 0xf                                         # 00479BF8
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 00479BFB
    mov al, byte ptr [esi + 5]                           # 00479C02
    mov ah, byte ptr [esi]                               # 00479C05
    and ax, 0x303                                        # 00479C07
    shl al, 2                                            # 00479C0B
    msvc_or al, ah                                       # 00479C0E
    and eax, 0x3f                                        # 00479C10
    mov al, byte ptr [eax + ebx]                         # 00479C13
    test byte ptr [__1136052], al                        # 00479C16
    je _sub_479D6C                                       # 00479C1C
    mov al, byte ptr [esi]                               # 00479C22
    and al, 3                                            # 00479C24
    cmp al, byte ptr [__1135EFA]                         # 00479C26
    jne .L479C57                                         # 00479C2C
    mov al, byte ptr [esi + 5]                           # 00479C2E
    and al, 3                                            # 00479C31
    cmp al, byte ptr [ebp]                               # 00479C33
    jne .L479C57                                         # 00479C36
    mov al, byte ptr [esi + 5]                           # 00479C38
    shr al, 4                                            # 00479C3B
    cmp al, byte ptr [__1136051]                         # 00479C3E
    jne .L479C57                                         # 00479C44
    mov al, byte ptr [esi + 4]                           # 00479C46
    and al, 0xf                                          # 00479C49
    cmp al, byte ptr [__1135F02]                         # 00479C4B
    je _sub_479D6C                                       # 00479C51
.L479C57:
    mov dword ptr [__1135EEA], ebp                       # 00479C57
    mov dword ptr [__1135EEE], esi                       # 00479C5D
    movzx ebp, byte ptr [esi + 4]                        # 00479C63
    and ebp, 0xf                                         # 00479C67
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00479C6A
    movzx edi, byte ptr [esi + 5]                        # 00479C71
    and edi, 3                                           # 00479C75
    imul edi, edi, 0xa                                   # 00479C78
    msvc_add ebp, edi                                    # 00479C7B
    mov bl, byte ptr [esi]                               # 00479C7D
    and ebx, 3                                           # 00479C7F
    movzx dx, byte ptr [esi + 2]                         # 00479C82
    mov ax, word ptr [__1135FA2]                         # 00479C87
    mov cx, word ptr [__1135FA4]                         # 00479C8D
    shl dx, 2                                            # 00479C94
    jmp dword ptr [ebx*4 + __4FE5C0]                     # 00479C98

    .global _sub_479C9F
_sub_479C9F:
    sub ax, word ptr [ebp + 1]                           # 00479C9F
    sub cx, word ptr [ebp + 3]                           # 00479CA3
    jmp _sub_479CC5                                      # 00479CA7

    .global _sub_479CA9
_sub_479CA9:
    sub ax, word ptr [ebp + 3]                           # 00479CA9
    add cx, word ptr [ebp + 1]                           # 00479CAD
    jmp _sub_479CC5                                      # 00479CB1

    .global _sub_479CB3
_sub_479CB3:
    add ax, word ptr [ebp + 1]                           # 00479CB3
    add cx, word ptr [ebp + 3]                           # 00479CB7
    jmp _sub_479CC5                                      # 00479CBB

    .global _sub_479CBD
_sub_479CBD:
    add ax, word ptr [ebp + 3]                           # 00479CBD
    sub cx, word ptr [ebp + 1]                           # 00479CC1

    .global _sub_479CC5
_sub_479CC5:
    sub dx, word ptr [ebp + 5]                           # 00479CC5
    mov bl, byte ptr [esi + 4]                           # 00479CC9
    and ebx, 0xf                                         # 00479CCC
    movzx ebp, byte ptr [esi]                            # 00479CCF
    shl ebx, 3                                           # 00479CD2
    and ebp, 3                                           # 00479CD5
    msvc_or ebp, ebx                                     # 00479CD8
    mov bl, byte ptr [esi + 7]                           # 00479CDA
    and bl, 0xf                                          # 00479CDD
    mov bh, byte ptr [esi + 5]                           # 00479CE0
    shr bh, 4                                            # 00479CE3
    call _sub_4A38DE                                     # 00479CE6
    jb .L479D04                                          # 00479CEB
    msvc_abscall __1135F0E                               # 00479CED
    jb .L479D04                                          # 00479CF3
    push ax                                              # 00479CF5
    push bx                                              # 00479CF7
    push cx                                              # 00479CF9
    push dx                                              # 00479CFB
    push bp                                              # 00479CFD
    push_dword _sub_479A8D                               # 00479CFF
.L479D04:
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00479D04
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00479D0C
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00479D14
    movzx edi, byte ptr [ebp*8 + __4F6F8D]               # 00479D1C
    cmp edi, 0xc                                         # 00479D24
    jae .L479D39                                         # 00479D27
    sub ax, word ptr [edi*4 + __503C6C]                  # 00479D29
    sub cx, word ptr [edi*4 + __503C6E]                  # 00479D31
.L479D39:
    xor ebp, 4                                           # 00479D39
    call _sub_4A38DE                                     # 00479D3C
    jb .L479D5A                                          # 00479D41
    msvc_abscall __1135F0E                               # 00479D43
    jb .L479D5A                                          # 00479D49
    push ax                                              # 00479D4B
    push bx                                              # 00479D4D
    push cx                                              # 00479D4F
    push dx                                              # 00479D51
    push bp                                              # 00479D53
    push_dword _sub_479A8D                               # 00479D55
.L479D5A:
    mov ebp, dword ptr [__1135EEA]                       # 00479D5A
    mov esi, dword ptr [__1135EEE]                       # 00479D60
    mov dl, byte ptr [__1136053]                         # 00479D66

    .global _sub_479D6C
_sub_479D6C:
    add esi, 8                                           # 00479D6C
    test byte ptr [esi - 7], 0x80                        # 00479D6F
    je _sub_479BD6                                       # 00479D73
    add ebp, 0xa                                         # 00479D79
    cmp byte ptr [ebp], 0xff                             # 00479D7C
    jne _sub_479B3F                                      # 00479D80
    mov bl, byte ptr [__1136050]                         # 00479D86
    mov bh, byte ptr [__1136051]                         # 00479D8C
    mov ax, word ptr [__1135F9C]                         # 00479D92
    mov cx, word ptr [__1135F9E]                         # 00479D98
    mov dx, word ptr [__1135FA0]                         # 00479D9F
    mov ebp, dword ptr [__1135EFE]                       # 00479DA6
    msvc_jmp _sub_479944                                 # 00479DAC

    .global _sub_479DB1
_sub_479DB1:
    mov word ptr [__1135F96], ax                         # 00479DB1
    mov word ptr [__1135F98], cx                         # 00479DB7
    mov word ptr [__1135F9A], dx                         # 00479DBE
    and ebp, 0x7f                                        # 00479DC5
    mov dword ptr [__1135EFE], ebp                       # 00479DC8
    mov word ptr [__113601A], 0                          # 00479DCE
    mov_offset edi, __11360A0                            # 00479DD7
    call _sub_478895                                     # 00479DDC
    cmp dword ptr [__113609C], 1                         # 00479DE1
    jb .L479E25                                          # 00479DE8
    msvc_xor esi, esi                                    # 00479DEA
.L479DEC:
    mov bp, word ptr [esi*2 + __11360A0]                 # 00479DEC
    push esi                                             # 00479DF4
    and ebp, 0x807f                                      # 00479DF5
    call _sub_4A3972                                     # 00479DFB
    pop esi                                              # 00479E00
    jb .L479E1C                                          # 00479E01
    push esi                                             # 00479E03
    msvc_abscall __1135F0E                               # 00479E04
    pop esi                                              # 00479E0A
    jb .L479E1C                                          # 00479E0B
    push ax                                              # 00479E0D
    push bx                                              # 00479E0F
    push cx                                              # 00479E11
    push dx                                              # 00479E13
    push bp                                              # 00479E15
    push_dword _sub_479EFA                               # 00479E17
.L479E1C:
    inc esi                                              # 00479E1C
    cmp esi, dword ptr [__113609C]                       # 00479E1D
    jb .L479DEC                                          # 00479E23
.L479E25:
    test word ptr [__1135FA6], 2                         # 00479E25
    jne .L479EF9                                         # 00479E2E
    btr word ptr [__1135FA6], 1                          # 00479E34
    jb .L479EF9                                          # 00479E3D
    mov ax, word ptr [__1135F96]                         # 00479E43
    mov cx, word ptr [__1135F98]                         # 00479E49
    mov dx, word ptr [__1135F9A]                         # 00479E50
    mov ebp, dword ptr [__1135EFE]                       # 00479E57
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00479E5D
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00479E65
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00479E6D
    shr dx, 2                                            # 00479E75
    movzx ebp, byte ptr [ebp*8 + __4F6F8D]               # 00479E79
    cmp ebp, 0xc                                         # 00479E81
    jae .L479E96                                         # 00479E84
    sub ax, word ptr [ebp*4 + __503C6C]                  # 00479E86
    sub cx, word ptr [ebp*4 + __503C6E]                  # 00479E8E
.L479E96:
    mov dh, byte ptr [ebp + __503CAC]                    # 00479E96
    mov word ptr [__113601A], 0                          # 00479E9C
    mov_offset edi, __11360A0                            # 00479EA5
    call _sub_478892                                     # 00479EAA
    cmp dword ptr [__113609C], 1                         # 00479EAF
    jb .L479EF9                                          # 00479EB6
    msvc_xor dh, dh                                      # 00479EB8
    shl dx, 2                                            # 00479EBA
    msvc_xor esi, esi                                    # 00479EBE
.L479EC0:
    mov bp, word ptr [esi*2 + __11360A0]                 # 00479EC0
    push esi                                             # 00479EC8
    and ebp, 0x807f                                      # 00479EC9
    call _sub_4A3972                                     # 00479ECF
    pop esi                                              # 00479ED4
    jb .L479EF0                                          # 00479ED5
    push esi                                             # 00479ED7
    msvc_abscall __1135F0E                               # 00479ED8
    pop esi                                              # 00479EDE
    jb .L479EF0                                          # 00479EDF
    push ax                                              # 00479EE1
    push bx                                              # 00479EE3
    push cx                                              # 00479EE5
    push dx                                              # 00479EE7
    push bp                                              # 00479EE9
    push_dword _sub_479EFA                               # 00479EEB
.L479EF0:
    inc esi                                              # 00479EF0
    cmp esi, dword ptr [__113609C]                       # 00479EF1
    jb .L479EC0                                          # 00479EF7
.L479EF9:
    ret                                                  # 00479EF9

    .global _sub_479EFA
_sub_479EFA:
    msvc_xor ebp, ebp                                    # 00479EFA
    pop bp                                               # 00479EFC
    pop dx                                               # 00479EFE
    pop cx                                               # 00479F00
    pop bx                                               # 00479F02
    pop ax                                               # 00479F04
    test word ptr [__1135FA6], 4                         # 00479F06
    je _sub_479DB1                                       # 00479F0F
    mov dword ptr [__1135EFE], ebp                       # 00479F15
    mov word ptr [__1135F9C], ax                         # 00479F1B
    mov word ptr [__1135F9E], cx                         # 00479F21
    mov word ptr [__1135FA0], dx                         # 00479F28
    and ebp, 0x7f                                        # 00479F2F
    test ebp, 4                                          # 00479F32
    je .L479F71                                          # 00479F38
    push ebx                                             # 00479F3A
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 00479F3B
    add cx, word ptr [ebp*8 + __4F6F90]                  # 00479F43
    add dx, word ptr [ebp*8 + __4F6F92]                  # 00479F4B
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 00479F53
    cmp bl, 0xc                                          # 00479F5B
    jae .L479F70                                         # 00479F5E
    sub ax, word ptr [ebx*4 + __503C6C]                  # 00479F60
    sub cx, word ptr [ebx*4 + __503C6E]                  # 00479F68
.L479F70:
    pop ebx                                              # 00479F70
.L479F71:
    mov word ptr [__1135F96], ax                         # 00479F71
    mov word ptr [__1135F98], cx                         # 00479F77
    mov word ptr [__1135F9A], dx                         # 00479F7E
    mov byte ptr [__1136050], bl                         # 00479F85
    mov byte ptr [__1136051], bh                         # 00479F8B
    msvc_mov esi, ebp                                    # 00479F91
    and esi, 3                                           # 00479F93
    mov dword ptr [__1135EFA], esi                       # 00479F96
    shr ebp, 3                                           # 00479F9C
    mov dword ptr [__1135F02], ebp                       # 00479F9F
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 00479FA5

    .global _sub_479FAC
_sub_479FAC:
    mov esi, dword ptr [__1135F02]                       # 00479FAC
    movzx ebx, byte ptr [ebp]                            # 00479FB2
    mov esi, dword ptr [esi*4 + __4F6F1C]                # 00479FB6
    shl ebx, 2                                           # 00479FBD
    add ebx, dword ptr [__1135EFA]                       # 00479FC0
    mov bl, byte ptr [esi + ebx]                         # 00479FC6
    mov byte ptr [__1136052], bl                         # 00479FC9
    mov ax, word ptr [__1135F96]                         # 00479FCF
    mov cx, word ptr [__1135F98]                         # 00479FD5
    mov dx, word ptr [__1135F9A]                         # 00479FDC
    mov esi, dword ptr [__1135EFA]                       # 00479FE3
    jmp dword ptr [esi*4 + __4FE5D0]                     # 00479FE9

    .global _sub_479FF0
_sub_479FF0:
    add ax, word ptr [ebp + 1]                           # 00479FF0
    add cx, word ptr [ebp + 3]                           # 00479FF4
    jmp _sub_47A016                                      # 00479FF8

    .global _sub_479FFA
_sub_479FFA:
    add ax, word ptr [ebp + 3]                           # 00479FFA
    sub cx, word ptr [ebp + 1]                           # 00479FFE
    jmp _sub_47A016                                      # 0047A002

    .global _sub_47A004
_sub_47A004:
    sub ax, word ptr [ebp + 1]                           # 0047A004
    sub cx, word ptr [ebp + 3]                           # 0047A008
    jmp _sub_47A016                                      # 0047A00C

    .global _sub_47A00E
_sub_47A00E:
    sub ax, word ptr [ebp + 3]                           # 0047A00E
    add cx, word ptr [ebp + 1]                           # 0047A012

    .global _sub_47A016
_sub_47A016:
    add dx, word ptr [ebp + 5]                           # 0047A016
    shr dx, 2                                            # 0047A01A
    mov word ptr [__1135FA2], ax                         # 0047A01E
    mov word ptr [__1135FA4], cx                         # 0047A024
    mov byte ptr [__1136053], dl                         # 0047A02B
    movzx esi, cx                                        # 0047A031
    shl esi, 9                                           # 0047A034
    msvc_or si, ax                                       # 0047A037
    shr esi, 3                                           # 0047A03A
    mov esi, dword ptr [esi + __E40134]                  # 0047A03D

    .global _sub_47A043
_sub_47A043:
    cmp dl, byte ptr [esi + 2]                           # 0047A043
    jne _sub_47A1D9                                      # 0047A046
    mov al, byte ptr [esi]                               # 0047A04C
    and al, 0x3c                                         # 0047A04E
    cmp al, 0x1c                                         # 0047A050
    jne _sub_47A1D9                                      # 0047A052
    test byte ptr [esi + 1], 0x30                        # 0047A058
    jne _sub_47A1D9                                      # 0047A05C
    mov bl, byte ptr [esi + 4]                           # 0047A062
    and ebx, 0xf                                         # 0047A065
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 0047A068
    mov al, byte ptr [esi + 5]                           # 0047A06F
    mov ah, byte ptr [esi]                               # 0047A072
    and ax, 0x303                                        # 0047A074
    shl al, 2                                            # 0047A078
    msvc_or al, ah                                       # 0047A07B
    and eax, 0x3f                                        # 0047A07D
    mov al, byte ptr [eax + ebx]                         # 0047A080
    test byte ptr [__1136052], al                        # 0047A083
    je _sub_47A1D9                                       # 0047A089
    mov al, byte ptr [esi]                               # 0047A08F
    and al, 3                                            # 0047A091
    cmp al, byte ptr [__1135EFA]                         # 0047A093
    jne .L47A0C4                                         # 0047A099
    mov al, byte ptr [esi + 5]                           # 0047A09B
    and al, 3                                            # 0047A09E
    cmp al, byte ptr [ebp]                               # 0047A0A0
    jne .L47A0C4                                         # 0047A0A3
    mov al, byte ptr [esi + 5]                           # 0047A0A5
    shr al, 4                                            # 0047A0A8
    cmp al, byte ptr [__1136051]                         # 0047A0AB
    jne .L47A0C4                                         # 0047A0B1
    mov al, byte ptr [esi + 4]                           # 0047A0B3
    and al, 0xf                                          # 0047A0B6
    cmp al, byte ptr [__1135F02]                         # 0047A0B8
    je _sub_47A1D9                                       # 0047A0BE
.L47A0C4:
    mov dword ptr [__1135EEA], ebp                       # 0047A0C4
    mov dword ptr [__1135EEE], esi                       # 0047A0CA
    movzx ebp, byte ptr [esi + 4]                        # 0047A0D0
    and ebp, 0xf                                         # 0047A0D4
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047A0D7
    movzx edi, byte ptr [esi + 5]                        # 0047A0DE
    and edi, 3                                           # 0047A0E2
    imul edi, edi, 0xa                                   # 0047A0E5
    msvc_add ebp, edi                                    # 0047A0E8
    mov bl, byte ptr [esi]                               # 0047A0EA
    and ebx, 3                                           # 0047A0EC
    movzx dx, byte ptr [esi + 2]                         # 0047A0EF
    mov ax, word ptr [__1135FA2]                         # 0047A0F4
    mov cx, word ptr [__1135FA4]                         # 0047A0FA
    shl dx, 2                                            # 0047A101
    jmp dword ptr [ebx*4 + __4FE5E0]                     # 0047A105

    .global _sub_47A10C
_sub_47A10C:
    sub ax, word ptr [ebp + 1]                           # 0047A10C
    sub cx, word ptr [ebp + 3]                           # 0047A110
    jmp _sub_47A132                                      # 0047A114

    .global _sub_47A116
_sub_47A116:
    sub ax, word ptr [ebp + 3]                           # 0047A116
    add cx, word ptr [ebp + 1]                           # 0047A11A
    jmp _sub_47A132                                      # 0047A11E

    .global _sub_47A120
_sub_47A120:
    add ax, word ptr [ebp + 1]                           # 0047A120
    add cx, word ptr [ebp + 3]                           # 0047A124
    jmp _sub_47A132                                      # 0047A128

    .global _sub_47A12A
_sub_47A12A:
    add ax, word ptr [ebp + 3]                           # 0047A12A
    sub cx, word ptr [ebp + 1]                           # 0047A12E

    .global _sub_47A132
_sub_47A132:
    sub dx, word ptr [ebp + 5]                           # 0047A132
    mov bl, byte ptr [esi + 4]                           # 0047A136
    and ebx, 0xf                                         # 0047A139
    movzx ebp, byte ptr [esi]                            # 0047A13C
    shl ebx, 3                                           # 0047A13F
    and ebp, 3                                           # 0047A142
    msvc_or ebp, ebx                                     # 0047A145
    mov bl, byte ptr [esi + 7]                           # 0047A147
    and bl, 0xf                                          # 0047A14A
    mov bh, byte ptr [esi + 5]                           # 0047A14D
    shr bh, 4                                            # 0047A150
    call _sub_4A3972                                     # 0047A153
    jb .L47A171                                          # 0047A158
    msvc_abscall __1135F0E                               # 0047A15A
    jb .L47A171                                          # 0047A160
    push ax                                              # 0047A162
    push bx                                              # 0047A164
    push cx                                              # 0047A166
    push dx                                              # 0047A168
    push bp                                              # 0047A16A
    push_dword _sub_479EFA                               # 0047A16C
.L47A171:
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047A171
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047A179
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047A181
    movzx edi, byte ptr [ebp*8 + __4F6F8D]               # 0047A189
    cmp edi, 0xc                                         # 0047A191
    jae .L47A1A6                                         # 0047A194
    sub ax, word ptr [edi*4 + __503C6C]                  # 0047A196
    sub cx, word ptr [edi*4 + __503C6E]                  # 0047A19E
.L47A1A6:
    xor ebp, 4                                           # 0047A1A6
    call _sub_4A3972                                     # 0047A1A9
    jb .L47A1C7                                          # 0047A1AE
    msvc_abscall __1135F0E                               # 0047A1B0
    jb .L47A1C7                                          # 0047A1B6
    push ax                                              # 0047A1B8
    push bx                                              # 0047A1BA
    push cx                                              # 0047A1BC
    push dx                                              # 0047A1BE
    push bp                                              # 0047A1C0
    push_dword _sub_479EFA                               # 0047A1C2
.L47A1C7:
    mov ebp, dword ptr [__1135EEA]                       # 0047A1C7
    mov esi, dword ptr [__1135EEE]                       # 0047A1CD
    mov dl, byte ptr [__1136053]                         # 0047A1D3

    .global _sub_47A1D9
_sub_47A1D9:
    add esi, 8                                           # 0047A1D9
    test byte ptr [esi - 7], 0x80                        # 0047A1DC
    je _sub_47A043                                       # 0047A1E0
    add ebp, 0xa                                         # 0047A1E6
    cmp byte ptr [ebp], 0xff                             # 0047A1E9
    jne _sub_479FAC                                      # 0047A1ED
    mov bl, byte ptr [__1136050]                         # 0047A1F3
    mov bh, byte ptr [__1136051]                         # 0047A1F9
    mov ax, word ptr [__1135F9C]                         # 0047A1FF
    mov cx, word ptr [__1135F9E]                         # 0047A205
    mov dx, word ptr [__1135FA0]                         # 0047A20C
    mov ebp, dword ptr [__1135EFE]                       # 0047A213
    msvc_jmp _sub_479DB1                                 # 0047A219

    .global _sub_47A21E
_sub_47A21E:
    mov byte ptr [__9C68EA], 0x30                        # 0047A21E
    mov word ptr [__9C68E0], ax                          # 0047A225
    mov word ptr [__9C68E2], cx                          # 0047A22B
    add word ptr [__9C68E0], 0x10                        # 0047A232
    add word ptr [__9C68E2], 0x10                        # 0047A23A
    mov word ptr [__9C68E4], di                          # 0047A242
    mov byte ptr [__112C2E4], dh                         # 0047A249
    mov byte ptr [__112C2E5], dl                         # 0047A24F
    mov word ptr [__112C2B8], bp                         # 0047A255
    ror edi, 0x10                                        # 0047A25C
    ror ebp, 0x10                                        # 0047A25F
    mov word ptr [__1135FF2], di                         # 0047A262
    mov word ptr [__1135FEC], bp                         # 0047A269
    ror edi, 0x10                                        # 0047A270
    ror ebp, 0x10                                        # 0047A273
    push ebx                                             # 0047A276
    msvc_mov bp, cx                                      # 0047A277
    movzx esi, bp                                        # 0047A27A
    shl esi, 9                                           # 0047A27D
    msvc_or si, ax                                       # 0047A280
    shr esi, 3                                           # 0047A283
    mov esi, dword ptr [esi + __E40134]                  # 0047A286
.L47A28C:
    movzx bp, byte ptr [esi + 2]                         # 0047A28C
    shl bp, 2                                            # 0047A291
    msvc_cmp di, bp                                      # 0047A295
    jne .L47A2D3                                         # 0047A298
    mov dh, byte ptr [esi]                               # 0047A29A
    and dh, 0x3c                                         # 0047A29C
    cmp dh, 0x1c                                         # 0047A29F
    jne .L47A2D3                                         # 0047A2A2
    mov dh, byte ptr [esi]                               # 0047A2A4
    and dh, 3                                            # 0047A2A6
    cmp dh, bh                                           # 0047A2A9
    jne .L47A2D3                                         # 0047A2AB
    mov dh, byte ptr [esi + 5]                           # 0047A2AD
    and dh, 3                                            # 0047A2B0
    cmp dh, byte ptr [__112C2E4]                         # 0047A2B3
    jne .L47A2D3                                         # 0047A2B9
    mov dh, byte ptr [esi + 5]                           # 0047A2BB
    shr dh, 4                                            # 0047A2BE
    cmp dh, byte ptr [__112C2B8]                         # 0047A2C1
    jne .L47A2D3                                         # 0047A2C7
    mov dh, byte ptr [esi + 4]                           # 0047A2C9
    and dh, 0xf                                          # 0047A2CC
    cmp dl, dh                                           # 0047A2CF
    je .L47A2D8                                          # 0047A2D1
.L47A2D3:
    add esi, 8                                           # 0047A2D3
    jmp .L47A28C                                         # 0047A2D6
.L47A2D8:
    push eax                                             # 0047A2D8
    mov al, byte ptr [esi + 7]                           # 0047A2D9
    and al, 0xf                                          # 0047A2DC
    mov byte ptr [__112C2E6], al                         # 0047A2DE
    call _sub_431E6A                                     # 0047A2E3
    pop eax                                              # 0047A2E8
    jb _sub_47A428                                       # 0047A2E9
    msvc_mov bl, dl                                      # 0047A2EF
    msvc_xchg di, dx                                     # 0047A2F1
    and edi, 0xff                                        # 0047A2F4
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047A2FA
    mov bp, word ptr [esi + 5]                           # 0047A301
    and ebp, 3                                           # 0047A305
    imul ebp, ebp, 0xa                                   # 0047A308
    mov si, word ptr [esi]                               # 0047A30B
    and esi, 3                                           # 0047A30E
    jmp dword ptr [esi*4 + __4FE5F0]                     # 0047A311

    .global _sub_47A318
_sub_47A318:
    sub ax, word ptr [ebp + edi + 1]                     # 0047A318
    sub cx, word ptr [ebp + edi + 3]                     # 0047A31D
    jmp _sub_47A346                                      # 0047A322

    .global _sub_47A324
_sub_47A324:
    sub ax, word ptr [ebp + edi + 3]                     # 0047A324
    add cx, word ptr [ebp + edi + 1]                     # 0047A329
    jmp _sub_47A346                                      # 0047A32E

    .global _sub_47A330
_sub_47A330:
    add ax, word ptr [ebp + edi + 1]                     # 0047A330
    add cx, word ptr [ebp + edi + 3]                     # 0047A335
    jmp _sub_47A346                                      # 0047A33A

    .global _sub_47A33C
_sub_47A33C:
    add ax, word ptr [ebp + edi + 3]                     # 0047A33C
    sub cx, word ptr [ebp + edi + 1]                     # 0047A341

    .global _sub_47A346
_sub_47A346:
    sub dx, word ptr [ebp + edi + 5]                     # 0047A346
    pop ebx                                              # 0047A34B
    mov byte ptr [__112C2E7], bl                         # 0047A34C
    shr bx, 8                                            # 0047A352
    movzx ebp, byte ptr [__112C2E5]                      # 0047A356
    shl ebp, 3                                           # 0047A35D
    msvc_or bp, bx                                       # 0047A360
    mov bl, byte ptr [__112C2E6]                         # 0047A363
    mov bh, byte ptr [__112C2B8]                         # 0047A369
    mov dword ptr [__112C29C], 0                         # 0047A36F
    mov word ptr [__112C2BA], 0                          # 0047A379
    mov word ptr [__112C2BC], 0                          # 0047A382
    movzx esi, word ptr [__1135FEC]                      # 0047A38B
    jmp dword ptr [esi*4 + __4FE600]                     # 0047A392

    .global _sub_47A399
_sub_47A399:
    or word ptr [__112C2BC], 0x8000                      # 0047A399

    .global _sub_47A3A2
_sub_47A3A2:
    mov_offset esi, _sub_47A5E6                          # 0047A3A2
    mov edi, 0xffffffff                                  # 0047A3A7
    call _sub_47981E                                     # 0047A3AC
    cmp word ptr [__112C2BA], 0                          # 0047A3B1
    jne .L47A3C6                                         # 0047A3B9
    test word ptr [__112C2BC], 1                         # 0047A3BB
    jne _sub_47A419                                      # 0047A3C4
.L47A3C6:
    test byte ptr [__112C2E7], 1                         # 0047A3C6
    je .L47A3F1                                          # 0047A3CD
    test byte ptr [__112C2E7], 0x40                      # 0047A3CF
    jne .L47A3F1                                         # 0047A3D6
    cmp dword ptr [__1135F0A], 0xf9c                     # 0047A3D8
    jb .L47A3F1                                          # 0047A3E2
    mov bx, 0x15f                                        # 0047A3E4
    mov dx, 0xffff                                       # 0047A3E8
    call _sub_431A8A                                     # 0047A3EC
.L47A3F1:
    mov ebx, dword ptr [__112C29C]                       # 0047A3F1
    ret                                                  # 0047A3F7

    .global _sub_47A3F8
_sub_47A3F8:
    mov dword ptr [__1135F06], 0xffffffff                # 0047A3F8
    call _sub_47A5E6                                     # 0047A402
    test word ptr [__112C2BC], 1                         # 0047A407
    jne _sub_47A419                                      # 0047A410
    mov ebx, dword ptr [__112C29C]                       # 0047A412
    ret                                                  # 0047A418

    .global _sub_47A419
_sub_47A419:
    mov word ptr [__9C68E6], 0x26e                       # 0047A419
    mov ebx, 0x80000000                                  # 0047A422
    ret                                                  # 0047A427

    .global _sub_47A428
_sub_47A428:
    pop ebx                                              # 0047A428
    mov ebx, 0x80000000                                  # 0047A429
    ret                                                  # 0047A42E

    .global _sub_47A42F
_sub_47A42F:
    mov byte ptr [__9C68EA], 0x30                        # 0047A42F
    mov word ptr [__9C68E0], ax                          # 0047A436
    mov word ptr [__9C68E2], cx                          # 0047A43C
    add word ptr [__9C68E0], 0x10                        # 0047A443
    add word ptr [__9C68E2], 0x10                        # 0047A44B
    mov word ptr [__9C68E4], di                          # 0047A453
    mov byte ptr [__112C2E4], dh                         # 0047A45A
    mov byte ptr [__112C2E5], dl                         # 0047A460
    mov word ptr [__112C2B8], bp                         # 0047A466
    ror edi, 0x10                                        # 0047A46D
    ror ebp, 0x10                                        # 0047A470
    mov word ptr [__1135FF2], di                         # 0047A473
    mov word ptr [__1135FEC], bp                         # 0047A47A
    ror edi, 0x10                                        # 0047A481
    ror ebp, 0x10                                        # 0047A484
    push ebx                                             # 0047A487
    msvc_mov bp, cx                                      # 0047A488
    movzx esi, bp                                        # 0047A48B
    shl esi, 9                                           # 0047A48E
    msvc_or si, ax                                       # 0047A491
    shr esi, 3                                           # 0047A494
    mov esi, dword ptr [esi + __E40134]                  # 0047A497
.L47A49D:
    movzx bp, byte ptr [esi + 2]                         # 0047A49D
    shl bp, 2                                            # 0047A4A2
    msvc_cmp di, bp                                      # 0047A4A6
    jne .L47A4E4                                         # 0047A4A9
    mov dh, byte ptr [esi]                               # 0047A4AB
    and dh, 0x3c                                         # 0047A4AD
    cmp dh, 0x1c                                         # 0047A4B0
    jne .L47A4E4                                         # 0047A4B3
    mov dh, byte ptr [esi]                               # 0047A4B5
    and dh, 3                                            # 0047A4B7
    cmp dh, bh                                           # 0047A4BA
    jne .L47A4E4                                         # 0047A4BC
    mov dh, byte ptr [esi + 5]                           # 0047A4BE
    and dh, 3                                            # 0047A4C1
    cmp dh, byte ptr [__112C2E4]                         # 0047A4C4
    jne .L47A4E4                                         # 0047A4CA
    mov dh, byte ptr [esi + 5]                           # 0047A4CC
    shr dh, 4                                            # 0047A4CF
    cmp dh, byte ptr [__112C2B8]                         # 0047A4D2
    jne .L47A4E4                                         # 0047A4D8
    mov dh, byte ptr [esi + 4]                           # 0047A4DA
    and dh, 0xf                                          # 0047A4DD
    cmp dl, dh                                           # 0047A4E0
    je .L47A4E9                                          # 0047A4E2
.L47A4E4:
    add esi, 8                                           # 0047A4E4
    jmp .L47A49D                                         # 0047A4E7
.L47A4E9:
    push eax                                             # 0047A4E9
    mov al, byte ptr [esi + 7]                           # 0047A4EA
    and al, 0xf                                          # 0047A4ED
    mov byte ptr [__112C2E6], al                         # 0047A4EF
    call _sub_431E6A                                     # 0047A4F4
    pop eax                                              # 0047A4F9
    jb _sub_47A5DF                                       # 0047A4FA
    msvc_mov bl, dl                                      # 0047A500
    msvc_xchg di, dx                                     # 0047A502
    and edi, 0xff                                        # 0047A505
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047A50B
    mov bp, word ptr [esi + 5]                           # 0047A512
    and ebp, 3                                           # 0047A516
    imul ebp, ebp, 0xa                                   # 0047A519
    mov si, word ptr [esi]                               # 0047A51C
    and esi, 3                                           # 0047A51F
    jmp dword ptr [esi*4 + __4FE60C]                     # 0047A522

    .global _sub_47A529
_sub_47A529:
    sub ax, word ptr [ebp + edi + 1]                     # 0047A529
    sub cx, word ptr [ebp + edi + 3]                     # 0047A52E
    jmp _sub_47A557                                      # 0047A533

    .global _sub_47A535
_sub_47A535:
    sub ax, word ptr [ebp + edi + 3]                     # 0047A535
    add cx, word ptr [ebp + edi + 1]                     # 0047A53A
    jmp _sub_47A557                                      # 0047A53F

    .global _sub_47A541
_sub_47A541:
    add ax, word ptr [ebp + edi + 1]                     # 0047A541
    add cx, word ptr [ebp + edi + 3]                     # 0047A546
    jmp _sub_47A557                                      # 0047A54B

    .global _sub_47A54D
_sub_47A54D:
    add ax, word ptr [ebp + edi + 3]                     # 0047A54D
    sub cx, word ptr [ebp + edi + 1]                     # 0047A552

    .global _sub_47A557
_sub_47A557:
    sub dx, word ptr [ebp + edi + 5]                     # 0047A557
    pop ebx                                              # 0047A55C
    mov byte ptr [__112C2E7], bl                         # 0047A55D
    shr bx, 8                                            # 0047A563
    movzx ebp, byte ptr [__112C2E5]                      # 0047A567
    shl ebp, 3                                           # 0047A56E
    msvc_or bp, bx                                       # 0047A571
    mov bl, byte ptr [__112C2E6]                         # 0047A574
    mov bh, byte ptr [__112C2B8]                         # 0047A57A
    mov dword ptr [__112C29C], 0                         # 0047A580
    mov word ptr [__112C2BA], 0                          # 0047A58A
    mov word ptr [__112C2BC], 0                          # 0047A593
    movzx esi, word ptr [__1135FEC]                      # 0047A59C
    jmp dword ptr [esi*4 + __4FE61C]                     # 0047A5A3

    .global _sub_47A5AA
_sub_47A5AA:
    or word ptr [__112C2BC], 0x8000                      # 0047A5AA

    .global _sub_47A5B3
_sub_47A5B3:
    mov_offset esi, _sub_47A8F0                          # 0047A5B3
    mov edi, 0xffffffff                                  # 0047A5B8
    call _sub_47981E                                     # 0047A5BD
    mov ebx, dword ptr [__112C29C]                       # 0047A5C2
    ret                                                  # 0047A5C8

    .global _sub_47A5C9
_sub_47A5C9:
    mov dword ptr [__1135F06], 0xffffffff                # 0047A5C9
    call _sub_47A8F0                                     # 0047A5D3
    mov ebx, dword ptr [__112C29C]                       # 0047A5D8
    ret                                                  # 0047A5DE

    .global _sub_47A5DF
_sub_47A5DF:
    pop ebx                                              # 0047A5DF
    mov ebx, 0x80000000                                  # 0047A5E0
    ret                                                  # 0047A5E5

    .global _sub_47A5E6
_sub_47A5E6:
    push eax                                             # 0047A5E6
    push ebx                                             # 0047A5E7
    push ecx                                             # 0047A5E8
    push edx                                             # 0047A5E9
    push ebp                                             # 0047A5EA
    cmp dword ptr [__1135F06], -1                        # 0047A5EB
    je .L47A648                                          # 0047A5F2
    and ebp, 0x7f                                        # 0047A5F4
    push ebx                                             # 0047A5F7
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047A5F8
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047A600
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047A608
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047A610
    cmp bl, 0xc                                          # 0047A618
    jae .L47A62D                                         # 0047A61B
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047A61D
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047A625
.L47A62D:
    pop ebx                                              # 0047A62D
    mov ebp, dword ptr [esp]                             # 0047A62E
    xor ebp, 4                                           # 0047A631
    call _sub_4A3972                                     # 0047A634
    mov eax, dword ptr [esp + 0x10]                      # 0047A639
    mov ecx, dword ptr [esp + 8]                         # 0047A63D
    mov edx, dword ptr [esp + 4]                         # 0047A641
    mov ebp, dword ptr [esp]                             # 0047A645
.L47A648:
    and ebp, 0x7f                                        # 0047A648
    msvc_mov edx, ebp                                    # 0047A64B
    shr edx, 3                                           # 0047A64D
    movzx edi, word ptr [__112C2B8]                      # 0047A650
    mov edi, dword ptr [edi*4 + _roadObjects]            # 0047A657
    msvc_xor esi, esi                                    # 0047A65E
.L47A660:
    bt word ptr [__1135FF2], si                          # 0047A660
    jae .L47A690                                         # 0047A668
    movzx ebx, byte ptr [esi + edi + 0x26]               # 0047A66A
    mov ebx, dword ptr [ebx*4 + _roadExtraObjects]       # 0047A66F
    mov ax, word ptr [edx*2 + __4F72E8]                  # 0047A676
    and ax, word ptr [ebx + 2]                           # 0047A67E
    cmp ax, word ptr [edx*2 + __4F72E8]                  # 0047A682
    jne _sub_47A8E6                                      # 0047A68A
.L47A690:
    inc esi                                              # 0047A690
    cmp esi, 2                                           # 0047A691
    jb .L47A660                                          # 0047A694
    mov eax, dword ptr [esp + 0x10]                      # 0047A696
    mov ebx, dword ptr [esp + 0xc]                       # 0047A69A
    mov edx, dword ptr [esp + 4]                         # 0047A69E
    test ebp, 4                                          # 0047A6A2
    je .L47A6E1                                          # 0047A6A8
    push ebx                                             # 0047A6AA
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047A6AB
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047A6B3
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047A6BB
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047A6C3
    cmp bl, 0xc                                          # 0047A6CB
    jae .L47A6E0                                         # 0047A6CE
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047A6D0
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047A6D8
.L47A6E0:
    pop ebx                                              # 0047A6E0
.L47A6E1:
    msvc_mov esi, ebp                                    # 0047A6E1
    and esi, 3                                           # 0047A6E3
    mov dword ptr [__112C2A0], esi                       # 0047A6E6
    shr ebp, 3                                           # 0047A6EC
    mov dword ptr [__112C2A4], ebp                       # 0047A6EF
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047A6F5
    mov byte ptr [__112C2E8], 0                          # 0047A6FC

    .global _sub_47A703
_sub_47A703:
    push eax                                             # 0047A703
    push ecx                                             # 0047A704
    push edx                                             # 0047A705
    push edi                                             # 0047A706
    push esi                                             # 0047A707
    jmp dword ptr [esi*4 + __4FE628]                     # 0047A708

    .global _sub_47A70F
_sub_47A70F:
    add ax, word ptr [ebp + 1]                           # 0047A70F
    add cx, word ptr [ebp + 3]                           # 0047A713
    jmp _sub_47A735                                      # 0047A717

    .global _sub_47A719
_sub_47A719:
    add ax, word ptr [ebp + 3]                           # 0047A719
    sub cx, word ptr [ebp + 1]                           # 0047A71D
    jmp _sub_47A735                                      # 0047A721

    .global _sub_47A723
_sub_47A723:
    sub ax, word ptr [ebp + 1]                           # 0047A723
    sub cx, word ptr [ebp + 3]                           # 0047A727
    jmp _sub_47A735                                      # 0047A72B

    .global _sub_47A72D
_sub_47A72D:
    sub ax, word ptr [ebp + 3]                           # 0047A72D
    add cx, word ptr [ebp + 1]                           # 0047A731

    .global _sub_47A735
_sub_47A735:
    add dx, word ptr [ebp + 5]                           # 0047A735
    mov word ptr [__112C2BE], ax                         # 0047A739
    mov word ptr [__112C2C0], cx                         # 0047A73F
    mov word ptr [__112C2C2], dx                         # 0047A746
    shr dx, 2                                            # 0047A74D
    movzx esi, cx                                        # 0047A751
    shl esi, 9                                           # 0047A754
    msvc_or si, ax                                       # 0047A757
    shr esi, 3                                           # 0047A75A
    mov esi, dword ptr [esi + __E40134]                  # 0047A75D
.L47A763:
    cmp dl, byte ptr [esi + 2]                           # 0047A763
    jne .L47A79D                                         # 0047A766
    mov al, byte ptr [esi]                               # 0047A768
    and al, 0x3c                                         # 0047A76A
    cmp al, 0x1c                                         # 0047A76C
    jne .L47A79D                                         # 0047A76E
    mov al, byte ptr [esi]                               # 0047A770
    and al, 3                                            # 0047A772
    cmp al, byte ptr [__112C2A0]                         # 0047A774
    jne .L47A79D                                         # 0047A77A
    mov al, byte ptr [esi + 5]                           # 0047A77C
    and al, 3                                            # 0047A77F
    cmp al, byte ptr [ebp]                               # 0047A781
    jne .L47A79D                                         # 0047A784
    mov al, byte ptr [esi + 5]                           # 0047A786
    shr al, 4                                            # 0047A789
    cmp al, bh                                           # 0047A78C
    jne .L47A79D                                         # 0047A78E
    mov al, byte ptr [esi + 4]                           # 0047A790
    and al, 0xf                                          # 0047A793
    cmp al, byte ptr [__112C2A4]                         # 0047A795
    je .L47A7A2                                          # 0047A79B
.L47A79D:
    add esi, 8                                           # 0047A79D
    jmp .L47A763                                         # 0047A7A0
.L47A7A2:
    cmp byte ptr [__112C2E8], 0                          # 0047A7A2
    jne .L47A856                                         # 0047A7A9
    inc word ptr [__112C2BA]                             # 0047A7AF
    movzx edi, word ptr [__112C2B8]                      # 0047A7B6
    mov edi, dword ptr [edi*4 + _roadObjects]            # 0047A7BD
    test word ptr [__1135FF2], 1                         # 0047A7C4
    je .L47A80D                                          # 0047A7CD
    test byte ptr [esi + 7], 0x40                        # 0047A7CF
    jne .L47A80D                                         # 0047A7D3
    movzx ecx, byte ptr [edi + 0x26]                     # 0047A7D5
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047A7D9
    movsx eax, word ptr [ecx + 6]                        # 0047A7E0
    movzx ecx, byte ptr [ecx + 5]                        # 0047A7E4
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047A7E8
    sar eax, 0xa                                         # 0047A7F0
    mov ecx, dword ptr [__112C2A4]                       # 0047A7F3
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047A7F9
    imul eax, ecx                                        # 0047A801
    sar eax, 8                                           # 0047A804
    add dword ptr [__112C29C], eax                       # 0047A807
.L47A80D:
    test word ptr [__1135FF2], 2                         # 0047A80D
    je .L47A856                                          # 0047A816
    test byte ptr [esi + 7], 0x80                        # 0047A818
    jne .L47A856                                         # 0047A81C
    movzx ecx, byte ptr [edi + 0x27]                     # 0047A81E
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047A822
    movsx eax, word ptr [ecx + 6]                        # 0047A829
    movzx ecx, byte ptr [ecx + 5]                        # 0047A82D
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047A831
    sar eax, 0xa                                         # 0047A839
    mov ecx, dword ptr [__112C2A4]                       # 0047A83C
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047A842
    imul eax, ecx                                        # 0047A84A
    sar eax, 8                                           # 0047A84D
    add dword ptr [__112C29C], eax                       # 0047A850
.L47A856:
    test byte ptr [__112C2E7], 1                         # 0047A856
    je .L47A8A8                                          # 0047A85D
    test byte ptr [__112C2E7], 0x40                      # 0047A85F
    je .L47A879                                          # 0047A866
    mov al, byte ptr [_scenarioChunk3+36]                # 0047A868
    cmp al, byte ptr [esp + 0x20]                        # 0047A86D
    jne .L47A8A8                                         # 0047A871
    or byte ptr [esi + 4], 0x40                          # 0047A873
    jmp .L47A884                                         # 0047A877
.L47A879:
    mov al, byte ptr [__1135FF2]                         # 0047A879
    shl al, 6                                            # 0047A87E
    or byte ptr [esi + 7], al                            # 0047A881
.L47A884:
    mov ax, word ptr [__112C2BE]                         # 0047A884
    mov cx, word ptr [__112C2C0]                         # 0047A88A
    movzx di, byte ptr [esi + 2]                         # 0047A891
    movzx si, byte ptr [esi + 3]                         # 0047A896
    shl di, 2                                            # 0047A89B
    shl si, 2                                            # 0047A89F
    call _sub_4CC390                                     # 0047A8A3
.L47A8A8:
    pop esi                                              # 0047A8A8
    pop edi                                              # 0047A8A9
    pop edx                                              # 0047A8AA
    pop ecx                                              # 0047A8AB
    pop eax                                              # 0047A8AC
    test byte ptr [__112C2E7], 1                         # 0047A8AD
    je _sub_47A8C9                                       # 0047A8B4
    add ebp, 0xa                                         # 0047A8B6
    inc byte ptr [__112C2E8]                             # 0047A8B9
    cmp byte ptr [ebp], 0xff                             # 0047A8BF
    jne _sub_47A703                                      # 0047A8C3

    .global _sub_47A8C9
_sub_47A8C9:
    pop ebp                                              # 0047A8C9
    pop edx                                              # 0047A8CA
    pop ecx                                              # 0047A8CB
    pop ebx                                              # 0047A8CC
    pop eax                                              # 0047A8CD
    test word ptr [__112C2BC], 0x8000                    # 0047A8CE
    je .L47A8E1                                          # 0047A8D7
    test ebp, 0x8000                                     # 0047A8D9
    jne .L47A8E4                                         # 0047A8DF
.L47A8E1:
    msvc_and eax, eax                                    # 0047A8E1
    ret                                                  # 0047A8E3
.L47A8E4:
    stc                                                  # 0047A8E4
    ret                                                  # 0047A8E5

    .global _sub_47A8E6
_sub_47A8E6:
    or word ptr [__112C2BC], 1                           # 0047A8E6
    jmp _sub_47A8C9                                      # 0047A8EE

    .global _sub_47A8F0
_sub_47A8F0:
    push eax                                             # 0047A8F0
    push ebx                                             # 0047A8F1
    push ecx                                             # 0047A8F2
    push edx                                             # 0047A8F3
    push ebp                                             # 0047A8F4
    cmp dword ptr [__1135F06], -1                        # 0047A8F5
    je .L47A952                                          # 0047A8FC
    and ebp, 0x7f                                        # 0047A8FE
    push ebx                                             # 0047A901
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047A902
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047A90A
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047A912
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047A91A
    cmp bl, 0xc                                          # 0047A922
    jae .L47A937                                         # 0047A925
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047A927
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047A92F
.L47A937:
    pop ebx                                              # 0047A937
    mov ebp, dword ptr [esp]                             # 0047A938
    xor ebp, 4                                           # 0047A93B
    call _sub_4A3972                                     # 0047A93E
    mov eax, dword ptr [esp + 0x10]                      # 0047A943
    mov ecx, dword ptr [esp + 8]                         # 0047A947
    mov edx, dword ptr [esp + 4]                         # 0047A94B
    mov ebp, dword ptr [esp]                             # 0047A94F
.L47A952:
    and ebp, 0x7f                                        # 0047A952
    test ebp, 4                                          # 0047A955
    je .L47A994                                          # 0047A95B
    push ebx                                             # 0047A95D
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047A95E
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047A966
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047A96E
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047A976
    cmp bl, 0xc                                          # 0047A97E
    jae .L47A993                                         # 0047A981
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047A983
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047A98B
.L47A993:
    pop ebx                                              # 0047A993
.L47A994:
    msvc_mov esi, ebp                                    # 0047A994
    and esi, 3                                           # 0047A996
    mov dword ptr [__112C2A0], esi                       # 0047A999
    shr ebp, 3                                           # 0047A99F
    mov dword ptr [__112C2A4], ebp                       # 0047A9A2
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047A9A8
    mov byte ptr [__112C2E8], 0                          # 0047A9AF

    .global _sub_47A9B6
_sub_47A9B6:
    push eax                                             # 0047A9B6
    push ecx                                             # 0047A9B7
    push edx                                             # 0047A9B8
    push edi                                             # 0047A9B9
    push esi                                             # 0047A9BA
    jmp dword ptr [esi*4 + __4FE638]                     # 0047A9BB

    .global _sub_47A9C2
_sub_47A9C2:
    add ax, word ptr [ebp + 1]                           # 0047A9C2
    add cx, word ptr [ebp + 3]                           # 0047A9C6
    jmp _sub_47A9E8                                      # 0047A9CA

    .global _sub_47A9CC
_sub_47A9CC:
    add ax, word ptr [ebp + 3]                           # 0047A9CC
    sub cx, word ptr [ebp + 1]                           # 0047A9D0
    jmp _sub_47A9E8                                      # 0047A9D4

    .global _sub_47A9D6
_sub_47A9D6:
    sub ax, word ptr [ebp + 1]                           # 0047A9D6
    sub cx, word ptr [ebp + 3]                           # 0047A9DA
    jmp _sub_47A9E8                                      # 0047A9DE

    .global _sub_47A9E0
_sub_47A9E0:
    sub ax, word ptr [ebp + 3]                           # 0047A9E0
    add cx, word ptr [ebp + 1]                           # 0047A9E4

    .global _sub_47A9E8
_sub_47A9E8:
    add dx, word ptr [ebp + 5]                           # 0047A9E8
    mov word ptr [__112C2BE], ax                         # 0047A9EC
    mov word ptr [__112C2C0], cx                         # 0047A9F2
    mov word ptr [__112C2C2], dx                         # 0047A9F9
    shr dx, 2                                            # 0047AA00
    movzx esi, cx                                        # 0047AA04
    shl esi, 9                                           # 0047AA07
    msvc_or si, ax                                       # 0047AA0A
    shr esi, 3                                           # 0047AA0D
    mov esi, dword ptr [esi + __E40134]                  # 0047AA10
.L47AA16:
    cmp dl, byte ptr [esi + 2]                           # 0047AA16
    jne .L47AA50                                         # 0047AA19
    mov al, byte ptr [esi]                               # 0047AA1B
    and al, 0x3c                                         # 0047AA1D
    cmp al, 0x1c                                         # 0047AA1F
    jne .L47AA50                                         # 0047AA21
    mov al, byte ptr [esi]                               # 0047AA23
    and al, 3                                            # 0047AA25
    cmp al, byte ptr [__112C2A0]                         # 0047AA27
    jne .L47AA50                                         # 0047AA2D
    mov al, byte ptr [esi + 5]                           # 0047AA2F
    and al, 3                                            # 0047AA32
    cmp al, byte ptr [ebp]                               # 0047AA34
    jne .L47AA50                                         # 0047AA37
    mov al, byte ptr [esi + 5]                           # 0047AA39
    shr al, 4                                            # 0047AA3C
    cmp al, bh                                           # 0047AA3F
    jne .L47AA50                                         # 0047AA41
    mov al, byte ptr [esi + 4]                           # 0047AA43
    and al, 0xf                                          # 0047AA46
    cmp al, byte ptr [__112C2A4]                         # 0047AA48
    je .L47AA55                                          # 0047AA4E
.L47AA50:
    add esi, 8                                           # 0047AA50
    jmp .L47AA16                                         # 0047AA53
.L47AA55:
    cmp byte ptr [__112C2E8], 0                          # 0047AA55
    jne .L47AB09                                         # 0047AA5C
    inc word ptr [__112C2BA]                             # 0047AA62
    movzx edi, word ptr [__112C2B8]                      # 0047AA69
    mov edi, dword ptr [edi*4 + _roadObjects]            # 0047AA70
    test word ptr [__1135FF2], 1                         # 0047AA77
    je .L47AAC0                                          # 0047AA80
    test byte ptr [esi + 7], 0x40                        # 0047AA82
    je .L47AAC0                                          # 0047AA86
    movzx ecx, byte ptr [edi + 0x26]                     # 0047AA88
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047AA8C
    movsx eax, word ptr [ecx + 8]                        # 0047AA93
    movzx ecx, byte ptr [ecx + 5]                        # 0047AA97
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047AA9B
    sar eax, 0xa                                         # 0047AAA3
    mov ecx, dword ptr [__112C2A4]                       # 0047AAA6
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047AAAC
    imul eax, ecx                                        # 0047AAB4
    sar eax, 8                                           # 0047AAB7
    add dword ptr [__112C29C], eax                       # 0047AABA
.L47AAC0:
    test word ptr [__1135FF2], 2                         # 0047AAC0
    je .L47AB09                                          # 0047AAC9
    test byte ptr [esi + 7], 0x80                        # 0047AACB
    je .L47AB09                                          # 0047AACF
    movzx ecx, byte ptr [edi + 0x27]                     # 0047AAD1
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047AAD5
    movsx eax, word ptr [ecx + 8]                        # 0047AADC
    movzx ecx, byte ptr [ecx + 5]                        # 0047AAE0
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047AAE4
    sar eax, 0xa                                         # 0047AAEC
    mov ecx, dword ptr [__112C2A4]                       # 0047AAEF
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047AAF5
    imul eax, ecx                                        # 0047AAFD
    sar eax, 8                                           # 0047AB00
    add dword ptr [__112C29C], eax                       # 0047AB03
.L47AB09:
    test byte ptr [__112C2E7], 1                         # 0047AB09
    je .L47AB5D                                          # 0047AB10
    test byte ptr [__112C2E7], 0x40                      # 0047AB12
    je .L47AB2C                                          # 0047AB19
    mov al, byte ptr [_scenarioChunk3+36]                # 0047AB1B
    cmp al, byte ptr [esp + 0x20]                        # 0047AB20
    jne .L47AB5D                                         # 0047AB24
    and byte ptr [esi + 4], 0xbf                         # 0047AB26
    jmp .L47AB39                                         # 0047AB2A
.L47AB2C:
    mov al, byte ptr [__1135FF2]                         # 0047AB2C
    shl al, 6                                            # 0047AB31
    not al                                               # 0047AB34
    and byte ptr [esi + 7], al                           # 0047AB36
.L47AB39:
    mov ax, word ptr [__112C2BE]                         # 0047AB39
    mov cx, word ptr [__112C2C0]                         # 0047AB3F
    movzx di, byte ptr [esi + 2]                         # 0047AB46
    movzx si, byte ptr [esi + 3]                         # 0047AB4B
    shl di, 2                                            # 0047AB50
    shl si, 2                                            # 0047AB54
    call _sub_4CC390                                     # 0047AB58
.L47AB5D:
    pop esi                                              # 0047AB5D
    pop edi                                              # 0047AB5E
    pop edx                                              # 0047AB5F
    pop ecx                                              # 0047AB60
    pop eax                                              # 0047AB61
    test byte ptr [__112C2E7], 1                         # 0047AB62
    je .L47AB7E                                          # 0047AB69
    add ebp, 0xa                                         # 0047AB6B
    inc byte ptr [__112C2E8]                             # 0047AB6E
    cmp byte ptr [ebp], 0xff                             # 0047AB74
    jne _sub_47A9B6                                      # 0047AB78
.L47AB7E:
    pop ebp                                              # 0047AB7E
    pop edx                                              # 0047AB7F
    pop ecx                                              # 0047AB80
    pop ebx                                              # 0047AB81
    pop eax                                              # 0047AB82
    test word ptr [__112C2BC], 0x8000                    # 0047AB83
    je .L47AB96                                          # 0047AB8C
    test ebp, 0x8000                                     # 0047AB8E
    jne .L47AB99                                         # 0047AB94
.L47AB96:
    msvc_and eax, eax                                    # 0047AB96
    ret                                                  # 0047AB98
.L47AB99:
    stc                                                  # 0047AB99
    ret                                                  # 0047AB9A

    .global _sub_47AB9B
_sub_47AB9B:
    msvc_xor bx, bx                                      # 0047AB9B
.L47AB9E:
    msvc_xor bp, bp                                      # 0047AB9E
.L47ABA1:
    msvc_mov ax, bp                                      # 0047ABA1
    movzx esi, ax                                        # 0047ABA4
    shl esi, 9                                           # 0047ABA7
    msvc_or si, bx                                       # 0047ABAA
    shr esi, 3                                           # 0047ABAD
    mov esi, dword ptr [esi + __E40134]                  # 0047ABB0
.L47ABB6:
    mov dl, byte ptr [esi]                               # 0047ABB6
    and dl, 0x3c                                         # 0047ABB8
    cmp dl, 0x1c                                         # 0047ABBB
    jne .L47ABE5                                         # 0047ABBE
    test byte ptr [esi + 1], 0x30                        # 0047ABC0
    jne .L47ABE5                                         # 0047ABC4
    movzx edx, byte ptr [esi + 5]                        # 0047ABC6
    shr edx, 4                                           # 0047ABCA
    bt dword ptr [_scenarioChunk3+420], edx              # 0047ABCD
    jae .L47ABE5                                         # 0047ABD4
    mov dl, byte ptr [esi + 7]                           # 0047ABD6
    and dl, 0x40                                         # 0047ABD9
    shl dl, 1                                            # 0047ABDC
    and byte ptr [esi + 7], 0x3f                         # 0047ABDE
    or byte ptr [esi + 7], dl                            # 0047ABE2
.L47ABE5:
    add esi, 8                                           # 0047ABE5
    test byte ptr [esi - 7], 0x80                        # 0047ABE8
    je .L47ABB6                                          # 0047ABEC
    add bp, 0x20                                         # 0047ABEE
    cmp bp, 0x3000                                       # 0047ABF2
    jb .L47ABA1                                          # 0047ABF7
    add bx, 0x20                                         # 0047ABF9
    cmp bx, 0x3000                                       # 0047ABFD
    jb .L47AB9E                                          # 0047AC02
    ret                                                  # 0047AC04

    .global _sub_47AC05
_sub_47AC05:
    msvc_xor ebx, ebx                                    # 0047AC05
    mov al, 0xff                                         # 0047AC07
    mov ah, 0xff                                         # 0047AC09
.L47AC0B:
    mov edx, dword ptr [ebx*4 + _roadObjects]            # 0047AC0B
    cmp edx, -1                                          # 0047AC12
    je .L47AC31                                          # 0047AC15
    test word ptr [edx + 0x12], 8                        # 0047AC17
    je .L47AC31                                          # 0047AC1D
    test word ptr [edx + 0x12], 1                        # 0047AC1F
    jne .L47AC31                                         # 0047AC25
    cmp al, byte ptr [edx + 0x2e]                        # 0047AC27
    jg .L47AC31                                          # 0047AC2A
    mov al, byte ptr [edx + 0x2e]                        # 0047AC2C
    msvc_mov ah, bl                                      # 0047AC2F
.L47AC31:
    inc ebx                                              # 0047AC31
    cmp ebx, 8                                           # 0047AC32
    jb .L47AC0B                                          # 0047AC35
    mov byte ptr [_scenarioChunk3+429], ah               # 0047AC37
    ret                                                  # 0047AC3D

    .global _sub_47AC3E
_sub_47AC3E:
    push eax                                             # 0047AC3E
    push ecx                                             # 0047AC3F
    push edx                                             # 0047AC40
    push edi                                             # 0047AC41
    push esi                                             # 0047AC42
    push ebp                                             # 0047AC43
    test ebp, 4                                          # 0047AC44
    je .L47AC83                                          # 0047AC4A
    push ebx                                             # 0047AC4C
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047AC4D
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047AC55
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047AC5D
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047AC65
    cmp bl, 0xc                                          # 0047AC6D
    jae .L47AC82                                         # 0047AC70
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047AC72
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047AC7A
.L47AC82:
    pop ebx                                              # 0047AC82
.L47AC83:
    msvc_mov esi, ebp                                    # 0047AC83
    and esi, 3                                           # 0047AC85
    mov dword ptr [__112C2A0], esi                       # 0047AC88
    shr ebp, 3                                           # 0047AC8E
    mov dword ptr [__112C2A4], ebp                       # 0047AC91
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047AC97
    jmp dword ptr [esi*4 + __4FE648]                     # 0047AC9E

    .global _sub_47ACA5
_sub_47ACA5:
    add ax, word ptr [ebp + 1]                           # 0047ACA5
    add cx, word ptr [ebp + 3]                           # 0047ACA9
    jmp _sub_47ACCB                                      # 0047ACAD

    .global _sub_47ACAF
_sub_47ACAF:
    add ax, word ptr [ebp + 3]                           # 0047ACAF
    sub cx, word ptr [ebp + 1]                           # 0047ACB3
    jmp _sub_47ACCB                                      # 0047ACB7

    .global _sub_47ACB9
_sub_47ACB9:
    sub ax, word ptr [ebp + 1]                           # 0047ACB9
    sub cx, word ptr [ebp + 3]                           # 0047ACBD
    jmp _sub_47ACCB                                      # 0047ACC1

    .global _sub_47ACC3
_sub_47ACC3:
    sub ax, word ptr [ebp + 3]                           # 0047ACC3
    add cx, word ptr [ebp + 1]                           # 0047ACC7

    .global _sub_47ACCB
_sub_47ACCB:
    add dx, word ptr [ebp + 5]                           # 0047ACCB
    shr dx, 2                                            # 0047ACCF
    movzx esi, cx                                        # 0047ACD3
    shl esi, 9                                           # 0047ACD6
    msvc_or si, ax                                       # 0047ACD9
    shr esi, 3                                           # 0047ACDC
    mov esi, dword ptr [esi + __E40134]                  # 0047ACDF
.L47ACE5:
    cmp dl, byte ptr [esi + 2]                           # 0047ACE5
    jne .L47AD2B                                         # 0047ACE8
    mov al, byte ptr [esi]                               # 0047ACEA
    and al, 0x3c                                         # 0047ACEC
    cmp al, 0x1c                                         # 0047ACEE
    jne .L47AD2B                                         # 0047ACF0
    mov al, byte ptr [esi]                               # 0047ACF2
    and al, 3                                            # 0047ACF4
    cmp al, byte ptr [__112C2A0]                         # 0047ACF6
    jne .L47AD2B                                         # 0047ACFC
    mov al, byte ptr [esi + 5]                           # 0047ACFE
    and al, 3                                            # 0047AD01
    cmp al, byte ptr [ebp]                               # 0047AD03
    jne .L47AD2B                                         # 0047AD06
    movzx eax, byte ptr [esi + 5]                        # 0047AD08
    shr eax, 4                                           # 0047AD0C
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047AD0F
    test word ptr [eax + 0x12], 8                        # 0047AD16
    je .L47AD2B                                          # 0047AD1C
    mov al, byte ptr [esi + 4]                           # 0047AD1E
    and al, 0xf                                          # 0047AD21
    cmp al, byte ptr [__112C2A4]                         # 0047AD23
    je .L47AD30                                          # 0047AD29
.L47AD2B:
    add esi, 8                                           # 0047AD2B
    jmp .L47ACE5                                         # 0047AD2E
.L47AD30:
    mov bl, byte ptr [esi + 7]                           # 0047AD30
    and ebx, 0xf                                         # 0047AD33
    mov bh, byte ptr [esi + 5]                           # 0047AD36
    shr bh, 4                                            # 0047AD39
    test byte ptr [esi + 7], 0x20                        # 0047AD3C
    jne .L47AD53                                         # 0047AD40
    mov al, byte ptr [esi + 5]                           # 0047AD42
    and eax, 0xc                                         # 0047AD45
    shl eax, 0xe                                         # 0047AD48
    msvc_or ebx, eax                                     # 0047AD4B
    or ebx, 0x1000000                                    # 0047AD4D
.L47AD53:
    test byte ptr [esi], 0x80                            # 0047AD53
    je .L47AD7C                                          # 0047AD56
.L47AD58:
    add esi, 8                                           # 0047AD58
    mov al, byte ptr [esi]                               # 0047AD5B
    and al, 0x3c                                         # 0047AD5D
    cmp al, 8                                            # 0047AD5F
    jne .L47AD58                                         # 0047AD61
    mov dl, byte ptr [esi + 5]                           # 0047AD63
    and edx, 0x1f                                        # 0047AD66
    mov edx, dword ptr [edx*4 + _roadStationObjects]     # 0047AD69
    test byte ptr [edx + 0xb], 8                         # 0047AD70
    je .L47AD7C                                          # 0047AD74
    or ebx, 0x800000                                     # 0047AD76
.L47AD7C:
    pop ebp                                              # 0047AD7C
    pop esi                                              # 0047AD7D
    pop edi                                              # 0047AD7E
    pop edx                                              # 0047AD7F
    pop ecx                                              # 0047AD80
    pop eax                                              # 0047AD81
    ret                                                  # 0047AD82

    .global _sub_47AD83
_sub_47AD83:
    pushal                                               # 0047AD83
    push eax                                             # 0047AD84
    msvc_mov edi, ebp                                    # 0047AD85
    movzx esi, bh                                        # 0047AD87
    shr edi, 3                                           # 0047AD8A
    mov esi, dword ptr [esi*4 + _roadObjects]            # 0047AD8D
    and edi, 0x1f                                        # 0047AD94
    mov di, word ptr [edi*2 + __4F72E8]                  # 0047AD97
    msvc_mov ax, di                                      # 0047AD9F
    and di, word ptr [esi + 2]                           # 0047ADA2
    msvc_cmp ax, di                                      # 0047ADA6
    pop eax                                              # 0047ADA9
    jne _sub_47AF09                                      # 0047ADAA
    test ebp, 4                                          # 0047ADB0
    je .L47ADEF                                          # 0047ADB6
    push ebx                                             # 0047ADB8
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047ADB9
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047ADC1
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047ADC9
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047ADD1
    cmp bl, 0xc                                          # 0047ADD9
    jae .L47ADEE                                         # 0047ADDC
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047ADDE
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047ADE6
.L47ADEE:
    pop ebx                                              # 0047ADEE
.L47ADEF:
    msvc_mov esi, ebp                                    # 0047ADEF
    and esi, 3                                           # 0047ADF1
    mov dword ptr [__112C2A0], esi                       # 0047ADF4
    shr ebp, 3                                           # 0047ADFA
    mov dword ptr [__112C2A4], ebp                       # 0047ADFD
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047AE03
    mov byte ptr [__112C2E8], 0                          # 0047AE0A

    .global _sub_47AE11
_sub_47AE11:
    push eax                                             # 0047AE11
    push ecx                                             # 0047AE12
    push edx                                             # 0047AE13
    push edi                                             # 0047AE14
    push esi                                             # 0047AE15
    jmp dword ptr [esi*4 + __4FE658]                     # 0047AE16

    .global _sub_47AE1D
_sub_47AE1D:
    add ax, word ptr [ebp + 1]                           # 0047AE1D
    add cx, word ptr [ebp + 3]                           # 0047AE21
    jmp _sub_47AE43                                      # 0047AE25

    .global _sub_47AE27
_sub_47AE27:
    add ax, word ptr [ebp + 3]                           # 0047AE27
    sub cx, word ptr [ebp + 1]                           # 0047AE2B
    jmp _sub_47AE43                                      # 0047AE2F

    .global _sub_47AE31
_sub_47AE31:
    sub ax, word ptr [ebp + 1]                           # 0047AE31
    sub cx, word ptr [ebp + 3]                           # 0047AE35
    jmp _sub_47AE43                                      # 0047AE39

    .global _sub_47AE3B
_sub_47AE3B:
    sub ax, word ptr [ebp + 3]                           # 0047AE3B
    add cx, word ptr [ebp + 1]                           # 0047AE3F

    .global _sub_47AE43
_sub_47AE43:
    add dx, word ptr [ebp + 5]                           # 0047AE43
    mov word ptr [__112C2BE], ax                         # 0047AE47
    mov word ptr [__112C2C0], cx                         # 0047AE4D
    mov word ptr [__112C2C2], dx                         # 0047AE54
    shr dx, 2                                            # 0047AE5B
    movzx esi, cx                                        # 0047AE5F
    shl esi, 9                                           # 0047AE62
    msvc_or si, ax                                       # 0047AE65
    shr esi, 3                                           # 0047AE68
    mov esi, dword ptr [esi + __E40134]                  # 0047AE6B
.L47AE71:
    cmp dl, byte ptr [esi + 2]                           # 0047AE71
    jne .L47AEE8                                         # 0047AE74
    mov al, byte ptr [esi]                               # 0047AE76
    and al, 0x3c                                         # 0047AE78
    cmp al, 0x1c                                         # 0047AE7A
    jne .L47AEE8                                         # 0047AE7C
    test byte ptr [esi + 1], 0x30                        # 0047AE7E
    jne .L47AEE8                                         # 0047AE82
    movzx eax, byte ptr [esi + 5]                        # 0047AE84
    shr eax, 4                                           # 0047AE88
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047AE8B
    test word ptr [eax + 0x12], 8                        # 0047AE92
    je .L47AEE8                                          # 0047AE98
    mov al, byte ptr [esi + 7]                           # 0047AE9A
    and al, 0xf0                                         # 0047AE9D
    msvc_or al, bl                                       # 0047AE9F
    mov byte ptr [esi + 7], al                           # 0047AEA1
    msvc_mov al, bh                                      # 0047AEA4
    shl al, 4                                            # 0047AEA6
    and byte ptr [esi + 5], 0xf                          # 0047AEA9
    or byte ptr [esi + 5], al                            # 0047AEAD
    test byte ptr [esi + 7], 0x20                        # 0047AEB0
    jne .L47AEC2                                         # 0047AEB4
    and byte ptr [esi + 5], 0xf3                         # 0047AEB6
    msvc_mov eax, ebx                                    # 0047AEBA
    shr eax, 0xe                                         # 0047AEBC
    or byte ptr [esi + 5], al                            # 0047AEBF
.L47AEC2:
    pushal                                               # 0047AEC2
    mov ax, word ptr [__112C2BE]                         # 0047AEC3
    mov cx, word ptr [__112C2C0]                         # 0047AEC9
    movzx di, byte ptr [esi + 2]                         # 0047AED0
    movzx si, byte ptr [esi + 3]                         # 0047AED5
    shl di, 2                                            # 0047AEDA
    shl si, 2                                            # 0047AEDE
    call _sub_4CC390                                     # 0047AEE2
    popal                                                # 0047AEE7
.L47AEE8:
    add esi, 8                                           # 0047AEE8
    test byte ptr [esi - 7], 0x80                        # 0047AEEB
    je .L47AE71                                          # 0047AEEF
    pop esi                                              # 0047AEF1
    pop edi                                              # 0047AEF2
    pop edx                                              # 0047AEF3
    pop ecx                                              # 0047AEF4
    pop eax                                              # 0047AEF5
    add ebp, 0xa                                         # 0047AEF6
    inc byte ptr [__112C2E8]                             # 0047AEF9
    cmp byte ptr [ebp], 0xff                             # 0047AEFF
    jne _sub_47AE11                                      # 0047AF03

    .global _sub_47AF09
_sub_47AF09:
    popal                                                # 0047AF09
    ret                                                  # 0047AF0A

    .global _sub_47AF0B
_sub_47AF0B:
    mov byte ptr [__9C68EA], 0x30                        # 0047AF0B
    mov dword ptr [__112C274], 0                         # 0047AF12
    mov word ptr [__112C2C4], ax                         # 0047AF1C
    mov word ptr [__112C2C6], cx                         # 0047AF22
    mov word ptr [__112C2C8], di                         # 0047AF29
    mov byte ptr [__112C2EF], dl                         # 0047AF30
    mov byte ptr [__112C2F0], dh                         # 0047AF36
    mov dword ptr [__112C270], edi                       # 0047AF3C
    shr edi, 0x10                                        # 0047AF42
    mov word ptr [__112C2CA], di                         # 0047AF45
    and edx, 0xff030000                                  # 0047AF4C
    and bh, 3                                            # 0047AF52
    mov dword ptr [__112C26C], edx                       # 0047AF55
    mov byte ptr [__112C2F1], bl                         # 0047AF5B
    mov byte ptr [__112C2F2], bh                         # 0047AF61
    call _sub_461393                                     # 0047AF67
    jb .L47B0D6                                          # 0047AF6C
    mov ax, word ptr [__112C2C4]                         # 0047AF72
    mov cx, word ptr [__112C2C6]                         # 0047AF78
    push eax                                             # 0047AF7F
    push ecx                                             # 0047AF80
    push edx                                             # 0047AF81
    mov bl, byte ptr [__112C2F1]                         # 0047AF82
    movzx edx, byte ptr [__112C2EF]                      # 0047AF88
    mov dh, 0                                            # 0047AF8F
    mov bh, byte ptr [__112C2F2]                         # 0047AF91
    mov di, word ptr [__112C2CA]                         # 0047AF97
    shl edi, 0x10                                        # 0047AF9E
    mov di, word ptr [__112C2C8]                         # 0047AFA1
    or edx, dword ptr [__112C26C]                        # 0047AFA8
    and edx, 0xfffcffff                                  # 0047AFAE
    call _sub_475FBC                                     # 0047AFB4
    pop edx                                              # 0047AFB9
    pop ecx                                              # 0047AFBA
    pop eax                                              # 0047AFBB
    test byte ptr [__112C2F1], 1                         # 0047AFBC
    jne .L47AFDE                                         # 0047AFC3
    cmp ebx, 0x80000000                                  # 0047AFC5
    je .L47B0D6                                          # 0047AFCB
    test byte ptr [__1136073], 4                         # 0047AFD1
    jne .L47B0D6                                         # 0047AFD8
.L47AFDE:
    add dword ptr [__112C274], ebx                       # 0047AFDE
    push eax                                             # 0047AFE4
    push ecx                                             # 0047AFE5
    push edx                                             # 0047AFE6
    mov bl, byte ptr [__112C2F1]                         # 0047AFE7
    mov bh, byte ptr [__112C2F2]                         # 0047AFED
    mov dl, 0                                            # 0047AFF3
    msvc_xor dh, dh                                      # 0047AFF5
    movzx bp, byte ptr [__112C2EF]                       # 0047AFF7
    movzx edi, byte ptr [__112C2F0]                      # 0047AFFF
    shl edi, 0x10                                        # 0047B006
    mov di, word ptr [__112C2C8]                         # 0047B009
    call _sub_48C708                                     # 0047B010
    pop edx                                              # 0047B015
    pop ecx                                              # 0047B016
    pop eax                                              # 0047B017
    test byte ptr [__112C2F1], 1                         # 0047B018
    jne .L47B02D                                         # 0047B01F
    cmp ebx, 0x80000000                                  # 0047B021
    je .L47B0D6                                          # 0047B027
.L47B02D:
    add dword ptr [__112C274], ebx                       # 0047B02D
    test dword ptr [__112C26C], 0x20000                  # 0047B033
    je .L47B081                                          # 0047B03D
    mov ax, word ptr [__112C2C4]                         # 0047B03F
    mov cx, word ptr [__112C2C6]                         # 0047B045
    movzx ebx, byte ptr [__112C2F2]                      # 0047B04C
    mov dx, word ptr [__112C2C8]                         # 0047B053
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047B05A
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047B062
    shr dx, 2                                            # 0047B06A
    msvc_mov dh, dl                                      # 0047B06E
    add dh, 0xc                                          # 0047B070
    mov bl, 0xf                                          # 0047B073
    mov_offset ebp, _sub_47B0DC                          # 0047B075
    call _sub_462917                                     # 0047B07A
    jb .L47B0D6                                          # 0047B07F
.L47B081:
    test dword ptr [__112C26C], 0x10000                  # 0047B081
    je .L47B0CF                                          # 0047B08B
    mov ax, word ptr [__112C2C4]                         # 0047B08D
    mov cx, word ptr [__112C2C6]                         # 0047B093
    movzx ebx, byte ptr [__112C2F2]                      # 0047B09A
    mov dx, word ptr [__112C2C8]                         # 0047B0A1
    add ax, word ptr [ebx*4 + __503C6C]                  # 0047B0A8
    add cx, word ptr [ebx*4 + __503C6E]                  # 0047B0B0
    shr dx, 2                                            # 0047B0B8
    msvc_mov dh, dl                                      # 0047B0BC
    add dh, 0xc                                          # 0047B0BE
    mov bl, 0xf                                          # 0047B0C1
    mov_offset ebp, _sub_47B0DC                          # 0047B0C3
    call _sub_462917                                     # 0047B0C8
    jb .L47B0D6                                          # 0047B0CD
.L47B0CF:
    mov ebx, dword ptr [__112C274]                       # 0047B0CF
    ret                                                  # 0047B0D5
.L47B0D6:
    mov ebx, 0x80000000                                  # 0047B0D6
    ret                                                  # 0047B0DB

    .global _sub_47B0DC
_sub_47B0DC:
    pushal                                               # 0047B0DC
    mov al, byte ptr [esi]                               # 0047B0DD
    and al, 0x3c                                         # 0047B0DF
    cmp al, 0x14                                         # 0047B0E1
    je .L47B104                                          # 0047B0E3
    cmp al, 0x10                                         # 0047B0E5
    je .L47B0F0                                          # 0047B0E7
    cmp al, 0x1c                                         # 0047B0E9
    je .L47B104                                          # 0047B0EB
.L47B0ED:
    popal                                                # 0047B0ED
    stc                                                  # 0047B0EE
    ret                                                  # 0047B0EF
.L47B0F0:
    movzx ebp, byte ptr [esi + 4]                        # 0047B0F0
    mov ebp, dword ptr [ebp*4 + _buildingObjects]        # 0047B0F4
    test byte ptr [ebp + 0x98], 0xc                      # 0047B0FB
    jne .L47B0ED                                         # 0047B102
.L47B104:
    popal                                                # 0047B104
    clc                                                  # 0047B105
    ret                                                  # 0047B106

    .global _sub_47B107
_sub_47B107:
    mov word ptr [__112C2C4], ax                         # 0047B107
    mov word ptr [__112C2C6], cx                         # 0047B10D
    mov word ptr [__112C2C8], di                         # 0047B114
    mov byte ptr [__112C2EF], dl                         # 0047B11B
    mov byte ptr [__112C2F2], bh                         # 0047B121
    mov ax, word ptr [__112C2C4]                         # 0047B127
    mov cx, word ptr [__112C2C6]                         # 0047B12D
    mov di, word ptr [__112C2C8]                         # 0047B134
    mov bl, 0x31                                         # 0047B13B
    mov bh, byte ptr [__112C2F2]                         # 0047B13D
    mov dl, 0                                            # 0047B143
    msvc_xor dh, dh                                      # 0047B145
    movzx bp, byte ptr [__112C2EF]                       # 0047B147
    call _sub_48D2AC                                     # 0047B14F
    cmp ebx, 0x80000000                                  # 0047B154
    jne .L47B18C                                         # 0047B15A
    mov ax, word ptr [__112C2C4]                         # 0047B15C
    mov cx, word ptr [__112C2C6]                         # 0047B162
    mov di, word ptr [__112C2C8]                         # 0047B169
    mov bl, 0x31                                         # 0047B170
    mov bh, byte ptr [__112C2F2]                         # 0047B172
    xor bh, 2                                            # 0047B178
    mov dl, 0                                            # 0047B17B
    msvc_xor dh, dh                                      # 0047B17D
    movzx bp, byte ptr [__112C2EF]                       # 0047B17F
    call _sub_48D2AC                                     # 0047B187
.L47B18C:
    mov ax, word ptr [__112C2C4]                         # 0047B18C
    mov cx, word ptr [__112C2C6]                         # 0047B192
    mov dx, word ptr [__112C2C8]                         # 0047B199
    shr dx, 2                                            # 0047B1A0
    mov dh, byte ptr [__112C2EF]                         # 0047B1A4
    mov bl, byte ptr [__112C2F2]                         # 0047B1AA
    movzx esi, cx                                        # 0047B1B0
    shl esi, 9                                           # 0047B1B3
    msvc_or si, ax                                       # 0047B1B6
    shr esi, 3                                           # 0047B1B9
    mov esi, dword ptr [esi + __E40134]                  # 0047B1BC
.L47B1C2:
    cmp dl, byte ptr [esi + 2]                           # 0047B1C2
    jne .L47B1F7                                         # 0047B1C5
    mov al, byte ptr [esi]                               # 0047B1C7
    and al, 0x3c                                         # 0047B1C9
    cmp al, 0x1c                                         # 0047B1CB
    jne .L47B1F7                                         # 0047B1CD
    mov al, byte ptr [esi]                               # 0047B1CF
    and al, 3                                            # 0047B1D1
    cmp al, bl                                           # 0047B1D3
    jne .L47B1F7                                         # 0047B1D5
    mov al, byte ptr [esi + 5]                           # 0047B1D7
    shr al, 4                                            # 0047B1DA
    cmp al, dh                                           # 0047B1DD
    jne .L47B1F7                                         # 0047B1DF
    mov al, byte ptr [esi + 4]                           # 0047B1E1
    and al, 0xf                                          # 0047B1E4
    cmp al, 0                                            # 0047B1E6
    jne .L47B1F7                                         # 0047B1E8
    mov al, byte ptr [esi + 7]                           # 0047B1EA
    and al, 0xf                                          # 0047B1ED
    cmp al, byte ptr [__9C68EB]                          # 0047B1EF
    je .L47B202                                          # 0047B1F5
.L47B1F7:
    add esi, 8                                           # 0047B1F7
    test byte ptr [esi - 7], 0x80                        # 0047B1FA
    je .L47B1C2                                          # 0047B1FE
    jmp .L47B235                                         # 0047B200
.L47B202:
    test byte ptr [esi + 1], 0x20                        # 0047B202
    je .L47B235                                          # 0047B206
    mov ax, word ptr [__112C2C4]                         # 0047B208
    mov cx, word ptr [__112C2C6]                         # 0047B20E
    mov di, word ptr [__112C2C8]                         # 0047B215
    mov bl, 0x31                                         # 0047B21C
    mov bh, byte ptr [__112C2F2]                         # 0047B21E
    mov dl, 0                                            # 0047B224
    msvc_xor dh, dh                                      # 0047B226
    movzx bp, byte ptr [__112C2EF]                       # 0047B228
    call _sub_4775A5                                     # 0047B230
.L47B235:
    msvc_xor ebx, ebx                                    # 0047B235
    ret                                                  # 0047B237

    .global _sub_47B238
_sub_47B238:
    mov word ptr [__112C2C4], ax                         # 0047B238
    mov word ptr [__112C2C6], cx                         # 0047B23E
    mov word ptr [__112C2C8], di                         # 0047B245
    mov byte ptr [__112C2EF], dl                         # 0047B24C
    mov byte ptr [__112C2F2], bh                         # 0047B252
    mov ax, word ptr [__112C2C4]                         # 0047B258
    mov cx, word ptr [__112C2C6]                         # 0047B25E
    mov di, word ptr [__112C2C8]                         # 0047B265
    mov bl, 1                                            # 0047B26C
    mov bh, byte ptr [__112C2F2]                         # 0047B26E
    mov dl, 0                                            # 0047B274
    msvc_xor dh, dh                                      # 0047B276
    movzx bp, byte ptr [__112C2EF]                       # 0047B278
    call _sub_48D2AC                                     # 0047B280
    cmp ebx, 0x80000000                                  # 0047B285
    jne .L47B2BD                                         # 0047B28B
    mov ax, word ptr [__112C2C4]                         # 0047B28D
    mov cx, word ptr [__112C2C6]                         # 0047B293
    mov di, word ptr [__112C2C8]                         # 0047B29A
    mov bl, 1                                            # 0047B2A1
    mov bh, byte ptr [__112C2F2]                         # 0047B2A3
    xor bh, 2                                            # 0047B2A9
    mov dl, 0                                            # 0047B2AC
    msvc_xor dh, dh                                      # 0047B2AE
    movzx bp, byte ptr [__112C2EF]                       # 0047B2B0
    call _sub_48D2AC                                     # 0047B2B8
.L47B2BD:
    movzx esi, byte ptr [__112C2EF]                      # 0047B2BD
    mov esi, dword ptr [esi*4 + _roadObjects]            # 0047B2C4
    test word ptr [esi + 0x12], 8                        # 0047B2CB
    jne .L47B333                                         # 0047B2D1
    mov ax, word ptr [__112C2C4]                         # 0047B2D3
    mov cx, word ptr [__112C2C6]                         # 0047B2D9
    mov dx, word ptr [__112C2C8]                         # 0047B2E0
    movzx ebp, byte ptr [__112C2F2]                      # 0047B2E7
    or ebp, 0                                            # 0047B2EE
    mov bl, byte ptr [__112C2EF]                         # 0047B2F1
    call _sub_47C1E0                                     # 0047B2F7
    test bl, 3                                           # 0047B2FC
    jne .L47B333                                         # 0047B2FF
    mov ax, word ptr [__112C2C4]                         # 0047B301
    mov cx, word ptr [__112C2C6]                         # 0047B307
    mov di, word ptr [__112C2C8]                         # 0047B30E
    mov bl, 1                                            # 0047B315
    mov bh, byte ptr [__112C2F2]                         # 0047B317
    mov dl, 0                                            # 0047B31D
    msvc_xor dh, dh                                      # 0047B31F
    movzx bp, byte ptr [__112C2EF]                       # 0047B321
    mov esi, 0x27                                        # 0047B329
    call _sub_431315                                     # 0047B32E
.L47B333:
    msvc_xor ebx, ebx                                    # 0047B333
    ret                                                  # 0047B335

    .global _sub_47B336
_sub_47B336:
    mov byte ptr [__112C2CE], dh                         # 0047B336
    mov byte ptr [__112C2CF], dl                         # 0047B33C
    mov word ptr [__112C2B0], bp                         # 0047B342
    mov byte ptr [__112C2F3], 0                          # 0047B349
    test bl, 0x10                                        # 0047B350
    je .L47B35C                                          # 0047B353
    or byte ptr [__112C2F3], 0x20                        # 0047B355
.L47B35C:
    mov byte ptr [__1136088], 0                          # 0047B35C
    movzx esi, dl                                        # 0047B363
    test word ptr [esi*2 + __4F7284], 0x13               # 0047B366
    je .L47B379                                          # 0047B370
    or byte ptr [__1136088], 1                           # 0047B372
.L47B379:
    push eax                                             # 0047B379
    push ebx                                             # 0047B37A
    push ecx                                             # 0047B37B
    msvc_mov bp, cx                                      # 0047B37C
    movzx esi, bp                                        # 0047B37F
    shl esi, 9                                           # 0047B382
    msvc_or si, ax                                       # 0047B385
    shr esi, 3                                           # 0047B388
    mov esi, dword ptr [esi + __E40134]                  # 0047B38B
.L47B391:
    movzx bp, byte ptr [esi + 2]                         # 0047B391
    shl bp, 2                                            # 0047B396
    msvc_cmp di, bp                                      # 0047B39A
    jne .L47B3D8                                         # 0047B39D
    mov dh, byte ptr [esi]                               # 0047B39F
    and dh, 0x3c                                         # 0047B3A1
    cmp dh, 0x1c                                         # 0047B3A4
    jne .L47B3D8                                         # 0047B3A7
    mov dh, byte ptr [esi]                               # 0047B3A9
    and dh, 3                                            # 0047B3AB
    cmp dh, bh                                           # 0047B3AE
    jne .L47B3D8                                         # 0047B3B0
    mov dh, byte ptr [esi + 5]                           # 0047B3B2
    and dh, 3                                            # 0047B3B5
    cmp dh, byte ptr [__112C2CE]                         # 0047B3B8
    jne .L47B3D8                                         # 0047B3BE
    mov dh, byte ptr [esi + 7]                           # 0047B3C0
    and dh, 0xf                                          # 0047B3C3
    cmp dh, byte ptr [__9C68EB]                          # 0047B3C6
    jne .L47B3D8                                         # 0047B3CC
    mov dh, byte ptr [esi + 4]                           # 0047B3CE
    and dh, 0xf                                          # 0047B3D1
    cmp dl, dh                                           # 0047B3D4
    je .L47B3E7                                          # 0047B3D6
.L47B3D8:
    add esi, 8                                           # 0047B3D8
    test byte ptr [esi - 7], 0x80                        # 0047B3DB
    je .L47B391                                          # 0047B3DF
    pop ecx                                              # 0047B3E1
    pop ebx                                              # 0047B3E2
    pop eax                                              # 0047B3E3
    msvc_and eax, eax                                    # 0047B3E4
    ret                                                  # 0047B3E6
.L47B3E7:
    mov dh, byte ptr [esi + 1]                           # 0047B3E7
    and dh, 0x30                                         # 0047B3EA
    cmp dh, byte ptr [__112C2F3]                         # 0047B3ED
    jne .L47B3D8                                         # 0047B3F3
    test byte ptr [esi + 4], 0x80                        # 0047B3F5
    je _sub_47B60F                                       # 0047B3F9
    msvc_mov bl, dl                                      # 0047B3FF
    msvc_xchg di, dx                                     # 0047B401
    and edi, 0xff                                        # 0047B404
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047B40A
    mov bp, word ptr [esi + 5]                           # 0047B411
    and ebp, 3                                           # 0047B415
    imul ebp, ebp, 0xa                                   # 0047B418
    mov si, word ptr [esi]                               # 0047B41B
    and esi, 3                                           # 0047B41E
    jmp dword ptr [esi*4 + __4FE668]                     # 0047B421

    .global _sub_47B428
_sub_47B428:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B428
    sub cx, word ptr [ebp + edi + 3]                     # 0047B42D
    jmp _sub_47B456                                      # 0047B432

    .global _sub_47B434
_sub_47B434:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B434
    add cx, word ptr [ebp + edi + 1]                     # 0047B439
    jmp _sub_47B456                                      # 0047B43E

    .global _sub_47B440
_sub_47B440:
    add ax, word ptr [ebp + edi + 1]                     # 0047B440
    add cx, word ptr [ebp + edi + 3]                     # 0047B445
    jmp _sub_47B456                                      # 0047B44A

    .global _sub_47B44C
_sub_47B44C:
    add ax, word ptr [ebp + edi + 3]                     # 0047B44C
    sub cx, word ptr [ebp + edi + 1]                     # 0047B451

    .global _sub_47B456
_sub_47B456:
    sub dx, word ptr [ebp + edi + 5]                     # 0047B456
    push eax                                             # 0047B45B
    push ecx                                             # 0047B45C
    push edx                                             # 0047B45D
    msvc_xor ebp, ebp                                    # 0047B45E

    .global _sub_47B460
_sub_47B460:
    cmp byte ptr [ebp + edi], 0xff                       # 0047B460
    je _sub_47B5F8                                       # 0047B465
    push eax                                             # 0047B46B
    push ecx                                             # 0047B46C
    push edx                                             # 0047B46D
    push esi                                             # 0047B46E
    jmp dword ptr [esi*4 + __4FE678]                     # 0047B46F

    .global _sub_47B476
_sub_47B476:
    add ax, word ptr [ebp + edi + 1]                     # 0047B476
    add cx, word ptr [ebp + edi + 3]                     # 0047B47B
    jmp _sub_47B4A4                                      # 0047B480

    .global _sub_47B482
_sub_47B482:
    add ax, word ptr [ebp + edi + 3]                     # 0047B482
    sub cx, word ptr [ebp + edi + 1]                     # 0047B487
    jmp _sub_47B4A4                                      # 0047B48C

    .global _sub_47B48E
_sub_47B48E:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B48E
    sub cx, word ptr [ebp + edi + 3]                     # 0047B493
    jmp _sub_47B4A4                                      # 0047B498

    .global _sub_47B49A
_sub_47B49A:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B49A
    add cx, word ptr [ebp + edi + 1]                     # 0047B49F

    .global _sub_47B4A4
_sub_47B4A4:
    add dx, word ptr [ebp + edi + 5]                     # 0047B4A4
    shr dx, 2                                            # 0047B4A9
    push eax                                             # 0047B4AD
    push ecx                                             # 0047B4AE
    movzx esi, cx                                        # 0047B4AF
    shl esi, 9                                           # 0047B4B2
    msvc_or si, ax                                       # 0047B4B5
    shr esi, 3                                           # 0047B4B8
    mov esi, dword ptr [esi + __E40134]                  # 0047B4BB
    test byte ptr [esi], 0x3c                            # 0047B4C1
    je .L47B4CE                                          # 0047B4C4
.L47B4C6:
    add esi, 8                                           # 0047B4C6
    test byte ptr [esi], 0x3c                            # 0047B4C9
    jne .L47B4C6                                         # 0047B4CC
.L47B4CE:
    msvc_mov ah, dl                                      # 0047B4CE
    sub ah, byte ptr [esi + 2]                           # 0047B4D0
    test byte ptr [esi + 5], 0x1f                        # 0047B4D3
    jne .L47B57B                                         # 0047B4D7
    mov dh, byte ptr [esi + 4]                           # 0047B4DD
    and dh, 0x1f                                         # 0047B4E0
.L47B4E3:
    test byte ptr [esi + 1], 0x80                        # 0047B4E3
    jne .L47B55E                                         # 0047B4E7
    add esi, 8                                           # 0047B4E9
    cmp dl, byte ptr [esi + 2]                           # 0047B4EC
    jbe .L47B55E                                         # 0047B4EF
    mov al, byte ptr [esi]                               # 0047B4F1
    and al, 0x3c                                         # 0047B4F3
    cmp al, 4                                            # 0047B4F5
    je .L47B4FF                                          # 0047B4F7
    cmp al, 0x1c                                         # 0047B4F9
    je .L47B52D                                          # 0047B4FB
    jmp .L47B4E3                                         # 0047B4FD
.L47B4FF:
    cmp byte ptr [__112C2CF], 0                          # 0047B4FF
    jne .L47B559                                         # 0047B506
    mov al, byte ptr [esi + 4]                           # 0047B508
    and al, 0x3f                                         # 0047B50B
    cmp al, 0                                            # 0047B50D
    jne .L47B559                                         # 0047B50F
    mov al, byte ptr [esi]                               # 0047B511
    and al, 3                                            # 0047B513
    cmp al, byte ptr [esp + 0x29]                        # 0047B515
    je .L47B5EA                                          # 0047B519
    xor al, 2                                            # 0047B51F
    cmp al, byte ptr [esp + 0x29]                        # 0047B521
    je .L47B5EA                                          # 0047B525
    jmp .L47B559                                         # 0047B52B
.L47B52D:
    cmp byte ptr [__112C2CF], 0                          # 0047B52D
    jne .L47B559                                         # 0047B534
    mov al, byte ptr [esi + 4]                           # 0047B536
    and al, 0xf                                          # 0047B539
    cmp al, 0                                            # 0047B53B
    jne .L47B559                                         # 0047B53D
    mov al, byte ptr [esi]                               # 0047B53F
    and al, 3                                            # 0047B541
    cmp al, byte ptr [esp + 0x29]                        # 0047B543
    je .L47B5EA                                          # 0047B547
    xor al, 2                                            # 0047B54D
    cmp al, byte ptr [esp + 0x29]                        # 0047B54F
    je .L47B5EA                                          # 0047B553
.L47B559:
    or dh, 0x80                                          # 0047B559
    jmp .L47B4E3                                         # 0047B55C
.L47B55E:
    cmp ah, 0x10                                         # 0047B55E
    ja _sub_47B600                                       # 0047B561
    test dh, 0x1f                                        # 0047B567
    jne _sub_47B600                                      # 0047B56A
    test dh, 0x80                                        # 0047B570
    jne _sub_47B600                                      # 0047B573
    jmp .L47B5EA                                         # 0047B579
.L47B57B:
    test byte ptr [__1136088], 1                         # 0047B57B
    je .L47B58B                                          # 0047B582
    cmp ah, 0x10                                         # 0047B584
    ja .L47B5EA                                          # 0047B587
    jmp _sub_47B600                                      # 0047B589
.L47B58B:
    cmp byte ptr [__112C2CF], 0                          # 0047B58B
    jne _sub_47B600                                      # 0047B592
.L47B594:
    test byte ptr [esi + 1], 0x80                        # 0047B594
    jne _sub_47B600                                      # 0047B598
    add esi, 8                                           # 0047B59A
    cmp dl, byte ptr [esi + 2]                           # 0047B59D
    jbe _sub_47B600                                      # 0047B5A0
    mov al, byte ptr [esi]                               # 0047B5A2
    and al, 0x3c                                         # 0047B5A4
    cmp al, 4                                            # 0047B5A6
    je .L47B5B0                                          # 0047B5A8
    cmp al, 0x1c                                         # 0047B5AA
    je .L47B5CD                                          # 0047B5AC
    jmp .L47B594                                         # 0047B5AE
.L47B5B0:
    mov al, byte ptr [esi + 4]                           # 0047B5B0
    and al, 0x3f                                         # 0047B5B3
    cmp al, 0                                            # 0047B5B5
    jne .L47B594                                         # 0047B5B7
    mov al, byte ptr [esi]                               # 0047B5B9
    and al, 3                                            # 0047B5BB
    cmp al, byte ptr [esp + 0x29]                        # 0047B5BD
    je .L47B5EA                                          # 0047B5C1
    xor al, 2                                            # 0047B5C3
    cmp al, byte ptr [esp + 0x29]                        # 0047B5C5
    je .L47B5EA                                          # 0047B5C9
    jmp .L47B594                                         # 0047B5CB
.L47B5CD:
    mov al, byte ptr [esi + 4]                           # 0047B5CD
    and al, 0xf                                          # 0047B5D0
    cmp al, 0                                            # 0047B5D2
    jne .L47B594                                         # 0047B5D4
    mov al, byte ptr [esi]                               # 0047B5D6
    and al, 3                                            # 0047B5D8
    cmp al, byte ptr [esp + 0x29]                        # 0047B5DA
    je .L47B5EA                                          # 0047B5DE
    xor al, 2                                            # 0047B5E0
    cmp al, byte ptr [esp + 0x29]                        # 0047B5E2
    je .L47B5EA                                          # 0047B5E6
    jmp .L47B594                                         # 0047B5E8
.L47B5EA:
    pop ecx                                              # 0047B5EA
    pop eax                                              # 0047B5EB
    pop esi                                              # 0047B5EC
    pop edx                                              # 0047B5ED
    pop ecx                                              # 0047B5EE
    pop eax                                              # 0047B5EF
    add ebp, 0xa                                         # 0047B5F0
    msvc_jmp _sub_47B460                                 # 0047B5F3

    .global _sub_47B5F8
_sub_47B5F8:
    pop edx                                              # 0047B5F8
    pop ecx                                              # 0047B5F9
    pop eax                                              # 0047B5FA
    pop ecx                                              # 0047B5FB
    pop ebx                                              # 0047B5FC
    pop eax                                              # 0047B5FD
    stc                                                  # 0047B5FE
    ret                                                  # 0047B5FF

    .global _sub_47B600
_sub_47B600:
    pop ecx                                              # 0047B600
    pop eax                                              # 0047B601
    pop esi                                              # 0047B602
    pop edx                                              # 0047B603
    pop ecx                                              # 0047B604
    pop eax                                              # 0047B605
    pop edx                                              # 0047B606
    pop ecx                                              # 0047B607
    pop eax                                              # 0047B608
    pop ecx                                              # 0047B609
    pop ebx                                              # 0047B60A
    pop eax                                              # 0047B60B
    msvc_and eax, eax                                    # 0047B60C
    ret                                                  # 0047B60E

    .global _sub_47B60F
_sub_47B60F:
    pop ecx                                              # 0047B60F
    pop ebx                                              # 0047B610
    pop eax                                              # 0047B611
    msvc_and eax, eax                                    # 0047B612
    ret                                                  # 0047B614

    .global _sub_47B615
_sub_47B615:
    mov byte ptr [__112C2CE], dh                         # 0047B615
    mov byte ptr [__112C2CF], dl                         # 0047B61B
    mov word ptr [__112C2B0], bp                         # 0047B621
    mov byte ptr [__112C2F3], 0                          # 0047B628
    test bl, 0x10                                        # 0047B62F
    je .L47B63B                                          # 0047B632
    or byte ptr [__112C2F3], 0x20                        # 0047B634
.L47B63B:
    push eax                                             # 0047B63B
    push ebx                                             # 0047B63C
    push ecx                                             # 0047B63D
    msvc_mov bp, cx                                      # 0047B63E
    movzx esi, bp                                        # 0047B641
    shl esi, 9                                           # 0047B644
    msvc_or si, ax                                       # 0047B647
    shr esi, 3                                           # 0047B64A
    mov esi, dword ptr [esi + __E40134]                  # 0047B64D
.L47B653:
    movzx bp, byte ptr [esi + 2]                         # 0047B653
    shl bp, 2                                            # 0047B658
    msvc_cmp di, bp                                      # 0047B65C
    jne .L47B69A                                         # 0047B65F
    mov dh, byte ptr [esi]                               # 0047B661
    and dh, 0x3c                                         # 0047B663
    cmp dh, 0x1c                                         # 0047B666
    jne .L47B69A                                         # 0047B669
    mov dh, byte ptr [esi]                               # 0047B66B
    and dh, 3                                            # 0047B66D
    cmp dh, bh                                           # 0047B670
    jne .L47B69A                                         # 0047B672
    mov dh, byte ptr [esi + 5]                           # 0047B674
    and dh, 3                                            # 0047B677
    cmp dh, byte ptr [__112C2CE]                         # 0047B67A
    jne .L47B69A                                         # 0047B680
    mov dh, byte ptr [esi + 7]                           # 0047B682
    and dh, 0xf                                          # 0047B685
    cmp dh, byte ptr [__9C68EB]                          # 0047B688
    jne .L47B69A                                         # 0047B68E
    mov dh, byte ptr [esi + 4]                           # 0047B690
    and dh, 0xf                                          # 0047B693
    cmp dl, dh                                           # 0047B696
    je .L47B6A9                                          # 0047B698
.L47B69A:
    add esi, 8                                           # 0047B69A
    test byte ptr [esi - 7], 0x80                        # 0047B69D
    je .L47B653                                          # 0047B6A1
    pop ecx                                              # 0047B6A3
    pop ebx                                              # 0047B6A4
    pop eax                                              # 0047B6A5
    msvc_and eax, eax                                    # 0047B6A6
    ret                                                  # 0047B6A8
.L47B6A9:
    mov dh, byte ptr [esi + 1]                           # 0047B6A9
    and dh, 0x30                                         # 0047B6AC
    cmp dh, byte ptr [__112C2F3]                         # 0047B6AF
    jne .L47B69A                                         # 0047B6B5
    msvc_mov bl, dl                                      # 0047B6B7
    msvc_xchg di, dx                                     # 0047B6B9
    and edi, 0xff                                        # 0047B6BC
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047B6C2
    mov bp, word ptr [esi + 5]                           # 0047B6C9
    and ebp, 3                                           # 0047B6CD
    imul ebp, ebp, 0xa                                   # 0047B6D0
    mov si, word ptr [esi]                               # 0047B6D3
    and esi, 3                                           # 0047B6D6
    jmp dword ptr [esi*4 + __4FE688]                     # 0047B6D9

    .global _sub_47B6E0
_sub_47B6E0:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B6E0
    sub cx, word ptr [ebp + edi + 3]                     # 0047B6E5
    jmp _sub_47B70E                                      # 0047B6EA

    .global _sub_47B6EC
_sub_47B6EC:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B6EC
    add cx, word ptr [ebp + edi + 1]                     # 0047B6F1
    jmp _sub_47B70E                                      # 0047B6F6

    .global _sub_47B6F8
_sub_47B6F8:
    add ax, word ptr [ebp + edi + 1]                     # 0047B6F8
    add cx, word ptr [ebp + edi + 3]                     # 0047B6FD
    jmp _sub_47B70E                                      # 0047B702

    .global _sub_47B704
_sub_47B704:
    add ax, word ptr [ebp + edi + 3]                     # 0047B704
    sub cx, word ptr [ebp + edi + 1]                     # 0047B709

    .global _sub_47B70E
_sub_47B70E:
    sub dx, word ptr [ebp + edi + 5]                     # 0047B70E
    push eax                                             # 0047B713
    push ecx                                             # 0047B714
    push edx                                             # 0047B715
    msvc_xor ebp, ebp                                    # 0047B716

    .global _sub_47B718
_sub_47B718:
    cmp byte ptr [ebp + edi], 0xff                       # 0047B718
    je _sub_47B7B5                                       # 0047B71D
    push eax                                             # 0047B723
    push ecx                                             # 0047B724
    push edx                                             # 0047B725
    push esi                                             # 0047B726
    jmp dword ptr [esi*4 + __4FE698]                     # 0047B727

    .global _sub_47B72E
_sub_47B72E:
    add ax, word ptr [ebp + edi + 1]                     # 0047B72E
    add cx, word ptr [ebp + edi + 3]                     # 0047B733
    jmp _sub_47B75C                                      # 0047B738

    .global _sub_47B73A
_sub_47B73A:
    add ax, word ptr [ebp + edi + 3]                     # 0047B73A
    sub cx, word ptr [ebp + edi + 1]                     # 0047B73F
    jmp _sub_47B75C                                      # 0047B744

    .global _sub_47B746
_sub_47B746:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B746
    sub cx, word ptr [ebp + edi + 3]                     # 0047B74B
    jmp _sub_47B75C                                      # 0047B750

    .global _sub_47B752
_sub_47B752:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B752
    add cx, word ptr [ebp + edi + 1]                     # 0047B757

    .global _sub_47B75C
_sub_47B75C:
    add dx, word ptr [ebp + edi + 5]                     # 0047B75C
    shr dx, 2                                            # 0047B761
    push eax                                             # 0047B765
    push ecx                                             # 0047B766
    movzx esi, cx                                        # 0047B767
    shl esi, 9                                           # 0047B76A
    msvc_or si, ax                                       # 0047B76D
    shr esi, 3                                           # 0047B770
    mov esi, dword ptr [esi + __E40134]                  # 0047B773
    test byte ptr [esi], 0x3c                            # 0047B779
    je .L47B786                                          # 0047B77C
.L47B77E:
    add esi, 8                                           # 0047B77E
    test byte ptr [esi], 0x3c                            # 0047B781
    jne .L47B77E                                         # 0047B784
.L47B786:
    test byte ptr [esi + 1], 0x80                        # 0047B786
    jne .L47B7A7                                         # 0047B78A
    add esi, 8                                           # 0047B78C
    mov al, byte ptr [esi]                               # 0047B78F
    and al, 0x3c                                         # 0047B791
    cmp al, 0x10                                         # 0047B793
    jne .L47B786                                         # 0047B795
    cmp dl, byte ptr [esi + 3]                           # 0047B797
    jae .L47B786                                         # 0047B79A
    msvc_mov al, dl                                      # 0047B79C
    add al, 8                                            # 0047B79E
    cmp al, byte ptr [esi + 2]                           # 0047B7A0
    jbe .L47B786                                         # 0047B7A3
    jmp _sub_47B7BE                                      # 0047B7A5
.L47B7A7:
    pop ecx                                              # 0047B7A7
    pop eax                                              # 0047B7A8
    pop esi                                              # 0047B7A9
    pop edx                                              # 0047B7AA
    pop ecx                                              # 0047B7AB
    pop eax                                              # 0047B7AC
    add ebp, 0xa                                         # 0047B7AD
    msvc_jmp _sub_47B718                                 # 0047B7B0

    .global _sub_47B7B5
_sub_47B7B5:
    pop edx                                              # 0047B7B5
    pop ecx                                              # 0047B7B6
    pop eax                                              # 0047B7B7
    pop ecx                                              # 0047B7B8
    pop ebx                                              # 0047B7B9
    pop eax                                              # 0047B7BA
    msvc_and eax, eax                                    # 0047B7BB
    ret                                                  # 0047B7BD

    .global _sub_47B7BE
_sub_47B7BE:
    pop ecx                                              # 0047B7BE
    pop eax                                              # 0047B7BF
    pop esi                                              # 0047B7C0
    pop edx                                              # 0047B7C1
    pop ecx                                              # 0047B7C2
    pop eax                                              # 0047B7C3
    pop edx                                              # 0047B7C4
    pop ecx                                              # 0047B7C5
    pop eax                                              # 0047B7C6
    pop ecx                                              # 0047B7C7
    pop ebx                                              # 0047B7C8
    pop eax                                              # 0047B7C9
    stc                                                  # 0047B7CA
    ret                                                  # 0047B7CB

    .global _sub_47B7CC
_sub_47B7CC:
    mov byte ptr [__112C2CE], dh                         # 0047B7CC
    mov byte ptr [__112C2CF], dl                         # 0047B7D2
    mov word ptr [__112C2B0], bp                         # 0047B7D8
    mov byte ptr [__112C2F3], 0                          # 0047B7DF
    test bl, 0x10                                        # 0047B7E6
    je .L47B7F2                                          # 0047B7E9
    or byte ptr [__112C2F3], 0x20                        # 0047B7EB
.L47B7F2:
    push eax                                             # 0047B7F2
    push ebx                                             # 0047B7F3
    push ecx                                             # 0047B7F4
    msvc_mov bp, cx                                      # 0047B7F5
    movzx esi, bp                                        # 0047B7F8
    shl esi, 9                                           # 0047B7FB
    msvc_or si, ax                                       # 0047B7FE
    shr esi, 3                                           # 0047B801
    mov esi, dword ptr [esi + __E40134]                  # 0047B804
.L47B80A:
    movzx bp, byte ptr [esi + 2]                         # 0047B80A
    shl bp, 2                                            # 0047B80F
    msvc_cmp di, bp                                      # 0047B813
    jne .L47B851                                         # 0047B816
    mov dh, byte ptr [esi]                               # 0047B818
    and dh, 0x3c                                         # 0047B81A
    cmp dh, 4                                            # 0047B81D
    jne .L47B851                                         # 0047B820
    mov dh, byte ptr [esi]                               # 0047B822
    and dh, 3                                            # 0047B824
    cmp dh, bh                                           # 0047B827
    jne .L47B851                                         # 0047B829
    mov dh, byte ptr [esi + 5]                           # 0047B82B
    and dh, 3                                            # 0047B82E
    cmp dh, byte ptr [__112C2CE]                         # 0047B831
    jne .L47B851                                         # 0047B837
    mov dh, byte ptr [esi + 7]                           # 0047B839
    and dh, 0xf                                          # 0047B83C
    cmp dh, byte ptr [__9C68EB]                          # 0047B83F
    jne .L47B851                                         # 0047B845
    mov dh, byte ptr [esi + 4]                           # 0047B847
    and dh, 0xf                                          # 0047B84A
    cmp dl, dh                                           # 0047B84D
    je .L47B860                                          # 0047B84F
.L47B851:
    add esi, 8                                           # 0047B851
    test byte ptr [esi - 7], 0x80                        # 0047B854
    je .L47B80A                                          # 0047B858
    pop ecx                                              # 0047B85A
    pop ebx                                              # 0047B85B
    pop eax                                              # 0047B85C
    msvc_and eax, eax                                    # 0047B85D
    ret                                                  # 0047B85F
.L47B860:
    mov dh, byte ptr [esi + 1]                           # 0047B860
    and dh, 0x30                                         # 0047B863
    cmp dh, byte ptr [__112C2F3]                         # 0047B866
    jne .L47B851                                         # 0047B86C
    msvc_mov bl, dl                                      # 0047B86E
    msvc_xchg di, dx                                     # 0047B870
    and edi, 0xff                                        # 0047B873
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047B879
    mov bp, word ptr [esi + 5]                           # 0047B880
    and ebp, 3                                           # 0047B884
    imul ebp, ebp, 0xa                                   # 0047B887
    mov si, word ptr [esi]                               # 0047B88A
    and esi, 3                                           # 0047B88D
    jmp dword ptr [esi*4 + __4FE6A8]                     # 0047B890

    .global _sub_47B897
_sub_47B897:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B897
    sub cx, word ptr [ebp + edi + 3]                     # 0047B89C
    jmp _sub_47B8C5                                      # 0047B8A1

    .global _sub_47B8A3
_sub_47B8A3:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B8A3
    add cx, word ptr [ebp + edi + 1]                     # 0047B8A8
    jmp _sub_47B8C5                                      # 0047B8AD

    .global _sub_47B8AF
_sub_47B8AF:
    add ax, word ptr [ebp + edi + 1]                     # 0047B8AF
    add cx, word ptr [ebp + edi + 3]                     # 0047B8B4
    jmp _sub_47B8C5                                      # 0047B8B9

    .global _sub_47B8BB
_sub_47B8BB:
    add ax, word ptr [ebp + edi + 3]                     # 0047B8BB
    sub cx, word ptr [ebp + edi + 1]                     # 0047B8C0

    .global _sub_47B8C5
_sub_47B8C5:
    sub dx, word ptr [ebp + edi + 5]                     # 0047B8C5
    push eax                                             # 0047B8CA
    push ecx                                             # 0047B8CB
    push edx                                             # 0047B8CC
    msvc_xor ebp, ebp                                    # 0047B8CD

    .global _sub_47B8CF
_sub_47B8CF:
    cmp byte ptr [ebp + edi], 0xff                       # 0047B8CF
    je _sub_47BA13                                       # 0047B8D4
    push eax                                             # 0047B8DA
    push ecx                                             # 0047B8DB
    push edx                                             # 0047B8DC
    push esi                                             # 0047B8DD
    jmp dword ptr [esi*4 + __4FE6B8]                     # 0047B8DE

    .global _sub_47B8E5
_sub_47B8E5:
    add ax, word ptr [ebp + edi + 1]                     # 0047B8E5
    add cx, word ptr [ebp + edi + 3]                     # 0047B8EA
    jmp _sub_47B913                                      # 0047B8EF

    .global _sub_47B8F1
_sub_47B8F1:
    add ax, word ptr [ebp + edi + 3]                     # 0047B8F1
    sub cx, word ptr [ebp + edi + 1]                     # 0047B8F6
    jmp _sub_47B913                                      # 0047B8FB

    .global _sub_47B8FD
_sub_47B8FD:
    sub ax, word ptr [ebp + edi + 1]                     # 0047B8FD
    sub cx, word ptr [ebp + edi + 3]                     # 0047B902
    jmp _sub_47B913                                      # 0047B907

    .global _sub_47B909
_sub_47B909:
    sub ax, word ptr [ebp + edi + 3]                     # 0047B909
    add cx, word ptr [ebp + edi + 1]                     # 0047B90E

    .global _sub_47B913
_sub_47B913:
    add dx, word ptr [ebp + edi + 5]                     # 0047B913
    shr dx, 2                                            # 0047B918
    push eax                                             # 0047B91C
    push ecx                                             # 0047B91D
    movzx esi, cx                                        # 0047B91E
    shl esi, 9                                           # 0047B921
    msvc_or si, ax                                       # 0047B924
    shr esi, 3                                           # 0047B927
    mov esi, dword ptr [esi + __E40134]                  # 0047B92A
.L47B930:
    cmp dl, byte ptr [esi + 2]                           # 0047B930
    jne .L47B966                                         # 0047B933
    mov al, byte ptr [esi]                               # 0047B935
    and al, 0x3c                                         # 0047B937
    cmp al, 0x1c                                         # 0047B939
    jne .L47B966                                         # 0047B93B
    mov al, byte ptr [esi]                               # 0047B93D
    and al, 3                                            # 0047B93F
    cmp al, bh                                           # 0047B941
    jne .L47B966                                         # 0047B943
    mov al, byte ptr [esi + 5]                           # 0047B945
    and al, 3                                            # 0047B948
    cmp al, byte ptr [ebp + edi]                         # 0047B94A
    jne .L47B966                                         # 0047B94E
    mov al, byte ptr [esi + 7]                           # 0047B950
    and al, 0xf                                          # 0047B953
    cmp al, byte ptr [__9C68EB]                          # 0047B955
    jne .L47B966                                         # 0047B95B
    mov al, byte ptr [esi + 4]                           # 0047B95D
    and al, 0xf                                          # 0047B960
    cmp bl, al                                           # 0047B962
    je .L47B976                                          # 0047B964
.L47B966:
    add esi, 8                                           # 0047B966
    test byte ptr [esi - 7], 0x80                        # 0047B969
    je .L47B930                                          # 0047B96D
    pop ecx                                              # 0047B96F
    pop eax                                              # 0047B970
    msvc_jmp .L47BA07                                    # 0047B971
.L47B976:
    pop ecx                                              # 0047B976
    pop eax                                              # 0047B977
    push esi                                             # 0047B978
    movzx esi, cx                                        # 0047B979
    shl esi, 9                                           # 0047B97C
    msvc_or si, ax                                       # 0047B97F
    shr esi, 3                                           # 0047B982
    mov esi, dword ptr [esi + __E40134]                  # 0047B985
.L47B98B:
    cmp dl, byte ptr [esi + 2]                           # 0047B98B
    jne .L47B9FD                                         # 0047B98E
    mov al, byte ptr [esi]                               # 0047B990
    and al, 0x3c                                         # 0047B992
    cmp al, 0x1c                                         # 0047B994
    jne .L47B9FD                                         # 0047B996
    test byte ptr [esi + 1], 0x20                        # 0047B998
    je .L47B9FD                                          # 0047B99C
    cmp esi, dword ptr [esp]                             # 0047B99E
    je .L47B9FD                                          # 0047B9A1
    push ebx                                             # 0047B9A3
    push edx                                             # 0047B9A4
    push edi                                             # 0047B9A5
    mov edi, dword ptr [esp + 0xc]                       # 0047B9A6
    mov al, byte ptr [esi + 1]                           # 0047B9AA
    mov ah, byte ptr [edi + 1]                           # 0047B9AD
    and ax, 0xf0f                                        # 0047B9B0
    test ah, al                                          # 0047B9B4
    je .L47B9FA                                          # 0047B9B6
    mov bl, byte ptr [esi + 4]                           # 0047B9B8
    and ebx, 0xf                                         # 0047B9BB
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 0047B9BE
    mov cl, byte ptr [esi + 5]                           # 0047B9C5
    and ecx, 3                                           # 0047B9C8
    shl ecx, 2                                           # 0047B9CB
    mov dl, byte ptr [esi]                               # 0047B9CE
    and dl, 3                                            # 0047B9D0
    msvc_or cl, dl                                       # 0047B9D3
    mov dh, byte ptr [ecx + ebx]                         # 0047B9D5
    mov bl, byte ptr [edi + 4]                           # 0047B9D8
    and ebx, 0xf                                         # 0047B9DB
    mov ebx, dword ptr [ebx*4 + __4F6F1C]                # 0047B9DE
    mov cl, byte ptr [edi + 5]                           # 0047B9E5
    and ecx, 3                                           # 0047B9E8
    shl ecx, 2                                           # 0047B9EB
    mov dl, byte ptr [edi]                               # 0047B9EE
    and dl, 3                                            # 0047B9F0
    msvc_or cl, dl                                       # 0047B9F3
    test byte ptr [ecx + ebx], dh                        # 0047B9F5
    jne _sub_47BA1C                                      # 0047B9F8
.L47B9FA:
    pop edi                                              # 0047B9FA
    pop edx                                              # 0047B9FB
    pop ebx                                              # 0047B9FC
.L47B9FD:
    add esi, 8                                           # 0047B9FD
    test byte ptr [esi - 7], 0x80                        # 0047BA00
    je .L47B98B                                          # 0047BA04
    pop esi                                              # 0047BA06
.L47BA07:
    pop esi                                              # 0047BA07
    pop edx                                              # 0047BA08
    pop ecx                                              # 0047BA09
    pop eax                                              # 0047BA0A
    add ebp, 0xa                                         # 0047BA0B
    msvc_jmp _sub_47B8CF                                 # 0047BA0E

    .global _sub_47BA13
_sub_47BA13:
    pop edx                                              # 0047BA13
    pop ecx                                              # 0047BA14
    pop eax                                              # 0047BA15
    pop ecx                                              # 0047BA16
    pop ebx                                              # 0047BA17
    pop eax                                              # 0047BA18
    msvc_and eax, eax                                    # 0047BA19
    ret                                                  # 0047BA1B

    .global _sub_47BA1C
_sub_47BA1C:
    pop edi                                              # 0047BA1C
    pop edx                                              # 0047BA1D
    pop ebx                                              # 0047BA1E
    pop esi                                              # 0047BA1F
    pop esi                                              # 0047BA20
    pop edx                                              # 0047BA21
    pop ecx                                              # 0047BA22
    pop eax                                              # 0047BA23
    pop edx                                              # 0047BA24
    pop ecx                                              # 0047BA25
    pop eax                                              # 0047BA26
    pop ecx                                              # 0047BA27
    pop ebx                                              # 0047BA28
    pop eax                                              # 0047BA29
    stc                                                  # 0047BA2A
    ret                                                  # 0047BA2B

    .global _sub_47BA2C
_sub_47BA2C:
    mov byte ptr [__9C68EA], 0x30                        # 0047BA2C
    mov word ptr [__112C2B0], bp                         # 0047BA33
    mov byte ptr [__112C2F4], 0                          # 0047BA3A
    mov dword ptr [__112C268], 0                         # 0047BA41
    mov dword ptr [__112C730], 0xffffffff                # 0047BA4B
    mov dword ptr [__112C264], edx                       # 0047BA55
    test bl, 1                                           # 0047BA5B
    je .L47BA83                                          # 0047BA5E
    pushal                                               # 0047BA60
    msvc_mov dx, bp                                      # 0047BA61
    or dx, 0x80                                          # 0047BA64
    mov di, 0xffff                                       # 0047BA69
    add ax, 0x10                                         # 0047BA6D
    add cx, 0x10                                         # 0047BA71
    mov bh, byte ptr [__9C68EB]                          # 0047BA75
    mov bl, 1                                            # 0047BA7B
    call _sub_438167                                     # 0047BA7D
    popal                                                # 0047BA82
.L47BA83:
    push edx                                             # 0047BA83
    msvc_mov bp, cx                                      # 0047BA84
    movzx esi, bp                                        # 0047BA87
    shl esi, 9                                           # 0047BA8A
    msvc_or si, ax                                       # 0047BA8D
    shr esi, 3                                           # 0047BA90
    mov esi, dword ptr [esi + __E40134]                  # 0047BA93
.L47BA99:
    movzx bp, byte ptr [esi + 2]                         # 0047BA99
    shl bp, 2                                            # 0047BA9E
    msvc_cmp di, bp                                      # 0047BAA2
    jne .L47BB4E                                         # 0047BAA5
    mov dh, byte ptr [esi]                               # 0047BAAB
    and dh, 0x3c                                         # 0047BAAD
    cmp dh, 0x1c                                         # 0047BAB0
    jne .L47BB4E                                         # 0047BAB3
    mov dh, byte ptr [esi]                               # 0047BAB9
    and dh, 3                                            # 0047BABB
    cmp dh, bh                                           # 0047BABE
    jne .L47BB4E                                         # 0047BAC0
    mov dh, byte ptr [esi + 5]                           # 0047BAC6
    and dh, 3                                            # 0047BAC9
    cmp dh, byte ptr [esp + 1]                           # 0047BACC
    jne .L47BB4E                                         # 0047BAD0
    test dword ptr [__112C264], 0x80000000               # 0047BAD2
    jne .L47BB16                                         # 0047BADC
    mov dh, byte ptr [esi + 5]                           # 0047BADE
    shr dh, 4                                            # 0047BAE1
    cmp dh, byte ptr [__112C2B0]                         # 0047BAE4
    je .L47BB24                                          # 0047BAEA
    movzx ebp, dh                                        # 0047BAEC
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 0047BAEF
    test word ptr [ebp + 0x12], 8                        # 0047BAF6
    je .L47BB4E                                          # 0047BAFC
    movzx ebp, word ptr [__112C2B0]                      # 0047BAFE
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 0047BB05
    test word ptr [ebp + 0x12], 8                        # 0047BB0C
    je .L47BB4E                                          # 0047BB12
    jmp .L47BB24                                         # 0047BB14
.L47BB16:
    mov dh, byte ptr [esi + 7]                           # 0047BB16
    and dh, 0xf                                          # 0047BB19
    cmp dh, byte ptr [__9C68EB]                          # 0047BB1C
    jne .L47BB4E                                         # 0047BB22
.L47BB24:
    mov dh, byte ptr [esi + 4]                           # 0047BB24
    and dh, 0xf                                          # 0047BB27
    cmp dl, dh                                           # 0047BB2A
    jne .L47BB4E                                         # 0047BB2C
    test byte ptr [esi + 1], 0x20                        # 0047BB2E
    jne .L47BB69                                         # 0047BB32
    test byte ptr [esi], 0x80                            # 0047BB34
    je .L47BB4E                                          # 0047BB37
    push esi                                             # 0047BB39
.L47BB3A:
    add esi, 8                                           # 0047BB3A
    mov dh, byte ptr [esi]                               # 0047BB3D
    and dh, 0x3c                                         # 0047BB3F
    cmp dh, 8                                            # 0047BB42
    jne .L47BB3A                                         # 0047BB45
    test byte ptr [esi + 1], 0x20                        # 0047BB47
    pop esi                                              # 0047BB4B
    jne .L47BB62                                         # 0047BB4C
.L47BB4E:
    add esi, 8                                           # 0047BB4E
    test byte ptr [esi - 7], 0x80                        # 0047BB51
    je .L47BA99                                          # 0047BB55
    pop edx                                              # 0047BB5B
    mov ebx, 0x80000000                                  # 0047BB5C
    ret                                                  # 0047BB61
.L47BB62:
    or byte ptr [__112C2F4], 1                           # 0047BB62
.L47BB69:
    test byte ptr [esi], 0x80                            # 0047BB69
    je .L47BBA6                                          # 0047BB6C
    push esi                                             # 0047BB6E
.L47BB6F:
    add esi, 8                                           # 0047BB6F
    mov dh, byte ptr [esi]                               # 0047BB72
    and dh, 0x3c                                         # 0047BB74
    cmp dh, 8                                            # 0047BB77
    jne .L47BB6F                                         # 0047BB7A
    mov dh, byte ptr [esi + 5]                           # 0047BB7C
    and dh, 0x1f                                         # 0047BB7F
    mov byte ptr [__112C2F5], dh                         # 0047BB82
    test byte ptr [esi + 1], 0x20                        # 0047BB88
    pop esi                                              # 0047BB8C
    je .L47BBA6                                          # 0047BB8D
    or byte ptr [__112C2F4], 2                           # 0047BB8F
    test dword ptr [__112C264], 0x80000000               # 0047BB96
    jne .L47BD66                                         # 0047BBA0
.L47BBA6:
    movzx bp, byte ptr [esi + 5]                         # 0047BBA6
    shr bp, 4                                            # 0047BBAB
    and dword ptr [esp], 0xffff                          # 0047BBAF
    or dword ptr [esp], 0xff000000                       # 0047BBB6
    movzx edi, di                                        # 0047BBBD
    movzx edx, bp                                        # 0047BBC0
    mov edx, dword ptr [edx*4 + _roadObjects]            # 0047BBC3
    test word ptr [edx + 0x12], 8                        # 0047BBCA
    jne .L47BBDE                                         # 0047BBD0
    movzx edx, byte ptr [esi + 7]                        # 0047BBD2
    shr edx, 6                                           # 0047BBD6
    shl edx, 0x10                                        # 0047BBD9
    msvc_or edi, edx                                     # 0047BBDC
.L47BBDE:
    test byte ptr [esi + 4], 0x80                        # 0047BBDE
    je .L47BBF8                                          # 0047BBE2
    movzx edx, byte ptr [esi + 6]                        # 0047BBE4
    shr edx, 5                                           # 0047BBE8
    shl edx, 0x18                                        # 0047BBEB
    and dword ptr [esp], 0xffffff                        # 0047BBEE
    or dword ptr [esp], edx                              # 0047BBF5
.L47BBF8:
    pop edx                                              # 0047BBF8
    test byte ptr [__112C2F4], 2                         # 0047BBF9
    je .L47BC1A                                          # 0047BC00
    push eax                                             # 0047BC02
    push ebx                                             # 0047BC03
    push ecx                                             # 0047BC04
    push edx                                             # 0047BC05
    push edi                                             # 0047BC06
    push ebp                                             # 0047BC07
    mov bl, 0x31                                         # 0047BC08
    mov esi, 0x2b                                        # 0047BC0A
    call _sub_431315                                     # 0047BC0F
    pop ebp                                              # 0047BC14
    pop edi                                              # 0047BC15
    pop edx                                              # 0047BC16
    pop ecx                                              # 0047BC17
    pop ebx                                              # 0047BC18
    pop eax                                              # 0047BC19
.L47BC1A:
    test byte ptr [__112C2F4], 1                         # 0047BC1A
    jne .L47BC56                                         # 0047BC21
    push eax                                             # 0047BC23
    push ebx                                             # 0047BC24
    push ecx                                             # 0047BC25
    push edx                                             # 0047BC26
    push edi                                             # 0047BC27
    push ebp                                             # 0047BC28
    mov bl, 0x31                                         # 0047BC29
    mov esi, 0x27                                        # 0047BC2B
    call _sub_431315                                     # 0047BC30
    pop ebp                                              # 0047BC35
    pop edi                                              # 0047BC36
    pop edx                                              # 0047BC37
    pop ecx                                              # 0047BC38
    pop ebx                                              # 0047BC39
    pop eax                                              # 0047BC3A
    cmp byte ptr [__112C2D0], 0xff                       # 0047BC3B
    je .L47BC56                                          # 0047BC42
    and edx, 0xffffff                                    # 0047BC44
    movzx esi, byte ptr [__112C2D0]                      # 0047BC4A
    shl esi, 0x18                                        # 0047BC51
    msvc_or edx, esi                                     # 0047BC54
.L47BC56:
    test byte ptr [__112C2F4], 1                         # 0047BC56
    jne .L47BCC8                                         # 0047BC5D
    push eax                                             # 0047BC5F
    push ebx                                             # 0047BC60
    push ecx                                             # 0047BC61
    push edx                                             # 0047BC62
    push edi                                             # 0047BC63
    push ebp                                             # 0047BC64
    push ebx                                             # 0047BC65
    msvc_mov ebx, edx                                    # 0047BC66
    msvc_mov dx, bp                                      # 0047BC68
    msvc_mov dh, bl                                      # 0047BC6B
    movzx ebx, dh                                        # 0047BC6D
    mov ebx, dword ptr [ebx*4 + __4F6D1C]                # 0047BC70
    sub di, word ptr [ebx + 5]                           # 0047BC77
    pop ebx                                              # 0047BC7B
    push eax                                             # 0047BC7C
    push ebx                                             # 0047BC7D
    push ecx                                             # 0047BC7E
    push edx                                             # 0047BC7F
    push edi                                             # 0047BC80
    push ebp                                             # 0047BC81
    mov bl, 0x81                                         # 0047BC82
    mov esi, 0x26                                        # 0047BC84
    call _sub_431315                                     # 0047BC89
    cmp ebx, 0x80000000                                  # 0047BC8E
    jne .L47BCB6                                         # 0047BC94
    pop ebp                                              # 0047BC96
    pop edi                                              # 0047BC97
    pop edx                                              # 0047BC98
    pop ecx                                              # 0047BC99
    pop ebx                                              # 0047BC9A
    pop eax                                              # 0047BC9B
    push eax                                             # 0047BC9C
    push ebx                                             # 0047BC9D
    push ecx                                             # 0047BC9E
    push edx                                             # 0047BC9F
    push edi                                             # 0047BCA0
    push ebp                                             # 0047BCA1
    mov bl, 0xa1                                         # 0047BCA2
    mov esi, 0x26                                        # 0047BCA4
    call _sub_431315                                     # 0047BCA9
    cmp ebx, 0x80000000                                  # 0047BCAE
    je .L47BCBC                                          # 0047BCB4
.L47BCB6:
    add dword ptr [__112C268], ebx                       # 0047BCB6
.L47BCBC:
    pop ebp                                              # 0047BCBC
    pop edi                                              # 0047BCBD
    pop edx                                              # 0047BCBE
    pop ecx                                              # 0047BCBF
    pop ebx                                              # 0047BCC0
    pop eax                                              # 0047BCC1
    pop ebp                                              # 0047BCC2
    pop edi                                              # 0047BCC3
    pop edx                                              # 0047BCC4
    pop ecx                                              # 0047BCC5
    pop ebx                                              # 0047BCC6
    pop eax                                              # 0047BCC7
.L47BCC8:
    test byte ptr [__112C2F4], 2                         # 0047BCC8
    je .L47BD35                                          # 0047BCCF
    push eax                                             # 0047BCD1
    push ebx                                             # 0047BCD2
    push ecx                                             # 0047BCD3
    push edx                                             # 0047BCD4
    push edi                                             # 0047BCD5
    push ebp                                             # 0047BCD6
    movzx esi, byte ptr [__112C2F5]                      # 0047BCD7
    shl esi, 0x10                                        # 0047BCDE
    movzx edi, di                                        # 0047BCE1
    msvc_or edi, esi                                     # 0047BCE4
    mov bl, 0x81                                         # 0047BCE6
    mov esi, 0x2a                                        # 0047BCE8
    call _sub_431315                                     # 0047BCED
    cmp ebx, 0x80000000                                  # 0047BCF2
    jne .L47BD29                                         # 0047BCF8
    pop ebp                                              # 0047BCFA
    pop edi                                              # 0047BCFB
    pop edx                                              # 0047BCFC
    pop ecx                                              # 0047BCFD
    pop ebx                                              # 0047BCFE
    pop eax                                              # 0047BCFF
    push eax                                             # 0047BD00
    push ebx                                             # 0047BD01
    push ecx                                             # 0047BD02
    push edx                                             # 0047BD03
    push edi                                             # 0047BD04
    push ebp                                             # 0047BD05
    movzx esi, byte ptr [__112C2F5]                      # 0047BD06
    shl esi, 0x10                                        # 0047BD0D
    movzx edi, di                                        # 0047BD10
    msvc_or edi, esi                                     # 0047BD13
    mov bl, 0xa1                                         # 0047BD15
    mov esi, 0x2a                                        # 0047BD17
    call _sub_431315                                     # 0047BD1C
    cmp ebx, 0x80000000                                  # 0047BD21
    je .L47BD5A                                          # 0047BD27
.L47BD29:
    add dword ptr [__112C268], ebx                       # 0047BD29
    pop ebp                                              # 0047BD2F
    pop edi                                              # 0047BD30
    pop edx                                              # 0047BD31
    pop ecx                                              # 0047BD32
    pop ebx                                              # 0047BD33
    pop eax                                              # 0047BD34
.L47BD35:
    test bl, 1                                           # 0047BD35
    je .L47BD53                                          # 0047BD38
    cmp dword ptr [__112C268], 0                         # 0047BD3A
    je .L47BD53                                          # 0047BD41
    pushal                                               # 0047BD43
    msvc_mov dx, cx                                      # 0047BD44
    msvc_mov cx, ax                                      # 0047BD47
    msvc_mov bp, di                                      # 0047BD4A
    call _sub_48B013                                     # 0047BD4D
    popal                                                # 0047BD52
.L47BD53:
    mov ebx, dword ptr [__112C268]                       # 0047BD53
    ret                                                  # 0047BD59
.L47BD5A:
    pop ebp                                              # 0047BD5A
    pop edi                                              # 0047BD5B
    pop edx                                              # 0047BD5C
    pop ecx                                              # 0047BD5D
    pop ebx                                              # 0047BD5E
    pop eax                                              # 0047BD5F
    mov ebx, 0x80000000                                  # 0047BD60
    ret                                                  # 0047BD65
.L47BD66:
    pop edx                                              # 0047BD66
    mov ebx, 0x80000000                                  # 0047BD67
    ret                                                  # 0047BD6C

    .global _sub_47BD6D
_sub_47BD6D:
    mov byte ptr [__112C2CE], dh                         # 0047BD6D
    mov byte ptr [__112C2CF], dl                         # 0047BD73
    mov word ptr [__112C2B0], bp                         # 0047BD79
    mov dword ptr [__112C268], 0                         # 0047BD80
    mov byte ptr [__112C2CD], 0                          # 0047BD8A
    mov byte ptr [__1136074], 0                          # 0047BD91
    mov byte ptr [__1136072], 0                          # 0047BD98
    mov byte ptr [__112C2F9], 0                          # 0047BD9F
    push eax                                             # 0047BDA6
    push ebx                                             # 0047BDA7
    push ecx                                             # 0047BDA8
    msvc_mov bp, cx                                      # 0047BDA9
    movzx esi, bp                                        # 0047BDAC
    shl esi, 9                                           # 0047BDAF
    msvc_or si, ax                                       # 0047BDB2
    shr esi, 3                                           # 0047BDB5
    mov esi, dword ptr [esi + __E40134]                  # 0047BDB8
.L47BDBE:
    test byte ptr [esi], 0x3c                            # 0047BDBE
    jne .L47BDD0                                         # 0047BDC1
    test byte ptr [esi + 5], 0x1f                        # 0047BDC3
    je .L47BDD0                                          # 0047BDC7
    mov byte ptr [__112C2F9], 1                          # 0047BDC9
.L47BDD0:
    movzx bp, byte ptr [esi + 2]                         # 0047BDD0
    shl bp, 2                                            # 0047BDD5
    msvc_cmp di, bp                                      # 0047BDD9
    jne .L47BE1D                                         # 0047BDDC
    mov dh, byte ptr [esi]                               # 0047BDDE
    and dh, 0x3c                                         # 0047BDE0
    cmp dh, 0x1c                                         # 0047BDE3
    jne .L47BE1D                                         # 0047BDE6
    mov dh, byte ptr [esi]                               # 0047BDE8
    and dh, 3                                            # 0047BDEA
    cmp dh, bh                                           # 0047BDED
    jne .L47BE1D                                         # 0047BDEF
    mov dh, byte ptr [esi + 5]                           # 0047BDF1
    and dh, 3                                            # 0047BDF4
    cmp dh, byte ptr [__112C2CE]                         # 0047BDF7
    jne .L47BE1D                                         # 0047BDFD
    mov dh, byte ptr [esi + 7]                           # 0047BDFF
    and dh, 0xf                                          # 0047BE02
    cmp dh, byte ptr [__9C68EB]                          # 0047BE05
    jne .L47BE1D                                         # 0047BE0B
    test byte ptr [esi + 1], 0x20                        # 0047BE0D
    je .L47BE1D                                          # 0047BE11
    mov dh, byte ptr [esi + 4]                           # 0047BE13
    and dh, 0xf                                          # 0047BE16
    cmp dl, dh                                           # 0047BE19
    je .L47BE2E                                          # 0047BE1B
.L47BE1D:
    add esi, 8                                           # 0047BE1D
    test byte ptr [esi - 7], 0x80                        # 0047BE20
    je .L47BDBE                                          # 0047BE24
    pop ecx                                              # 0047BE26
    pop ebx                                              # 0047BE27
    pop eax                                              # 0047BE28
    msvc_jmp _sub_47C152                                 # 0047BE29
.L47BE2E:
    movzx ebx, byte ptr [esi + 5]                        # 0047BE2E
    shr ebx, 4                                           # 0047BE32
    mov ebx, dword ptr [ebx*4 + _roadObjects]            # 0047BE35
    movzx ecx, byte ptr [ebx + 0xa]                      # 0047BE3C
    movsx eax, word ptr [ebx + 4]                        # 0047BE40
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047BE44
    sar eax, 0xa                                         # 0047BE4C
    movzx ecx, byte ptr [__112C2CF]                      # 0047BE4F
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047BE56
    imul eax, ecx                                        # 0047BE5E
    sar eax, 8                                           # 0047BE61
    add dword ptr [__112C268], eax                       # 0047BE64
    test word ptr [ebx + 0x12], 8                        # 0047BE6A
    jne .L47BEF0                                         # 0047BE70
    test byte ptr [esi + 7], 0x40                        # 0047BE72
    je .L47BEB1                                          # 0047BE76
    movzx ecx, byte ptr [ebx + 0x26]                     # 0047BE78
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047BE7C
    movsx eax, word ptr [ecx + 6]                        # 0047BE83
    movzx ecx, byte ptr [ecx + 5]                        # 0047BE87
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047BE8B
    sar eax, 0xa                                         # 0047BE93
    movzx ecx, byte ptr [__112C2CF]                      # 0047BE96
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047BE9D
    imul eax, ecx                                        # 0047BEA5
    sar eax, 8                                           # 0047BEA8
    add dword ptr [__112C268], eax                       # 0047BEAB
.L47BEB1:
    test byte ptr [esi + 7], 0x80                        # 0047BEB1
    je .L47BEF0                                          # 0047BEB5
    movzx ecx, byte ptr [ebx + 0x27]                     # 0047BEB7
    mov ecx, dword ptr [ecx*4 + _roadExtraObjects]       # 0047BEBB
    movsx eax, word ptr [ecx + 6]                        # 0047BEC2
    movzx ecx, byte ptr [ecx + 5]                        # 0047BEC6
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047BECA
    sar eax, 0xa                                         # 0047BED2
    movzx ecx, byte ptr [__112C2CF]                      # 0047BED5
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047BEDC
    imul eax, ecx                                        # 0047BEE4
    sar eax, 8                                           # 0047BEE7
    add dword ptr [__112C268], eax                       # 0047BEEA
.L47BEF0:
    pop ecx                                              # 0047BEF0
    pop ebx                                              # 0047BEF1
    pop eax                                              # 0047BEF2
    push eax                                             # 0047BEF3
    push ebx                                             # 0047BEF4
    push ecx                                             # 0047BEF5
    msvc_mov bl, dl                                      # 0047BEF6
    msvc_xchg di, dx                                     # 0047BEF8
    and edi, 0xff                                        # 0047BEFB
    mov edi, dword ptr [edi*4 + __4F6D1C]                # 0047BF01
    mov bp, word ptr [esi + 5]                           # 0047BF08
    and ebp, 3                                           # 0047BF0C
    imul ebp, ebp, 0xa                                   # 0047BF0F
    mov si, word ptr [esi]                               # 0047BF12
    and esi, 3                                           # 0047BF15
    jmp dword ptr [esi*4 + __4FE6C8]                     # 0047BF18

    .global _sub_47BF1F
_sub_47BF1F:
    sub ax, word ptr [ebp + edi + 1]                     # 0047BF1F
    sub cx, word ptr [ebp + edi + 3]                     # 0047BF24
    jmp _sub_47BF4D                                      # 0047BF29

    .global _sub_47BF2B
_sub_47BF2B:
    sub ax, word ptr [ebp + edi + 3]                     # 0047BF2B
    add cx, word ptr [ebp + edi + 1]                     # 0047BF30
    jmp _sub_47BF4D                                      # 0047BF35

    .global _sub_47BF37
_sub_47BF37:
    add ax, word ptr [ebp + edi + 1]                     # 0047BF37
    add cx, word ptr [ebp + edi + 3]                     # 0047BF3C
    jmp _sub_47BF4D                                      # 0047BF41

    .global _sub_47BF43
_sub_47BF43:
    add ax, word ptr [ebp + edi + 3]                     # 0047BF43
    sub cx, word ptr [ebp + edi + 1]                     # 0047BF48

    .global _sub_47BF4D
_sub_47BF4D:
    sub dx, word ptr [ebp + edi + 5]                     # 0047BF4D
    push eax                                             # 0047BF52
    push ecx                                             # 0047BF53
    push edx                                             # 0047BF54
    msvc_xor ebp, ebp                                    # 0047BF55

    .global _sub_47BF57
_sub_47BF57:
    cmp byte ptr [ebp + edi], 0xff                       # 0047BF57
    je _sub_47C0AC                                       # 0047BF5C
    push eax                                             # 0047BF62
    push ecx                                             # 0047BF63
    push edx                                             # 0047BF64
    push esi                                             # 0047BF65
    jmp dword ptr [esi*4 + __4FE6D8]                     # 0047BF66

    .global _sub_47BF6D
_sub_47BF6D:
    add ax, word ptr [ebp + edi + 1]                     # 0047BF6D
    add cx, word ptr [ebp + edi + 3]                     # 0047BF72
    jmp _sub_47BF9B                                      # 0047BF77

    .global _sub_47BF79
_sub_47BF79:
    add ax, word ptr [ebp + edi + 3]                     # 0047BF79
    sub cx, word ptr [ebp + edi + 1]                     # 0047BF7E
    jmp _sub_47BF9B                                      # 0047BF83

    .global _sub_47BF85
_sub_47BF85:
    sub ax, word ptr [ebp + edi + 1]                     # 0047BF85
    sub cx, word ptr [ebp + edi + 3]                     # 0047BF8A
    jmp _sub_47BF9B                                      # 0047BF8F

    .global _sub_47BF91
_sub_47BF91:
    sub ax, word ptr [ebp + edi + 3]                     # 0047BF91
    add cx, word ptr [ebp + edi + 1]                     # 0047BF96

    .global _sub_47BF9B
_sub_47BF9B:
    add dx, word ptr [ebp + edi + 5]                     # 0047BF9B
    shr dx, 2                                            # 0047BFA0
    push eax                                             # 0047BFA4
    push ebx                                             # 0047BFA5
    push ecx                                             # 0047BFA6
    movzx esi, cx                                        # 0047BFA7
    shl esi, 9                                           # 0047BFAA
    msvc_or si, ax                                       # 0047BFAD
    shr esi, 3                                           # 0047BFB0
    mov esi, dword ptr [esi + __E40134]                  # 0047BFB3
.L47BFB9:
    cmp dl, byte ptr [esi + 2]                           # 0047BFB9
    jne .L47BFF5                                         # 0047BFBC
    mov al, byte ptr [esi]                               # 0047BFBE
    and al, 0x3c                                         # 0047BFC0
    cmp al, 0x1c                                         # 0047BFC2
    jne .L47BFF5                                         # 0047BFC4
    mov al, byte ptr [esi]                               # 0047BFC6
    and al, 3                                            # 0047BFC8
    cmp al, bh                                           # 0047BFCA
    jne .L47BFF5                                         # 0047BFCC
    mov al, byte ptr [esi + 5]                           # 0047BFCE
    and al, 3                                            # 0047BFD1
    cmp al, byte ptr [ebp + edi]                         # 0047BFD3
    jne .L47BFF5                                         # 0047BFD7
    mov al, byte ptr [esi + 7]                           # 0047BFD9
    and al, 0xf                                          # 0047BFDC
    cmp al, byte ptr [__9C68EB]                          # 0047BFDE
    jne .L47BFF5                                         # 0047BFE4
    test byte ptr [esi + 1], 0x20                        # 0047BFE6
    je .L47BFF5                                          # 0047BFEA
    mov al, byte ptr [esi + 4]                           # 0047BFEC
    and al, 0xf                                          # 0047BFEF
    cmp bl, al                                           # 0047BFF1
    je .L47BFFA                                          # 0047BFF3
.L47BFF5:
    add esi, 8                                           # 0047BFF5
    jmp .L47BFB9                                         # 0047BFF8
.L47BFFA:
    test byte ptr [esi + 4], 0x80                        # 0047BFFA
    je .L47C029                                          # 0047BFFE
    or byte ptr [__112C2CD], 1                           # 0047C000
    mov cl, byte ptr [esi + 6]                           # 0047C007
    shr cl, 5                                            # 0047C00A
    mov byte ptr [__112C2D0], cl                         # 0047C00D
    msvc_mov cl, dl                                      # 0047C013
    sub cl, byte ptr [esi + 2]                           # 0047C015
    shr cl, 2                                            # 0047C018
    cmp cl, byte ptr [__1136074]                         # 0047C01B
    jb .L47C029                                          # 0047C021
    mov byte ptr [__1136074], cl                         # 0047C023
.L47C029:
    mov ax, word ptr [esp + 8]                           # 0047C029
    mov cx, word ptr [esp]                               # 0047C02E
    mov dl, byte ptr [esi + 2]                           # 0047C032
    mov dh, byte ptr [esi + 3]                           # 0047C035
    mov bl, byte ptr [esi + 1]                           # 0047C038
    and bl, 0xf                                          # 0047C03B
    push ebp                                             # 0047C03E
    mov byte ptr [__112C2E2], 0                          # 0047C03F
    mov byte ptr [__112C2E3], 0xff                       # 0047C046
    mov_offset ebp, _sub_47C159                          # 0047C04D
    call _sub_462917                                     # 0047C052
    pop ebp                                              # 0047C057
    cmp byte ptr [__112C2E3], 0xff                       # 0047C058
    jne .L47C06D                                         # 0047C05F
    mov bh, byte ptr [_scenarioChunk3+428]               # 0047C061
    mov byte ptr [__112C2E3], bh                         # 0047C067
.L47C06D:
    test byte ptr [__112C2E2], 1                         # 0047C06D
    je .L47C09D                                          # 0047C074
    movzx edx, byte ptr [__112C2E3]                      # 0047C076
    mov edx, dword ptr [edx*4 + _levelCrossingObjects]   # 0047C07D
    movsx eax, word ptr [edx + 2]                        # 0047C084
    movzx ecx, byte ptr [edx + 6]                        # 0047C088
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047C08C
    sar eax, 0xa                                         # 0047C094
    add dword ptr [__112C268], eax                       # 0047C097
.L47C09D:
    pop ecx                                              # 0047C09D
    pop ebx                                              # 0047C09E
    pop eax                                              # 0047C09F
    pop esi                                              # 0047C0A0
    pop edx                                              # 0047C0A1
    pop ecx                                              # 0047C0A2
    pop eax                                              # 0047C0A3
    add ebp, 0xa                                         # 0047C0A4
    msvc_jmp _sub_47BF57                                 # 0047C0A7

    .global _sub_47C0AC
_sub_47C0AC:
    test byte ptr [__112C2CD], 1                         # 0047C0AC
    je .L47C10C                                          # 0047C0B3
    movzx edi, byte ptr [__112C2D0]                      # 0047C0B5
    mov edi, dword ptr [edi*4 + _bridgeObjects]          # 0047C0BC
    movzx ecx, byte ptr [__1136074]                      # 0047C0C3
    movsx eax, word ptr [edi + 0x10]                     # 0047C0CA
    imul ecx, eax                                        # 0047C0CE
    movsx eax, word ptr [edi + 0xe]                      # 0047C0D1
    msvc_add eax, ecx                                    # 0047C0D5
    movzx ecx, byte ptr [edi + 0xd]                      # 0047C0D7
    imul eax, dword ptr [ecx*4 + _scenarioChunk3+70]     # 0047C0DB
    sar eax, 0xa                                         # 0047C0E3
    movzx ecx, byte ptr [__112C2CF]                      # 0047C0E6
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047C0ED
    imul eax, ecx                                        # 0047C0F5
    sar eax, 8                                           # 0047C0F8
    cmp byte ptr [__112C2F9], 0                          # 0047C0FB
    je .L47C106                                          # 0047C102
    shl eax, 1                                           # 0047C104
.L47C106:
    add dword ptr [__112C268], eax                       # 0047C106
.L47C10C:
    test byte ptr [__1136072], 2                         # 0047C10C
    je .L47C14C                                          # 0047C113
    movzx edi, word ptr [__112C2B0]                      # 0047C115
    mov edi, dword ptr [edi*4 + _roadObjects]            # 0047C11C
    movsx eax, word ptr [edi + 8]                        # 0047C123
    imul eax, dword ptr [_scenarioChunk3+78]             # 0047C127
    sar eax, 8                                           # 0047C12E
    movzx ecx, byte ptr [__112C2CF]                      # 0047C131
    movzx ecx, word ptr [ecx*2 + __4F7270]               # 0047C138
    imul eax, ecx                                        # 0047C140
    sar eax, 8                                           # 0047C143
    add dword ptr [__112C268], eax                       # 0047C146
.L47C14C:
    pop edx                                              # 0047C14C
    pop ecx                                              # 0047C14D
    pop eax                                              # 0047C14E
    pop ecx                                              # 0047C14F
    pop ebx                                              # 0047C150
    pop eax                                              # 0047C151

    .global _sub_47C152
_sub_47C152:
    mov ebx, dword ptr [__112C268]                       # 0047C152
    ret                                                  # 0047C158

    .global _sub_47C159
_sub_47C159:
    pushal                                               # 0047C159
    mov al, byte ptr [esi]                               # 0047C15A
    and al, 0x3c                                         # 0047C15C
    cmp al, 0x1c                                         # 0047C15E
    je .L47C1DD                                          # 0047C160
    cmp al, 4                                            # 0047C162
    je .L47C1D6                                          # 0047C164
    cmp al, 8                                            # 0047C166
    jne .L47C175                                         # 0047C168
    mov ah, byte ptr [esi + 5]                           # 0047C16A
    shr ah, 5                                            # 0047C16D
    cmp ah, 1                                            # 0047C170
    je .L47C1DD                                          # 0047C173
.L47C175:
    cmp al, 0x14                                         # 0047C175
    je .L47C1AE                                          # 0047C177
    cmp al, 0x10                                         # 0047C179
    je .L47C180                                          # 0047C17B
    popal                                                # 0047C17D
    stc                                                  # 0047C17E
    ret                                                  # 0047C17F
.L47C180:
    movzx ebx, byte ptr [esi + 4]                        # 0047C180
    mov ebx, dword ptr [ebx*4 + _buildingObjects]        # 0047C184
    movsx eax, word ptr [ebx + 0x9a]                     # 0047C18B
    movzx ebx, byte ptr [ebx + 0x99]                     # 0047C192
    imul eax, dword ptr [ebx*4 + _scenarioChunk3+70]     # 0047C199
    sar eax, 8                                           # 0047C1A1
    add dword ptr [__112C268], eax                       # 0047C1A4
    popal                                                # 0047C1AA
    msvc_and eax, eax                                    # 0047C1AB
    ret                                                  # 0047C1AD
.L47C1AE:
    movzx ebx, byte ptr [esi + 4]                        # 0047C1AE
    mov ebx, dword ptr [ebx*4 + _treeObjects]            # 0047C1B2
    movsx ecx, word ptr [ebx + 0x42]                     # 0047C1B9
    movzx ebx, byte ptr [ebx + 0x3f]                     # 0047C1BD
    imul ecx, dword ptr [ebx*4 + _scenarioChunk3+70]     # 0047C1C1
    sar ecx, 0xc                                         # 0047C1C9
    add dword ptr [__112C268], ecx                       # 0047C1CC
    popal                                                # 0047C1D2
    msvc_and eax, eax                                    # 0047C1D3
    ret                                                  # 0047C1D5
.L47C1D6:
    or byte ptr [__112C2E2], 1                           # 0047C1D6
.L47C1DD:
    popal                                                # 0047C1DD
    clc                                                  # 0047C1DE
    ret                                                  # 0047C1DF

    .global _sub_47C1E0
_sub_47C1E0:
    push eax                                             # 0047C1E0
    push ecx                                             # 0047C1E1
    push edx                                             # 0047C1E2
    push edi                                             # 0047C1E3
    push esi                                             # 0047C1E4
    push ebp                                             # 0047C1E5
    msvc_xor bh, bh                                      # 0047C1E6
    mov word ptr [__112C2B0], bx                         # 0047C1E8
    mov byte ptr [__112C2F3], 0                          # 0047C1EF
    movzx esi, bl                                        # 0047C1F6
    mov esi, dword ptr [esi*4 + _roadObjects]            # 0047C1F9
    test word ptr [esi + 0x12], 8                        # 0047C200
    jne _sub_47C368                                      # 0047C206
    test ebp, 4                                          # 0047C20C
    je .L47C24C                                          # 0047C212
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047C214
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047C21C
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047C224
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047C22C
    xor ebp, 4                                           # 0047C234
    cmp bl, 0xc                                          # 0047C237
    jae .L47C24C                                         # 0047C23A
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047C23C
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047C244
.L47C24C:
    push eax                                             # 0047C24C
    push ecx                                             # 0047C24D
    push edx                                             # 0047C24E
    push ebp                                             # 0047C24F
    shr ebp, 3                                           # 0047C250
    mov edi, dword ptr [ebp*4 + __4F6D1C]                # 0047C253
    msvc_xor ebp, ebp                                    # 0047C25A

    .global _sub_47C25C
_sub_47C25C:
    cmp byte ptr [ebp + edi], 0xff                       # 0047C25C
    je _sub_47C34A                                       # 0047C261
    mov ax, word ptr [esp + 0xc]                         # 0047C267
    mov cx, word ptr [esp + 8]                           # 0047C26C
    mov dx, word ptr [esp + 4]                           # 0047C271
    mov esi, dword ptr [esp]                             # 0047C276
    and esi, 3                                           # 0047C279
    jmp dword ptr [esi*4 + __4FE6E8]                     # 0047C27C

    .global _sub_47C283
_sub_47C283:
    add ax, word ptr [ebp + edi + 1]                     # 0047C283
    add cx, word ptr [ebp + edi + 3]                     # 0047C288
    jmp _sub_47C2B1                                      # 0047C28D

    .global _sub_47C28F
_sub_47C28F:
    add ax, word ptr [ebp + edi + 3]                     # 0047C28F
    sub cx, word ptr [ebp + edi + 1]                     # 0047C294
    jmp _sub_47C2B1                                      # 0047C299

    .global _sub_47C29B
_sub_47C29B:
    sub ax, word ptr [ebp + edi + 1]                     # 0047C29B
    sub cx, word ptr [ebp + edi + 3]                     # 0047C2A0
    jmp _sub_47C2B1                                      # 0047C2A5

    .global _sub_47C2A7
_sub_47C2A7:
    sub ax, word ptr [ebp + edi + 3]                     # 0047C2A7
    add cx, word ptr [ebp + edi + 1]                     # 0047C2AC

    .global _sub_47C2B1
_sub_47C2B1:
    add dx, word ptr [ebp + edi + 5]                     # 0047C2B1
    shr dx, 2                                            # 0047C2B6
    movzx esi, cx                                        # 0047C2BA
    shl esi, 9                                           # 0047C2BD
    msvc_or si, ax                                       # 0047C2C0
    shr esi, 3                                           # 0047C2C3
    mov esi, dword ptr [esi + __E40134]                  # 0047C2C6
.L47C2CC:
    cmp dl, byte ptr [esi + 2]                           # 0047C2CC
    jne .L47C32B                                         # 0047C2CF
    mov al, byte ptr [esi]                               # 0047C2D1
    and al, 0x3c                                         # 0047C2D3
    cmp al, 0x1c                                         # 0047C2D5
    jne .L47C32B                                         # 0047C2D7
    mov al, byte ptr [esi + 5]                           # 0047C2D9
    shr al, 4                                            # 0047C2DC
    cmp al, byte ptr [__112C2B0]                         # 0047C2DF
    jne .L47C32B                                         # 0047C2E5
    test byte ptr [esi + 1], 0x30                        # 0047C2E7
    jne .L47C32B                                         # 0047C2EB
    mov al, byte ptr [esi]                               # 0047C2ED
    and al, 3                                            # 0047C2EF
    mov ah, byte ptr [esp]                               # 0047C2F1
    and ah, 3                                            # 0047C2F4
    cmp al, ah                                           # 0047C2F7
    jne .L47C324                                         # 0047C2F9
    mov al, byte ptr [esi + 5]                           # 0047C2FB
    and al, 3                                            # 0047C2FE
    cmp al, byte ptr [ebp + edi]                         # 0047C300
    jne .L47C324                                         # 0047C304
    mov al, byte ptr [esi + 7]                           # 0047C306
    and al, 0xf                                          # 0047C309
    cmp al, byte ptr [__9C68EB]                          # 0047C30B
    jne .L47C324                                         # 0047C311
    mov al, byte ptr [esi + 4]                           # 0047C313
    and al, 0xf                                          # 0047C316
    mov bx, word ptr [esp]                               # 0047C318
    shr bx, 3                                            # 0047C31C
    cmp bl, al                                           # 0047C320
    je .L47C336                                          # 0047C322
.L47C324:
    or byte ptr [__112C2F3], 8                           # 0047C324
.L47C32B:
    add esi, 8                                           # 0047C32B
    test byte ptr [esi - 7], 0x80                        # 0047C32E
    je .L47C2CC                                          # 0047C332
    jmp _sub_47C35B                                      # 0047C334
.L47C336:
    test byte ptr [esi], 0x80                            # 0047C336
    je .L47C342                                          # 0047C339
    or byte ptr [__112C2F3], 4                           # 0047C33B
.L47C342:
    add ebp, 0xa                                         # 0047C342
    msvc_jmp _sub_47C25C                                 # 0047C345

    .global _sub_47C34A
_sub_47C34A:
    pop ebp                                              # 0047C34A
    pop edx                                              # 0047C34B
    pop ecx                                              # 0047C34C
    pop eax                                              # 0047C34D
    pop ebp                                              # 0047C34E
    pop esi                                              # 0047C34F
    pop edi                                              # 0047C350
    pop edx                                              # 0047C351
    pop ecx                                              # 0047C352
    pop eax                                              # 0047C353
    mov bl, byte ptr [__112C2F3]                         # 0047C354
    ret                                                  # 0047C35A

    .global _sub_47C35B
_sub_47C35B:
    pop ebp                                              # 0047C35B
    pop edx                                              # 0047C35C
    pop ecx                                              # 0047C35D
    pop eax                                              # 0047C35E
    pop ebp                                              # 0047C35F
    pop esi                                              # 0047C360
    pop edi                                              # 0047C361
    pop edx                                              # 0047C362
    pop ecx                                              # 0047C363
    pop eax                                              # 0047C364
    mov bl, 2                                            # 0047C365
    ret                                                  # 0047C367

    .global _sub_47C368
_sub_47C368:
    pop ebp                                              # 0047C368
    pop esi                                              # 0047C369
    pop edi                                              # 0047C36A
    pop edx                                              # 0047C36B
    pop ecx                                              # 0047C36C
    pop eax                                              # 0047C36D
    mov bl, 1                                            # 0047C36E
    ret                                                  # 0047C370

    .global _sub_47C371
_sub_47C371:
    push eax                                             # 0047C371
    push ecx                                             # 0047C372
    push edx                                             # 0047C373
    push edi                                             # 0047C374
    push esi                                             # 0047C375
    push ebp                                             # 0047C376
    msvc_xor bh, bh                                      # 0047C377
    mov word ptr [__112C2B0], bx                         # 0047C379
    mov byte ptr [__112C2F3], 0                          # 0047C380
    test ebp, 4                                          # 0047C387
    je .L47C3C7                                          # 0047C38D
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047C38F
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047C397
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047C39F
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047C3A7
    xor ebp, 4                                           # 0047C3AF
    cmp bl, 0xc                                          # 0047C3B2
    jae .L47C3C7                                         # 0047C3B5
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047C3B7
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047C3BF
.L47C3C7:
    push eax                                             # 0047C3C7
    push ecx                                             # 0047C3C8
    push edx                                             # 0047C3C9
    push ebp                                             # 0047C3CA
    shr ebp, 3                                           # 0047C3CB
    mov edi, dword ptr [ebp*4 + __4F6D1C]                # 0047C3CE
    msvc_xor ebp, ebp                                    # 0047C3D5

    .global _sub_47C3D7
_sub_47C3D7:
    cmp byte ptr [ebp + edi], 0xff                       # 0047C3D7
    je _sub_47C4B8                                       # 0047C3DC
    mov ax, word ptr [esp + 0xc]                         # 0047C3E2
    mov cx, word ptr [esp + 8]                           # 0047C3E7
    mov dx, word ptr [esp + 4]                           # 0047C3EC
    mov esi, dword ptr [esp]                             # 0047C3F1
    and esi, 3                                           # 0047C3F4
    jmp dword ptr [esi*4 + __4FE6F8]                     # 0047C3F7

    .global _sub_47C3FE
_sub_47C3FE:
    add ax, word ptr [ebp + edi + 1]                     # 0047C3FE
    add cx, word ptr [ebp + edi + 3]                     # 0047C403
    jmp _sub_47C42C                                      # 0047C408

    .global _sub_47C40A
_sub_47C40A:
    add ax, word ptr [ebp + edi + 3]                     # 0047C40A
    sub cx, word ptr [ebp + edi + 1]                     # 0047C40F
    jmp _sub_47C42C                                      # 0047C414

    .global _sub_47C416
_sub_47C416:
    sub ax, word ptr [ebp + edi + 1]                     # 0047C416
    sub cx, word ptr [ebp + edi + 3]                     # 0047C41B
    jmp _sub_47C42C                                      # 0047C420

    .global _sub_47C422
_sub_47C422:
    sub ax, word ptr [ebp + edi + 3]                     # 0047C422
    add cx, word ptr [ebp + edi + 1]                     # 0047C427

    .global _sub_47C42C
_sub_47C42C:
    add dx, word ptr [ebp + edi + 5]                     # 0047C42C
    shr dx, 2                                            # 0047C431
    movzx esi, cx                                        # 0047C435
    shl esi, 9                                           # 0047C438
    msvc_or si, ax                                       # 0047C43B
    shr esi, 3                                           # 0047C43E
    mov esi, dword ptr [esi + __E40134]                  # 0047C441
.L47C447:
    cmp dl, byte ptr [esi + 2]                           # 0047C447
    jne .L47C4A5                                         # 0047C44A
    mov al, byte ptr [esi]                               # 0047C44C
    and al, 0x3c                                         # 0047C44E
    cmp al, 0x1c                                         # 0047C450
    jne .L47C4A5                                         # 0047C452
    test byte ptr [esi + 1], 0x30                        # 0047C454
    jne .L47C4A5                                         # 0047C458
    mov al, byte ptr [esi]                               # 0047C45A
    and al, 3                                            # 0047C45C
    mov ah, byte ptr [esp]                               # 0047C45E
    and ah, 3                                            # 0047C461
    cmp al, ah                                           # 0047C464
    jne .L47C4A5                                         # 0047C466
    mov al, byte ptr [esi + 5]                           # 0047C468
    and al, 3                                            # 0047C46B
    cmp al, byte ptr [ebp + edi]                         # 0047C46D
    jne .L47C4A5                                         # 0047C471
    mov al, byte ptr [esi + 4]                           # 0047C473
    and al, 0xf                                          # 0047C476
    mov bx, word ptr [esp]                               # 0047C478
    shr bx, 3                                            # 0047C47C
    cmp bl, al                                           # 0047C480
    jne .L47C4A5                                         # 0047C482
    movzx eax, byte ptr [esi + 5]                        # 0047C484
    shr al, 4                                            # 0047C488
    cmp al, byte ptr [__112C2B0]                         # 0047C48B
    je .L47C4B0                                          # 0047C491
    cmp byte ptr [__112C2B0], 0xff                       # 0047C493
    jne .L47C4A5                                         # 0047C49A
    bt dword ptr [_scenarioChunk3+420], eax              # 0047C49C
    jb .L47C4B0                                          # 0047C4A3
.L47C4A5:
    add esi, 8                                           # 0047C4A5
    test byte ptr [esi - 7], 0x80                        # 0047C4A8
    je .L47C447                                          # 0047C4AC
    jmp _sub_47C4C9                                      # 0047C4AE
.L47C4B0:
    add ebp, 0xa                                         # 0047C4B0
    msvc_jmp _sub_47C3D7                                 # 0047C4B3

    .global _sub_47C4B8
_sub_47C4B8:
    pop ebp                                              # 0047C4B8
    pop edx                                              # 0047C4B9
    pop ecx                                              # 0047C4BA
    pop eax                                              # 0047C4BB
    pop ebp                                              # 0047C4BC
    pop esi                                              # 0047C4BD
    pop edi                                              # 0047C4BE
    pop edx                                              # 0047C4BF
    pop ecx                                              # 0047C4C0
    pop eax                                              # 0047C4C1
    mov bl, byte ptr [__112C2F3]                         # 0047C4C2
    ret                                                  # 0047C4C8

    .global _sub_47C4C9
_sub_47C4C9:
    pop ebp                                              # 0047C4C9
    pop edx                                              # 0047C4CA
    pop ecx                                              # 0047C4CB
    pop eax                                              # 0047C4CC
    pop ebp                                              # 0047C4CD
    pop esi                                              # 0047C4CE
    pop edi                                              # 0047C4CF
    pop edx                                              # 0047C4D0
    pop ecx                                              # 0047C4D1
    pop eax                                              # 0047C4D2
    mov bl, 2                                            # 0047C4D3
    ret                                                  # 0047C4D5

    .global _sub_47C4D6
_sub_47C4D6:
    mov ebp, dword ptr [_scenarioChunk3]                 # 0047C4D6
    mov esi, dword ptr [_scenarioChunk3+4]               # 0047C4DC
    ror ebp, 3                                           # 0047C4E2
    xor esi, 0x1234567f                                  # 0047C4E5
    mov dword ptr [_scenarioChunk3+4], ebp               # 0047C4EB
    ror esi, 7                                           # 0047C4F1
    add dword ptr [_scenarioChunk3], esi                 # 0047C4F4
    msvc_mov esi, ebp                                    # 0047C4FA
    and esi, 0xf                                         # 0047C4FC
    shr ebp, 4                                           # 0047C4FF
    and ebp, 0xf                                         # 0047C502
    sub esi, 7                                           # 0047C505
    sub ebp, 7                                           # 0047C508
    shl esi, 5                                           # 0047C50B
    shl ebp, 5                                           # 0047C50E
    msvc_add ax, si                                      # 0047C511
    msvc_add cx, bp                                      # 0047C514
    cmp ax, 0x2fff                                       # 0047C517
    ja .L47C57F                                          # 0047C51B
    cmp cx, 0x2fff                                       # 0047C51D
    ja .L47C57F                                          # 0047C522
    push eax                                             # 0047C524
    push ecx                                             # 0047C525
    movzx esi, cx                                        # 0047C526
    shl esi, 9                                           # 0047C529
    msvc_or si, ax                                       # 0047C52C
    shr esi, 3                                           # 0047C52F
    mov esi, dword ptr [esi + __E40134]                  # 0047C532
.L47C538:
    mov al, byte ptr [esi]                               # 0047C538
    and al, 0x3c                                         # 0047C53A
    cmp al, 0x1c                                         # 0047C53C
    jne .L47C574                                         # 0047C53E
    test byte ptr [esi + 5], 3                           # 0047C540
    jne .L47C574                                         # 0047C544
    cmp bl, 0xff                                         # 0047C546
    je .L47C564                                          # 0047C549
    mov al, byte ptr [esi + 5]                           # 0047C54B
    shr al, 4                                            # 0047C54E
    cmp al, bl                                           # 0047C551
    jne .L47C574                                         # 0047C553
    mov al, byte ptr [esi + 7]                           # 0047C555
    and al, 0xf                                          # 0047C558
    cmp al, byte ptr [__9C68EB]                          # 0047C55A
    je .L47C581                                          # 0047C560
    jmp .L47C574                                         # 0047C562
.L47C564:
    movzx eax, byte ptr [esi + 5]                        # 0047C564
    shr eax, 4                                           # 0047C568
    bt dword ptr [_scenarioChunk3+420], eax              # 0047C56B
    jb .L47C581                                          # 0047C572
.L47C574:
    add esi, 8                                           # 0047C574
    test byte ptr [esi - 7], 0x80                        # 0047C577
    je .L47C538                                          # 0047C57B
    pop ecx                                              # 0047C57D
    pop eax                                              # 0047C57E
.L47C57F:
    stc                                                  # 0047C57F
    ret                                                  # 0047C580
.L47C581:
    movzx dx, byte ptr [esi + 2]                         # 0047C581
    shl dx, 2                                            # 0047C586
    movzx bp, byte ptr [esi]                             # 0047C58A
    and ebp, 3                                           # 0047C58E
    mov al, byte ptr [esi + 4]                           # 0047C591
    and eax, 0xf                                         # 0047C594
    mov edi, dword ptr [eax*4 + __4F6D1C]                # 0047C597
    sub dx, word ptr [edi + 5]                           # 0047C59E
    shl eax, 3                                           # 0047C5A2
    msvc_or ebp, eax                                     # 0047C5A5
    shr dx, 2                                            # 0047C5A7
    pop ecx                                              # 0047C5AB
    pop eax                                              # 0047C5AC
    msvc_and eax, eax                                    # 0047C5AD
    ret                                                  # 0047C5AF

    .global _sub_47C5B0
_sub_47C5B0:
    call _sub_47C722                                     # 0047C5B0
    push esi                                             # 0047C5B5
    or byte ptr [esi + 0x38], 4                          # 0047C5B6
    movzx esi, word ptr [esi + 0x3a]                     # 0047C5BA
    shl esi, 7                                           # 0047C5BE
    add_offset esi, _things                              # 0047C5C1
    or byte ptr [esi + 0x38], 4                          # 0047C5C7
    movzx esi, word ptr [esi + 0x3a]                     # 0047C5CB
    shl esi, 7                                           # 0047C5CF
    add_offset esi, _things                              # 0047C5D2
    mov ax, word ptr [esi + 0x30]                        # 0047C5D8
    mov cx, word ptr [esi + 0x32]                        # 0047C5DC
    movzx dx, byte ptr [esi + 0x34]                      # 0047C5E0
    shl dx, 2                                            # 0047C5E5
    movzx ebp, word ptr [esi + 0x36]                     # 0047C5E9
    push ebp                                             # 0047C5ED
.L47C5EE:
    cmp ebp, dword ptr [esp]                             # 0047C5EE
    je .L47C60C                                          # 0047C5F1
    pushal                                               # 0047C5F3
    mov bp, word ptr [ebp*2 + __96885C]                  # 0047C5F4
    and ebp, 0x1ff                                       # 0047C5FC
    shr dx, 2                                            # 0047C602
    call _sub_47D959                                     # 0047C606
    popal                                                # 0047C60B
.L47C60C:
    push ebp                                             # 0047C60C
    mov bp, word ptr [ebp*2 + __96885C]                  # 0047C60D
    and ebp, 0x7f                                        # 0047C615
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047C618
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047C620
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047C628
    pop ebp                                              # 0047C630
    cmp ebp, dword ptr [esp]                             # 0047C631
    je .L47C640                                          # 0047C634
    mov word ptr [ebp*2 + __96885C], 0xfffe              # 0047C636
.L47C640:
    msvc_mov edi, ebp                                    # 0047C640
    inc ebp                                              # 0047C642
    and ebp, 0x3f                                        # 0047C643
    and edi, 0xffffffc0                                  # 0047C646
    msvc_or ebp, edi                                     # 0047C649
    cmp word ptr [ebp*2 + __96885C], -2                  # 0047C64B
    jne .L47C5EE                                         # 0047C654
    pop ebp                                              # 0047C656
    pop esi                                              # 0047C657
    movzx edi, word ptr [esi + 0x3a]                     # 0047C658
    shl edi, 7                                           # 0047C65C
    add_offset edi, _things                              # 0047C65F
    movzx edi, word ptr [edi + 0x3a]                     # 0047C665
    shl edi, 7                                           # 0047C669
    add_offset edi, _things                              # 0047C66C
    mov ax, word ptr [edi + 0x30]                        # 0047C672
    mov cx, word ptr [edi + 0x32]                        # 0047C676
    mov dl, byte ptr [edi + 0x34]                        # 0047C67A
    mov word ptr [esi + 0x30], ax                        # 0047C67D
    mov word ptr [esi + 0x32], cx                        # 0047C681
    mov byte ptr [esi + 0x34], dl                        # 0047C685
    mov bp, word ptr [edi + 0x36]                        # 0047C688
    mov ebx, dword ptr [edi + 0x28]                      # 0047C68C
    mov word ptr [esi + 0x36], bp                        # 0047C68F
    mov dword ptr [esi + 0x3c], 0                        # 0047C693
    mov dword ptr [esi + 0x28], ebx                      # 0047C69A
    and byte ptr [esi + 0x38], 0xfb                      # 0047C69D
    mov ax, word ptr [edi + 0x2e]                        # 0047C6A1
    mov word ptr [esi + 0x2e], ax                        # 0047C6A5
    mov ax, word ptr [edi + 0x2c]                        # 0047C6A9
    mov word ptr [esi + 0x2c], ax                        # 0047C6AD
    mov ax, word ptr [edi + 0xe]                         # 0047C6B1
    mov cx, word ptr [edi + 0x10]                        # 0047C6B5
    mov dx, word ptr [edi + 0x12]                        # 0047C6B9
    call _sub_46FC83                                     # 0047C6BD
    push esi                                             # 0047C6C2
    movzx esi, word ptr [esi + 0x3a]                     # 0047C6C3
    shl esi, 7                                           # 0047C6C7
    add_offset esi, _things                              # 0047C6CA
    mov ax, word ptr [edi + 0x30]                        # 0047C6D0
    mov cx, word ptr [edi + 0x32]                        # 0047C6D4
    mov dl, byte ptr [edi + 0x34]                        # 0047C6D8
    mov word ptr [esi + 0x30], ax                        # 0047C6DB
    mov word ptr [esi + 0x32], cx                        # 0047C6DF
    mov byte ptr [esi + 0x34], dl                        # 0047C6E3
    mov bp, word ptr [edi + 0x36]                        # 0047C6E6
    mov ebx, dword ptr [edi + 0x28]                      # 0047C6EA
    mov word ptr [esi + 0x36], bp                        # 0047C6ED
    mov dword ptr [esi + 0x3c], 0                        # 0047C6F1
    mov dword ptr [esi + 0x28], ebx                      # 0047C6F8
    and byte ptr [esi + 0x38], 0xfb                      # 0047C6FB
    mov ax, word ptr [edi + 0x2e]                        # 0047C6FF
    mov word ptr [esi + 0x2e], ax                        # 0047C703
    mov ax, word ptr [edi + 0x2c]                        # 0047C707
    mov word ptr [esi + 0x2c], ax                        # 0047C70B
    mov ax, word ptr [edi + 0xe]                         # 0047C70F
    mov cx, word ptr [edi + 0x10]                        # 0047C713
    mov dx, word ptr [edi + 0x12]                        # 0047C717
    call _sub_46FC83                                     # 0047C71B
    pop esi                                              # 0047C720
    ret                                                  # 0047C721

    .global _sub_47C722
_sub_47C722:
    push esi                                             # 0047C722
    or byte ptr [esi + 0x38], 4                          # 0047C723
    movzx esi, word ptr [esi + 0x3a]                     # 0047C727
    shl esi, 7                                           # 0047C72B
    add_offset esi, _things                              # 0047C72E
    mov ax, word ptr [esi + 0x30]                        # 0047C734
    mov cx, word ptr [esi + 0x32]                        # 0047C738
    movzx dx, byte ptr [esi + 0x34]                      # 0047C73C
    shl dx, 2                                            # 0047C741
    movzx ebp, word ptr [esi + 0x36]                     # 0047C745
    push ebp                                             # 0047C749
    mov byte ptr [__1136239], 0                          # 0047C74A
.L47C751:
    push ebp                                             # 0047C751
    movzx ebp, word ptr [ebp*2 + __96885C]               # 0047C752
    and ebp, 0x7f                                        # 0047C75A
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047C75D
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047C765
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047C76D
    pop ebp                                              # 0047C775
    cmp ebp, dword ptr [esp]                             # 0047C776
    je .L47C785                                          # 0047C779
    mov word ptr [ebp*2 + __96885C], 0xfffe              # 0047C77B
.L47C785:
    msvc_mov edi, ebp                                    # 0047C785
    inc ebp                                              # 0047C787
    and ebp, 0x3f                                        # 0047C788
    and edi, 0xffffffc0                                  # 0047C78B
    msvc_or ebp, edi                                     # 0047C78E
    cmp word ptr [ebp*2 + __96885C], -2                  # 0047C790
    jne .L47C751                                         # 0047C799
    pop ebp                                              # 0047C79B
    pop esi                                              # 0047C79C
    movzx edi, word ptr [esi + 0x3a]                     # 0047C79D
    shl edi, 7                                           # 0047C7A1
    add_offset edi, _things                              # 0047C7A4
    mov ax, word ptr [edi + 0x30]                        # 0047C7AA
    mov cx, word ptr [edi + 0x32]                        # 0047C7AE
    mov dl, byte ptr [edi + 0x34]                        # 0047C7B2
    mov word ptr [esi + 0x30], ax                        # 0047C7B5
    mov word ptr [esi + 0x32], cx                        # 0047C7B9
    mov byte ptr [esi + 0x34], dl                        # 0047C7BD
    mov bp, word ptr [edi + 0x36]                        # 0047C7C0
    mov ebx, dword ptr [edi + 0x28]                      # 0047C7C4
    mov word ptr [esi + 0x36], bp                        # 0047C7C7
    mov eax, dword ptr [edi + 0x3c]                      # 0047C7CB
    mov dword ptr [esi + 0x3c], eax                      # 0047C7CE
    mov dword ptr [esi + 0x28], ebx                      # 0047C7D1
    and byte ptr [esi + 0x38], 0xfb                      # 0047C7D4
    mov ax, word ptr [edi + 0x2e]                        # 0047C7D8
    mov word ptr [esi + 0x2e], ax                        # 0047C7DC
    mov ax, word ptr [edi + 0x2c]                        # 0047C7E0
    mov word ptr [esi + 0x2c], ax                        # 0047C7E4
    mov ax, word ptr [edi + 0xe]                         # 0047C7E8
    mov cx, word ptr [edi + 0x10]                        # 0047C7EC
    mov dx, word ptr [edi + 0x12]                        # 0047C7F0
    call _sub_46FC83                                     # 0047C7F4
    ret                                                  # 0047C7F9

    .global _sub_47C7FA
_sub_47C7FA:
    add eax, dword ptr [esi + 0x28]                      # 0047C7FA
    mov dword ptr [esi + 0x28], eax                      # 0047C7FD
    cmp eax, 0x368a                                      # 0047C800
    jl .L47CA26                                          # 0047C805
    mov eax, dword ptr [esi + 0xe]                       # 0047C80B
    mov cx, word ptr [esi + 0x12]                        # 0047C80E
    mov dword ptr [__113616A], eax                       # 0047C812
    mov word ptr [__113616E], cx                         # 0047C817
    call _sub_4CBB01                                     # 0047C81E
.L47C823:
    movzx edi, word ptr [esi + 0x2c]                     # 0047C823
    mov ax, word ptr [esi + 0x2e]                        # 0047C827
    inc ax                                               # 0047C82B
    mov edi, dword ptr [edi*4 + __5253B0]                # 0047C82D
    cmp ax, word ptr [edi - 2]                           # 0047C834
    jb .L47C95B                                          # 0047C838
    movzx ebx, word ptr [esi + 0x36]                     # 0047C83E
    msvc_mov eax, ebx                                    # 0047C842
    and ebx, 0xffffffc0                                  # 0047C844
    inc eax                                              # 0047C847
    and eax, 0x3f                                        # 0047C848
    msvc_or ebx, eax                                     # 0047C84B
    movzx edi, word ptr [ebx*2 + __96885C]               # 0047C84D
    cmp di, -2                                           # 0047C855
    je .L47CA3A                                          # 0047C859
    test dword ptr [__1136114], 0x8000                   # 0047C85F
    je .L47C891                                          # 0047C869
    movzx eax, word ptr [esi + 0x26]                     # 0047C86B
    shl eax, 7                                           # 0047C86F
    add_offset eax, _things                              # 0047C872
    movzx eax, word ptr [eax + 0x3a]                     # 0047C877
    shl eax, 7                                           # 0047C87B
    add_offset eax, _things                              # 0047C87E
    mov ax, word ptr [eax + 0x36]                        # 0047C883
    cmp ax, word ptr [esi + 0x36]                        # 0047C887
    je .L47CA29                                          # 0047C88B
.L47C891:
    and edi, 0x1ff                                       # 0047C891
    push ebx                                             # 0047C897
    push edi                                             # 0047C898
    movzx ebp, word ptr [esi + 0x26]                     # 0047C899
    shl ebp, 7                                           # 0047C89D
    add_offset ebp, _things                              # 0047C8A0
    mov cx, word ptr [esi + 0x32]                        # 0047C8A6
    mov bl, byte ptr [ebp + 0x53]                        # 0047C8AA
    movzx dx, byte ptr [esi + 0x34]                      # 0047C8AD
    mov byte ptr [__113601A], bl                         # 0047C8B2
    mov byte ptr [__113601B], 0                          # 0047C8B8
    mov ax, word ptr [esi + 0x30]                        # 0047C8BF
    mov bl, byte ptr [esi + 0x21]                        # 0047C8C3
    shl dx, 2                                            # 0047C8C6
    mov bh, byte ptr [esi + 0x35]                        # 0047C8CA
    mov bp, word ptr [esi + 0x2c]                        # 0047C8CD
    and ebp, 0x7f                                        # 0047C8D1
    mov_offset edi, __11360A0                            # 0047C8D4
    call _sub_478895                                     # 0047C8D9
    pop edi                                              # 0047C8DE
    pop ebx                                              # 0047C8DF
    msvc_xor ebp, ebp                                    # 0047C8E0
    push edi                                             # 0047C8E2
    and edi, 0x7f                                        # 0047C8E3
.L47C8E6:
    cmp ebp, dword ptr [__113609C]                       # 0047C8E6
    jae .L47CA32                                         # 0047C8EC
    mov ax, word ptr [ebp*2 + __11360A0]                 # 0047C8F2
    and ax, 0x7f                                         # 0047C8FA
    msvc_cmp ax, di                                      # 0047C8FE
    je .L47C906                                          # 0047C901
    inc ebp                                              # 0047C903
    jmp .L47C8E6                                         # 0047C904
.L47C906:
    pop edi                                              # 0047C906
    mov word ptr [esi + 0x36], bx                        # 0047C907
    xchg word ptr [esi + 0x2c], di                       # 0047C90B
    cmp byte ptr [esi + 1], 2                            # 0047C90F
    jne .L47C91D                                         # 0047C913
    mov al, byte ptr [__112C2ED]                         # 0047C915
    mov byte ptr [esi + 0x4f], al                        # 0047C91A
.L47C91D:
    mov ax, word ptr [esi + 0x30]                        # 0047C91D
    mov cx, word ptr [esi + 0x32]                        # 0047C921
    movzx dx, byte ptr [esi + 0x34]                      # 0047C925
    and edi, 0x7f                                        # 0047C92A
    shl dx, 2                                            # 0047C92D
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047C931
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047C939
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047C941
    shr dx, 2                                            # 0047C949
    mov word ptr [esi + 0x30], ax                        # 0047C94D
    mov word ptr [esi + 0x32], cx                        # 0047C951
    mov byte ptr [esi + 0x34], dl                        # 0047C955
    msvc_xor ax, ax                                      # 0047C958
.L47C95B:
    mov word ptr [esi + 0x2e], ax                        # 0047C95B
    movzx ebx, word ptr [esi + 0x2c]                     # 0047C95F
    movzx edi, word ptr [esi + 0x2e]                     # 0047C963
    imul edi, edi, 8                                     # 0047C967
    add edi, dword ptr [ebx*4 + __5253B0]                # 0047C96A
    mov ax, word ptr [edi]                               # 0047C971
    mov cx, word ptr [edi + 2]                           # 0047C974
    mov dx, word ptr [edi + 4]                           # 0047C978
    add ax, word ptr [esi + 0x30]                        # 0047C97C
    add cx, word ptr [esi + 0x32]                        # 0047C980
    movzx bx, byte ptr [esi + 0x34]                      # 0047C984
    shl bx, 2                                            # 0047C989
    msvc_add dx, bx                                      # 0047C98D
    msvc_xor ebx, ebx                                    # 0047C990
    cmp ax, word ptr [__113616A]                         # 0047C992
    je .L47C99E                                          # 0047C999
    or ebx, 1                                            # 0047C99B
.L47C99E:
    cmp cx, word ptr [__113616C]                         # 0047C99E
    je .L47C9AA                                          # 0047C9A5
    or ebx, 2                                            # 0047C9A7
.L47C9AA:
    cmp dx, word ptr [__113616E]                         # 0047C9AA
    je .L47C9B6                                          # 0047C9B1
    or ebx, 4                                            # 0047C9B3
.L47C9B6:
    mov ebx, dword ptr [ebx*4 + __500120]                # 0047C9B6
    sub dword ptr [esi + 0x28], ebx                      # 0047C9BD
    mov word ptr [__113616A], ax                         # 0047C9C0
    mov word ptr [__113616C], cx                         # 0047C9C6
    mov word ptr [__113616E], dx                         # 0047C9CD
    mov bl, byte ptr [edi + 6]                           # 0047C9D4
    mov byte ptr [esi + 0x1e], bl                        # 0047C9D7
    mov bl, byte ptr [edi + 7]                           # 0047C9DA
    mov byte ptr [esi + 0x1f], bl                        # 0047C9DD
    cmp byte ptr [esi + 1], 3                            # 0047C9E0
    jne .L47C9FB                                         # 0047C9E4
    call _sub_4B1876                                     # 0047C9E6
    jae .L47C9FB                                         # 0047C9EB
    or dword ptr [__1136114], 4                          # 0047C9ED
    mov word ptr [__113610E], bp                         # 0047C9F4
.L47C9FB:
    cmp dword ptr [esi + 0x28], 0x368a                   # 0047C9FB
    jge .L47C823                                         # 0047CA02
    mov ax, word ptr [__113616A]                         # 0047CA08
    mov cx, word ptr [__113616C]                         # 0047CA0E
    mov dx, word ptr [__113616E]                         # 0047CA15
    call _sub_46FC83                                     # 0047CA1C
    call _sub_4CBB01                                     # 0047CA21
.L47CA26:
    msvc_xor eax, eax                                    # 0047CA26
    ret                                                  # 0047CA28
.L47CA29:
    or dword ptr [__1136114], 8                          # 0047CA29
    jmp .L47CA3A                                         # 0047CA30
.L47CA32:
    pop edi                                              # 0047CA32
    or dword ptr [__1136114], 2                          # 0047CA33
.L47CA3A:
    mov eax, dword ptr [esi + 0x28]                      # 0047CA3A
    sub eax, 0x3689                                      # 0047CA3D
    mov dword ptr [esi + 0x28], 0x3689                   # 0047CA42
    push eax                                             # 0047CA49
    mov ax, word ptr [__113616A]                         # 0047CA4A
    mov cx, word ptr [__113616C]                         # 0047CA50
    mov dx, word ptr [__113616E]                         # 0047CA57
    call _sub_46FC83                                     # 0047CA5E
    call _sub_4CBB01                                     # 0047CA63
    pop eax                                              # 0047CA68
    or dword ptr [__1136114], 1                          # 0047CA69
    ret                                                  # 0047CA70

    .global _sub_47CA71
_sub_47CA71:
    mov dword ptr [__1136114], 0                         # 0047CA71
    add eax, dword ptr [esi + 0x28]                      # 0047CA7B
    mov dword ptr [esi + 0x28], eax                      # 0047CA7E
    cmp eax, 0x368a                                      # 0047CA81
    jl .L47CD16                                          # 0047CA86
    mov eax, dword ptr [esi + 0xe]                       # 0047CA8C
    mov cx, word ptr [esi + 0x12]                        # 0047CA8F
    mov dword ptr [__113616A], eax                       # 0047CA93
    mov word ptr [__113616E], cx                         # 0047CA98
    call _sub_4CBB01                                     # 0047CA9F
.L47CAA4:
    movzx edi, word ptr [esi + 0x2c]                     # 0047CAA4
    mov ax, word ptr [esi + 0x2e]                        # 0047CAA8
    inc ax                                               # 0047CAAC
    mov edi, dword ptr [edi*4 + __5253B0]                # 0047CAAE
    cmp ax, word ptr [edi - 2]                           # 0047CAB5
    jb .L47CC4B                                          # 0047CAB9
    movzx ebx, word ptr [esi + 0x36]                     # 0047CABF
    msvc_mov eax, ebx                                    # 0047CAC3
    and ebx, 0xffffffc0                                  # 0047CAC5
    inc eax                                              # 0047CAC8
    and eax, 0x3f                                        # 0047CAC9
    msvc_or ebx, eax                                     # 0047CACC
    movzx edi, word ptr [ebx*2 + __96885C]               # 0047CACE
    cmp di, -2                                           # 0047CAD6
    je .L47CD26                                          # 0047CADA
    movzx eax, word ptr [esi + 0x26]                     # 0047CAE0
    shl eax, 7                                           # 0047CAE4
    add_offset eax, _things                              # 0047CAE7
    cmp byte ptr [eax + 0x52], 1                         # 0047CAEC
    je .L47CB19                                          # 0047CAF0
    push ebx                                             # 0047CAF2
    call _sub_47CEB7                                     # 0047CAF3
    pop ebx                                              # 0047CAF8
    test al, 2                                           # 0047CAF9
    jne .L47CD26                                         # 0047CAFB
    test al, 1                                           # 0047CB01
    jne .L47CD5D                                         # 0047CB03
    test al, 8                                           # 0047CB09
    jne .L47CD65                                         # 0047CB0B
    test al, 4                                           # 0047CB11
    jne .L47CD6D                                         # 0047CB13
.L47CB19:
    movzx edi, word ptr [ebx*2 + __96885C]               # 0047CB19
    and edi, 0x1ff                                       # 0047CB21
    push ebx                                             # 0047CB27
    push edi                                             # 0047CB28
    movzx ebp, word ptr [esi + 0x26]                     # 0047CB29
    shl ebp, 7                                           # 0047CB2D
    add_offset ebp, _things                              # 0047CB30
    mov cx, word ptr [esi + 0x32]                        # 0047CB36
    mov bl, byte ptr [ebp + 0x53]                        # 0047CB3A
    movzx dx, byte ptr [esi + 0x34]                      # 0047CB3D
    mov byte ptr [__113601A], bl                         # 0047CB42
    mov byte ptr [__113601B], 0                          # 0047CB48
    mov ax, word ptr [esi + 0x30]                        # 0047CB4F
    mov bl, byte ptr [esi + 0x21]                        # 0047CB53
    shl dx, 2                                            # 0047CB56
    mov bh, byte ptr [ebp + 0x35]                        # 0047CB5A
    mov bp, word ptr [esi + 0x2c]                        # 0047CB5D
    and ebp, 0x7f                                        # 0047CB61
    mov_offset edi, __11360A0                            # 0047CB64
    call _sub_478895                                     # 0047CB69
    pop edi                                              # 0047CB6E
    pop ebx                                              # 0047CB6F
    msvc_xor ebp, ebp                                    # 0047CB70
    push edi                                             # 0047CB72
    and edi, 0x7f                                        # 0047CB73
.L47CB76:
    cmp ebp, dword ptr [__113609C]                       # 0047CB76
    jae .L47CD1E                                         # 0047CB7C
    mov ax, word ptr [ebp*2 + __11360A0]                 # 0047CB82
    and ax, 0x7f                                         # 0047CB8A
    msvc_cmp ax, di                                      # 0047CB8E
    je .L47CB96                                          # 0047CB91
    inc ebp                                              # 0047CB93
    jmp .L47CB76                                         # 0047CB94
.L47CB96:
    pop edi                                              # 0047CB96
    push ebx                                             # 0047CB97
    push edi                                             # 0047CB98
    push esi                                             # 0047CB99
    movzx ebp, word ptr [esi + 0x26]                     # 0047CB9A
    shl ebp, 7                                           # 0047CB9E
    add_offset ebp, _things                              # 0047CBA1
    mov bl, 3                                            # 0047CBA7
    cmp byte ptr [ebp + 0x52], 1                         # 0047CBA9
    jne .L47CBB1                                         # 0047CBAD
    mov bl, 1                                            # 0047CBAF
.L47CBB1:
    mov ax, word ptr [esi + 0x30]                        # 0047CBB1
    mov cx, word ptr [esi + 0x32]                        # 0047CBB5
    movzx dx, byte ptr [esi + 0x34]                      # 0047CBB9
    mov di, word ptr [esi + 0x2c]                        # 0047CBBE
    and edi, 0x7f                                        # 0047CBC2
    shl dx, 2                                            # 0047CBC5
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047CBC9
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047CBD1
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047CBD9
    shr dx, 2                                            # 0047CBE1
    mov ebp, dword ptr [esp + 4]                         # 0047CBE5
    call _sub_47D5D6                                     # 0047CBE9
    test bl, dh                                          # 0047CBEE
    jne .L47CD19                                         # 0047CBF0
    bts ebp, 0x1f                                        # 0047CBF6
    call _sub_47D959                                     # 0047CBFA
    pop esi                                              # 0047CBFF
    pop edi                                              # 0047CC00
    pop ebx                                              # 0047CC01
    mov word ptr [esi + 0x36], bx                        # 0047CC02
    xchg word ptr [esi + 0x2c], di                       # 0047CC06
    mov byte ptr [esi + 0x35], dh                        # 0047CC0A
    mov ax, word ptr [esi + 0x30]                        # 0047CC0D
    mov cx, word ptr [esi + 0x32]                        # 0047CC11
    movzx dx, byte ptr [esi + 0x34]                      # 0047CC15
    and edi, 0x7f                                        # 0047CC1A
    shl dx, 2                                            # 0047CC1D
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047CC21
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047CC29
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047CC31
    shr dx, 2                                            # 0047CC39
    mov word ptr [esi + 0x30], ax                        # 0047CC3D
    mov word ptr [esi + 0x32], cx                        # 0047CC41
    mov byte ptr [esi + 0x34], dl                        # 0047CC45
    msvc_xor ax, ax                                      # 0047CC48
.L47CC4B:
    mov word ptr [esi + 0x2e], ax                        # 0047CC4B
    movzx ebx, word ptr [esi + 0x2c]                     # 0047CC4F
    movzx edi, word ptr [esi + 0x2e]                     # 0047CC53
    imul edi, edi, 8                                     # 0047CC57
    add edi, dword ptr [ebx*4 + __5253B0]                # 0047CC5A
    mov ax, word ptr [edi]                               # 0047CC61
    mov cx, word ptr [edi + 2]                           # 0047CC64
    mov dx, word ptr [edi + 4]                           # 0047CC68
    add ax, word ptr [esi + 0x30]                        # 0047CC6C
    add cx, word ptr [esi + 0x32]                        # 0047CC70
    movzx bx, byte ptr [esi + 0x34]                      # 0047CC74
    shl bx, 2                                            # 0047CC79
    msvc_add dx, bx                                      # 0047CC7D
    msvc_xor ebx, ebx                                    # 0047CC80
    cmp ax, word ptr [__113616A]                         # 0047CC82
    je .L47CC8E                                          # 0047CC89
    or ebx, 1                                            # 0047CC8B
.L47CC8E:
    cmp cx, word ptr [__113616C]                         # 0047CC8E
    je .L47CC9A                                          # 0047CC95
    or ebx, 2                                            # 0047CC97
.L47CC9A:
    cmp dx, word ptr [__113616E]                         # 0047CC9A
    je .L47CCA6                                          # 0047CCA1
    or ebx, 4                                            # 0047CCA3
.L47CCA6:
    mov ebx, dword ptr [ebx*4 + __500120]                # 0047CCA6
    sub dword ptr [esi + 0x28], ebx                      # 0047CCAD
    mov word ptr [__113616A], ax                         # 0047CCB0
    mov word ptr [__113616C], cx                         # 0047CCB6
    mov word ptr [__113616E], dx                         # 0047CCBD
    mov bl, byte ptr [edi + 6]                           # 0047CCC4
    mov byte ptr [esi + 0x1e], bl                        # 0047CCC7
    mov bl, byte ptr [edi + 7]                           # 0047CCCA
    mov byte ptr [esi + 0x1f], bl                        # 0047CCCD
    cmp byte ptr [esi + 1], 3                            # 0047CCD0
    jne .L47CCEB                                         # 0047CCD4
    call _sub_4B1876                                     # 0047CCD6
    jae .L47CCEB                                         # 0047CCDB
    or dword ptr [__1136114], 4                          # 0047CCDD
    mov word ptr [__113610E], bp                         # 0047CCE4
.L47CCEB:
    cmp dword ptr [esi + 0x28], 0x368a                   # 0047CCEB
    jge .L47CAA4                                         # 0047CCF2
    mov ax, word ptr [__113616A]                         # 0047CCF8
    mov cx, word ptr [__113616C]                         # 0047CCFE
    mov dx, word ptr [__113616E]                         # 0047CD05
    call _sub_46FC83                                     # 0047CD0C
    call _sub_4CBB01                                     # 0047CD11
.L47CD16:
    msvc_xor eax, eax                                    # 0047CD16
    ret                                                  # 0047CD18
.L47CD19:
    pop esi                                              # 0047CD19
    pop edi                                              # 0047CD1A
    pop ebx                                              # 0047CD1B
    jmp .L47CD26                                         # 0047CD1C
.L47CD1E:
    pop edi                                              # 0047CD1E
    or dword ptr [__1136114], 2                          # 0047CD1F
.L47CD26:
    mov eax, dword ptr [esi + 0x28]                      # 0047CD26
    sub eax, 0x3689                                      # 0047CD29
    mov dword ptr [esi + 0x28], 0x3689                   # 0047CD2E
    push eax                                             # 0047CD35
    mov ax, word ptr [__113616A]                         # 0047CD36
    mov cx, word ptr [__113616C]                         # 0047CD3C
    mov dx, word ptr [__113616E]                         # 0047CD43
    call _sub_46FC83                                     # 0047CD4A
    call _sub_4CBB01                                     # 0047CD4F
    pop eax                                              # 0047CD54
    or dword ptr [__1136114], 1                          # 0047CD55
    ret                                                  # 0047CD5C
.L47CD5D:
    call _sub_47D46F                                     # 0047CD5D
    msvc_xor eax, eax                                    # 0047CD62
    ret                                                  # 0047CD64
.L47CD65:
    call _sub_47D52B                                     # 0047CD65
    msvc_xor eax, eax                                    # 0047CD6A
    ret                                                  # 0047CD6C
.L47CD6D:
    call _sub_47D2D6                                     # 0047CD6D
    add dword ptr [esi + 0x3c], eax                      # 0047CD72
    msvc_xor eax, eax                                    # 0047CD75
    ret                                                  # 0047CD77

    .global _sub_47CD78
_sub_47CD78:
    push eax                                             # 0047CD78
    push ebx                                             # 0047CD79
    push ecx                                             # 0047CD7A
    push edx                                             # 0047CD7B
    push edi                                             # 0047CD7C
    push ebp                                             # 0047CD7D
    and eax, 0x3fe0                                      # 0047CD7E
    shr cx, 5                                            # 0047CD83
    and cx, 0x1ff                                        # 0047CD87
    shl eax, 4                                           # 0047CD8C
    msvc_or ax, cx                                       # 0047CD8F
    mov byte ptr [__112C328], 0                          # 0047CD92
    mov_offset ebp, __500244                             # 0047CD99
.L47CD9E:
    and eax, 0x3ffff                                     # 0047CD9E
    push eax                                             # 0047CDA3
    mov cx, word ptr [eax*2 + __1025A8C]                 # 0047CDA4
    cmp cx, -1                                           # 0047CDAC
    je .L47CE92                                          # 0047CDB0
.L47CDB6:
    movzx edi, cx                                        # 0047CDB6
    shl edi, 7                                           # 0047CDB9
    add_offset edi, _things                              # 0047CDBC
    cmp byte ptr [edi], 0                                # 0047CDC2
    jne .L47CE84                                         # 0047CDC5
    cmp byte ptr [edi + 1], 6                            # 0047CDCB
    jne .L47CE84                                         # 0047CDCF
    cmp byte ptr [edi + 0x42], 1                         # 0047CDD5
    jne .L47CE84                                         # 0047CDD9
    cmp dl, byte ptr [edi + 0x34]                        # 0047CDDF
    jne .L47CE84                                         # 0047CDE2
    mov eax, dword ptr [esp + 0x18]                      # 0047CDE8
    mov ecx, dword ptr [esp + 0x10]                      # 0047CDEC
    cmp ax, word ptr [edi + 0x30]                        # 0047CDF0
    jne .L47CE84                                         # 0047CDF4
    cmp cx, word ptr [edi + 0x32]                        # 0047CDFA
    jne .L47CE84                                         # 0047CDFE
    mov eax, dword ptr [esp + 4]                         # 0047CE04
    and eax, 0x1ff                                       # 0047CE08
    mov bx, word ptr [edi + 0x2c]                        # 0047CE0D
    and ebx, 0x1ff                                       # 0047CE11
    msvc_cmp ax, bx                                      # 0047CE17
    jne .L47CE84                                         # 0047CE1A
    movzx ebx, word ptr [edi + 0x26]                     # 0047CE1C
    shl ebx, 7                                           # 0047CE20
    add_offset ebx, _things                              # 0047CE23
    movzx ebx, word ptr [ebx + 0x3a]                     # 0047CE29
    shl ebx, 7                                           # 0047CE2D
    add_offset ebx, _things                              # 0047CE30
    cmp dword ptr [ebx + 0x3c], 0x220c0                  # 0047CE36
    jb .L47CE84                                          # 0047CE3D
    movzx eax, word ptr [ebx + 0x3a]                     # 0047CE3F
    shl eax, 7                                           # 0047CE43
    add_offset eax, _things                              # 0047CE46
    test byte ptr [eax + 0x73], 1                        # 0047CE4B
    jne .L47CE84                                         # 0047CE4F
    mov eax, dword ptr [esi + 0x3c]                      # 0047CE51
    cmp eax, dword ptr [ebx + 0x3c]                      # 0047CE54
    jb .L47CEAE                                          # 0047CE57
    movzx ebx, word ptr [ebx + 0x3a]                     # 0047CE59
    shl ebx, 7                                           # 0047CE5D
    add_offset ebx, _things                              # 0047CE60
    movzx ecx, word ptr [esi + 0x3a]                     # 0047CE66
    shl ecx, 7                                           # 0047CE6A
    add_offset ecx, _things                              # 0047CE6D
    mov ax, word ptr [ecx + 0x54]                        # 0047CE73
    cmp ax, word ptr [ebx + 0x54]                        # 0047CE77
    jbe .L47CEAE                                         # 0047CE7B
    mov byte ptr [__112C328], 5                          # 0047CE7D
.L47CE84:
    mov cx, word ptr [edi + 2]                           # 0047CE84
    cmp cx, -1                                           # 0047CE88
    jne .L47CDB6                                         # 0047CE8C
.L47CE92:
    pop eax                                              # 0047CE92
    add eax, dword ptr [ebp]                             # 0047CE93
    add ebp, 4                                           # 0047CE96
    cmp_offset ebp, __500264                             # 0047CE99
    jbe .L47CD9E                                         # 0047CE9F
    pop ebp                                              # 0047CEA5
    pop edi                                              # 0047CEA6
    pop edx                                              # 0047CEA7
    pop ecx                                              # 0047CEA8
    pop ebx                                              # 0047CEA9
    pop eax                                              # 0047CEAA
    msvc_and eax, eax                                    # 0047CEAB
    ret                                                  # 0047CEAD
.L47CEAE:
    pop eax                                              # 0047CEAE
    pop ebp                                              # 0047CEAF
    pop edi                                              # 0047CEB0
    pop edx                                              # 0047CEB1
    pop ecx                                              # 0047CEB2
    pop ebx                                              # 0047CEB3
    pop eax                                              # 0047CEB4
    stc                                                  # 0047CEB5
    ret                                                  # 0047CEB6

    .global _sub_47CEB7
_sub_47CEB7:
    movzx ebx, word ptr [esi + 0x36]                     # 0047CEB7
    mov di, word ptr [esi + 0x2c]                        # 0047CEBB
    mov ax, word ptr [esi + 0x30]                        # 0047CEBF
    mov cx, word ptr [esi + 0x32]                        # 0047CEC3
    mov dl, byte ptr [esi + 0x34]                        # 0047CEC7
    mov byte ptr [__112C327], 0                          # 0047CECA
    msvc_xor dh, dh                                      # 0047CED1
    and edi, 0x7f                                        # 0047CED3
    shl dx, 2                                            # 0047CED6
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047CEDA
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047CEE2
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047CEEA
    inc byte ptr [__112C327]                             # 0047CEF2
    msvc_mov ebp, ebx                                    # 0047CEF8
    and ebx, 0xffffffc0                                  # 0047CEFA
    inc ebp                                              # 0047CEFD
    and ebp, 0x3f                                        # 0047CEFE
    msvc_or ebx, ebp                                     # 0047CF01
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047CF03
    cmp bp, -2                                           # 0047CF0B
    je .L47D13F                                          # 0047CF0F
    shr dx, 2                                            # 0047CF15
    and ebp, 0x1ff                                       # 0047CF19
    call _sub_47D5D6                                     # 0047CF1F
    test dh, 4                                           # 0047CF24
    jne .L47D0B9                                         # 0047CF27
    test dh, 1                                           # 0047CF2D
    jne .L47CFAA                                         # 0047CF30
    push eax                                             # 0047CF32
    push ebx                                             # 0047CF33
    push ecx                                             # 0047CF34
    push edx                                             # 0047CF35
    push edi                                             # 0047CF36
    push ebp                                             # 0047CF37
    msvc_mov edi, ebp                                    # 0047CF38
    msvc_xor dh, dh                                      # 0047CF3A
    and edi, 0x7f                                        # 0047CF3C
    shl dx, 2                                            # 0047CF3F
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047CF43
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047CF4B
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047CF53
    msvc_mov ebp, ebx                                    # 0047CF5B
    and ebx, 0xffffffc0                                  # 0047CF5D
    inc ebp                                              # 0047CF60
    and ebp, 0x3f                                        # 0047CF61
    msvc_or ebx, ebp                                     # 0047CF64
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047CF66
    cmp bp, -2                                           # 0047CF6E
    je .L47D139                                          # 0047CF72
    shr dx, 2                                            # 0047CF78
    and ebp, 0x1ff                                       # 0047CF7C
    call _sub_47D5D6                                     # 0047CF82
    test dh, 1                                           # 0047CF87
    jne .L47CF97                                         # 0047CF8A
    pop ebp                                              # 0047CF8C
    pop edi                                              # 0047CF8D
    pop edx                                              # 0047CF8E
    pop ecx                                              # 0047CF8F
    pop ebx                                              # 0047CF90
    pop eax                                              # 0047CF91
    msvc_jmp .L47D13F                                    # 0047CF92
.L47CF97:
    call _sub_47CD78                                     # 0047CF97
    pop ebp                                              # 0047CF9C
    pop edi                                              # 0047CF9D
    pop edx                                              # 0047CF9E
    pop ecx                                              # 0047CF9F
    pop ebx                                              # 0047CFA0
    pop eax                                              # 0047CFA1
    jb .L47D13F                                          # 0047CFA2
    jmp .L47CFB5                                         # 0047CFA8
.L47CFAA:
    call _sub_47CD78                                     # 0047CFAA
    jb .L47D13F                                          # 0047CFAF
.L47CFB5:
    movzx edi, byte ptr [esi + 0x35]                     # 0047CFB5
    mov edi, dword ptr [edi*4 + _roadObjects]            # 0047CFB9
    test word ptr [edi + 0x12], 0x40                     # 0047CFC0
    je .L47D13F                                          # 0047CFC6
    test ebp, 0x180                                      # 0047CFCC
    jne .L47D13F                                         # 0047CFD2
    and ebp, 0x1ff                                       # 0047CFD8
    xor ebp, 0x80                                        # 0047CFDE
    call _sub_47D5D6                                     # 0047CFE4
    mov byte ptr [__112C32A], dh                         # 0047CFE9
    xor ebp, 0x80                                        # 0047CFEF
    test dh, 5                                           # 0047CFF5
    jne .L47D13F                                         # 0047CFF8
    mov byte ptr [__112C329], 0                          # 0047CFFE
.L47D005:
    msvc_mov edi, ebp                                    # 0047D005
    msvc_xor dh, dh                                      # 0047D007
    and edi, 0x7f                                        # 0047D009
    shl dx, 2                                            # 0047D00C
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047D010
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047D018
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047D020
    inc byte ptr [__112C327]                             # 0047D028
    cmp byte ptr [__112C327], 0xa                        # 0047D02E
    ja .L47D13F                                          # 0047D035
    msvc_mov ebp, ebx                                    # 0047D03B
    and ebx, 0xffffffc0                                  # 0047D03D
    inc ebp                                              # 0047D040
    and ebp, 0x3f                                        # 0047D041
    msvc_or ebx, ebp                                     # 0047D044
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D046
    cmp bp, -2                                           # 0047D04E
    je .L47D125                                          # 0047D052
    shr dx, 2                                            # 0047D058
    and ebp, 0x1ff                                       # 0047D05C
    xor ebp, 0x80                                        # 0047D062
    call _sub_47D5D6                                     # 0047D068
    mov byte ptr [__112C32A], dh                         # 0047D06D
    xor ebp, 0x80                                        # 0047D073
    test dh, 5                                           # 0047D079
    jne .L47D13F                                         # 0047D07C
    call _sub_47D5D6                                     # 0047D082
    test dh, 1                                           # 0047D087
    je .L47D098                                          # 0047D08A
    mov byte ptr [__112C329], 0                          # 0047D08C
    msvc_jmp .L47D005                                    # 0047D093
.L47D098:
    inc byte ptr [__112C329]                             # 0047D098
    mov dh, byte ptr [__112C329]                         # 0047D09E
    cmp dh, byte ptr [__112C328]                         # 0047D0A4
    jbe .L47D005                                         # 0047D0AA
    mov al, 1                                            # 0047D0B0
    mov ah, byte ptr [__112C327]                         # 0047D0B2
    ret                                                  # 0047D0B8
.L47D0B9:
    test dh, 3                                           # 0047D0B9
    jne .L47D122                                         # 0047D0BC
.L47D0BE:
    msvc_mov edi, ebp                                    # 0047D0BE
    msvc_xor dh, dh                                      # 0047D0C0
    and edi, 0x7f                                        # 0047D0C2
    shl dx, 2                                            # 0047D0C5
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047D0C9
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047D0D1
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047D0D9
    inc byte ptr [__112C327]                             # 0047D0E1
    msvc_mov ebp, ebx                                    # 0047D0E7
    and ebx, 0xffffffc0                                  # 0047D0E9
    inc ebp                                              # 0047D0EC
    and ebp, 0x3f                                        # 0047D0ED
    msvc_or ebx, ebp                                     # 0047D0F0
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D0F2
    cmp bp, -2                                           # 0047D0FA
    je .L47D122                                          # 0047D0FE
    shr dx, 2                                            # 0047D100
    and ebp, 0x1ff                                       # 0047D104
    call _sub_47D5D6                                     # 0047D10A
    test dh, 3                                           # 0047D10F
    jne .L47D122                                         # 0047D112
    test dh, 4                                           # 0047D114
    jne .L47D0BE                                         # 0047D117
    mov al, 4                                            # 0047D119
    mov ah, byte ptr [__112C327]                         # 0047D11B
    ret                                                  # 0047D121
.L47D122:
    mov al, 2                                            # 0047D122
    ret                                                  # 0047D124
.L47D125:
    test byte ptr [__112C32A], 8                         # 0047D125
    je .L47D13F                                          # 0047D12C
    mov al, 8                                            # 0047D12E
    mov ah, byte ptr [__112C327]                         # 0047D130
    dec ah                                               # 0047D136
    ret                                                  # 0047D138
.L47D139:
    pop ebp                                              # 0047D139
    pop edi                                              # 0047D13A
    pop edx                                              # 0047D13B
    pop ecx                                              # 0047D13C
    pop ebx                                              # 0047D13D
    pop eax                                              # 0047D13E
.L47D13F:
    msvc_xor al, al                                      # 0047D13F
    ret                                                  # 0047D141

    .global _sub_47D142
_sub_47D142:
    msvc_xor ebx, ebx                                    # 0047D142
    push eax                                             # 0047D144
    push ebx                                             # 0047D145
    mov eax, dword ptr [esi + 0xe]                       # 0047D146
    mov cx, word ptr [esi + 0x12]                        # 0047D149
    mov dword ptr [__113616A], eax                       # 0047D14D
    mov word ptr [__113616E], cx                         # 0047D152
    mov ax, word ptr [esi + 0x2c]                        # 0047D159
    mov word ptr [__112C31C], ax                         # 0047D15D
    mov ax, word ptr [esi + 0x2e]                        # 0047D163
    mov word ptr [__112C31E], ax                         # 0047D167
    mov ax, word ptr [esi + 0x30]                        # 0047D16D
    mov cx, word ptr [esi + 0x32]                        # 0047D171
    mov word ptr [__112C320], ax                         # 0047D175
    mov word ptr [__112C322], cx                         # 0047D17B
    mov al, byte ptr [esi + 0x34]                        # 0047D182
    mov byte ptr [__112C326], al                         # 0047D185
    mov ax, word ptr [esi + 0x36]                        # 0047D18A
    mov word ptr [__112C324], ax                         # 0047D18E
.L47D194:
    movzx edi, word ptr [__112C31C]                      # 0047D194
    mov ax, word ptr [__112C31E]                         # 0047D19B
    inc ax                                               # 0047D1A1
    mov edi, dword ptr [edi*4 + __5253B0]                # 0047D1A3
    cmp ax, word ptr [edi - 2]                           # 0047D1AA
    jb .L47D23E                                          # 0047D1AE
    movzx ebx, word ptr [__112C324]                      # 0047D1B4
    msvc_mov eax, ebx                                    # 0047D1BB
    and ebx, 0xffffffc0                                  # 0047D1BD
    inc eax                                              # 0047D1C0
    and eax, 0x3f                                        # 0047D1C1
    msvc_or ebx, eax                                     # 0047D1C4
    movzx edi, word ptr [ebx*2 + __96885C]               # 0047D1C6
    cmp di, -2                                           # 0047D1CE
    je .L47D2D3                                          # 0047D1D2
    and edi, 0x1ff                                       # 0047D1D8
    mov word ptr [__112C324], bx                         # 0047D1DE
    xchg word ptr [__112C31C], di                        # 0047D1E5
    mov ax, word ptr [__112C320]                         # 0047D1EC
    mov cx, word ptr [__112C322]                         # 0047D1F2
    movzx dx, byte ptr [__112C326]                       # 0047D1F9
    and edi, 0x7f                                        # 0047D201
    shl dx, 2                                            # 0047D204
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047D208
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047D210
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047D218
    shr dx, 2                                            # 0047D220
    mov word ptr [__112C320], ax                         # 0047D224
    mov word ptr [__112C322], cx                         # 0047D22A
    mov byte ptr [__112C326], dl                         # 0047D231
    dec byte ptr [esp + 5]                               # 0047D237
    msvc_xor ax, ax                                      # 0047D23B
.L47D23E:
    mov word ptr [__112C31E], ax                         # 0047D23E
    movzx ebx, word ptr [__112C31C]                      # 0047D244
    movzx edi, word ptr [__112C31E]                      # 0047D24B
    imul edi, edi, 8                                     # 0047D252
    add edi, dword ptr [ebx*4 + __5253B0]                # 0047D255
    mov ax, word ptr [edi]                               # 0047D25C
    mov cx, word ptr [edi + 2]                           # 0047D25F
    mov dx, word ptr [edi + 4]                           # 0047D263
    add ax, word ptr [__112C320]                         # 0047D267
    add cx, word ptr [__112C322]                         # 0047D26E
    movzx bx, byte ptr [__112C326]                       # 0047D275
    shl bx, 2                                            # 0047D27D
    msvc_add dx, bx                                      # 0047D281
    msvc_xor ebx, ebx                                    # 0047D284
    cmp ax, word ptr [__113616A]                         # 0047D286
    je .L47D292                                          # 0047D28D
    or ebx, 1                                            # 0047D28F
.L47D292:
    cmp cx, word ptr [__113616C]                         # 0047D292
    je .L47D29E                                          # 0047D299
    or ebx, 2                                            # 0047D29B
.L47D29E:
    cmp dx, word ptr [__113616E]                         # 0047D29E
    je .L47D2AA                                          # 0047D2A5
    or ebx, 4                                            # 0047D2A7
.L47D2AA:
    mov ebx, dword ptr [ebx*4 + __500120]                # 0047D2AA
    add dword ptr [esp], ebx                             # 0047D2B1
    mov word ptr [__113616A], ax                         # 0047D2B4
    mov word ptr [__113616C], cx                         # 0047D2BA
    mov word ptr [__113616E], dx                         # 0047D2C1
    cmp byte ptr [esp + 5], 0                            # 0047D2C8
    jne .L47D194                                         # 0047D2CD
.L47D2D3:
    pop eax                                              # 0047D2D3
    pop ebx                                              # 0047D2D4
    ret                                                  # 0047D2D5

    .global _sub_47D2D6
_sub_47D2D6:
    msvc_xor ebx, ebx                                    # 0047D2D6
    push eax                                             # 0047D2D8
    push ebx                                             # 0047D2D9
    mov eax, dword ptr [esi + 0xe]                       # 0047D2DA
    mov cx, word ptr [esi + 0x12]                        # 0047D2DD
    mov dword ptr [__113616A], eax                       # 0047D2E1
    mov word ptr [__113616E], cx                         # 0047D2E6
.L47D2ED:
    movzx edi, word ptr [esi + 0x2c]                     # 0047D2ED
    mov ax, word ptr [esi + 0x2e]                        # 0047D2F1
    inc ax                                               # 0047D2F5
    mov edi, dword ptr [edi*4 + __5253B0]                # 0047D2F7
    cmp ax, word ptr [edi - 2]                           # 0047D2FE
    jb .L47D3C3                                          # 0047D302
    movzx ebx, word ptr [esi + 0x36]                     # 0047D308
    msvc_mov eax, ebx                                    # 0047D30C
    and ebx, 0xffffffc0                                  # 0047D30E
    inc eax                                              # 0047D311
    and eax, 0x3f                                        # 0047D312
    msvc_or ebx, eax                                     # 0047D315
    movzx edi, word ptr [ebx*2 + __96885C]               # 0047D317
    cmp di, -2                                           # 0047D31F
    je .L47D46C                                          # 0047D323
    and edi, 0x1ff                                       # 0047D329
    push ebx                                             # 0047D32F
    push edi                                             # 0047D330
    push esi                                             # 0047D331
    mov ax, word ptr [esi + 0x30]                        # 0047D332
    mov cx, word ptr [esi + 0x32]                        # 0047D336
    movzx dx, byte ptr [esi + 0x34]                      # 0047D33A
    mov di, word ptr [esi + 0x2c]                        # 0047D33F
    and edi, 0x7f                                        # 0047D343
    shl dx, 2                                            # 0047D346
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047D34A
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047D352
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047D35A
    shr dx, 2                                            # 0047D362
    mov ebp, dword ptr [esp + 4]                         # 0047D366
    bts ebp, 0x1f                                        # 0047D36A
    call _sub_47D959                                     # 0047D36E
    pop esi                                              # 0047D373
    pop edi                                              # 0047D374
    pop ebx                                              # 0047D375
    mov word ptr [esi + 0x36], bx                        # 0047D376
    xchg word ptr [esi + 0x2c], di                       # 0047D37A
    mov byte ptr [esi + 0x35], dh                        # 0047D37E
    mov ax, word ptr [esi + 0x30]                        # 0047D381
    mov cx, word ptr [esi + 0x32]                        # 0047D385
    movzx dx, byte ptr [esi + 0x34]                      # 0047D389
    and edi, 0x7f                                        # 0047D38E
    shl dx, 2                                            # 0047D391
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047D395
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047D39D
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047D3A5
    shr dx, 2                                            # 0047D3AD
    mov word ptr [esi + 0x30], ax                        # 0047D3B1
    mov word ptr [esi + 0x32], cx                        # 0047D3B5
    mov byte ptr [esi + 0x34], dl                        # 0047D3B9
    dec byte ptr [esp + 5]                               # 0047D3BC
    msvc_xor ax, ax                                      # 0047D3C0
.L47D3C3:
    mov word ptr [esi + 0x2e], ax                        # 0047D3C3
    movzx ebx, word ptr [esi + 0x2c]                     # 0047D3C7
    movzx edi, word ptr [esi + 0x2e]                     # 0047D3CB
    imul edi, edi, 8                                     # 0047D3CF
    add edi, dword ptr [ebx*4 + __5253B0]                # 0047D3D2
    mov ax, word ptr [edi]                               # 0047D3D9
    mov cx, word ptr [edi + 2]                           # 0047D3DC
    mov dx, word ptr [edi + 4]                           # 0047D3E0
    add ax, word ptr [esi + 0x30]                        # 0047D3E4
    add cx, word ptr [esi + 0x32]                        # 0047D3E8
    movzx bx, byte ptr [esi + 0x34]                      # 0047D3EC
    shl bx, 2                                            # 0047D3F1
    msvc_add dx, bx                                      # 0047D3F5
    msvc_xor ebx, ebx                                    # 0047D3F8
    cmp ax, word ptr [__113616A]                         # 0047D3FA
    je .L47D406                                          # 0047D401
    or ebx, 1                                            # 0047D403
.L47D406:
    cmp cx, word ptr [__113616C]                         # 0047D406
    je .L47D412                                          # 0047D40D
    or ebx, 2                                            # 0047D40F
.L47D412:
    cmp dx, word ptr [__113616E]                         # 0047D412
    je .L47D41E                                          # 0047D419
    or ebx, 4                                            # 0047D41B
.L47D41E:
    mov ebx, dword ptr [ebx*4 + __500120]                # 0047D41E
    add dword ptr [esp], ebx                             # 0047D425
    mov word ptr [__113616A], ax                         # 0047D428
    mov word ptr [__113616C], cx                         # 0047D42E
    mov word ptr [__113616E], dx                         # 0047D435
    mov bl, byte ptr [edi + 6]                           # 0047D43C
    mov byte ptr [esi + 0x1e], bl                        # 0047D43F
    mov bl, byte ptr [edi + 7]                           # 0047D442
    mov byte ptr [esi + 0x1f], bl                        # 0047D445
    cmp byte ptr [esp + 5], 0                            # 0047D448
    jne .L47D2ED                                         # 0047D44D
    mov ax, word ptr [__113616A]                         # 0047D453
    mov cx, word ptr [__113616C]                         # 0047D459
    mov dx, word ptr [__113616E]                         # 0047D460
    call _sub_46FC83                                     # 0047D467
.L47D46C:
    pop eax                                              # 0047D46C
    pop ebx                                              # 0047D46D
    ret                                                  # 0047D46E

    .global _sub_47D46F
_sub_47D46F:
    push eax                                             # 0047D46F
    call _sub_47D142                                     # 0047D470
    mov dword ptr [__112C318], eax                       # 0047D475
    pop eax                                              # 0047D47A
    push eax                                             # 0047D47B
    movzx ebx, word ptr [esi + 0x36]                     # 0047D47C
    msvc_mov ebp, ebx                                    # 0047D480
    and ebx, 0xffffffc0                                  # 0047D482
    inc ebp                                              # 0047D485
    and ebp, 0x3f                                        # 0047D486
    msvc_or ebx, ebp                                     # 0047D489
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D48B
    cmp bp, -2                                           # 0047D493
    je .L47D50B                                          # 0047D497
    and bp, 0xfe7f                                       # 0047D499
    or bp, 0x100                                         # 0047D49E
    mov word ptr [ebx*2 + __96885C], bp                  # 0047D4A3
    dec ah                                               # 0047D4AB
    je .L47D50B                                          # 0047D4AD
.L47D4AF:
    dec ah                                               # 0047D4AF
    je .L47D4E0                                          # 0047D4B1
    msvc_mov ebp, ebx                                    # 0047D4B3
    and ebx, 0xffffffc0                                  # 0047D4B5
    inc ebp                                              # 0047D4B8
    and ebp, 0x3f                                        # 0047D4B9
    msvc_or ebx, ebp                                     # 0047D4BC
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D4BE
    cmp bp, -2                                           # 0047D4C6
    je .L47D50B                                          # 0047D4CA
    and bp, 0xfe7f                                       # 0047D4CC
    or bp, 0x80                                          # 0047D4D1
    mov word ptr [ebx*2 + __96885C], bp                  # 0047D4D6
    jmp .L47D4AF                                         # 0047D4DE
.L47D4E0:
    msvc_mov ebp, ebx                                    # 0047D4E0
    and ebx, 0xffffffc0                                  # 0047D4E2
    inc ebp                                              # 0047D4E5
    and ebp, 0x3f                                        # 0047D4E6
    msvc_or ebx, ebp                                     # 0047D4E9
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D4EB
    cmp bp, -2                                           # 0047D4F3
    je .L47D50B                                          # 0047D4F7
    and bp, 0xfe7f                                       # 0047D4F9
    or bp, 0x180                                         # 0047D4FE
    mov word ptr [ebx*2 + __96885C], bp                  # 0047D503
.L47D50B:
    pop eax                                              # 0047D50B
    call _sub_47D2D6                                     # 0047D50C
    add dword ptr [esi + 0x3c], eax                      # 0047D511
    sub eax, dword ptr [__112C318]                       # 0047D514
    movzx edi, word ptr [esi + 0x26]                     # 0047D51A
    shl edi, 7                                           # 0047D51E
    add_offset edi, _things                              # 0047D521
    add dword ptr [edi + 0x3c], eax                      # 0047D527
    ret                                                  # 0047D52A

    .global _sub_47D52B
_sub_47D52B:
    push eax                                             # 0047D52B
    call _sub_47D142                                     # 0047D52C
    mov dword ptr [__112C318], eax                       # 0047D531
    pop eax                                              # 0047D536
    push eax                                             # 0047D537
    movzx ebx, word ptr [esi + 0x36]                     # 0047D538
    msvc_mov ebp, ebx                                    # 0047D53C
    and ebx, 0xffffffc0                                  # 0047D53E
    inc ebp                                              # 0047D541
    and ebp, 0x3f                                        # 0047D542
    msvc_or ebx, ebp                                     # 0047D545
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D547
    cmp bp, -2                                           # 0047D54F
    je .L47D59C                                          # 0047D553
    and bp, 0xfe7f                                       # 0047D555
    or bp, 0x100                                         # 0047D55A
    mov word ptr [ebx*2 + __96885C], bp                  # 0047D55F
    dec ah                                               # 0047D567
    je .L47D59C                                          # 0047D569
.L47D56B:
    dec ah                                               # 0047D56B
    js .L47D59C                                          # 0047D56D
    msvc_mov ebp, ebx                                    # 0047D56F
    and ebx, 0xffffffc0                                  # 0047D571
    inc ebp                                              # 0047D574
    and ebp, 0x3f                                        # 0047D575
    msvc_or ebx, ebp                                     # 0047D578
    movzx ebp, word ptr [ebx*2 + __96885C]               # 0047D57A
    cmp bp, -2                                           # 0047D582
    je .L47D59C                                          # 0047D586
    and bp, 0xfe7f                                       # 0047D588
    or bp, 0x80                                          # 0047D58D
    mov word ptr [ebx*2 + __96885C], bp                  # 0047D592
    jmp .L47D56B                                         # 0047D59A
.L47D59C:
    pop eax                                              # 0047D59C
    push eax                                             # 0047D59D
    call _sub_47D2D6                                     # 0047D59E
    add dword ptr [esi + 0x3c], eax                      # 0047D5A3
    sub eax, dword ptr [__112C318]                       # 0047D5A6
    movzx edi, word ptr [esi + 0x26]                     # 0047D5AC
    shl edi, 7                                           # 0047D5B0
    add_offset edi, _things                              # 0047D5B3
    add dword ptr [edi + 0x3c], eax                      # 0047D5B9
    pop eax                                              # 0047D5BC
    and word ptr [edi + 0x2c], 0xfe7f                    # 0047D5BD
    cmp ah, 1                                            # 0047D5C3
    jbe .L47D5CF                                         # 0047D5C6
    or word ptr [edi + 0x2c], 0x80                       # 0047D5C8
    ret                                                  # 0047D5CE
.L47D5CF:
    or word ptr [edi + 0x2c], 0x100                      # 0047D5CF
    ret                                                  # 0047D5D5

    .global _sub_47D5D6
_sub_47D5D6:
    push eax                                             # 0047D5D6
    push ecx                                             # 0047D5D7
    push esi                                             # 0047D5D8
    msvc_mov esi, ebp                                    # 0047D5D9
    shr esi, 3                                           # 0047D5DB
    and esi, 0xf                                         # 0047D5DE
    cmp byte ptr [esi*8 + __4F729C], 1                   # 0047D5E1
    jne .L47D6F2                                         # 0047D5E9
    movzx esi, cx                                        # 0047D5EF
    shl esi, 9                                           # 0047D5F2
    msvc_or si, ax                                       # 0047D5F5
    shr esi, 3                                           # 0047D5F8
    mov esi, dword ptr [esi + __E40134]                  # 0047D5FB
    msvc_mov ax, bp                                      # 0047D601
    msvc_mov cl, al                                      # 0047D604
    and cl, 3                                            # 0047D606
    and eax, 0x1f8                                       # 0047D609
    shl cl, 1                                            # 0047D60E
    shr eax, 3                                           # 0047D610
    test bp, 4                                           # 0047D613
    je .L47D61D                                          # 0047D618
    xor eax, 0x10                                        # 0047D61A
.L47D61D:
    mov dh, byte ptr [eax + __112C32C]                   # 0047D61D
    rol dh, cl                                           # 0047D623
    msvc_xor ch, ch                                      # 0047D625
.L47D627:
    mov al, byte ptr [esi]                               # 0047D627
    and al, 0x3c                                         # 0047D629
    cmp al, 0x1c                                         # 0047D62B
    jne .L47D6DF                                         # 0047D62D
    mov al, byte ptr [esi + 2]                           # 0047D633
    msvc_sub al, dl                                      # 0047D636
    jns .L47D63C                                         # 0047D638
    neg al                                               # 0047D63A
.L47D63C:
    cmp al, 4                                            # 0047D63C
    ja .L47D6DF                                          # 0047D63E
    test byte ptr [esi], 0x80                            # 0047D644
    je .L47D64C                                          # 0047D647
    or ch, 8                                             # 0047D649
.L47D64C:
    mov cl, byte ptr [esi]                               # 0047D64C
    and cl, 3                                            # 0047D64E
    shl cl, 1                                            # 0047D651
    mov al, byte ptr [esi + 4]                           # 0047D653
    and eax, 0xf                                         # 0047D656
    mov al, byte ptr [eax + __112C32C]                   # 0047D659
    rol al, cl                                           # 0047D65F
    test dh, al                                          # 0047D661
    je .L47D699                                          # 0047D663
    test byte ptr [esi + 7], 0x20                        # 0047D665
    je .L47D677                                          # 0047D669
    or ch, 4                                             # 0047D66B
    test byte ptr [esi + 7], 0x10                        # 0047D66E
    je .L47D677                                          # 0047D672
    or ch, 2                                             # 0047D674
.L47D677:
    test byte ptr [esi + 4], 0x10                        # 0047D677
    je .L47D680                                          # 0047D67B
    or ch, 1                                             # 0047D67D
.L47D680:
    movzx eax, byte ptr [esi + 5]                        # 0047D680
    shr eax, 4                                           # 0047D684
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047D687
    test word ptr [eax + 0x12], 1                        # 0047D68E
    je .L47D699                                          # 0047D694
    or ch, 0x10                                          # 0047D696
.L47D699:
    mov al, byte ptr [esi + 4]                           # 0047D699
    and eax, 0xf                                         # 0047D69C
    mov al, byte ptr [eax + __112C33C]                   # 0047D69F
    rol al, cl                                           # 0047D6A5
    test dh, al                                          # 0047D6A7
    je .L47D6DF                                          # 0047D6A9
    test byte ptr [esi + 7], 0x20                        # 0047D6AB
    je .L47D6BD                                          # 0047D6AF
    or ch, 4                                             # 0047D6B1
    test byte ptr [esi + 7], 0x10                        # 0047D6B4
    je .L47D6BD                                          # 0047D6B8
    or ch, 2                                             # 0047D6BA
.L47D6BD:
    test byte ptr [esi + 4], 0x20                        # 0047D6BD
    je .L47D6C6                                          # 0047D6C1
    or ch, 1                                             # 0047D6C3
.L47D6C6:
    movzx eax, byte ptr [esi + 5]                        # 0047D6C6
    shr eax, 4                                           # 0047D6CA
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047D6CD
    test word ptr [eax + 0x12], 1                        # 0047D6D4
    je .L47D6DF                                          # 0047D6DA
    or ch, 0x10                                          # 0047D6DC
.L47D6DF:
    add esi, 8                                           # 0047D6DF
    test byte ptr [esi - 7], 0x80                        # 0047D6E2
    je .L47D627                                          # 0047D6E6
    msvc_mov dh, ch                                      # 0047D6EC
    pop esi                                              # 0047D6EE
    pop ecx                                              # 0047D6EF
    pop eax                                              # 0047D6F0
    ret                                                  # 0047D6F1
.L47D6F2:
    push ebx                                             # 0047D6F2
    push edx                                             # 0047D6F3
    push edi                                             # 0047D6F4
    push ebp                                             # 0047D6F5
    msvc_xor dh, dh                                      # 0047D6F6
    shl dx, 2                                            # 0047D6F8
    msvc_mov edi, ebp                                    # 0047D6FC
    test ebp, 0x80                                       # 0047D6FE
    je .L47D70C                                          # 0047D704
    xor edi, 0x40000000                                  # 0047D706
.L47D70C:
    and ebp, 0x7f                                        # 0047D70C
    test ebp, 4                                          # 0047D70F
    je .L47D752                                          # 0047D715
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047D717
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047D71F
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047D727
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047D72F
    cmp bl, 0xc                                          # 0047D737
    jae .L47D74C                                         # 0047D73A
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047D73C
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047D744
.L47D74C:
    xor edi, 0x40000000                                  # 0047D74C
.L47D752:
    msvc_mov esi, ebp                                    # 0047D752
    and esi, 3                                           # 0047D754
    mov dword ptr [__112C310], esi                       # 0047D757
    shr ebp, 3                                           # 0047D75D
    mov dword ptr [__112C314], ebp                       # 0047D760
    mov ebp, dword ptr [ebp*4 + __4F6D1C]                # 0047D766
    mov dword ptr [__112C308], 0xffffffff                # 0047D76D

    .global _sub_47D777
_sub_47D777:
    push eax                                             # 0047D777
    push ecx                                             # 0047D778
    push edx                                             # 0047D779
    push edi                                             # 0047D77A
    push esi                                             # 0047D77B
    jmp dword ptr [esi*4 + __4FE708]                     # 0047D77C

    .global _sub_47D783
_sub_47D783:
    add ax, word ptr [ebp + 1]                           # 0047D783
    add cx, word ptr [ebp + 3]                           # 0047D787
    jmp _sub_47D7A9                                      # 0047D78B

    .global _sub_47D78D
_sub_47D78D:
    add ax, word ptr [ebp + 3]                           # 0047D78D
    sub cx, word ptr [ebp + 1]                           # 0047D791
    jmp _sub_47D7A9                                      # 0047D795

    .global _sub_47D797
_sub_47D797:
    sub ax, word ptr [ebp + 1]                           # 0047D797
    sub cx, word ptr [ebp + 3]                           # 0047D79B
    jmp _sub_47D7A9                                      # 0047D79F

    .global _sub_47D7A1
_sub_47D7A1:
    sub ax, word ptr [ebp + 3]                           # 0047D7A1
    add cx, word ptr [ebp + 1]                           # 0047D7A5

    .global _sub_47D7A9
_sub_47D7A9:
    add dx, word ptr [ebp + 5]                           # 0047D7A9
    shr dx, 2                                            # 0047D7AD
    movzx esi, cx                                        # 0047D7B1
    shl esi, 9                                           # 0047D7B4
    msvc_or si, ax                                       # 0047D7B7
    shr esi, 3                                           # 0047D7BA
    mov esi, dword ptr [esi + __E40134]                  # 0047D7BD
.L47D7C3:
    mov al, byte ptr [esi]                               # 0047D7C3
    and al, 0x3c                                         # 0047D7C5
    cmp al, 0x1c                                         # 0047D7C7
    jne .L47D831                                         # 0047D7C9
    mov al, byte ptr [esi + 2]                           # 0047D7CB
    msvc_sub al, dl                                      # 0047D7CE
    jns .L47D7D4                                         # 0047D7D0
    neg al                                               # 0047D7D2
.L47D7D4:
    cmp al, 4                                            # 0047D7D4
    ja .L47D831                                          # 0047D7D6
    mov al, byte ptr [esi]                               # 0047D7D8
    and al, 3                                            # 0047D7DA
    cmp al, byte ptr [__112C310]                         # 0047D7DC
    jne .L47D81A                                         # 0047D7E2
    mov al, byte ptr [esi + 5]                           # 0047D7E4
    and al, 3                                            # 0047D7E7
    cmp al, byte ptr [ebp]                               # 0047D7E9
    jne .L47D81A                                         # 0047D7EC
    mov al, byte ptr [esi + 4]                           # 0047D7EE
    mov dword ptr [__112C308], esi                       # 0047D7F1
    and al, 0xf                                          # 0047D7F7
    cmp al, byte ptr [__112C314]                         # 0047D7F9
    jne .L47D81A                                         # 0047D7FF
    mov ax, 4                                            # 0047D801
    test edi, 0x40000000                                 # 0047D805
    je .L47D811                                          # 0047D80B
    mov ax, 5                                            # 0047D80D
.L47D811:
    bt word ptr [esi + 4], ax                            # 0047D811
    jb .L47D88C                                          # 0047D816
    jmp .L47D831                                         # 0047D818
.L47D81A:
    mov ax, 5                                            # 0047D81A
    test edi, 0x40000000                                 # 0047D81E
    je .L47D82A                                          # 0047D824
    mov ax, 4                                            # 0047D826
.L47D82A:
    bt word ptr [esi + 4], ax                            # 0047D82A
    jb .L47D88C                                          # 0047D82F
.L47D831:
    add esi, 8                                           # 0047D831
    test byte ptr [esi - 7], 0x80                        # 0047D834
    je .L47D7C3                                          # 0047D838
    add ebp, 0xa                                         # 0047D83A
    cmp byte ptr [ebp], 0xff                             # 0047D83D
    je .L47D84D                                          # 0047D841
    pop esi                                              # 0047D843
    pop edi                                              # 0047D844
    pop edx                                              # 0047D845
    pop ecx                                              # 0047D846
    pop eax                                              # 0047D847
    msvc_jmp _sub_47D777                                 # 0047D848
.L47D84D:
    mov esi, dword ptr [__112C308]                       # 0047D84D
    cmp esi, -1                                          # 0047D853
    je .L47D87D                                          # 0047D856
    movzx eax, byte ptr [esi + 5]                        # 0047D858
    shr eax, 4                                           # 0047D85C
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047D85F
    test word ptr [eax + 0x12], 1                        # 0047D866
    je .L47D87D                                          # 0047D86C
    pop esi                                              # 0047D86E
    pop edi                                              # 0047D86F
    pop edx                                              # 0047D870
    pop ecx                                              # 0047D871
    pop eax                                              # 0047D872
    pop ebp                                              # 0047D873
    pop edi                                              # 0047D874
    pop edx                                              # 0047D875
    pop ebx                                              # 0047D876
    pop esi                                              # 0047D877
    pop ecx                                              # 0047D878
    pop eax                                              # 0047D879
    mov dh, 0x10                                         # 0047D87A
    ret                                                  # 0047D87C
.L47D87D:
    pop esi                                              # 0047D87D
    pop edi                                              # 0047D87E
    pop edx                                              # 0047D87F
    pop ecx                                              # 0047D880
    pop eax                                              # 0047D881
    pop ebp                                              # 0047D882
    pop edi                                              # 0047D883
    pop edx                                              # 0047D884
    pop ebx                                              # 0047D885
    pop esi                                              # 0047D886
    pop ecx                                              # 0047D887
    pop eax                                              # 0047D888
    msvc_xor dh, dh                                      # 0047D889
    ret                                                  # 0047D88B
.L47D88C:
    movzx eax, byte ptr [esi + 5]                        # 0047D88C
    shr eax, 4                                           # 0047D890
    mov eax, dword ptr [eax*4 + _roadObjects]            # 0047D893
    test word ptr [eax + 0x12], 1                        # 0047D89A
    jne .L47D8B1                                         # 0047D8A0
    pop esi                                              # 0047D8A2
    pop edi                                              # 0047D8A3
    pop edx                                              # 0047D8A4
    pop ecx                                              # 0047D8A5
    pop eax                                              # 0047D8A6
    pop ebp                                              # 0047D8A7
    pop edi                                              # 0047D8A8
    pop edx                                              # 0047D8A9
    pop ebx                                              # 0047D8AA
    pop esi                                              # 0047D8AB
    pop ecx                                              # 0047D8AC
    pop eax                                              # 0047D8AD
    mov dh, 1                                            # 0047D8AE
    ret                                                  # 0047D8B0
.L47D8B1:
    pop esi                                              # 0047D8B1
    pop edi                                              # 0047D8B2
    pop edx                                              # 0047D8B3
    pop ecx                                              # 0047D8B4
    pop eax                                              # 0047D8B5
    pop ebp                                              # 0047D8B6
    pop edi                                              # 0047D8B7
    pop edx                                              # 0047D8B8
    pop ebx                                              # 0047D8B9
    pop esi                                              # 0047D8BA
    pop ecx                                              # 0047D8BB
    pop eax                                              # 0047D8BC
    mov dh, 0x11                                         # 0047D8BD
    ret                                                  # 0047D8BF

    .global _sub_47D8C0
_sub_47D8C0:
    push eax                                             # 0047D8C0
    push ecx                                             # 0047D8C1
    push edi                                             # 0047D8C2
    mov dh, byte ptr [esi + 0x35]                        # 0047D8C3
    movzx edi, cx                                        # 0047D8C6
    shl edi, 9                                           # 0047D8C9
    msvc_or di, ax                                       # 0047D8CC
    shr edi, 3                                           # 0047D8CF
    mov edi, dword ptr [edi + __E40134]                  # 0047D8D2
.L47D8D8:
    mov al, byte ptr [edi]                               # 0047D8D8
    and al, 0x3c                                         # 0047D8DA
    cmp al, 0x1c                                         # 0047D8DC
    jne .L47D94C                                         # 0047D8DE
    msvc_mov ah, dl                                      # 0047D8E0
    sub ah, byte ptr [edi + 2]                           # 0047D8E2
    jae .L47D8E9                                         # 0047D8E5
    neg ah                                               # 0047D8E7
.L47D8E9:
    cmp ah, 4                                            # 0047D8E9
    ja .L47D94C                                          # 0047D8EC
    mov al, byte ptr [edi]                               # 0047D8EE
    and al, 3                                            # 0047D8F0
    msvc_mov cx, bp                                      # 0047D8F2
    and cl, 3                                            # 0047D8F5
    cmp al, cl                                           # 0047D8F8
    jne .L47D94C                                         # 0047D8FA
    mov al, byte ptr [edi + 4]                           # 0047D8FC
    msvc_mov cx, bp                                      # 0047D8FF
    and al, 0xf                                          # 0047D902
    shr cx, 3                                            # 0047D904
    and cl, 0xf                                          # 0047D908
    cmp al, cl                                           # 0047D90B
    jne .L47D94C                                         # 0047D90D
    test byte ptr [edi + 1], 0x20                        # 0047D90F
    jne .L47D94C                                         # 0047D913
    movzx ecx, bp                                        # 0047D915
    shr ecx, 2                                           # 0047D918
    mov cl, byte ptr [ecx + __4F7358]                    # 0047D91B
    or byte ptr [edi + 4], cl                            # 0047D921
    msvc_or ebp, ebp                                     # 0047D924
    js .L47D92B                                          # 0047D926
    xor byte ptr [edi + 4], cl                           # 0047D928
.L47D92B:
    mov al, byte ptr [esi + 0x35]                        # 0047D92B
    cmp al, 0xff                                         # 0047D92E
    je .L47D936                                          # 0047D930
    msvc_mov dh, al                                      # 0047D932
    jmp .L47D94C                                         # 0047D934
.L47D936:
    movzx ecx, byte ptr [edi + 5]                        # 0047D936
    shr ecx, 4                                           # 0047D93A
    bt dword ptr [_scenarioChunk3+420], ecx              # 0047D93D
    jae .L47D94C                                         # 0047D944
    or byte ptr [edi + 7], 0x40                          # 0047D946
    msvc_mov dh, cl                                      # 0047D94A
.L47D94C:
    add edi, 8                                           # 0047D94C
    test byte ptr [edi - 7], 0x80                        # 0047D94F
    je .L47D8D8                                          # 0047D953
    pop edi                                              # 0047D955
    pop ecx                                              # 0047D956
    pop eax                                              # 0047D957
    ret                                                  # 0047D958

    .global _sub_47D959
_sub_47D959:
    push eax                                             # 0047D959
    push ecx                                             # 0047D95A
    push edi                                             # 0047D95B
    mov dh, byte ptr [esi + 0x35]                        # 0047D95C
    movzx edi, cx                                        # 0047D95F
    shl edi, 9                                           # 0047D962
    msvc_or di, ax                                       # 0047D965
    shr edi, 3                                           # 0047D968
    mov edi, dword ptr [edi + __E40134]                  # 0047D96B
.L47D971:
    mov al, byte ptr [edi]                               # 0047D971
    and al, 0x3c                                         # 0047D973
    cmp al, 0x1c                                         # 0047D975
    jne .L47D9E5                                         # 0047D977
    msvc_mov ah, dl                                      # 0047D979
    sub ah, byte ptr [edi + 2]                           # 0047D97B
    jae .L47D982                                         # 0047D97E
    neg ah                                               # 0047D980
.L47D982:
    cmp ah, 4                                            # 0047D982
    ja .L47D9E5                                          # 0047D985
    mov al, byte ptr [edi]                               # 0047D987
    and al, 3                                            # 0047D989
    msvc_mov cx, bp                                      # 0047D98B
    and cl, 3                                            # 0047D98E
    cmp al, cl                                           # 0047D991
    jne .L47D9E5                                         # 0047D993
    mov al, byte ptr [edi + 4]                           # 0047D995
    msvc_mov cx, bp                                      # 0047D998
    and al, 0xf                                          # 0047D99B
    shr cx, 3                                            # 0047D99D
    and cl, 0xf                                          # 0047D9A1
    cmp al, cl                                           # 0047D9A4
    jne .L47D9E5                                         # 0047D9A6
    test byte ptr [edi + 1], 0x20                        # 0047D9A8
    jne .L47D9E5                                         # 0047D9AC
    movzx ecx, bp                                        # 0047D9AE
    shr ecx, 2                                           # 0047D9B1
    mov cl, byte ptr [ecx + __4F7358]                    # 0047D9B4
    or byte ptr [edi + 4], cl                            # 0047D9BA
    msvc_or ebp, ebp                                     # 0047D9BD
    js .L47D9C4                                          # 0047D9BF
    xor byte ptr [edi + 4], cl                           # 0047D9C1
.L47D9C4:
    mov al, byte ptr [esi + 0x35]                        # 0047D9C4
    cmp al, 0xff                                         # 0047D9C7
    je .L47D9CF                                          # 0047D9C9
    msvc_mov dh, al                                      # 0047D9CB
    jmp .L47D9E5                                         # 0047D9CD
.L47D9CF:
    movzx ecx, byte ptr [edi + 5]                        # 0047D9CF
    shr ecx, 4                                           # 0047D9D3
    bt dword ptr [_scenarioChunk3+420], ecx              # 0047D9D6
    jae .L47D9E5                                         # 0047D9DD
    or byte ptr [edi + 7], 0x40                          # 0047D9DF
    msvc_mov dh, cl                                      # 0047D9E3
.L47D9E5:
    add edi, 8                                           # 0047D9E5
    test byte ptr [edi - 7], 0x80                        # 0047D9E8
    je .L47D971                                          # 0047D9EC
    pop edi                                              # 0047D9EE
    pop ecx                                              # 0047D9EF
    pop eax                                              # 0047D9F0
    ret                                                  # 0047D9F1

    .global _sub_47D9F2
_sub_47D9F2:
    mov byte ptr [_scenarioChunk3+406], 0                # 0047D9F2
    mov edi, dword ptr [_regionObjects]                  # 0047D9F9
    cmp edi, -1                                          # 0047D9FF
    je .L47DA13                                          # 0047DA02
    test word ptr [edi + 6], 1                           # 0047DA04
    je .L47DA13                                          # 0047DA0A
    mov byte ptr [_scenarioChunk3+406], 1                # 0047DA0C
.L47DA13:
    mov_offset edi, __5253B0                             # 0047DA13
    cmp byte ptr [_scenarioChunk3+406], 0                # 0047DA18
    jne .L47DA3F                                         # 0047DA1F
    mov_offset esi, __4D9DE4                             # 0047DA21
    mov ecx, 0x200                                       # 0047DA26
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 0047DA2B
    mov_offset esi, __4F7338                             # 0047DA2D
    mov_offset edi, __112C32C                            # 0047DA32
    mov ecx, 0x20                                        # 0047DA37
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 0047DA3C
    ret                                                  # 0047DA3E
.L47DA3F:
    mov_offset esi, __4D9DE4+512                         # 0047DA3F
    mov ecx, 0x80                                        # 0047DA44
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 0047DA49
    mov_offset esi, __4D9DE4                             # 0047DA4B
    mov ecx, 0x80                                        # 0047DA50
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 0047DA55
    mov_offset esi, __4D9DE4+1536                        # 0047DA57
    mov ecx, 0x80                                        # 0047DA5C
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 0047DA61
    mov_offset esi, __4D9DE4+1024                        # 0047DA63
    mov ecx, 0x80                                        # 0047DA68
    rep movsd dword ptr es:[edi], dword ptr [esi]        # 0047DA6D
    mov_offset esi, __4F7348                             # 0047DA6F
    mov_offset edi, __112C32C                            # 0047DA74
    mov ecx, 0x10                                        # 0047DA79
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 0047DA7E
    mov_offset esi, __4F7338                             # 0047DA80
    mov ecx, 0x10                                        # 0047DA85
    rep movsb byte ptr es:[edi], byte ptr [esi]          # 0047DA8A
    ret                                                  # 0047DA8C

    .global _sub_47DA8D
_sub_47DA8D:
    msvc_xor ebp, ebp                                    # 0047DA8D
    msvc_xor edx, edx                                    # 0047DA8F
.L47DA91:
    mov edi, dword ptr [ebp*4 + _roadStationObjects]     # 0047DA91
    cmp edi, -1                                          # 0047DA98
    je .L47DACA                                          # 0047DA9B
    test byte ptr [edi + 0xb], 2                         # 0047DA9D
    jne .L47DAAE                                         # 0047DAA1
    test byte ptr [edi + 0xb], 4                         # 0047DAA3
    jne .L47DABD                                         # 0047DAA7
    bts edx, ebp                                         # 0047DAA9
    jmp .L47DACA                                         # 0047DAAC
.L47DAAE:
    movzx ecx, byte ptr [edi + 0x2c]                     # 0047DAAE
    bt dword ptr [esi + 0x4e], ecx                       # 0047DAB2
    jae .L47DACA                                         # 0047DAB6
    bts edx, ebp                                         # 0047DAB8
    jmp .L47DACA                                         # 0047DABB
.L47DABD:
    movzx ecx, byte ptr [edi + 0x2c]                     # 0047DABD
    bt dword ptr [esi + 0x4e], ecx                       # 0047DAC1
    jb .L47DACA                                          # 0047DAC5
    bts edx, ebp                                         # 0047DAC7
.L47DACA:
    inc ebp                                              # 0047DACA
    cmp ebp, 0x10                                        # 0047DACB
    jb .L47DA91                                          # 0047DACE
    mov dword ptr [__112C30C], edx                       # 0047DAD0
    mov bp, word ptr [esi + 0x36]                        # 0047DAD6
    msvc_mov dx, bp                                      # 0047DADA
    add bp, 2                                            # 0047DADD
    and ebp, 0x3f                                        # 0047DAE1
    and dx, 0xffc0                                       # 0047DAE4
    msvc_or bp, dx                                       # 0047DAE8
    cmp word ptr [ebp*2 + __96885C], -2                  # 0047DAEB
    jne .L47DF41                                         # 0047DAF4
    inc bp                                               # 0047DAFA
    and ebp, 0x3f                                        # 0047DAFC
    msvc_or bp, dx                                       # 0047DAFF
    cmp word ptr [ebp*2 + __96885C], -2                  # 0047DB02
    jne .L47DF41                                         # 0047DB0B
    cmp byte ptr [esi + 0x52], 1                         # 0047DB11
    je .L47DB48                                          # 0047DB15
    sub eax, dword ptr [esi + 0x3c]                      # 0047DB17
    shl ebx, 2                                           # 0047DB1A
    cmp ebx, 0xcc48                                      # 0047DB1D
    jge .L47DB2A                                         # 0047DB23
    mov ebx, 0xcc48                                      # 0047DB25
.L47DB2A:
    msvc_cmp eax, ebx                                    # 0047DB2A
    jle .L47DB30                                         # 0047DB2C
    msvc_mov eax, ebx                                    # 0047DB2E
.L47DB30:
    push eax                                             # 0047DB30
    mov dword ptr [__1136114], 0                         # 0047DB31
    call _sub_47C7FA                                     # 0047DB3B
    pop edx                                              # 0047DB40
    msvc_sub edx, eax                                    # 0047DB41
    add dword ptr [esi + 0x3c], edx                      # 0047DB43
    jmp .L47DB5C                                         # 0047DB46
.L47DB48:
    msvc_xor eax, eax                                    # 0047DB48
    mov dword ptr [__1136114], 0                         # 0047DB4A
    call _sub_47C7FA                                     # 0047DB54
    add dword ptr [esi + 0x28], eax                      # 0047DB59
.L47DB5C:
    test dword ptr [__1136114], 1                        # 0047DB5C
    je .L47DF3E                                          # 0047DB66
    mov ax, word ptr [esi + 0x30]                        # 0047DB6C
    mov cx, word ptr [esi + 0x32]                        # 0047DB70
    mov dl, byte ptr [esi + 0x34]                        # 0047DB74
    movzx ebp, word ptr [esi + 0x2c]                     # 0047DB77
    push esi                                             # 0047DB7B
    mov word ptr [__11361F6], 0xffff                     # 0047DB7C
    movzx esi, cx                                        # 0047DB85
    shl esi, 9                                           # 0047DB88
    msvc_or si, ax                                       # 0047DB8B
    shr esi, 3                                           # 0047DB8E
    mov esi, dword ptr [esi + __E40134]                  # 0047DB91
.L47DB97:
    mov al, byte ptr [esi]                               # 0047DB97
    and al, 0x3c                                         # 0047DB99
    cmp al, 0x1c                                         # 0047DB9B
    jne .L47DBC6                                         # 0047DB9D
    cmp dl, byte ptr [esi + 2]                           # 0047DB9F
    jne .L47DBC6                                         # 0047DBA2
    mov al, byte ptr [esi]                               # 0047DBA4
    and al, 3                                            # 0047DBA6
    msvc_mov cx, bp                                      # 0047DBA8
    and cl, 3                                            # 0047DBAB
    cmp al, cl                                           # 0047DBAE
    jne .L47DBC6                                         # 0047DBB0
    mov al, byte ptr [esi + 4]                           # 0047DBB2
    and al, 0xf                                          # 0047DBB5
    msvc_mov cx, bp                                      # 0047DBB7
    shr cx, 3                                            # 0047DBBA
    and cx, 0xf                                          # 0047DBBE
    cmp al, cl                                           # 0047DBC2
    je .L47DBD1                                          # 0047DBC4
.L47DBC6:
    add esi, 8                                           # 0047DBC6
    test byte ptr [esi - 7], 0x80                        # 0047DBC9
    je .L47DB97                                          # 0047DBCD
    jmp .L47DBFF                                         # 0047DBCF
.L47DBD1:
    test byte ptr [esi], 0x80                            # 0047DBD1
    je .L47DBFF                                          # 0047DBD4
.L47DBD6:
    add esi, 8                                           # 0047DBD6
    mov al, byte ptr [esi]                               # 0047DBD9
    and al, 0x3c                                         # 0047DBDB
    cmp al, 8                                            # 0047DBDD
    jne .L47DBD6                                         # 0047DBDF
    test byte ptr [esi + 1], 0x30                        # 0047DBE1
    jne .L47DBFF                                         # 0047DBE5
    mov ax, word ptr [esi + 6]                           # 0047DBE7
    and ax, 0x3ff                                        # 0047DBEB
    mov word ptr [__11361F6], ax                         # 0047DBEF
    mov al, byte ptr [esi + 5]                           # 0047DBF5
    and al, 0x1f                                         # 0047DBF8
    mov byte ptr [__112C32B], al                         # 0047DBFA
.L47DBFF:
    pop esi                                              # 0047DBFF
    mov al, byte ptr [esi + 0x53]                        # 0047DC00
    movzx ebp, word ptr [esi + 0x3a]                     # 0047DC03
    shl ebp, 7                                           # 0047DC07
    add_offset ebp, _things                              # 0047DC0A
    mov ah, byte ptr [ebp + 0x49]                        # 0047DC10
    mov word ptr [__113601A], ax                         # 0047DC13
    mov ax, word ptr [esi + 0x30]                        # 0047DC19
    mov cx, word ptr [esi + 0x32]                        # 0047DC1D
    movzx dx, byte ptr [esi + 0x34]                      # 0047DC21
    shl dx, 2                                            # 0047DC26
    mov bp, word ptr [esi + 0x2c]                        # 0047DC2A
    and ebp, 0x7f                                        # 0047DC2E
    mov bl, byte ptr [esi + 0x21]                        # 0047DC31
    mov bh, byte ptr [esi + 0x35]                        # 0047DC34
    mov_offset edi, __11360A0                            # 0047DC37
    push esi                                             # 0047DC3C
    cmp byte ptr [esi + 0x5c], 0                         # 0047DC3D
    jne .L47DC4E                                         # 0047DC41
    cmp byte ptr [esi + 0x52], 1                         # 0047DC43
    mov_offset esi, _sub_478CE9                          # 0047DC47
    jne .L47DC53                                         # 0047DC4C
.L47DC4E:
    mov_offset esi, _sub_478895                          # 0047DC4E
.L47DC53:
    call esi                                             # 0047DC53
    pop esi                                              # 0047DC55
    cmp byte ptr [esi + 0x52], 1                         # 0047DC56
    je .L47DD67                                          # 0047DC5A
    cmp word ptr [__11361F6], -1                         # 0047DC60
    je .L47DD67                                          # 0047DC68
    mov bx, word ptr [__11361F6]                         # 0047DC6E
    cmp bx, word ptr [__1135FAE]                         # 0047DC75
    je .L47DD67                                          # 0047DC7C
    push eax                                             # 0047DC82
    push ebx                                             # 0047DC83
    push ecx                                             # 0047DC84
    push edi                                             # 0047DC85
    movzx ecx, byte ptr [__112C32B]                      # 0047DC86
    bt dword ptr [__112C30C], ecx                        # 0047DC8D
    jae .L47DD63                                         # 0047DC94
    movzx edi, word ptr [esi + 0x3a]                     # 0047DC9A
    shl edi, 7                                           # 0047DC9E
    add_offset edi, _things                              # 0047DCA1
    mov ebp, dword ptr [esi + 0x46]                      # 0047DCA7
    movzx ecx, word ptr [esi + 0x4a]                     # 0047DCAA
    mov al, byte ptr [ecx + ebp + __987C5C]              # 0047DCAE
    and al, 7                                            # 0047DCB5
    cmp al, 1                                            # 0047DCB7
    je .L47DCED                                          # 0047DCB9
    cmp al, 2                                            # 0047DCBB
    je .L47DD0B                                          # 0047DCBD
.L47DCBF:
    cmp bx, word ptr [esi + 0x54]                        # 0047DCBF
    je .L47DD63                                          # 0047DCC3
    test byte ptr [edi + 0x48], 2                        # 0047DCC9
    jne .L47DD63                                         # 0047DCCD
    movzx ecx, word ptr [__11361F6]                      # 0047DCD3
    imul ecx, ecx, 0x3d2                                 # 0047DCDA
    mov cl, byte ptr [ecx + _stations+40]                # 0047DCE0
    cmp cl, byte ptr [edi + 0x21]                        # 0047DCE6
    jne .L47DD63                                         # 0047DCE9
    jmp .L47DD55                                         # 0047DCEB
.L47DCED:
    mov al, byte ptr [ecx + ebp + __987C5C+1]            # 0047DCED
    mov ah, byte ptr [ecx + ebp + __987C5C]              # 0047DCF4
    shr ah, 6                                            # 0047DCFB
    msvc_cmp ax, bx                                      # 0047DCFE
    je .L47DD55                                          # 0047DD01
    test byte ptr [edi + 0x48], 2                        # 0047DD03
    jne .L47DD63                                         # 0047DD07
    jmp .L47DCBF                                         # 0047DD09
.L47DD0B:
    mov al, byte ptr [ecx + ebp + __987C5C+1]            # 0047DD0B
    mov ah, byte ptr [ecx + ebp + __987C5C]              # 0047DD12
    shr ah, 6                                            # 0047DD19
    msvc_cmp ax, bx                                      # 0047DD1C
    je .L47DD29                                          # 0047DD1F
    test byte ptr [edi + 0x48], 2                        # 0047DD21
    jne .L47DD63                                         # 0047DD25
    jmp .L47DCBF                                         # 0047DD27
.L47DD29:
    mov al, byte ptr [ecx + ebp + __987C5C]              # 0047DD29
    and eax, 7                                           # 0047DD30
    add ecx, dword ptr [eax*4 + __4FE070]                # 0047DD33
    cmp byte ptr [ecx + ebp + __987C5C], 0               # 0047DD3A
    jne .L47DD46                                         # 0047DD42
    msvc_xor ecx, ecx                                    # 0047DD44
.L47DD46:
    mov word ptr [esi + 0x4a], cx                        # 0047DD46
    mov bx, word ptr [esi + 0xa]                         # 0047DD4A
    call _sub_4B93A5                                     # 0047DD4E
    jmp .L47DD63                                         # 0047DD53
.L47DD55:
    pop edi                                              # 0047DD55
    pop ecx                                              # 0047DD56
    pop ebx                                              # 0047DD57
    pop eax                                              # 0047DD58
    mov bp, word ptr [__11361F6]                         # 0047DD59
    mov al, 4                                            # 0047DD60
    ret                                                  # 0047DD62
.L47DD63:
    pop edi                                              # 0047DD63
    pop ecx                                              # 0047DD64
    pop ebx                                              # 0047DD65
    pop eax                                              # 0047DD66
.L47DD67:
    cmp dword ptr [__113609C], 0                         # 0047DD67
    je .L47DF44                                          # 0047DD6E
    movzx ebx, word ptr [__11360A0]                      # 0047DD74
    cmp dword ptr [__113609C], 1                         # 0047DD7B
    je .L47DD97                                          # 0047DD82
    movzx ebx, byte ptr [esi + 0x52]                     # 0047DD84
    call dword ptr [ebx*4 + __4FE718]                    # 0047DD88
    msvc_mov eax, ebx                                    # 0047DD8F
    or ax, 0x4000                                        # 0047DD91
    jmp .L47DD99                                         # 0047DD95
.L47DD97:
    msvc_mov eax, ebx                                    # 0047DD97
.L47DD99:
    test word ptr [esi + 0x2c], 0x80                     # 0047DD99
    je .L47DDCD                                          # 0047DD9F
    test word ptr [esi + 0x2c], 0x100                    # 0047DDA1
    jne .L47DDFB                                         # 0047DDA7
    xor ax, 0x80                                         # 0047DDA9
    cmp byte ptr [esi + 0x52], 1                         # 0047DDAD
    je .L47DDFB                                          # 0047DDB1
    movsx ebp, byte ptr [esi + 0x35]                     # 0047DDB3
    cmp ebp, -1                                          # 0047DDB7
    je .L47DDF7                                          # 0047DDBA
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 0047DDBC
    test word ptr [ebp + 0x12], 0x40                     # 0047DDC3
    je .L47DDFB                                          # 0047DDC9
    jmp .L47DDF7                                         # 0047DDCB
.L47DDCD:
    test word ptr [esi + 0x2c], 0x100                    # 0047DDCD
    je .L47DDFB                                          # 0047DDD3
    xor ax, 0x80                                         # 0047DDD5
    cmp byte ptr [esi + 0x52], 1                         # 0047DDD9
    je .L47DDFB                                          # 0047DDDD
    movsx ebp, byte ptr [esi + 0x35]                     # 0047DDDF
    cmp ebp, -1                                          # 0047DDE3
    je .L47DDF7                                          # 0047DDE6
    mov ebp, dword ptr [ebp*4 + _roadObjects]            # 0047DDE8
    test word ptr [ebp + 0x12], 0x40                     # 0047DDEF
    je .L47DDFB                                          # 0047DDF5
.L47DDF7:
    xor ax, 0x100                                        # 0047DDF7
.L47DDFB:
    mov bp, word ptr [esi + 0x36]                        # 0047DDFB
    msvc_mov bx, bp                                      # 0047DDFF
    inc bp                                               # 0047DE02
    and ebp, 0x3f                                        # 0047DE04
    and bx, 0xffc0                                       # 0047DE07
    msvc_or bp, bx                                       # 0047DE0B
    mov word ptr [ebp*2 + __96885C], ax                  # 0047DE0E
    cmp byte ptr [esi + 0x52], 1                         # 0047DE16
    je .L47DF3E                                          # 0047DE1A
    movzx ebp, word ptr [esi + 0x4a]                     # 0047DE20
    add ebp, dword ptr [esi + 0x46]                      # 0047DE24
    mov bl, byte ptr [ebp + __987C5C]                    # 0047DE27
    and ebx, 7                                           # 0047DE2D
    cmp bl, 3                                            # 0047DE30
    jne .L47DF3E                                         # 0047DE33
    push eax                                             # 0047DE39
    mov ax, word ptr [esi + 0x30]                        # 0047DE3A
    mov cx, word ptr [esi + 0x32]                        # 0047DE3E
    movzx dx, byte ptr [esi + 0x34]                      # 0047DE42
    shl dx, 2                                            # 0047DE47
    mov di, word ptr [esi + 0x2c]                        # 0047DE4B
    and edi, 0x7f                                        # 0047DE4F
    add ax, word ptr [edi*8 + __4F6F8E]                  # 0047DE52
    add cx, word ptr [edi*8 + __4F6F90]                  # 0047DE5A
    add dx, word ptr [edi*8 + __4F6F92]                  # 0047DE62
    push eax                                             # 0047DE6A
    push ecx                                             # 0047DE6B
    push edx                                             # 0047DE6C
    shr ax, 5                                            # 0047DE6D
    shr cx, 5                                            # 0047DE71
    shr dx, 3                                            # 0047DE75
    msvc_xchg ah, al                                     # 0047DE79
    msvc_xchg ch, cl                                     # 0047DE7B
    shl al, 7                                            # 0047DE7D
    shl cl, 7                                            # 0047DE80
    msvc_or cl, dl                                       # 0047DE83
    movzx eax, ax                                        # 0047DE85
    shl ecx, 0x10                                        # 0047DE88
    msvc_or eax, ecx                                     # 0047DE8B
    or al, 3                                             # 0047DE8D
    cmp eax, dword ptr [ebp + __987C5C]                  # 0047DE8F
    je .L47DF09                                          # 0047DE95
    pop edx                                              # 0047DE97
    pop ecx                                              # 0047DE98
    pop eax                                              # 0047DE99
    mov ebx, dword ptr [esp]                             # 0047DE9A
    and ebx, 0x7f                                        # 0047DE9D
    add ax, word ptr [ebx*8 + __4F6F8E]                  # 0047DEA0
    add cx, word ptr [ebx*8 + __4F6F90]                  # 0047DEA8
    add dx, word ptr [ebx*8 + __4F6F92]                  # 0047DEB0
    movzx ebx, byte ptr [ebx*8 + __4F6F8D]               # 0047DEB8
    cmp bl, 0xc                                          # 0047DEC0
    jae .L47DED5                                         # 0047DEC3
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047DEC5
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047DECD
.L47DED5:
    movzx ebx, byte ptr [ebx + __503CAC]                 # 0047DED5
    shr ax, 5                                            # 0047DEDC
    shr cx, 5                                            # 0047DEE0
    shr dx, 3                                            # 0047DEE4
    msvc_xchg ah, al                                     # 0047DEE8
    msvc_xchg ch, cl                                     # 0047DEEA
    shl al, 7                                            # 0047DEEC
    shl cl, 7                                            # 0047DEEF
    msvc_or cl, dl                                       # 0047DEF2
    movzx eax, ax                                        # 0047DEF4
    shl ecx, 0x10                                        # 0047DEF7
    msvc_or eax, ecx                                     # 0047DEFA
    or al, 3                                             # 0047DEFC
    cmp eax, dword ptr [ebp + __987C5C]                  # 0047DEFE
    je .L47DF0C                                          # 0047DF04
    pop eax                                              # 0047DF06
    jmp .L47DF3E                                         # 0047DF07
.L47DF09:
    pop edx                                              # 0047DF09
    pop ecx                                              # 0047DF0A
    pop eax                                              # 0047DF0B
.L47DF0C:
    mov ebp, dword ptr [esi + 0x46]                      # 0047DF0C
    movzx ecx, word ptr [esi + 0x4a]                     # 0047DF0F
    mov al, byte ptr [ecx + ebp + __987C5C]              # 0047DF13
    and eax, 7                                           # 0047DF1A
    add ecx, dword ptr [eax*4 + __4FE070]                # 0047DF1D
    cmp byte ptr [ecx + ebp + __987C5C], 0               # 0047DF24
    jne .L47DF30                                         # 0047DF2C
    msvc_xor ecx, ecx                                    # 0047DF2E
.L47DF30:
    mov word ptr [esi + 0x4a], cx                        # 0047DF30
    mov bx, word ptr [esi + 0xa]                         # 0047DF34
    call _sub_4B93A5                                     # 0047DF38
    pop eax                                              # 0047DF3D
.L47DF3E:
    msvc_xor al, al                                      # 0047DF3E
    ret                                                  # 0047DF40
.L47DF41:
    mov al, 1                                            # 0047DF41
    ret                                                  # 0047DF43
.L47DF44:
    mov al, 2                                            # 0047DF44
    ret                                                  # 0047DF46
.L47DF47:
    mov al, 3                                            # 0047DF47
    ret                                                  # 0047DF49

    .global _sub_47DF4A
_sub_47DF4A:
    push esi                                             # 0047DF4A
    mov bl, byte ptr [esi + 0x21]                        # 0047DF4B
    mov bh, byte ptr [esi + 0x35]                        # 0047DF4E
    mov word ptr [__113642C], 0                          # 0047DF51
    mov dword ptr [__1136430], 0                         # 0047DF5A
    sub esp, 0x58                                        # 0047DF64
    msvc_xor esi, esi                                    # 0047DF67
.L47DF69:
    cmp esi, dword ptr [__113609C]                       # 0047DF69
    jae .L47DFA4                                         # 0047DF6F
    mov dword ptr [__1136434], 0                         # 0047DF71
    mov bp, word ptr [esi*2 + __11360A0]                 # 0047DF7B
    push eax                                             # 0047DF83
    push ebx                                             # 0047DF84
    push ecx                                             # 0047DF85
    push edx                                             # 0047DF86
    push esi                                             # 0047DF87
    and ebp, 0x807f                                      # 0047DF88
    call _sub_47E72F                                     # 0047DF8E
    pop esi                                              # 0047DF93
    pop edx                                              # 0047DF94
    pop ecx                                              # 0047DF95
    pop ebx                                              # 0047DF96
    pop eax                                              # 0047DF97
    mov ebp, dword ptr [__1136434]                       # 0047DF98
    mov dword ptr [esp + esi*4], ebp                     # 0047DF9E
    inc esi                                              # 0047DFA1
    jmp .L47DF69                                         # 0047DFA2
.L47DFA4:
    mov esi, 1                                           # 0047DFA4
    msvc_xor ebp, ebp                                    # 0047DFA9
    mov ebx, dword ptr [esp]                             # 0047DFAB
.L47DFAE:
    cmp esi, dword ptr [__113609C]                       # 0047DFAE
    jae .L47DFC3                                         # 0047DFB4
    cmp ebx, dword ptr [esp + esi*4]                     # 0047DFB6
    ja .L47DFC0                                          # 0047DFB9
    mov ebx, dword ptr [esp + esi*4]                     # 0047DFBB
    msvc_mov ebp, esi                                    # 0047DFBE
.L47DFC0:
    inc esi                                              # 0047DFC0
    jmp .L47DFAE                                         # 0047DFC1
.L47DFC3:
    movzx ebx, word ptr [ebp*2 + __11360A0]              # 0047DFC3
    add esp, 0x58                                        # 0047DFCB
    pop esi                                              # 0047DFCE
    ret                                                  # 0047DFCF

    .global _sub_47DFD0
_sub_47DFD0:
    btr dx, 0xf                                          # 0047DFD0
    jb .L47DFE1                                          # 0047DFD5
    mov dword ptr [__1136450], 0xfffffffe                # 0047DFD7
.L47DFE1:
    mov ebx, dword ptr [_scenarioChunk3]                 # 0047DFE1
    mov ebp, dword ptr [_scenarioChunk3+4]               # 0047DFE7
    ror ebx, 3                                           # 0047DFED
    xor ebp, 0x1234567f                                  # 0047DFF0
    mov dword ptr [_scenarioChunk3+4], ebx               # 0047DFF6
    ror ebp, 7                                           # 0047DFFC
    add dword ptr [_scenarioChunk3], ebp                 # 0047DFFF
    mov dword ptr [__1136438], ebx                       # 0047E005
    push esi                                             # 0047E00B
    movzx ebp, word ptr [esi + 0x4a]                     # 0047E00C
    add ebp, dword ptr [esi + 0x46]                      # 0047E010
    mov bl, byte ptr [ebp + __987C5C]                    # 0047E013
    and ebx, 7                                           # 0047E019
    cmp bl, 3                                            # 0047E01C
    je .L47E033                                          # 0047E01F
    test byte ptr [ebx + __4FE088], 8                    # 0047E021
    jne .L47E0F3                                         # 0047E028
    msvc_jmp .L47E13F                                    # 0047E02E
.L47E033:
    mov word ptr [__113644A], 0xffff                     # 0047E033
    push eax                                             # 0047E03C
    push ecx                                             # 0047E03D
    push edx                                             # 0047E03E
    mov al, byte ptr [ebp + __987C5C+1]                  # 0047E03F
    mov cl, byte ptr [ebp + __987C5C+3]                  # 0047E045
    mov ah, byte ptr [ebp + __987C5C]                    # 0047E04B
    mov ch, byte ptr [ebp + __987C5C+2]                  # 0047E051
    shr ah, 7                                            # 0047E057
    shr ch, 7                                            # 0047E05A
    mov dl, byte ptr [ebp + __987C5C+2]                  # 0047E05D
    shl ax, 5                                            # 0047E063
    and dx, 0x7f                                         # 0047E067
    shl cx, 5                                            # 0047E06B
    shl dx, 3                                            # 0047E06F
    movzx ebp, word ptr [ebp + __987C5C+4]               # 0047E073
    mov word ptr [__113645A], ax                         # 0047E07A
    mov word ptr [__113645C], cx                         # 0047E080
    mov word ptr [__113645E], dx                         # 0047E087
    mov word ptr [__1136460], bp                         # 0047E08E
    and ebp, 0x7f                                        # 0047E095
    add ax, word ptr [ebp*8 + __4F6F8E]                  # 0047E098
    add cx, word ptr [ebp*8 + __4F6F90]                  # 0047E0A0
    add dx, word ptr [ebp*8 + __4F6F92]                  # 0047E0A8
    movzx ebx, byte ptr [ebp*8 + __4F6F8D]               # 0047E0B0
    cmp bl, 0xc                                          # 0047E0B8
    jae .L47E0CD                                         # 0047E0BB
    sub ax, word ptr [ebx*4 + __503C6C]                  # 0047E0BD
    sub cx, word ptr [ebx*4 + __503C6E]                  # 0047E0C5
.L47E0CD:
    xor ebp, 4                                           # 0047E0CD
    mov word ptr [__1136462], ax                         # 0047E0D0
    mov word ptr [__1136464], cx                         # 0047E0D6
    mov word ptr [__1136466], dx                         # 0047E0DD
    mov word ptr [__1136468], bp                         # 0047E0E4
    pop edx                                              # 0047E0EB
    pop ecx                                              # 0047E0EC
    pop eax                                              # 0047E0ED
    msvc_jmp .L47E1E4                                    # 0047E0EE
.L47E0F3:
    movzx ebx, byte ptr [ebp + __987C5C+1]               # 0047E0F3
    mov bh, byte ptr [ebp + __987C5C]                    # 0047E0FA
    shr bh, 6                                            # 0047E100
    mov word ptr [__113644A], bx                         # 0047E103
    imul ebx, ebx, 0x3d2                                 # 0047E10A
    mov di, word ptr [ebx + _stations+2]                 # 0047E110
    mov bp, word ptr [ebx + _stations+4]                 # 0047E117
    mov word ptr [__113645A], di                         # 0047E11E
    mov word ptr [__113645C], bp                         # 0047E125
    mov di, word ptr [ebx + _stations+6]                 # 0047E12C
    mov word ptr [__113645E], di                         # 0047E133
    msvc_jmp .L47E1E4                                    # 0047E13A
.L47E13F:
    mov bl, byte ptr [esi + 0x21]                        # 0047E13F
    mov bh, byte ptr [esi + 0x35]                        # 0047E142
    mov word ptr [__113642C], 0                          # 0047E145
    mov dword ptr [__1136430], 0                         # 0047E14E
    sub esp, 0x58                                        # 0047E158
    msvc_xor esi, esi                                    # 0047E15B
.L47E15D:
    cmp esi, dword ptr [__113609C]                       # 0047E15D
    jae .L47E1B5                                         # 0047E163
    mov word ptr [__113642E], 0                          # 0047E165
    mov bp, word ptr [esi*2 + __11360A0]                 # 0047E16E
    push eax                                             # 0047E176
    push ebx                                             # 0047E177
    push ecx                                             # 0047E178
    push edx                                             # 0047E179
    push esi                                             # 0047E17A
    and ebp, 0x807f                                      # 0047E17B
    call _sub_47E481                                     # 0047E181
    pop esi                                              # 0047E186
    pop edx                                              # 0047E187
    pop ecx                                              # 0047E188
    pop ebx                                              # 0047E189
    pop eax                                              # 0047E18A
    movzx ebp, word ptr [__113642E]                      # 0047E18B
    mov bp, word ptr [ebp*2 + __500234]                  # 0047E192
    mov word ptr [esp + esi*4], bp                       # 0047E19A
    mov ebp, dword ptr [__1136438]                       # 0047E19E
    and ebp, 7                                           # 0047E1A4
    add word ptr [esp + esi*4], bp                       # 0047E1A7
    ror dword ptr [__1136438], 3                         # 0047E1AB
    inc esi                                              # 0047E1B2
    jmp .L47E15D                                         # 0047E1B3
.L47E1B5:
    mov esi, 1                                           # 0047E1B5
    msvc_xor ebp, ebp                                    # 0047E1BA
    mov bx, word ptr [esp]                               # 0047E1BC
.L47E1C0:
    cmp esi, dword ptr [__113609C]                       # 0047E1C0
    jae .L47E1D7                                         # 0047E1C6
    cmp bx, word ptr [esp + esi*4]                       # 0047E1C8
    ja .L47E1D4                                          # 0047E1CC
    mov bx, word ptr [esp + esi*4]                       # 0047E1CE
    msvc_mov ebp, esi                                    # 0047E1D2
.L47E1D4:
    inc esi                                              # 0047E1D4
    jmp .L47E1C0                                         # 0047E1D5
.L47E1D7:
    movzx ebx, word ptr [ebp*2 + __11360A0]              # 0047E1D7
    add esp, 0x58                                        # 0047E1DF
    pop esi                                              # 0047E1E2
    ret                                                  # 0047E1E3
.L47E1E4:
    mov bl, byte ptr [esi + 0x21]                        # 0047E1E4
    mov bh, byte ptr [esi + 0x35]                        # 0047E1E7
    mov word ptr [__113642C], 0                          # 0047E1EA
    mov dword ptr [__1136430], 0                         # 0047E1F3
    msvc_xor esi, esi                                    # 0047E1FD
.L47E1FF:
    cmp esi, dword ptr [__113609C]                       # 0047E1FF
    jae .L47E441                                         # 0047E205
    mov bp, word ptr [esi*2 + __11360A0]                 # 0047E20B
    cmp word ptr [__113644A], -1                         # 0047E213
    jne .L47E27B                                         # 0047E21B
    cmp ax, word ptr [__113645A]                         # 0047E21D
    jne .L47E24C                                         # 0047E224
    cmp cx, word ptr [__113645C]                         # 0047E226
    jne .L47E24C                                         # 0047E22D
    cmp dx, word ptr [__113645E]                         # 0047E22F
    jne .L47E24C                                         # 0047E236
    msvc_mov di, bp                                      # 0047E238
    and di, 0x7f                                         # 0047E23B
    cmp di, word ptr [__1136460]                         # 0047E23F
    je .L47E451                                          # 0047E246
.L47E24C:
    cmp ax, word ptr [__1136462]                         # 0047E24C
    jne .L47E27B                                         # 0047E253
    cmp cx, word ptr [__1136464]                         # 0047E255
    jne .L47E27B                                         # 0047E25C
    cmp dx, word ptr [__1136466]                         # 0047E25E
    jne .L47E27B                                         # 0047E265
    msvc_mov di, bp                                      # 0047E267
    and di, 0x7f                                         # 0047E26A
    cmp di, word ptr [__1136468]                         # 0047E26E
    je .L47E451                                          # 0047E275
.L47E27B:
    mov dword ptr [__113644C], 0xffffffff                # 0047E27B
    mov word ptr [__1136448], 0xffff                     # 0047E285
    mov dword ptr [__1136444], 0xffffffff                # 0047E28E
    mov word ptr [__1135FAE], 0xffff                     # 0047E298
    push eax                                             # 0047E2A1
    push ebx                                             # 0047E2A2
    push ecx                                             # 0047E2A3
    push edx                                             # 0047E2A4
    push esi                                             # 0047E2A5
    and ebp, 0x807f                                      # 0047E2A6
    call _sub_47E50A                                     # 0047E2AC
    pop esi                                              # 0047E2B1
    pop edx                                              # 0047E2B2
    pop ecx                                              # 0047E2B3
    pop ebx                                              # 0047E2B4
    pop eax                                              # 0047E2B5
    cmp dword ptr [__1136450], -2                        # 0047E2B6
    je .L47E406                                          # 0047E2BD
    cmp dword ptr [__113644C], 2                         # 0047E2C3
    ja .L47E308                                          # 0047E2CA
    cmp word ptr [__1136448], 0                          # 0047E2CC
    jne .L47E308                                         # 0047E2D4
    cmp dword ptr [__1136450], 2                         # 0047E2D6
    ja .L47E406                                          # 0047E2DD
    cmp word ptr [__1136456], 0                          # 0047E2E3
    jne .L47E406                                         # 0047E2EB
    mov ebp, dword ptr [__1136444]                       # 0047E2F1
    cmp ebp, dword ptr [__113643C]                       # 0047E2F7
    jb .L47E406                                          # 0047E2FD
    msvc_jmp .L47E43B                                    # 0047E303
.L47E308:
    cmp dword ptr [__1136450], 2                         # 0047E308
    ja .L47E31F                                          # 0047E30F
    cmp word ptr [__1136456], 0                          # 0047E311
    je .L47E43B                                          # 0047E319
.L47E31F:
    cmp dword ptr [__113644C], 3                         # 0047E31F
    jne .L47E371                                         # 0047E326
    cmp word ptr [__1136448], 0                          # 0047E328
    jne .L47E371                                         # 0047E330
    cmp dword ptr [__1136450], 3                         # 0047E332
    ja .L47E406                                          # 0047E339
    cmp word ptr [__1136456], 0                          # 0047E33F
    jne .L47E406                                         # 0047E347
    cmp dword ptr [__1136450], 3                         # 0047E34D
    jb .L47E43B                                          # 0047E354
    mov ebp, dword ptr [__1136444]                       # 0047E35A
    cmp ebp, dword ptr [__113643C]                       # 0047E360
    jb .L47E406                                          # 0047E366
    msvc_jmp .L47E43B                                    # 0047E36C
.L47E371:
    cmp dword ptr [__1136450], 3                         # 0047E371
    jne .L47E388                                         # 0047E378
    cmp word ptr [__1136456], 0                          # 0047E37A
    je .L47E43B                                          # 0047E382
.L47E388:
    cmp dword ptr [__113644C], 2                         # 0047E388
    jg .L47E3C0                                          # 0047E38F
    cmp dword ptr [__1136450], 2                         # 0047E391
    jg .L47E406                                          # 0047E398
    mov bp, word ptr [__1136448]                         # 0047E39A
    cmp bp, word ptr [__1136456]                         # 0047E3A1
    jb .L47E406                                          # 0047E3A8
    ja .L47E43B                                          # 0047E3AA
    mov ebp, dword ptr [__1136444]                       # 0047E3B0
    cmp ebp, dword ptr [__113643C]                       # 0047E3B6
    jb .L47E406                                          # 0047E3BC
    jmp .L47E43B                                         # 0047E3BE
.L47E3C0:
    cmp dword ptr [__1136450], 2                         # 0047E3C0
    jle .L47E43B                                         # 0047E3C7
    cmp dword ptr [__113644C], 3                         # 0047E3C9
    ja .L47E3FD                                          # 0047E3D0
    cmp dword ptr [__1136450], 3                         # 0047E3D2
    ja .L47E406                                          # 0047E3D9
    mov bp, word ptr [__1136448]                         # 0047E3DB
    cmp bp, word ptr [__1136456]                         # 0047E3E2
    jb .L47E406                                          # 0047E3E9
    ja .L47E43B                                          # 0047E3EB
    mov ebp, dword ptr [__1136444]                       # 0047E3ED
    cmp ebp, dword ptr [__113643C]                       # 0047E3F3
    jb .L47E406                                          # 0047E3F9
    jmp .L47E43B                                         # 0047E3FB
.L47E3FD:
    cmp dword ptr [__1136450], 3                         # 0047E3FD
    je .L47E43B                                          # 0047E404
.L47E406:
    mov ebp, dword ptr [__113644C]                       # 0047E406
    mov dword ptr [__1136450], ebp                       # 0047E40C
    mov bp, word ptr [__1136448]                         # 0047E412
    mov word ptr [__1136456], bp                         # 0047E419
    mov ebp, dword ptr [__1136444]                       # 0047E420
    mov dword ptr [__113643C], ebp                       # 0047E426
    mov dword ptr [__1136440], esi                       # 0047E42C
    mov word ptr [__1136458], 1                          # 0047E432
.L47E43B:
    inc esi                                              # 0047E43B
    msvc_jmp .L47E1FF                                    # 0047E43C
.L47E441:
    mov ebp, dword ptr [__1136440]                       # 0047E441
    movzx ebx, word ptr [ebp*2 + __11360A0]              # 0047E447
    pop esi                                              # 0047E44F
    ret                                                  # 0047E450
.L47E451:
    movzx ebx, word ptr [esi*2 + __11360A0]              # 0047E451
    mov dword ptr [__1136450], 1                         # 0047E459
    mov word ptr [__1136456], 0                          # 0047E463
    mov dword ptr [__113643C], 0                         # 0047E46C
    mov word ptr [__1136458], 1                          # 0047E476
    pop esi                                              # 0047E47F
    ret                                                  # 0047E480

    .global _sub_47E481
_sub_47E481:
    cmp word ptr [__113642C], 5                          # 0047E481
    jae .L47E509                                         # 0047E489
    inc word ptr [__113642C]                             # 0047E48B
    push dword ptr [__1136430]                           # 0047E492
    sub esp, 0x30                                        # 0047E498
.L47E49B:
    msvc_mov edi, ebp                                    # 0047E49B
    shr edi, 3                                           # 0047E49D
    mov edi, dword ptr [edi*4 + __4F7310]                # 0047E4A0
    add dword ptr [__1136430], edi                       # 0047E4A7
    cmp dword ptr [__1136430], 0x500                     # 0047E4AD
    ja .L47E4F9                                          # 0047E4B7
    lea edi, [esp + 4]                                   # 0047E4B9
    call _sub_478CE9                                     # 0047E4BD
    mov bp, word ptr [esp + 4]                           # 0047E4C2
    and ebp, 0x807f                                      # 0047E4C7
    cmp dword ptr [esp], 1                               # 0047E4CD
    jb .L47E4F9                                          # 0047E4D1
    je .L47E49B                                          # 0047E4D3
    msvc_xor esi, esi                                    # 0047E4D5
.L47E4D7:
    cmp esi, dword ptr [esp]                             # 0047E4D7
    jae .L47E4F9                                         # 0047E4DA
    mov bp, word ptr [esp + esi*2 + 4]                   # 0047E4DC
    push eax                                             # 0047E4E1
    push ebx                                             # 0047E4E2
    push ecx                                             # 0047E4E3
    push edx                                             # 0047E4E4
    push esi                                             # 0047E4E5
    and ebp, 0x807f                                      # 0047E4E6
    call _sub_47E481                                     # 0047E4EC
    pop esi                                              # 0047E4F1
    pop edx                                              # 0047E4F2
    pop ecx                                              # 0047E4F3
    pop ebx                                              # 0047E4F4
    pop eax                                              # 0047E4F5
    inc esi                                              # 0047E4F6
    jmp .L47E4D7                                         # 0047E4F7
.L47E4F9:
    add esp, 0x30                                        # 0047E4F9
    pop dword ptr [__1136430]                            # 0047E4FC
    dec word ptr [__113642C]                             # 0047E502
.L47E509:
    ret                                                  # 0047E509

    .global _sub_47E50A
_sub_47E50A:
    cmp word ptr [__113642C], 5                          # 0047E50A
    jae .L47E72E                                         # 0047E512
    inc word ptr [__113642C]                             # 0047E518
    push dword ptr [__1136430]                           # 0047E51F
    sub esp, 0x30                                        # 0047E525
.L47E528:
    cmp word ptr [__113644A], -1                         # 0047E528
    je .L47E62B                                          # 0047E530
    mov di, word ptr [__1135FAE]                         # 0047E536
    cmp di, word ptr [__113644A]                         # 0047E53D
    jne .L47E582                                         # 0047E544
    movzx esi, byte ptr [__1136087]                      # 0047E546
    bt dword ptr [__112C30C], esi                        # 0047E54D
    jae .L47E582                                         # 0047E554
    push edx                                             # 0047E556
    push ebp                                             # 0047E557
    movzx ebp, bp                                        # 0047E558
    shr dx, 2                                            # 0047E55B
    call _sub_47D5D6                                     # 0047E55F
    test dh, 8                                           # 0047E564
    je .L47E580                                          # 0047E567
    test dh, 1                                           # 0047E569
    je .L47E57C                                          # 0047E56C
    xor bp, 4                                            # 0047E56E
    call _sub_47D5D6                                     # 0047E572
    test dh, 1                                           # 0047E577
    jne .L47E580                                         # 0047E57A
.L47E57C:
    pop ebp                                              # 0047E57C
    pop edx                                              # 0047E57D
    jmp .L47E5E8                                         # 0047E57E
.L47E580:
    pop ebp                                              # 0047E580
    pop edx                                              # 0047E581
.L47E582:
    mov si, word ptr [__113645A]                         # 0047E582
    mov di, word ptr [__113645C]                         # 0047E589
    msvc_sub si, ax                                      # 0047E590
    jns .L47E598                                         # 0047E593
    neg si                                               # 0047E595
.L47E598:
    msvc_sub di, cx                                      # 0047E598
    jns .L47E5A0                                         # 0047E59B
    neg di                                               # 0047E59D
.L47E5A0:
    msvc_add si, di                                      # 0047E5A0
    mov di, word ptr [__113645E]                         # 0047E5A3
    msvc_sub di, dx                                      # 0047E5AA
    jns .L47E5B2                                         # 0047E5AD
    neg di                                               # 0047E5AF
.L47E5B2:
    msvc_add si, di                                      # 0047E5B2
    mov edi, dword ptr [__1136430]                       # 0047E5B5
    cmp si, word ptr [__1136448]                         # 0047E5BB
    ja .L47E696                                          # 0047E5C2
    jb .L47E5D6                                          # 0047E5C8
    cmp edi, dword ptr [__1136444]                       # 0047E5CA
    ja .L47E696                                          # 0047E5D0
.L47E5D6:
    mov word ptr [__1136448], si                         # 0047E5D6
    mov dword ptr [__1136444], edi                       # 0047E5DD
    msvc_jmp .L47E696                                    # 0047E5E3
.L47E5E8:
    mov edi, dword ptr [__1136430]                       # 0047E5E8
    cmp word ptr [__1136448], 0                          # 0047E5EE
    jne .L47E604                                         # 0047E5F6
    cmp edi, dword ptr [__1136444]                       # 0047E5F8
    ja .L47E696                                          # 0047E5FE
.L47E604:
    mov word ptr [__1136448], 0                          # 0047E604
    mov dword ptr [__1136444], edi                       # 0047E60D
    cmp dword ptr [__113644C], -1                        # 0047E613
    jne .L47E626                                         # 0047E61A
    mov dword ptr [__113644C], 1                         # 0047E61C
.L47E626:
    msvc_jmp .L47E71E                                    # 0047E626
.L47E62B:
    cmp ax, word ptr [__113645A]                         # 0047E62B
    jne .L47E656                                         # 0047E632
    cmp cx, word ptr [__113645C]                         # 0047E634
    jne .L47E656                                         # 0047E63B
    cmp dx, word ptr [__113645E]                         # 0047E63D
    jne .L47E656                                         # 0047E644
    msvc_mov di, bp                                      # 0047E646
    and di, 0x7f                                         # 0047E649
    cmp di, word ptr [__1136460]                         # 0047E64D
    je .L47E5E8                                          # 0047E654
.L47E656:
    cmp ax, word ptr [__1136462]                         # 0047E656
    jne .L47E582                                         # 0047E65D
    cmp cx, word ptr [__1136464]                         # 0047E663
    jne .L47E582                                         # 0047E66A
    cmp dx, word ptr [__1136466]                         # 0047E670
    jne .L47E582                                         # 0047E677
    msvc_mov di, bp                                      # 0047E67D
    and di, 0x7f                                         # 0047E680
    cmp di, word ptr [__1136468]                         # 0047E684
    je .L47E5E8                                          # 0047E68B
    msvc_jmp .L47E582                                    # 0047E691
.L47E696:
    msvc_mov edi, ebp                                    # 0047E696
    shr edi, 3                                           # 0047E698
    mov edi, dword ptr [edi*4 + __4F7310]                # 0047E69B
    add dword ptr [__1136430], edi                       # 0047E6A2
    cmp dword ptr [__1136430], 0x500                     # 0047E6A8
    ja .L47E71E                                          # 0047E6B2
    lea edi, [esp + 4]                                   # 0047E6B4
    call _sub_478CE9                                     # 0047E6B8
    mov bp, word ptr [esp + 4]                           # 0047E6BD
    and ebp, 0x807f                                      # 0047E6C2
    cmp dword ptr [esp], 1                               # 0047E6C8
    jb .L47E71E                                          # 0047E6CC
    je .L47E528                                          # 0047E6CE
    msvc_xor esi, esi                                    # 0047E6D4
.L47E6D6:
    cmp esi, dword ptr [esp]                             # 0047E6D6
    jae .L47E715                                         # 0047E6D9
    mov bp, word ptr [esp + esi*2 + 4]                   # 0047E6DB
    push eax                                             # 0047E6E0
    push ebx                                             # 0047E6E1
    push ecx                                             # 0047E6E2
    push edx                                             # 0047E6E3
    push esi                                             # 0047E6E4
    and ebp, 0x807f                                      # 0047E6E5
    push dword ptr [__113644C]                           # 0047E6EB
    mov word ptr [__1135FAE], 0xffff                     # 0047E6F1
    call _sub_47E50A                                     # 0047E6FA
    pop eax                                              # 0047E6FF
    cmp eax, dword ptr [__113644C]                       # 0047E700
    jae .L47E70D                                         # 0047E706
    mov dword ptr [__113644C], eax                       # 0047E708
.L47E70D:
    pop esi                                              # 0047E70D
    pop edx                                              # 0047E70E
    pop ecx                                              # 0047E70F
    pop ebx                                              # 0047E710
    pop eax                                              # 0047E711
    inc esi                                              # 0047E712
    jmp .L47E6D6                                         # 0047E713
.L47E715:
    mov word ptr [__1135FAE], 0xffff                     # 0047E715
.L47E71E:
    add esp, 0x30                                        # 0047E71E
    pop dword ptr [__1136430]                            # 0047E721
    dec word ptr [__113642C]                             # 0047E727
.L47E72E:
    ret                                                  # 0047E72E

    .global _sub_47E72F
_sub_47E72F:
    cmp word ptr [__113642C], 5                          # 0047E72F
    jae .L47E7DB                                         # 0047E737
    inc word ptr [__113642C]                             # 0047E73D
    push dword ptr [__1136430]                           # 0047E744
    sub esp, 0x30                                        # 0047E74A
.L47E74D:
    msvc_mov edi, ebp                                    # 0047E74D
    shr edi, 3                                           # 0047E74F
    mov edi, dword ptr [edi*4 + __4F89CC]                # 0047E752
    add dword ptr [__1136430], edi                       # 0047E759
    cmp dword ptr [__1136430], 0x500                     # 0047E75F
    ja .L47E7CB                                          # 0047E769
    mov edi, dword ptr [__1136430]                       # 0047E76B
    cmp edi, dword ptr [__1136434]                       # 0047E771
    jbe .L47E77F                                         # 0047E777
    mov dword ptr [__1136434], edi                       # 0047E779
.L47E77F:
    lea edi, [esp + 4]                                   # 0047E77F
    call _sub_478895                                     # 0047E783
    mov bp, word ptr [esp + 4]                           # 0047E788
    and ebp, 0x807f                                      # 0047E78D
    cmp dword ptr [esp], 1                               # 0047E793
    jb .L47E7CB                                          # 0047E797
    je .L47E74D                                          # 0047E799
    msvc_xor esi, esi                                    # 0047E79B
.L47E79D:
    cmp esi, dword ptr [esp]                             # 0047E79D
    jae .L47E7C2                                         # 0047E7A0
    mov bp, word ptr [esp + esi*2 + 4]                   # 0047E7A2
    push eax                                             # 0047E7A7
    push ebx                                             # 0047E7A8
    push ecx                                             # 0047E7A9
    push edx                                             # 0047E7AA
    push esi                                             # 0047E7AB
    and ebp, 0x807f                                      # 0047E7AC
    call _sub_47E72F                                     # 0047E7B2
    pop esi                                              # 0047E7B7
    pop edx                                              # 0047E7B8
    pop ecx                                              # 0047E7B9
    pop ebx                                              # 0047E7BA
    pop eax                                              # 0047E7BB
    inc esi                                              # 0047E7BC
    jmp .L47E79D                                         # 0047E7BD
.L47E7BF:
    pop eax                                              # 0047E7BF
    jmp .L47E7CB                                         # 0047E7C0
.L47E7C2:
    mov word ptr [__1135FAE], 0xffff                     # 0047E7C2
.L47E7CB:
    add esp, 0x30                                        # 0047E7CB
    pop dword ptr [__1136430]                            # 0047E7CE
    dec word ptr [__113642C]                             # 0047E7D4
.L47E7DB:
    ret                                                  # 0047E7DB
